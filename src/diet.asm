;; Autogenerated with the following command:
;;    python3 './tools/rom_unpack.py' 'baserom/sonic1.sms' 'annot/sonic1.cfg' 'src/whole.asm'
;; Do NOT hand-edit!
;; ^ HAND-EDITED TO TEST PI COMPLIANCE - Compare src/whole.asm with src/prediet.asm to make patches against this!
;;
;; This seems to do the trick:
;; diff -Naur src/prediet.asm src/whole.asm | sed -e 's@+++ src/whole.asm@+++ src/diet.asm@' | patch -p0

;; CHEATS:
;; u8: Level Select:
;; - $00 through $11 are normal levels.
;; - $12 is the ending cutscene.
;; Anything after this requires a hack to prevent returning straight to the title screen... which we have!
;; - $13 is the final score total screen, which expects the numbers to be loaded into VRAM beforehand.
;; - $14 through $19 are various SCR2 sublevels.
;; Anything after this will get you stuck on the same level repeatedly.
;; - $1A and $1B are the SKY2 exit sublevel, not sure what the difference between the two is right now.
;; - $1C through $23 are bonus levels.
;; - $24 through $25 shows the ending screen island, then a Special Stage tally for some reason, then straight to the credits!
;; - $26 upwards until some point seems to hang without loading stuff properly.
;; - $7F causes a reset.
;; - $80 upwards behaves a bit like $00 upwards but things are weird and you have weird starting times and the clock goes in the middle of the screen... and you're stuck on the same level repeatedly.
;; - Go explore if you want to find out what the out-of-range values do.
.DEF cht_starting_level $00

;; bool: No Death On Hit
.DEF cht_no_death_on_hit 0

;; bool: No Speed Cap: Go as fast as you like!
.DEF cht_no_speed_cap 0
;; bool: Inverse Speed Cap: Like No Speed Cap but you start at the speed cap.
;; NOT COMPATIBLE WITH cht_no_speed_cap.
.DEF cht_inverse_speed_cap 0

;; bool: Force Good Ending: Forces the good ending cutscene.
;; If you want the bonus, you have to actually get all 6 Chaos Emeralds.
;; This is mostly for testing purposes.
.DEF cht_force_good_ending 0

;; Branding! WARNING: Heavy (consumes about 410 bytes or something) - make sure to rip this out when making your own mods!
.DEF show_diet_logo 1

;; Halve the uncompressed Sonic art by flipping Sonic's art on the fly.
;; WARNING: This introduces graphical glitches!
;; (for example, the highlight on Sonic rolled up into a ball changes, which is unrealistic)
.DEF shrink_sonicuncart_interleave 1

.MEMORYMAP
SLOT 0 START $0000 SIZE $4000
SLOT 1 START $4000 SIZE $4000
SLOT 2 START $8000 SIZE $4000
SLOT 3 START $C000 SIZE $4000
DEFAULTSLOT 2
DEFAULTRAMSECTIONSLOT 3
.ENDME

.ROMBANKMAP
BANKSTOTAL 16
BANKSIZE $4000
BANKS 16
.ENDRO

.DEF IYBASE $D200

.RAMSECTION "RAMSection" SLOT 3 FORCE ORGA $C000
var_C000 db   ; C000 (auto)
var_C001 db   ; C001 (auto)
.  dsb 4094
var_D000 db   ; D000 (auto)
var_D001 db   ; D001 (auto)
.  dsb 34
var_D024 db   ; D024 (auto)
.  dsb 23
var_D03C db   ; D03C (auto)
.  dsb 2
var_D03F db   ; D03F (auto)
.  dsb 192
var_D100 db   ; D100 (auto)
.  dsb 127
var_D180 db   ; D180 (auto)
.  dsb 127
var_D200 db   ; D200 (auto)
g_last_rle_byte db   ; D201
var_D202 db   ; D202 (auto)
g_inputs_player_1 db   ; D203
.  dsb 1
var_D205 db   ; D205 (auto)
var_D206 db   ; D206 (auto)
var_D207 db   ; D207 (auto)
var_D208 db   ; D208 (auto)
var_D209 db   ; D209 (auto)
g_sprite_count db   ; D20A
var_D20B db   ; D20B (auto)
var_D20C db   ; D20C (auto)
var_D20D db   ; D20D (auto)
g_FF_string_high_byte db   ; D20E
var_D20F db   ; D20F
var_D210 dw   ; D210
var_D212 db   ; D212
var_D213 db   ; D213
var_D214 db   ; D214
var_D215 db   ; D215
var_D216 db   ; D216
.  dsb 1
g_saved_vdp_reg_00 db   ; D218
g_saved_vdp_reg_01 db   ; D219
.  dsb 9
var_D223 db   ; D223
.  dsb 1
var_D225 dw   ; D225
var_D227 dw   ; D227
var_D229 dw   ; D229
g_SIG00b3_palette_addr dw   ; D22B
.  dsb 2
g_SIG00b3_palettes_present db   ; D22F
var_D230 dw   ; D230
var_D232 dw   ; D232
.  dsb 1
g_committed_rompage_1 db   ; D235
g_committed_rompage_2 db   ; D236
.  dsb 1
var_D238 db   ; D238
.  dsb 1
var_D23A dw   ; D23A
var_D23C dw   ; D23C
g_level db   ; D23E
g_next_bonus_level db   ; D23F
var_D240 dw   ; D240
var_D242 dw   ; D242
var_D244 dw   ; D244
g_lives db   ; D246
g_water_irq_line_state db   ; D247
g_water_onscreen_y db   ; D248
.  dsb 6
var_D24F dw   ; D24F
g_vdp_scroll_x db   ; D251
g_vdp_scroll_y db   ; D252
.  dsb 4
var_D257 db   ; D257
var_D258 db   ; D258
.  dsb 1
var_D25A dw   ; D25A
var_D25C db   ; D25C (split)
var_D25D db   ; D25D
var_D25E db   ; D25E
var_D25F dw   ; D25F
var_D261 dw   ; D261
var_D263 dw   ; D263
var_D265 dw   ; D265
var_D267 dw   ; D267
var_D269 dw   ; D269
var_D26B dw   ; D26B
var_D26D dw   ; D26D
var_D26F dw   ; D26F
var_D271 dw   ; D271
var_D273 dw   ; D273
var_D275 dw   ; D275
var_D277 dw   ; D277
var_D279 dw   ; D279
var_D27B dw   ; D27B
var_D27D dw   ; D27D
var_D27F db   ; D27F
g_level_lives_collected db   ; D280
var_D281 db   ; D281
var_D282 db   ; D282
var_D283 db   ; D283
var_D284 db   ; D284
var_D285 db   ; D285
var_D286 db   ; D286
var_D287 db   ; D287
g_current_signpost db   ; D288
g_signpost_tickdown_counter db   ; D289
var_D28A db   ; D28A
var_D28B db   ; D28B
var_D28C db   ; D28C
var_D28D db   ; D28D
var_D28E db   ; D28E
var_D28F dw   ; D28F
var_D291 dw   ; D291
var_D293 dw   ; D293
var_D295 dw   ; D295
var_D297 db   ; D297
var_D298 db   ; D298 (auto)
var_D299 dw   ; D299
var_D29B dw   ; D29B
var_D29D dw   ; D29D
var_D29F dw   ; D29F
var_D2A1 db   ; D2A1
var_D2A2 db   ; D2A2
var_D2A3 db   ; D2A3
g_palette_cycle_tick_remain db   ; D2A4
g_palette_cycle_tick_period db   ; D2A5
g_palette_cycle_index db   ; D2A6
g_palette_cycle_length db   ; D2A7
g_palette_cycle_baseptr dw   ; D2A8
g_rings_BCD db   ; D2AA
var_D2AB db   ; D2AB
var_D2AC db   ; D2AC
var_D2AD dw   ; D2AD
var_D2AF dw   ; D2AF
var_D2B1 db   ; D2B1
var_D2B2 db   ; D2B2
var_D2B3 db   ; D2B3
g_prev_sprite_count db   ; D2B4
g_demo_next_input_relptr dw   ; D2B5
var_D2B7 dw   ; D2B7
var_D2B9 db   ; D2B9
var_D2BA db   ; D2BA (auto)
.  dsb 2
var_D2BD db   ; D2BD (auto)
g_HUD_FFstr_buf db   ; D2BE
var_D2BF db   ; D2BF
var_D2C0 db   ; D2C0
var_D2C1 db   ; D2C1
.  dsb 1
var_D2C3 db   ; D2C3 (auto)
.  dsb 10
g_time_mins db   ; D2CE
g_time_secs_BCD db   ; D2CF
g_time_subsecs db   ; D2D0
.  dsb 1
var_D2D2 db   ; D2D2
var_D2D3 db   ; D2D3
var_D2D4 db   ; D2D4
var_D2D5 dw   ; D2D5
g_random_seed dw   ; D2D7
var_D2D9 dw   ; D2D9
var_D2DB db   ; D2DB
var_D2DC dw   ; D2DC
var_D2DE db   ; D2DE
var_D2DF db   ; D2DF
var_D2E0 db   ; D2E0
var_D2E1 db   ; D2E1
var_D2E2 dw   ; D2E2
var_D2E4 dw   ; D2E4
var_D2E6 dw   ; D2E6
var_D2E8 db   ; D2E8
var_D2E9 dw   ; D2E9
.  dsb 1
var_D2EC db   ; D2EC
var_D2ED db   ; D2ED (auto)
var_D2EE db   ; D2EE
.  dsb 3
g_object_count db   ; D2F2
var_D2F3 db   ; D2F3 (auto)
.  dsb 3
var_D2F7 db   ; D2F7 (auto)
.  dsb 3
var_D2FB db   ; D2FB
var_D2FC db   ; D2FC
var_D2FD db   ; D2FD
var_D2FE db   ; D2FE (auto)
var_D2FF db   ; D2FF
.  dsb 2
var_D302 db   ; D302
.  dsb 2
g_level_lives_collected_mask db   ; D305
.  dsb 5
var_D30B db   ; D30B (auto)
.  dsb 5
g_level_has_checkpoint_mask db   ; D311
.  dsb 5
var_D317 db   ; D317 (auto)
.  dsb 5
var_D31D dw   ; D31D
var_D31F dw   ; D31F
var_D321 db   ; D321
var_D322 db   ; D322 (auto)
.  dsb 11
var_D32E db   ; D32E (auto)
.  dsb 37
var_D354 db   ; D354 (auto)
.  dsb 39
g_object_ptrs dw   ; D37C
g_active_object_ptrs dw   ; D37E
.  dsb 60
var_D3BC db   ; D3BC (auto)
.  dsb 63
object_list db   ; D3FC
sonic_x_sub db   ; D3FD
sonic_x db   ; D3FE
var_D3FF db   ; D3FF
sonic_y_sub db   ; D400
sonic_y dw   ; D401
sonic_vel_x_sub db   ; D403
sonic_vel_x db   ; D404
sonic_vel_x_hi db   ; D405
sonic_vel_y_sub db   ; D406
sonic_vel_y db   ; D407
sonic_vel_y_hi db   ; D408
var_D409 db   ; D409
var_D40A db   ; D40A
var_D40B dw   ; D40B
var_D40D dw   ; D40D
var_D40F db   ; D40F
var_D410 db   ; D410
var_D411 db   ; D411
var_D412 db   ; D412
.  dsb 1
var_D414 db   ; D414
.  dsb 1
object_list_past_sonic db   ; D416
.  dsb 2029
var_DC04 db   ; DC04
var_DC05 db   ; DC05
var_DC06 db   ; DC06
var_DC07 db   ; DC07
var_DC08 db   ; DC08
var_DC09 db   ; DC09
var_DC0A db   ; DC0A
var_DC0B db   ; DC0B
var_DC0C db   ; DC0C
var_DC0D db   ; DC0D
var_DC0E dw   ; DC0E
var_DC10 dw   ; DC10
var_DC12 dw   ; DC12
var_DC14 dw   ; DC14
var_DC16 dw   ; DC16
var_DC18 dw   ; DC18
var_DC1A dw   ; DC1A
var_DC1C dw   ; DC1C
var_DC1E dw   ; DC1E
var_DC20 dw   ; DC20
var_DC22 dw   ; DC22
var_DC24 dw   ; DC24
var_DC26 db   ; DC26 (auto)
.  dsb 4
var_DC2B db   ; DC2B
.  dsb 34
var_DC4E db   ; DC4E
var_DC4F dw   ; DC4F
.  dsb 1
var_DC52 db   ; DC52
var_DC53 db   ; DC53 (auto)
.  dsb 4
var_DC58 db   ; DC58
.  dsb 34
var_DC7B db   ; DC7B
var_DC7C dw   ; DC7C
.  dsb 1
var_DC7F db   ; DC7F
var_DC80 db   ; DC80 (auto)
.  dsb 4
var_DC85 db   ; DC85
.  dsb 34
var_DCA8 db   ; DCA8
var_DCA9 dw   ; DCA9
.  dsb 1
var_DCAC db   ; DCAC
var_DCAD db   ; DCAD (auto)
.  dsb 4
var_DCB2 db   ; DCB2
.  dsb 34
var_DCD5 db   ; DCD5
var_DCD6 dw   ; DCD6
.  dsb 1
var_DCD9 db   ; DCD9
var_DCDA db   ; DCDA
var_DCDB db   ; DCDB
var_DCDC dw   ; DCDC
.  dsb 4
var_DCE2 dw   ; DCE2
.  dsb 13
var_DCF1 dw   ; DCF1
.  dsb 3
var_DCF6 dw   ; DCF6
.  dsb 2
var_DCFA dw   ; DCFA
var_DCFC dw   ; DCFC
.  dsb 2
var_DD00 dw   ; DD00
var_DD02 db   ; DD02
var_DD03 dw   ; DD03
var_DD05 db   ; DD05
.  dsb 5
var_DD0B db   ; DD0B (auto)
.ENDS

.DEF rompage_cfg $FFFC
.DEF rompage_0 $FFFD
.DEF rompage_1 $FFFE
.DEF rompage_2 $FFFF

.SECTION "Bank00_RESET" SLOT 0 BANK $00 FORCE ORG $0000
ENTRY_RESET:
   di                                  ; 00:0000 - F3
   im     1                            ; 00:0001 - ED 56

_reset_wait_for_vblank:
   in     a, ($7E)                     ; 00:0003 - DB 7E
   cp     $B0                          ; 00:0005 - FE B0
   jr     nz, _reset_wait_for_vblank   ; 00:0007 - 20 FA
   jp     reset_init                   ; 00:0009 - C3 8B 02
.ENDS

.SECTION "Bank00_RST_18" SLOT 0 BANK $00 FORCE ORG $0018
ENTRY_RST_18:
   jp     di_call_s1_b03_4012_a_DI     ; 00:0018 - C3 D7 02
.ENDS

.SECTION "Bank00_RST_20" SLOT 0 BANK $00 FORCE ORG $0020
ENTRY_RST_20:
   jp     di_call_s1_b03_4006_DI       ; 00:0020 - C3 ED 02
.ENDS

.SECTION "Bank00_RST_28" SLOT 0 BANK $00 FORCE ORG $0028
ENTRY_RST_28:
   jp     play_sound_effect_a_DI       ; 00:0028 - C3 FE 02
.ENDS

.SECTION "Bank00_IRQ" SLOT 0 BANK $00 FORCE ORG $0038
ENTRY_IRQ:
   jp     irq_start                    ; 00:0038 - C3 73 00
;; Keeping S.Hayashi's credit here as-is. Go find another code cave - they *do* exist!
;; Bank $05 gives you a bit over a KB and you can set up a bankswitch+jump after the RST $28 handler.
;; Or just do what I do and shorten some code to give yourself some space.
;; (But I *also* do the first suggestion.) --GM
.db "Developed By (C) 1991 Ancient - S.Hayashi"
.ENDS

.SECTION "Bank00_NMI" SLOT 0 BANK $00 FORCE ORG $0066
ENTRY_NMI:
   ;; BUGFIX: The non-maskable interrupt copies IFF1 to IFF2 then clears IFF1.
   ;; IFF1 is the interrupt enable flag.
   ;; Use RETN to return from an NMI!
   ;di                                  ; 00:0066 - F3
   push   af                           ; 00:0067 - F5
   ld     a, (iy+var_D207-IYBASE)      ; 00:0068 - FD 7E 07
   xor    $08                          ; 00:006B - EE 08
   ld     (iy+var_D207-IYBASE), a      ; 00:006D - FD 77 07
   pop    af                           ; 00:0070 - F1
   ;ei                                  ; 00:0071 - FB
   ;ret                                 ; 00:0072 - C9
   retn
   ;; 3-2... SAVING: 1 byte
.ENDS

.SECTION "Bank00_unsorted_00" SLOT 0 BANK $00 FREE
irq_start:
   ;; BUGFIX: Interrupts are disabled on entry to the interrupt handler.
   ;; They must be force-enabled on return.
   ;di                                  ; 00:0073 - F3
   ; SAVING: 1 byte
   push   af                           ; 00:0074 - F5
   push   hl                           ; 00:0075 - E5
   push   de                           ; 00:0076 - D5
   push   bc                           ; 00:0077 - C5
   in     a, ($BF)                     ; 00:0078 - DB BF
   bit    7, (iy+var_D206-IYBASE)      ; 00:007A - FD CB 06 7E
   jr     z, +                         ; 00:007E - 28 2C
   ld     a, (g_water_irq_line_state)  ; 00:0080 - 3A 47 D2
   and    a                            ; 00:0083 - A7
   jp     nz, irq_line_state_chk_nonzero  ; 00:0084 - C2 F2 01
   ld     a, (var_D2DB)                ; 00:0087 - 3A DB D2
   and    a                            ; 00:008A - A7
   jr     z, +                         ; 00:008B - 28 1F
   cp     $FF                          ; 00:008D - FE FF
   jr     z, +                         ; 00:008F - 28 1B
   ld     (g_water_onscreen_y), a      ; 00:0091 - 32 48 D2
   ld     a, $0A                       ; 00:0094 - 3E 0A
   out    ($BF), a                     ; 00:0096 - D3 BF
   ld     a, $8A                       ; 00:0098 - 3E 8A
   out    ($BF), a                     ; 00:009A - D3 BF
   ld     a, (g_saved_vdp_reg_00)      ; 00:009C - 3A 18 D2
   or     $10                          ; 00:009F - F6 10
   out    ($BF), a                     ; 00:00A1 - D3 BF
   ld     a, $80                       ; 00:00A3 - 3E 80
   out    ($BF), a                     ; 00:00A5 - D3 BF
   ld     a, $03                       ; 00:00A7 - 3E 03
   ld     (g_water_irq_line_state), a  ; 00:00A9 - 32 47 D2

+:
   push   ix                           ; 00:00AC - DD E5
   push   iy                           ; 00:00AE - FD E5
   ld     hl, (g_committed_rompage_1)  ; 00:00B0 - 2A 35 D2
   push   hl                           ; 00:00B3 - E5
   bit    0, (iy+var_D200-IYBASE)      ; 00:00B4 - FD CB 00 46
   call   nz, addr_001A0               ; 00:00B8 - C4 A0 01
   bit    0, (iy+var_D200-IYBASE)      ; 00:00BB - FD CB 00 46
   call   z, addr_000F7                ; 00:00BF - CC F7 00
   ei                                  ; 00:00C2 - FB
   ld     a, $03                       ; 00:00C3 - 3E 03
   .IF 0
   ;; BUGFIX: PAGERACE: Race condition, defeatable with a well-timed interrupt. Swapped ops around to fix.
   ld     (g_committed_rompage_1), a   ; 00:00C8 - 32 35 D2
   ld     (rompage_1), a               ; 00:00C5 - 32 FE FF
   .ELSE
   call set_slot_1
   .ENDIF
   call   snddrv_update                ; 00:00CB - CD 00 40
   call   poll_player_1_inputs         ; 00:00CE - CD A7 05
   bit    4, (iy+g_inputs_player_1-IYBASE)  ; 00:00D1 - FD CB 03 66
   call   z, addr_000F2                ; 00:00D5 - CC F2 00
   .IF 0
   .ELSE
   ;; Mega Drive controller pad hack.
   bit    6, (iy+g_inputs_player_1-IYBASE)
   call   z, addr_000F2
   .ENDIF
   call   random_A                     ; 00:00D8 - CD 25 06
   in     a, ($DD)                     ; 00:00DB - DB DD
   and    $10                          ; 00:00DD - E6 10
   jp     z, ENTRY_RESET               ; 00:00DF - CA 00 00
   pop    hl                           ; 00:00E2 - E1
   ;; BUGFIX: PAGERACE: Race condition, defeatable with a well-timed interrupt. Swapped ops around to fix.
   ld     (g_committed_rompage_1), hl  ; 00:00E6 - 22 35 D2
   ld     (rompage_1), hl              ; 00:00E3 - 22 FE FF
   pop    iy                           ; 00:00E9 - FD E1
   pop    ix                           ; 00:00EB - DD E1
   pop    bc                           ; 00:00ED - C1
   pop    de                           ; 00:00EE - D1
   pop    hl                           ; 00:00EF - E1
   pop    af                           ; 00:00F0 - F1
   ;; WARNING: Interrupt disabled on interrupt return!
   ret                                 ; 00:00F1 - C9

addr_000F2:
   res    5, (iy+g_inputs_player_1-IYBASE)  ; 00:00F2 - FD CB 03 AE
   ;; WARNING: Interrupt disabled on interrupt return!
   ret                                 ; 00:00F6 - C9

addr_000F7:
   ld     a, (g_saved_vdp_reg_01)      ; 00:00F7 - 3A 19 D2
   and    $BF                          ; 00:00FA - E6 BF
   out    ($BF), a                     ; 00:00FC - D3 BF
   ld     a, $81                       ; 00:00FE - 3E 81
   out    ($BF), a                     ; 00:0100 - D3 BF
   ld     a, (g_vdp_scroll_x)          ; 00:0102 - 3A 51 D2
   neg                                 ; 00:0105 - ED 44
   out    ($BF), a                     ; 00:0107 - D3 BF
   ld     a, $88                       ; 00:0109 - 3E 88
   out    ($BF), a                     ; 00:010B - D3 BF
   ld     a, (g_vdp_scroll_y)          ; 00:010D - 3A 52 D2
   out    ($BF), a                     ; 00:0110 - D3 BF
   ld     a, $89                       ; 00:0112 - 3E 89
   out    ($BF), a                     ; 00:0114 - D3 BF
   bit    5, (iy+var_D200-IYBASE)      ; 00:0116 - FD CB 00 6E
   call   nz, addr_007DB               ; 00:011A - C4 DB 07
   bit    5, (iy+var_D200-IYBASE)      ; 00:011D - FD CB 00 6E
   call   nz, addr_00174               ; 00:0121 - C4 74 01
   ld     a, (g_saved_vdp_reg_01)      ; 00:0124 - 3A 19 D2
   out    ($BF), a                     ; 00:0127 - D3 BF
   ld     a, $81                       ; 00:0129 - 3E 81
   out    ($BF), a                     ; 00:012B - D3 BF
   ld     a, $08                       ; 00:012D - 3E 08
   .IF 0
   ;; BUGFIX: PAGERACE: Race condition, defeatable with a well-timed interrupt. Swapped ops around to fix.
   ld     (g_committed_rompage_1), a   ; 00:0132 - 32 35 D2
   ld     (rompage_1), a               ; 00:012F - 32 FE FF
   ld     a, $09                       ; 00:0135 - 3E 09
   ;; BUGFIX: PAGERACE: Race condition, defeatable with a well-timed interrupt. Swapped ops around to fix.
   ld     (g_committed_rompage_2), a   ; 00:013A - 32 36 D2
   ld     (rompage_2), a               ; 00:0137 - 32 FF FF
   .ELSE
   call set_slot_1_2
   .ENDIF
   bit    7, (iy+var_D207-IYBASE)      ; 00:013D - FD CB 07 7E
   call   nz, addr_037E0               ; 00:0141 - C4 E0 37
   ld     a, $01                       ; 00:0144 - 3E 01
   .IF 0
   ;; BUGFIX: PAGERACE: Race condition, defeatable with a well-timed interrupt. Swapped ops around to fix.
   ld     (g_committed_rompage_1), a   ; 00:0149 - 32 35 D2
   ld     (rompage_1), a               ; 00:0146 - 32 FE FF
   ld     a, $02                       ; 00:014C - 3E 02
   ;; BUGFIX: PAGERACE: Race condition, defeatable with a well-timed interrupt. Swapped ops around to fix.
   ld     (g_committed_rompage_2), a   ; 00:0151 - 32 36 D2
   ld     (rompage_2), a               ; 00:014E - 32 FF FF
   .ELSE
   call set_slot_1_2
   .ENDIF
   bit    1, (iy+var_D200-IYBASE)      ; 00:0154 - FD CB 00 4E
   call   nz, upload_sprite_table_IRQ  ; 00:0158 - C4 3E 03
   bit    5, (iy+var_D200-IYBASE)      ; 00:015B - FD CB 00 6E
   call   z, addr_00174                ; 00:015F - CC 74 01
   ld     a, (var_D2AC)                ; 00:0162 - 3A AC D2
   and    $80                          ; 00:0165 - E6 80
   call   z, addr_038B0                ; 00:0167 - CC B0 38
   ld     a, $FF                       ; 00:016A - 3E FF
   ld     (var_D2AC), a                ; 00:016C - 32 AC D2
   set    0, (iy+var_D200-IYBASE)      ; 00:016F - FD CB 00 C6
   ret                                 ; 00:0173 - C9

addr_00174:
   ld     a, $01                       ; 00:0174 - 3E 01
   ;; BUGFIX: PAGERACE: Race condition, defeatable with a well-timed interrupt. Swapped ops around to fix.
   ld     (g_committed_rompage_1), a   ; 00:0179 - 32 35 D2
   ld     (rompage_1), a               ; 00:0176 - 32 FE FF
   .IF 0
   ld     a, $02                       ; 00:017C - 3E 02
   .ELSE
   inc a
   ; SAVING: 1 byte
   .ENDIF
   ld     (g_committed_rompage_2), a   ; 00:0181 - 32 36 D2
   ld     (rompage_2), a               ; 00:017E - 32 FF FF
   bit    7, (iy+var_D206-IYBASE)      ; 00:0184 - FD CB 06 7E
   jr     nz, addr_0019C               ; 00:0188 - 20 12
   ld     hl, (g_SIG00b3_palette_addr)  ; 00:018A - 2A 2B D2
   ld     a, (g_SIG00b3_palettes_present)  ; 00:018D - 3A 2F D2
   bit    3, (iy+var_D200-IYBASE)      ; 00:0190 - FD CB 00 5E
   call   nz, load_palettes_IRQ        ; 00:0194 - C4 66 05
   res    3, (iy+var_D200-IYBASE)      ; 00:0197 - FD CB 00 9E
   ret                                 ; 00:019B - C9

addr_0019C:
   call   addr_001BA                   ; 00:019C - CD BA 01
   ret                                 ; 00:019F - C9

addr_001A0:
   bit    7, (iy+var_D206-IYBASE)      ; 00:01A0 - FD CB 06 7E
   ret    z                            ; 00:01A4 - C8
   ld     a, $01                       ; 00:01A5 - 3E 01
   .IF 0
   ;; BUGFIX: PAGERACE: Race condition, defeatable with a well-timed interrupt. Swapped ops around to fix.
   ld     (g_committed_rompage_1), a   ; 00:01AA - 32 35 D2
   ld     (rompage_1), a               ; 00:01A7 - 32 FE FF
   ld     a, $02                       ; 00:01AD - 3E 02
   ;; BUGFIX: PAGERACE: Race condition, defeatable with a well-timed interrupt. Swapped ops around to fix.
   ld     (g_committed_rompage_2), a   ; 00:01B2 - 32 36 D2
   ld     (rompage_2), a               ; 00:01AF - 32 FF FF
   .ELSE
   call set_slot_1_2
   .ENDIF
   .IF 0
   ld     b, $00                       ; 00:01B5 - 06 00

-:
   nop                                 ; 00:01B7 - 00
   djnz   -                            ; 00:01B8 - 10 FD
   .ELSE
   ;; TODO: Why do we have this delay? I'm about to find out the hard way. --GM
   ; SAVING: 5 bytes
   .ENDIF

addr_001BA:
   ld     a, (var_D2DB)                ; 00:01BA - 3A DB D2
   and    a                            ; 00:01BD - A7
   jr     z, addr_001D6                ; 00:01BE - 28 16
   cp     $FF                          ; 00:01C0 - FE FF
   jr     nz, addr_001D6               ; 00:01C2 - 20 12
   ld     hl, PAL2_lv_lab_under_water  ; 00:01C4 - 21 4B 02
   bit    4, (iy+var_D207-IYBASE)      ; 00:01C7 - FD CB 07 66
   jr     z, addr_001D0                ; 00:01CB - 28 03
   ld     hl, PAL2_lv_lab_3_under_water  ; 00:01CD - 21 6B 02

addr_001D0:
   ld     a, $03                       ; 00:01D0 - 3E 03
   call   load_palettes_IRQ            ; 00:01D2 - CD 66 05
   ret                                 ; 00:01D5 - C9

addr_001D6:
   ld     a, (g_palette_cycle_index)   ; 00:01D6 - 3A A6 D2
   add    a, a                         ; 00:01D9 - 87
   add    a, a                         ; 00:01DA - 87
   add    a, a                         ; 00:01DB - 87
   add    a, a                         ; 00:01DC - 87
   ld     e, a                         ; 00:01DD - 5F
   ld     d, $00                       ; 00:01DE - 16 00
   ld     hl, (g_palette_cycle_baseptr)  ; 00:01E0 - 2A A8 D2
   add    hl, de                       ; 00:01E3 - 19
   ld     a, $01                       ; 00:01E4 - 3E 01
   call   load_palettes_IRQ            ; 00:01E6 - CD 66 05
   ld     hl, PAL2_lv_lab_above_water  ; 00:01E9 - 21 9E 63
   ld     a, $02                       ; 00:01EC - 3E 02
   call   load_palettes_IRQ            ; 00:01EE - CD 66 05
   ret                                 ; 00:01F1 - C9

irq_line_state_chk_nonzero:
   cp     $01                          ; 00:01F2 - FE 01
   jr     z, irq_line_state_1_load_water_palette  ; 00:01F4 - 28 1F
   cp     $02                          ; 00:01F6 - FE 02
   jr     z, irq_line_state_2          ; 00:01F8 - 28 14
   dec    a                            ; 00:01FA - 3D
   ld     (g_water_irq_line_state), a  ; 00:01FB - 32 47 D2
   in     a, ($7E)                     ; 00:01FE - DB 7E
   ld     c, a                         ; 00:0200 - 4F
   ld     a, (g_water_onscreen_y)      ; 00:0201 - 3A 48 D2
   sub    c                            ; 00:0204 - 91
   out    ($BF), a                     ; 00:0205 - D3 BF
   ld     a, $8A                       ; 00:0207 - 3E 8A
   out    ($BF), a                     ; 00:0209 - D3 BF
   jp     irq_exit                     ; 00:020B - C3 45 02

irq_line_state_2:
   dec    a                            ; 00:020E - 3D
   ld     (g_water_irq_line_state), a  ; 00:020F - 32 47 D2
   jp     irq_exit                     ; 00:0212 - C3 45 02

irq_line_state_1_load_water_palette:
   dec    a                            ; 00:0215 - 3D
   ld     (g_water_irq_line_state), a  ; 00:0216 - 32 47 D2
   .IF 0
   ld     a, $00                       ; 00:0219 - 3E 00
   .ELSE
   xor a
   ; SAVING: 1 byte
   .ENDIF
   out    ($BF), a                     ; 00:021B - D3 BF
   ld     a, $C0                       ; 00:021D - 3E C0
   out    ($BF), a                     ; 00:021F - D3 BF
   ld     b, $10                       ; 00:0221 - 06 10
   ld     hl, PAL2_lv_lab_under_water  ; 00:0223 - 21 4B 02
   bit    4, (iy+var_D207-IYBASE)      ; 00:0226 - FD CB 07 66
   jr     z, _f                        ; 00:022A - 28 03
   ld     hl, PAL2_lv_lab_3_under_water  ; 00:022C - 21 6B 02

__:
   ld     a, (hl)                      ; 00:022F - 7E
   out    ($BE), a                     ; 00:0230 - D3 BE
   inc    hl                           ; 00:0232 - 23
   nop                                 ; 00:0233 - 00
   ld     a, (hl)                      ; 00:0234 - 7E
   out    ($BE), a                     ; 00:0235 - D3 BE
   inc    hl                           ; 00:0237 - 23
   djnz   _b                           ; 00:0238 - 10 F5
   ld     a, (g_saved_vdp_reg_00)      ; 00:023A - 3A 18 D2
   and    $EF                          ; 00:023D - E6 EF
   out    ($BF), a                     ; 00:023F - D3 BF
   ld     a, $80                       ; 00:0241 - 3E 80
   out    ($BF), a                     ; 00:0243 - D3 BF

irq_exit:
   pop    bc                           ; 00:0245 - C1
   pop    de                           ; 00:0246 - D1
   pop    hl                           ; 00:0247 - E1
   pop    af                           ; 00:0248 - F1
   ei                                  ; 00:0249 - FB
   ;; Using RETI is unnecessary. RET should be fine.
   ret                                 ; 00:024A - C9

PAL2_lv_lab_under_water:
.INCBIN "src/data/lv_lab_under_water.pal3"

PAL2_lv_lab_3_under_water:
.INCBIN "src/data/lv_lab_3_under_water.pal3"

reset_init:
   ;; Set up banking.
.IF 0
   ld     a, $80                       ; 00:028B - 3E 80
   ld     (rompage_cfg), a             ; 00:028D - 32 FC FF
   ld     a, $00                       ; 00:0290 - 3E 00
   ld     (rompage_0), a               ; 00:0292 - 32 FD FF
   ld     a, $01                       ; 00:0295 - 3E 01
   ld     (rompage_1), a               ; 00:0297 - 32 FE FF
   ld     a, $02                       ; 00:029A - 3E 02
   ld     (rompage_2), a               ; 00:029C - 32 FF FF
.ELSE
   ld hl, rompage_cfg ; 028B 3
   xor a              ; 028E 1
   ld (hl), a         ; 028F 1
   inc hl             ; 0290 1
   ld (hl), a         ; 0291 1
   inc hl             ; 0292 1
   inc a              ; 0293 1
   ld (hl), a         ; 0294 1
   inc hl             ; 0295 1
   inc a              ; 0296 1
   ld (hl), a         ; 0297 1
   ; 029C -> 0298 - SAVING: 4 bytes
.ENDIF

   ;; Clear memory and set the stack pointer. This one's already somewhat optimised.
   ld     hl, var_C000                 ; 00:029F - 21 00 C0
   ld     de, var_C001                 ; 00:02A2 - 11 01 C0
   ld     bc, $1FEF                    ; 00:02A5 - 01 EF 1F
   ld     (hl), l                      ; 00:02A8 - 75
   ldir                                ; 00:02A9 - ED B0
   ld     sp, hl                       ; 00:02AB - F9
   ;; ^ On x86 you want the stack to be word-aligned, but on Z80 it doesn't matter.

   ;; Initialise VDP registers
   ld     hl, TBL_reset_vdp_regs       ; 00:02AC - 21 11 03
   ld     de, g_saved_vdp_reg_00       ; 00:02AF - 11 18 D2
.IF 0
   ld     b, $0B                       ; 00:02B2 - 06 0B
   ld     c, $8B                       ; 00:02B4 - 0E 8B
.ELSE
   ld bc, $0B8B
   ;; SAVING: 1 byte
.ENDIF
_lp_reset_init_vdp_regs:
   ld     a, (hl)                      ; 00:02B6 - 7E
   ld     (de), a                      ; 00:02B7 - 12
   inc    hl                           ; 00:02B8 - 23
   inc    de                           ; 00:02B9 - 13
   out    ($BF), a                     ; 00:02BA - D3 BF
   ld     a, c                         ; 00:02BC - 79
   sub    b                            ; 00:02BD - 90
   out    ($BF), a                     ; 00:02BE - D3 BF
   djnz   _lp_reset_init_vdp_regs      ; 00:02C0 - 10 F4

   ;; Force all sprites to an off-screen Y position
   ld     hl, $3F00                    ; 00:02C2 - 21 00 3F
   ld     bc, $0040                    ; 00:02C5 - 01 40 00
   ld     a, $E0                       ; 00:02C8 - 3E E0
   call   fill_vram_at_hl_for_bc_bytes_with_a  ; 00:02CA - CD 95 05
   ;; Stop the music.
.IF 0
   call   di_call_s1_b03_4006_DI       ; 00:02CD - CD ED 02
.ELSE
   rst $20
   ; SAVING: 2 bytes
.ENDIF
   ;; Set IY to $D200 and *NEVER EVER CHANGE IT*
   ld     iy, IYBASE                   ; 00:02D0 - FD 21 00 D2
   jp     _reset_01C49                 ; 00:02D4 - C3 49 1C

;; Up-front cost of 19 bytes
;; 11 bytes saved when both slots need setting
;; 3 bytes saved when only one slot needs setting
;;
;; Occurrences (not counting already-counted rewrites):
;; Both: 14
;; S1:    8
;; S2:    2
; SAVING: 165 bytes
set_slot_1_2:
   call set_slot_1
   inc a
set_slot_2:
   ld (g_committed_rompage_2), a
   ld (rompage_2), a
   ret
set_slot_1:
   ld (g_committed_rompage_1), a
   ld (rompage_1), a
   ret

di_call_s1_b03_4012_a_DI:
   di                                  ; 00:02D7 - F3
   push   af                           ; 00:02D8 - F5
   ld     a, $03                       ; 00:02D9 - 3E 03
   ld     (rompage_1), a               ; 00:02DB - 32 FE FF
   pop    af                           ; 00:02DE - F1
   ld     (var_D2D2), a                ; 00:02DF - 32 D2 D2
   call   snddrv_play_music            ; 00:02E2 - CD 12 40
   ld     a, (g_committed_rompage_1)   ; 00:02E5 - 3A 35 D2
   ld     (rompage_1), a               ; 00:02E8 - 32 FE FF
   ei                                  ; 00:02EB - FB
   ret                                 ; 00:02EC - C9

di_call_s1_b03_4006_DI:
   di                                  ; 00:02ED - F3
   ld     a, $03                       ; 00:02EE - 3E 03
   ld     (rompage_1), a               ; 00:02F0 - 32 FE FF
   call   snddrv_stop                  ; 00:02F3 - CD 06 40
   ld     a, (g_committed_rompage_1)   ; 00:02F6 - 3A 35 D2
   ld     (rompage_1), a               ; 00:02F9 - 32 FE FF
   ei                                  ; 00:02FC - FB
   ret                                 ; 00:02FD - C9

play_sound_effect_a_DI:
   di                                  ; 00:02FE - F3
   push   af                           ; 00:02FF - F5
   ld     a, $03                       ; 00:0300 - 3E 03
   ld     (rompage_1), a               ; 00:0302 - 32 FE FF
   pop    af                           ; 00:0305 - F1
   call   snddrv_play_sound            ; 00:0306 - CD 15 40
   ld     a, (g_committed_rompage_1)   ; 00:0309 - 3A 35 D2
   ld     (rompage_1), a               ; 00:030C - 32 FE FF
   ei                                  ; 00:030F - FB
   ret                                 ; 00:0310 - C9

TBL_reset_vdp_regs:
.db $26, $A2, $FF, $FF, $FF, $FF, $FF, $00, $00, $00, $FF                           ; 00:0311

wait_until_irq_ticked:
   bit    0, (iy+var_D200-IYBASE)      ; 00:031C - FD CB 00 46
   jr     z, wait_until_irq_ticked     ; 00:0320 - 28 FA
   ret                                 ; 00:0322 - C9

.IF 0
;; That flag seems to genuinely do nothing and this is free for use.
;; Also, those variable seem unused too!
UNUSED_00323:
   set    2, (iy+var_D200-IYBASE)      ; 00:0323 - FD CB 00 D6
   ld     (var_D225), hl               ; 00:0327 - 22 25 D2
   ld     (var_D227), de               ; 00:032A - ED 53 27 D2
   ld     (var_D229), bc               ; 00:032E - ED 43 29 D2
   ret                                 ; 00:0332 - C9
; SAVING: 16 bytes
.ENDIF

signal_load_palettes:
   set    3, (iy+var_D200-IYBASE)      ; 00:0333 - FD CB 00 DE
   ld     (g_SIG00b3_palettes_present), a  ; 00:0337 - 32 2F D2
   ld     (g_SIG00b3_palette_addr), hl  ; 00:033A - 22 2B D2
   ret                                 ; 00:033D - C9

upload_sprite_table_IRQ:
   ld     a, $00                       ; 00:033E - 3E 00
   out    ($BF), a                     ; 00:0340 - D3 BF
   ld     a, $3F                       ; 00:0342 - 3E 3F
   or     $40                          ; 00:0344 - F6 40
   out    ($BF), a                     ; 00:0346 - D3 BF
   ld     b, (iy+g_sprite_count-IYBASE)  ; 00:0348 - FD 46 0A
   ld     hl, var_D001                 ; 00:034B - 21 01 D0
   ld     de, $0003                    ; 00:034E - 11 03 00
   ld     a, b                         ; 00:0351 - 78
   and    a                            ; 00:0352 - A7
   jr     z, +                         ; 00:0353 - 28 06

-:
   ld     a, (hl)                      ; 00:0355 - 7E
   out    ($BE), a                     ; 00:0356 - D3 BE
   add    hl, de                       ; 00:0358 - 19
   djnz   -                            ; 00:0359 - 10 FA

+:
   ld     a, (g_prev_sprite_count)     ; 00:035B - 3A B4 D2
   ld     b, a                         ; 00:035E - 47
   ld     a, (iy+g_sprite_count-IYBASE)  ; 00:035F - FD 7E 0A
   ld     c, a                         ; 00:0362 - 4F
   cp     b                            ; 00:0363 - B8
   jr     nc, +                        ; 00:0364 - 30 09
   ld     a, b                         ; 00:0366 - 78
   sub    c                            ; 00:0367 - 91
   ld     b, a                         ; 00:0368 - 47

-:
   ld     a, $E0                       ; 00:0369 - 3E E0
   out    ($BE), a                     ; 00:036B - D3 BE
   djnz   -                            ; 00:036D - 10 FA

+:
   ld     a, c                         ; 00:036F - 79
   and    a                            ; 00:0370 - A7
   ret    z                            ; 00:0371 - C8
   ld     hl, var_D000                 ; 00:0372 - 21 00 D0
   ld     b, (iy+g_sprite_count-IYBASE)  ; 00:0375 - FD 46 0A
   ld     a, $80                       ; 00:0378 - 3E 80
   out    ($BF), a                     ; 00:037A - D3 BF
   ld     a, $3F                       ; 00:037C - 3E 3F
   or     $40                          ; 00:037E - F6 40
   out    ($BF), a                     ; 00:0380 - D3 BF

-:
   ld     a, (hl)                      ; 00:0382 - 7E
   out    ($BE), a                     ; 00:0383 - D3 BE
   inc    l                            ; 00:0385 - 2C
   inc    l                            ; 00:0386 - 2C
   ld     a, (hl)                      ; 00:0387 - 7E
   out    ($BE), a                     ; 00:0388 - D3 BE
   inc    l                            ; 00:038A - 2C
   djnz   -                            ; 00:038B - 10 F5
   ld     a, (iy+g_sprite_count-IYBASE)  ; 00:038D - FD 7E 0A
   ld     (g_prev_sprite_count), a     ; 00:0390 - 32 B4 D2
   ld     (iy+g_sprite_count-IYBASE), b  ; 00:0393 - FD 70 0A
   ret                                 ; 00:0396 - C9

.IF 0
UNUSED_00397:
   di                                  ; 00:0397 - F3
   ld     a, e                         ; 00:0398 - 7B
   out    ($BF), a                     ; 00:0399 - D3 BF
   ld     a, d                         ; 00:039B - 7A
   or     $40                          ; 00:039C - F6 40
   out    ($BF), a                     ; 00:039E - D3 BF
   ei                                  ; 00:03A0 - FB

-:
   ld     a, (hl)                      ; 00:03A1 - 7E
   out    ($BE), a                     ; 00:03A2 - D3 BE
   inc    hl                           ; 00:03A4 - 23
   dec    bc                           ; 00:03A5 - 0B
   ld     a, b                         ; 00:03A6 - 78
   or     c                            ; 00:03A7 - B1
   jp     nz, -                        ; 00:03A8 - C2 A1 03
   ret                                 ; 00:03AB - C9
.ENDIF
; SAVING: 21 bytes

.IF 0
UNUSED_003AC:
   di                                  ; 00:03AC - F3
   push   af                           ; 00:03AD - F5
   ld     a, e                         ; 00:03AE - 7B
   out    ($BF), a                     ; 00:03AF - D3 BF
   ld     a, d                         ; 00:03B1 - 7A
   or     $40                          ; 00:03B2 - F6 40
   out    ($BF), a                     ; 00:03B4 - D3 BF
   pop    af                           ; 00:03B6 - F1
   ld     de, (g_committed_rompage_1)  ; 00:03B7 - ED 5B 35 D2
   push   de                           ; 00:03BB - D5
   ;; BUGFIX: PAGERACE: Race condition, defeatable with a well-timed interrupt. Swapped ops around to fix.
   ld     (g_committed_rompage_1), a   ; 00:03BF - 32 35 D2
   ld     (rompage_1), a               ; 00:03BC - 32 FE FF
   inc    a                            ; 00:03C2 - 3C
   ;; BUGFIX: PAGERACE: Race condition, defeatable with a well-timed interrupt. Swapped ops around to fix.
   ld     (g_committed_rompage_2), a   ; 00:03C6 - 32 36 D2
   ld     (rompage_2), a               ; 00:03C3 - 32 FF FF
   ei                                  ; 00:03C9 - FB

--:
   ld     a, (hl)                      ; 00:03CA - 7E
   cpl                                 ; 00:03CB - 2F
   ld     e, a                         ; 00:03CC - 5F

-:
   ld     a, (hl)                      ; 00:03CD - 7E
   cp     e                            ; 00:03CE - BB
   jr     z, +                         ; 00:03CF - 28 0C
   out    ($BE), a                     ; 00:03D1 - D3 BE
   ld     e, a                         ; 00:03D3 - 5F
   inc    hl                           ; 00:03D4 - 23
   dec    bc                           ; 00:03D5 - 0B
   ld     a, b                         ; 00:03D6 - 78
   or     c                            ; 00:03D7 - B1
   jp     nz, -                        ; 00:03D8 - C2 CD 03
   jr     ++                           ; 00:03DB - 18 18

+:
   ld     d, a                         ; 00:03DD - 57
   inc    hl                           ; 00:03DE - 23
   dec    bc                           ; 00:03DF - 0B
   ld     a, b                         ; 00:03E0 - 78
   or     c                            ; 00:03E1 - B1
   jr     z, ++                        ; 00:03E2 - 28 11
   ld     a, d                         ; 00:03E4 - 7A
   ld     e, (hl)                      ; 00:03E5 - 5E

-:
   out    ($BE), a                     ; 00:03E6 - D3 BE
   dec    e                            ; 00:03E8 - 1D
   nop                                 ; 00:03E9 - 00
   nop                                 ; 00:03EA - 00
   jp     nz, -                        ; 00:03EB - C2 E6 03
   inc    hl                           ; 00:03EE - 23
   dec    bc                           ; 00:03EF - 0B
   ld     a, b                         ; 00:03F0 - 78
   or     c                            ; 00:03F1 - B1
   jp     nz, --                       ; 00:03F2 - C2 CA 03

++:
   di                                  ; 00:03F5 - F3
   pop    de                           ; 00:03F6 - D1
   ;; NOTPAGERACE, somehow
   ld     (g_committed_rompage_1), de  ; 00:03F7 - ED 53 35 D2
   ld     a, e                         ; 00:03FB - 7B
   ld     (rompage_1), a               ; 00:03FC - 32 FE FF
   ld     a, d                         ; 00:03FF - 7A
   ld     (rompage_2), a               ; 00:0400 - 32 FF FF
   ei                                  ; 00:0403 - FB
   ret                                 ; 00:0404 - C9
.ENDIF
; SAVING: 89 bytes

load_art:
   di                                  ; 00:0405 - F3

   ;; This code adjusts HL and the page in A.
   ;; We relocate this to *after* loading the VRAM address.
   ;; This frees up DE.
.IF 0
-:
   push   af                           ; 00:0406 - F5
   ld     a, h                         ; 00:0407 - 7C
   cp     $40                          ; 00:0408 - FE 40
   jr     c, +                         ; 00:040A - 38 08
   sub    $40                          ; 00:040C - D6 40
   ld     h, a                         ; 00:040E - 67
   pop    af                           ; 00:040F - F1
   inc    a                            ; 00:0410 - 3C
   jp     -                            ; 00:0411 - C3 06 04
+:
.ELSE
   push af  ; 0406 1
.ENDIF
   ;; Continued below

   ;; Load VRAM address
   ld     a, e                         ; 00:0414 - 7B
   out    ($BF), a                     ; 00:0415 - D3 BF
   ld     a, d                         ; 00:0417 - 7A
   or     $40                          ; 00:0418 - F6 40
   out    ($BF), a                     ; 00:041A - D3 BF

   ;; DE is now free.
   pop    af                           ; 00:041C - F1

.IF 0
   ld     de, $4000                    ; 00:041D - 11 00 40
   add    hl, de                       ; 00:0420 - 19
.ELSE
   ;; Continued from above
   ld e, a      ; 0407 1
   ld a, h      ; 0408 1
   -:
      inc e     ; 0409 1
      sub $40   ; 040A 2
      jr nc, -  ; 040C 2
   dec e        ; 040E 1
   add a, $80   ; 040F 2
   ld h, a      ; 0411 1
   ld a, e      ; 0412 1
   ; 0421 -> 0413 - SAVING: 14 bytes
.ENDIF

   ld     de, (g_committed_rompage_1)  ; 00:0421 - ED 5B 35 D2
   push   de                           ; 00:0425 - D5
   .IF 0
   ;; BUGFIX: PAGERACE: Race condition, defeatable with a well-timed interrupt. Swapped ops around to fix.
   ld     (g_committed_rompage_1), a   ; 00:0429 - 32 35 D2
   ld     (rompage_1), a               ; 00:0426 - 32 FE FF
   inc    a                            ; 00:042C - 3C
   ;; BUGFIX: PAGERACE: Race condition, defeatable with a well-timed interrupt. Swapped ops around to fix.
   ld     (g_committed_rompage_2), a   ; 00:0430 - 32 36 D2
   ld     (rompage_2), a               ; 00:042D - 32 FF FF
   .ELSE
   call set_slot_1_2
   .ENDIF
   bit    1, (iy+var_D209-IYBASE)      ; 00:0433 - FD CB 09 4E
   jr     nz, +                        ; 00:0437 - 20 01
   ei                                  ; 00:0439 - FB
+:

   ld     (var_D212), hl               ; 00:043A - 22 12 D2
   inc    hl                           ; 00:043D - 23
   inc    hl                           ; 00:043E - 23
   ld     e, (hl)                      ; 00:043F - 5E
   inc    hl                           ; 00:0440 - 23
   ld     d, (hl)                      ; 00:0441 - 56
   inc    hl                           ; 00:0442 - 23
   push   de                           ; 00:0443 - D5
   ld     e, (hl)                      ; 00:0444 - 5E
   inc    hl                           ; 00:0445 - 23
   ld     d, (hl)                      ; 00:0446 - 56
   push   de                           ; 00:0447 - D5
   inc    hl                           ; 00:0448 - 23
   ld     c, (hl)                      ; 00:0449 - 4E
   inc    hl                           ; 00:044A - 23
   ld     b, (hl)                      ; 00:044B - 46
   inc    hl                           ; 00:044C - 23
   ld     (var_D210), bc               ; 00:044D - ED 43 10 D2
   ld     (var_D214), hl               ; 00:0451 - 22 14 D2
   exx                                 ; 00:0454 - D9
   ld     bc, (var_D212)               ; 00:0455 - ED 4B 12 D2
   ld     e, c                         ; 00:0459 - 59
   ld     d, b                         ; 00:045A - 50
   pop    hl                           ; 00:045B - E1
   add    hl, bc                       ; 00:045C - 09
   ld     (g_FF_string_high_byte), hl  ; 00:045D - 22 0E D2
   ld     c, l                         ; 00:0460 - 4D
   ld     b, h                         ; 00:0461 - 44
   pop    hl                           ; 00:0462 - E1
   add    hl, de                       ; 00:0463 - 19
   ex     de, hl                       ; 00:0464 - EB
   exx                                 ; 00:0465 - D9

   ;; Misuse the RLE last byte field for our bitmask shift register.
   ;; It's faster than recalculating the pointer every single iteration...
   ;; Anyway, pre-set it to $00 so when we shift we end up with the zero flag set.
   ;; When we load it, we will pre-rotate with a 1.
   ;; That way, we guarantee having 8 rotations.
.IF 0
--:
   ld     hl, (var_D210)               ; 00:0466 - 2A 10 D2
   xor    a                            ; 00:0469 - AF
   sbc    hl, bc                       ; 00:046A - ED 42
   push   hl                           ; 00:046C - E5
   ld     d, a                         ; 00:046D - 57
   ld     a, l                         ; 00:046E - 7D
   and    $07                          ; 00:046F - E6 07
   ld     e, a                         ; 00:0471 - 5F
   ld     hl, LUT_004F9_left_shift_bitmask  ; 00:0472 - 21 F9 04
   add    hl, de                       ; 00:0475 - 19
   ld     a, (hl)                      ; 00:0476 - 7E
   pop    de                           ; 00:0477 - D1
   srl    d                            ; 00:0478 - CB 3A
   rr     e                            ; 00:047A - CB 1B
   srl    d                            ; 00:047C - CB 3A
   rr     e                            ; 00:047E - CB 1B
   srl    d                            ; 00:0480 - CB 3A
   rr     e                            ; 00:0482 - CB 1B
   ld     hl, (var_D214)               ; 00:0484 - 2A 14 D2
   add    hl, de                       ; 00:0487 - 19
   ld     e, a                         ; 00:0488 - 5F
   ld     a, (hl)                      ; 00:0489 - 7E
   and    e                            ; 00:048A - A3
   jr     nz, +                        ; 00:048B - 20 21
.ELSE
   ;; Continued below...
   ld (iy+g_last_rle_byte-IYBASE), $00  ; 0466 3
--:
   ;; 39 bytes, and 196 cycles before the branch.
   ;; We can do so, so much better than that, AND use an index register in the process.
   ;; Behold: doing things the fast way.
   or a                                 ; 0469 1  4 - clear carry flag
   rr (iy+g_last_rle_byte-IYBASE)       ; 046A 4 23
   jr nz, +                             ; 046E 2 12/7
      ld hl, (var_D214)                 ; 0470 3 16
      ld a, (hl)                        ; 0473 1  7
      inc hl                            ; 0474 1  6
      ld (var_D214), hl                 ; 0475 3 16
      ld (g_last_rle_byte), a           ; 0478 3 13
      scf                               ; 047B 1  4
      rr (iy+g_last_rle_byte-IYBASE)    ; 047C 4 23
   +:
   jr c, +                              ; 0480 1 12/7
.ENDIF
   ;; 048D -> 0482 - SAVING: 11 bytes
   ;; Cycle saving:
   ;; - ZF branch     taken:  39 cycles
   ;; - ZF branch not taken: 119 cycles
   ;; It gets taken 7 times out of 8, so 49 cycles average.
   ;; Told you we could do so much better.

   ;; This writes every 32 cycles.
   ;; We can get away with 28.
   ;; We can also rearrange things a bit to replace one NOP.
.IF 0
   exx                                 ; 00:048D - D9
   ld     a, (bc)                      ; 00:048E - 0A
   out    ($BE), a                     ; 00:048F - D3 BE
   inc    bc                           ; 00:0491 - 03
   nop                                 ; 00:0492 - 00
   nop                                 ; 00:0493 - 00
   ld     a, (bc)                      ; 00:0494 - 0A
   out    ($BE), a                     ; 00:0495 - D3 BE
   inc    bc                           ; 00:0497 - 03
   nop                                 ; 00:0498 - 00
   nop                                 ; 00:0499 - 00
   ld     a, (bc)                      ; 00:049A - 0A
   out    ($BE), a                     ; 00:049B - D3 BE
   inc    bc                           ; 00:049D - 03
   nop                                 ; 00:049E - 00
   nop                                 ; 00:049F - 00
   ld     a, (bc)                      ; 00:04A0 - 0A
   out    ($BE), a                     ; 00:04A1 - D3 BE
   inc    bc                           ; 00:04A3 - 03
   exx                                 ; 00:04A4 - D9
.ELSE
   exx            ; 048D 1  4
   ld a, (bc)     ; 048E 1  7
   inc bc         ; 048F 1  6
   out ($BE), a   ; 0490 2 11
   ld a, (bc)     ; 0492 1  7
   inc bc         ; 0493 1  6
   nop            ; 0494 1  4
   out ($BE), a   ; 0495 2 11
   ld a, (bc)     ; 0497 1  7
   inc bc         ; 0498 1  6
   nop            ; 0499 1  4
   out ($BE), a   ; 049A 2 11
   ld a, (bc)     ; 049C 1  7
   inc bc         ; 049D 1  6
   exx            ; 049E 1  4
   out ($BE), a   ; 049F 2 11
.ENDIF
   ; 04A5 -> 04A1 - SAVING: 4 bytes and 16 cycles per iteration
   dec    bc                           ; 00:04A5 - 0B
   ld     a, b                         ; 00:04A6 - 78
   or     c                            ; 00:04A7 - B1
   jp     nz, --                       ; 00:04A8 - C2 66 04
   jp     ++                           ; 00:04AB - C3 E3 04

+:
   exx                                 ; 00:04AE - D9
   ld     a, (de)                      ; 00:04AF - 1A
   inc    de                           ; 00:04B0 - 13
   exx                                 ; 00:04B1 - D9
   ld     h, $00                       ; 00:04B2 - 26 00
   cp     $F0                          ; 00:04B4 - FE F0
   jr     c, +                         ; 00:04B6 - 38 07
   sub    $F0                          ; 00:04B8 - D6 F0
   ld     h, a                         ; 00:04BA - 67
   exx                                 ; 00:04BB - D9
   ld     a, (de)                      ; 00:04BC - 1A
   inc    de                           ; 00:04BD - 13
   exx                                 ; 00:04BE - D9

+:
   ;; This writes every 32 cycles.
   ;; We can get away with 28.
   ;; We can also move something into the loop
   ;; SAVING: 5 bytes and 20 cycles per iteration
.IF 0
   ld     l, a                         ; 00:04BF - 6F
   add    hl, hl                       ; 00:04C0 - 29
   add    hl, hl                       ; 00:04C1 - 29
   ld     de, (g_FF_string_high_byte)  ; 00:04C2 - ED 5B 0E D2
   add    hl, de                       ; 00:04C6 - 19
   ld     a, (hl)                      ; 00:04C7 - 7E
   out    ($BE), a                     ; 00:04C8 - D3 BE
   inc    hl                           ; 00:04CA - 23
   nop                                 ; 00:04CB - 00
   nop                                 ; 00:04CC - 00
   ld     a, (hl)                      ; 00:04CD - 7E
   out    ($BE), a                     ; 00:04CE - D3 BE
   inc    hl                           ; 00:04D0 - 23
   nop                                 ; 00:04D1 - 00
   nop                                 ; 00:04D2 - 00
   ld     a, (hl)                      ; 00:04D3 - 7E
   out    ($BE), a                     ; 00:04D4 - D3 BE
   inc    hl                           ; 00:04D6 - 23
   nop                                 ; 00:04D7 - 00
   nop                                 ; 00:04D8 - 00
   ld     a, (hl)                      ; 00:04D9 - 7E
   out    ($BE), a                     ; 00:04DA - D3 BE
   inc    hl                           ; 00:04DC - 23
   dec    bc                           ; 00:04DD - 0B
   ld     a, b                         ; 00:04DE - 78
   or     c                            ; 00:04DF - B1
   jp     nz, --                       ; 00:04E0 - C2 66 04
.ELSE
   ld l, a
   add hl, hl
   add hl, hl
   ld de, (g_FF_string_high_byte)
   add hl, de
   ld a, (hl)
   out ($BE), a
   inc hl
   nop
   ld a, (hl)
   out ($BE), a
   inc hl
   dec bc  ; 1 byte, 6 cycles, 30 cycle gap but still a 1-byte 4-cycle save overall
   ld a, (hl)
   out ($BE), a
   inc hl
   ld a, (hl)
   inc hl  ; 1 byte, 6 cycles, 30 cycle gap but still a 1-byte 4-cycle save overall
   out ($BE), a
   ld a, b
   or c
   jp nz, --
.ENDIF

++:
   bit    1, (iy+var_D209-IYBASE)      ; 00:04E3 - FD CB 09 4E
   jr     nz, +                        ; 00:04E7 - 20 01
   di                                  ; 00:04E9 - F3

+:
   pop    de                           ; 00:04EA - D1
   ;; NOTPAGERACE, somehow
   ld     (g_committed_rompage_1), de  ; 00:04EB - ED 53 35 D2
   ld     (rompage_1), de              ; 00:04EF - ED 53 FE FF
   ei                                  ; 00:04F3 - FB
   res    1, (iy+var_D209-IYBASE)      ; 00:04F4 - FD CB 09 8E
   ret                                 ; 00:04F8 - C9

;; Welp, don't need this any longer! Although I might reinstate it for optimising level flag bit lookups.
;; SAVING: 8 bytes
.IF 0
LUT_004F9_left_shift_bitmask:
.db $01, $02, $04, $08, $10, $20, $40, $80                                          ; 00:04F9
.ENDIF

unpack_art_tilemap_into_vram:
   .IF 0
   .ELSE
   ;; This function is only used to load from bank $05 in slot 1, so let's do the temporary page switch here!
   ld a, (g_committed_rompage_1)     ; 0000 3
   push af                           ; 0003 1
      ld a, $05                      ; 0004 2
      ld (g_committed_rompage_1), a  ; 0006 3
      ld (rompage_1), a              ; 0009 3
      call @actually_unpack_art      ; 000C 3
   pop af                            ; 000F 1
   ld (g_committed_rompage_1), a     ; 0010 3
   ld (rompage_1), a                 ; 0013 3
   ret                               ; 0016 1
   ; 0017 -> 23 bytes
   ; The cost of doing the page switch elsewhere is 8 bytes.
   ; Forward page switches deleted (to $05): 8
   ; Reverse page switches deleted (to $01): 1
   ; (8*9)-23 = SAVING: 49 bytes

@actually_unpack_art:
   .ENDIF
   di                                  ; 00:0501 - F3
   ld     a, e                         ; 00:0502 - 7B
   out    ($BF), a                     ; 00:0503 - D3 BF
   ld     a, d                         ; 00:0505 - 7A
   or     $40                          ; 00:0506 - F6 40
   out    ($BF), a                     ; 00:0508 - D3 BF
   ei                                  ; 00:050A - FB

----:
   ld     a, (hl)                      ; 00:050B - 7E
   cpl                                 ; 00:050C - 2F
   ld     e, a                         ; 00:050D - 5F

---:
   ld     a, (hl)                      ; 00:050E - 7E
   cp     e                            ; 00:050F - BB
   jr     z, +                         ; 00:0510 - 28 15
   cp     $FF                          ; 00:0512 - FE FF
   jr     z, +++                       ; 00:0514 - 28 33
   out    ($BE), a                     ; 00:0516 - D3 BE
   ld     e, a                         ; 00:0518 - 5F
   ld     a, (g_FF_string_high_byte)   ; 00:0519 - 3A 0E D2
   out    ($BE), a                     ; 00:051C - D3 BE
   inc    hl                           ; 00:051E - 23
   dec    bc                           ; 00:051F - 0B
   ld     a, b                         ; 00:0520 - 78
   or     c                            ; 00:0521 - B1
   jp     nz, ---                      ; 00:0522 - C2 0E 05
   jr     ++                           ; 00:0525 - 18 21

+:
   ld     d, a                         ; 00:0527 - 57
   inc    hl                           ; 00:0528 - 23
   dec    bc                           ; 00:0529 - 0B
   ld     a, b                         ; 00:052A - 78
   or     c                            ; 00:052B - B1
   jr     z, ++                        ; 00:052C - 28 1A
   ld     a, d                         ; 00:052E - 7A
   ld     e, (hl)                      ; 00:052F - 5E
   cp     $FF                          ; 00:0530 - FE FF
   jr     z, _f                        ; 00:0532 - 28 24

-:
   out    ($BE), a                     ; 00:0534 - D3 BE
   push   af                           ; 00:0536 - F5
   ld     a, (g_FF_string_high_byte)   ; 00:0537 - 3A 0E D2
   out    ($BE), a                     ; 00:053A - D3 BE
   pop    af                           ; 00:053C - F1
   dec    e                            ; 00:053D - 1D
   jp     nz, -                        ; 00:053E - C2 34 05

--:
   inc    hl                           ; 00:0541 - 23
   dec    bc                           ; 00:0542 - 0B
   ld     a, b                         ; 00:0543 - 78
   or     c                            ; 00:0544 - B1
   jp     nz, ----                     ; 00:0545 - C2 0B 05

++:
   ret                                 ; 00:0548 - C9

+++:
   ld     e, a                         ; 00:0549 - 5F
   in     a, ($BE)                     ; 00:054A - DB BE
   nop                                 ; 00:054C - 00
   inc    hl                           ; 00:054D - 23
   dec    bc                           ; 00:054E - 0B
   in     a, ($BE)                     ; 00:054F - DB BE
   ld     a, b                         ; 00:0551 - 78
   or     c                            ; 00:0552 - B1
   jp     nz, ---                      ; 00:0553 - C2 0E 05
   ei                                  ; 00:0556 - FB
   ret                                 ; 00:0557 - C9

__:
   in     a, ($BE)                     ; 00:0558 - DB BE
   push   af                           ; 00:055A - F5
   pop    af                           ; 00:055B - F1
   in     a, ($BE)                     ; 00:055C - DB BE
   nop                                 ; 00:055E - 00
   dec    e                            ; 00:055F - 1D
   jp     nz, _b                       ; 00:0560 - C2 58 05
   jp     --                           ; 00:0563 - C3 41 05

load_palettes_IRQ:
   push   af                           ; 00:0566 - F5
   .IF 0
   ld     b, $10                       ; 00:0567 - 06 10
   ld     c, $00                       ; 00:0569 - 0E 00
   .ELSE
   ld bc, $1000
   .ENDIF
   ; SAVING: 1 byte
   bit    0, a                         ; 00:056B - CB 47
   jr     z, +                         ; 00:056D - 28 06
   ld     (var_D230), hl               ; 00:056F - 22 30 D2
   call   ++                           ; 00:0572 - CD 89 05

+:
   pop    af                           ; 00:0575 - F1
   bit    1, a                         ; 00:0576 - CB 4F
   ret    z                            ; 00:0578 - C8
   ld     (var_D232), hl               ; 00:0579 - 22 32 D2
   .IF 0
   ld     b, $10                       ; 00:057C - 06 10
   ld     c, $10                       ; 00:057E - 0E 10
   .ELSE
   ld bc, $1010
   .ENDIF
   ; SAVING: 1 byte
   bit    0, a                         ; 00:0580 - CB 47
   jr     nz, ++                       ; 00:0582 - 20 05
   inc    hl                           ; 00:0584 - 23
   .IF 0
   ld     b, $0F                       ; 00:0585 - 06 0F
   ld     c, $11                       ; 00:0587 - 0E 11
   .ELSE
   ld bc, $0F11
   ; SAVING: 1 byte
   .ENDIF

++:
   ld     a, c                         ; 00:0589 - 79
   out    ($BF), a                     ; 00:058A - D3 BF
   ld     a, $C0                       ; 00:058C - 3E C0
   out    ($BF), a                     ; 00:058E - D3 BF
   ld     c, $BE                       ; 00:0590 - 0E BE
   otir                                ; 00:0592 - ED B3
   ret                                 ; 00:0594 - C9

fill_vram_at_hl_for_bc_bytes_with_a:
   ld     e, a                         ; 00:0595 - 5F
   ld     a, l                         ; 00:0596 - 7D
   out    ($BF), a                     ; 00:0597 - D3 BF
   ld     a, h                         ; 00:0599 - 7C
   or     $40                          ; 00:059A - F6 40
   out    ($BF), a                     ; 00:059C - D3 BF

-:
   ld     a, e                         ; 00:059E - 7B
   out    ($BE), a                     ; 00:059F - D3 BE
   dec    bc                           ; 00:05A1 - 0B
   ld     a, b                         ; 00:05A2 - 78
   or     c                            ; 00:05A3 - B1
   jr     nz, -                        ; 00:05A4 - 20 F8
   ret                                 ; 00:05A6 - C9

poll_player_1_inputs:
   .IF 0
   in     a, ($DC)                     ; 00:05A7 - DB DC
   or     $C0                          ; 00:05A9 - F6 C0
   ld     (iy+g_inputs_player_1-IYBASE), a  ; 00:05AB - FD 77 03
   ret                                 ; 00:05AE - C9
   .ELSE
   ;; HACK: Support the Mega Drive / Genesis control pad.
   ;; TODO: Work out how to get ares to handle Start properly without triggering Pause --GM
   ld a, $0D
   out ($3F), a
   in a, ($DC)
   ;; Bit 5 = start
   ;; Bit 4 = A
   ;; Bit 3(R),2(L) = 0 otherwise no MD pad
   bit 3, a
   jr nz, @no_md_pad
   bit 2, a
   jr z, @has_md_pad
   @no_md_pad:
      ld a, $FF
   @has_md_pad:
   rlca
   rlca
   or $3F
   ld c, a
   ;; Normal operation
   ld a, $2D
   out ($3F), a
   in a, ($DC)
   or $C0
   and c
   ld (iy+g_inputs_player_1-IYBASE), a
   ret
   .ENDIF

print_positioned_FF_string:
   ld     c, (hl)                      ; 00:05AF - 4E
   inc    hl                           ; 00:05B0 - 23
   ld     a, (hl)                      ; 00:05B1 - 7E
   inc    hl                           ; 00:05B2 - 23
   rrca                                ; 00:05B3 - 0F
   rrca                                ; 00:05B4 - 0F

   .IF 0
   ld     e, a                         ; 00:05B5 - 5F
   and    $3F                          ; 00:05B6 - E6 3F
   ld     d, a                         ; 00:05B8 - 57
   ld     a, e                         ; 00:05B9 - 7B
   and    $C0                          ; 00:05BA - E6 C0
   ld     e, a                         ; 00:05BC - 5F
   .ELSE
   ld e, a  ; 05B5 1
   and $3F  ; 05B6 2
   ld d, a  ; 05B8 1
   xor e    ; 05B9 1
   ld e, a  ; 05BA 1
   .ENDIF
   ; 05BD -> 05BB - SAVING: 2 bytes

   .IF 0
   ld     b, $00                       ; 00:05BD - 06 00
   ex     de, hl                       ; 00:05BF - EB
   sla    c                            ; 00:05C0 - CB 21
   add    hl, bc                       ; 00:05C2 - 09
   ld     bc, $3800                    ; 00:05C3 - 01 00 38
   add    hl, bc                       ; 00:05C6 - 09
   .ELSE
   ex de, hl           ; 05BD 1
   sla c               ; 05BE 2
   ld b, $38           ; 05C0 2
   add hl, bc          ; 05C2 1
   .ENDIF
   ; 05C7 -> 05C3 - SAVING: 4 bytes

   di                                  ; 00:05C7 - F3
   ld     a, l                         ; 00:05C8 - 7D
   out    ($BF), a                     ; 00:05C9 - D3 BF
   ld     a, h                         ; 00:05CB - 7C
   or     $40                          ; 00:05CC - F6 40
   out    ($BF), a                     ; 00:05CE - D3 BF
   ei                                  ; 00:05D0 - FB

-:
   ld     a, (de)                      ; 00:05D1 - 1A
   cp     $FF                          ; 00:05D2 - FE FF
   ret    z                            ; 00:05D4 - C8
   out    ($BE), a                     ; 00:05D5 - D3 BE

   .IF 0
   push   af                           ; 00:05D7 - F5
   pop    af                           ; 00:05D8 - F1
   ld     a, (g_FF_string_high_byte)   ; 00:05D9 - 3A 0E D2
   out    ($BE), a                     ; 00:05DC - D3 BE
   inc    de                           ; 00:05DE - 13
   .ELSE
   ;; We don't have to be *that* cautious with our timings!
   ;; This repeated would be "every 30 cycles".
   inc de                          ; 05D7 1
   ld a, (g_FF_string_high_byte)   ; 05D8 3
   out ($BE), a                    ; 05DB 2
   .ENDIF
   ; 05DF -> 05DD - SAVING: 2 bytes

   .IF 0
   djnz   -                            ; 00:05DF - 10 F0
   ret                                 ; 00:05E1 - C9
   .ELSE
   ;; The DJNZ seems to be erroneous here.
   jr -
   .ENDIF
   ; SAVING: 1 byte

clear_sprite_table:
   ;; Fill sprite table with x=E0, y=E0, tile=(garbage) repeating.
   ;ld     hl, var_D000                 ; 00:05E2 - 21 00 D0
   ;ld     e, l                         ; 00:05E5 - 5D
   ;ld     d, h                         ; 00:05E6 - 54
   ;ld     bc, $00BD                    ; 00:05E7 - 01 BD 00
   ;ld     a, $E0                       ; 00:05EA - 3E E0
   ;ld     (de), a                      ; 00:05EC - 12
   ;inc    de                           ; 00:05ED - 13
   ;ld     (de), a                      ; 00:05EE - 12
   ;inc    de                           ; 00:05EF - 13
   ;inc    de                           ; 00:05F0 - 13
   ;ldir                                ; 00:05F1 - ED B0

   .IF 0
      ;; Smaller, but with different garbage byte.
      ld hl, var_D000    ; 5E2 3
      ld e, l            ; 5E5 1
      ld d, h            ; 5E6 1
      ld bc, $00BF       ; 5E7 3
      ld (hl), $E0       ; 5EA 2
      inc de             ; 5EC 1
      ldir               ; 5ED 2
      ; 5F3 -> 5EF - SAVING: 4 bytes, BUT 14 cycles slower.

   .ELSE
      ;; Identical functionality.
      ld hl, var_D000+1  ; 5E2 3
      ld de, var_D000+3  ; 5E5 3
      ld bc, $00BD       ; 5E8 3
      ld a, $E0          ; 5EB 2
      ld (hl), a         ; 5ED 1
      dec hl             ; 5EE 1
      ld (hl), a         ; 5EF 1
      ldir               ; 5F0 2
      ; 05F3 -> 05F2 - SAVING: 1 byte (and 10 cycles)
   .ENDIF

   ld     (iy+g_sprite_count-IYBASE), $40  ; 00:05F3 - FD 36 0A 40
   xor    a                            ; 00:05F7 - AF
   ld     (g_prev_sprite_count), a     ; 00:05F8 - 32 B4 D2
   ret                                 ; 00:05FB - C9

mul_hl_by_c_trashing_abcde_PURE:
   xor    a                            ; 00:05FC - AF
   ld     b, $07                       ; 00:05FD - 06 07
   ex     de, hl                       ; 00:05FF - EB
   ld     l, a                         ; 00:0600 - 6F
   ld     h, a                         ; 00:0601 - 67

-:
   rl     c                            ; 00:0602 - CB 11
   jp     nc, +                        ; 00:0604 - D2 08 06
   add    hl, de                       ; 00:0607 - 19

+:
   add    hl, hl                       ; 00:0608 - 29
   djnz   -                            ; 00:0609 - 10 F7
   or     c                            ; 00:060B - B1
   ret    z                            ; 00:060C - C8
   add    hl, de                       ; 00:060D - 19
   ret                                 ; 00:060E - C9

.IF 0
UNK_0060F_PURE_maybe_a_divide_function:
   xor    a                            ; 00:060F - AF
   ld     b, $10                       ; 00:0610 - 06 10

-:
   rl     l                            ; 00:0612 - CB 15
   rl     h                            ; 00:0614 - CB 14
   rla                                 ; 00:0616 - 17
   cp     c                            ; 00:0617 - B9
   jp     c, +                         ; 00:0618 - DA 1C 06
   sub    c                            ; 00:061B - 91

+:
   ccf                                 ; 00:061C - 3F
   rl     e                            ; 00:061D - CB 13
   rl     d                            ; 00:061F - CB 12
   djnz   -                            ; 00:0621 - 10 EF
   ex     de, hl                       ; 00:0623 - EB
   ret                                 ; 00:0624 - C9
.ENDIF
; Unused now!
; SAVING: 22 bytes

random_A:
   push   hl                           ; 00:0625 - E5
   push   de                           ; 00:0626 - D5
   ld     hl, (g_random_seed)          ; 00:0627 - 2A D7 D2
   .IF 1
   ld     e, l                         ; 00:062A - 5D
   ld     d, h                         ; 00:062B - 54
   add    hl, de                       ; 00:062C - 19
   add    hl, de                       ; 00:062D - 19
   .ELSE
   ;; THIS "OPTIMISATION" IS WRONG - the code above does a x3, *NOT* a x4!
   ;; Comment left for your amusement:

   ;; Well, that was an oversight.
   add hl, hl
   add hl, hl
   .ENDIF
   ld     a, l                         ; 00:062E - 7D
   add    a, h                         ; 00:062F - 84
   ld     h, a                         ; 00:0630 - 67
   add    a, l                         ; 00:0631 - 85
   ld     l, a                         ; 00:0632 - 6F
   ld     de, $0054                    ; 00:0633 - 11 54 00
   add    hl, de                       ; 00:0636 - 19
   ld     (g_random_seed), hl          ; 00:0637 - 22 D7 D2
   ld     a, h                         ; 00:063A - 7C
   pop    de                           ; 00:063B - D1
   pop    hl                           ; 00:063C - E1
   ret                                 ; 00:063D - C9

addr_0063E:
   ld     bc, (g_vdp_scroll_x)         ; 00:063E - ED 4B 51 D2
   ld     hl, (var_D25A)               ; 00:0642 - 2A 5A D2
   ld     de, (var_D26F)               ; 00:0645 - ED 5B 6F D2
   and    a                            ; 00:0649 - A7
   sbc    hl, de                       ; 00:064A - ED 52
   jr     c, addr_00658                ; 00:064C - 38 0A
   .IF 0
   ld     a, l                         ; 00:064E - 7D
   add    a, c                         ; 00:064F - 81
   ld     c, a                         ; 00:0650 - 4F
   .ENDIF
   res    6, (iy+var_D200-IYBASE)      ; 00:0651 - FD CB 00 B6
   jp     addr_0065F                   ; 00:0655 - C3 5F 06

addr_00658:
   .IF 0
   ld     a, l                         ; 00:0658 - 7D
   add    a, c                         ; 00:0659 - 81
   ld     c, a                         ; 00:065A - 4F
   .ENDIF
   set    6, (iy+var_D200-IYBASE)      ; 00:065B - FD CB 00 F6

addr_0065F:
   .IF 1
   ;; Hoist out common code from above.
   ld a, l
   add a, c
   ld c, a
   ; SAVING: 3 bytes
   .ENDIF
   ld     hl, (var_D25D)               ; 00:065F - 2A 5D D2
   ld     de, (var_D271)               ; 00:0662 - ED 5B 71 D2
   and    a                            ; 00:0666 - A7
   sbc    hl, de                       ; 00:0667 - ED 52
   jr     c, addr_0067B                ; 00:0669 - 38 10
   ld     a, l                         ; 00:066B - 7D
   add    a, b                         ; 00:066C - 80
   cp     $E0                          ; 00:066D - FE E0
   jr     c, addr_00673                ; 00:066F - 38 02
   add    a, $20                       ; 00:0671 - C6 20

addr_00673:
   ld     b, a                         ; 00:0673 - 47
   res    7, (iy+var_D200-IYBASE)      ; 00:0674 - FD CB 00 BE
   jp     addr_00688                   ; 00:0678 - C3 88 06

addr_0067B:
   ld     a, l                         ; 00:067B - 7D
   add    a, b                         ; 00:067C - 80
   cp     $E0                          ; 00:067D - FE E0
   jr     c, addr_00683                ; 00:067F - 38 02
   sub    $20                          ; 00:0681 - D6 20

addr_00683:
   ld     b, a                         ; 00:0683 - 47
   set    7, (iy+var_D200-IYBASE)      ; 00:0684 - FD CB 00 FE

addr_00688:
   ld     (g_vdp_scroll_x), bc         ; 00:0688 - ED 43 51 D2
   ld     hl, (var_D25A)               ; 00:068C - 2A 5A D2
   .IF 0
   sla    l                            ; 00:068F - CB 25
   rl     h                            ; 00:0691 - CB 14
   sla    l                            ; 00:0693 - CB 25
   rl     h                            ; 00:0695 - CB 14
   sla    l                            ; 00:0697 - CB 25
   rl     h                            ; 00:0699 - CB 14
   .ELSE
   add hl, hl
   add hl, hl
   add hl, hl
   ; SAVING: 9 bytes (and 15 cycles)
   .ENDIF
   ld     c, h                         ; 00:069B - 4C
   ld     hl, (var_D25D)               ; 00:069C - 2A 5D D2
   .IF 0
   sla    l                            ; 00:069F - CB 25
   rl     h                            ; 00:06A1 - CB 14
   sla    l                            ; 00:06A3 - CB 25
   rl     h                            ; 00:06A5 - CB 14
   sla    l                            ; 00:06A7 - CB 25
   rl     h                            ; 00:06A9 - CB 14
   .ELSE
   add hl, hl
   add hl, hl
   add hl, hl
   ; SAVING: 9 bytes (and 15 cycles)
   .ENDIF
   ld     b, h                         ; 00:06AB - 44
   ld     (var_D257), bc               ; 00:06AC - ED 43 57 D2
   ld     hl, (var_D25A)               ; 00:06B0 - 2A 5A D2
   ld     (var_D26F), hl               ; 00:06B3 - 22 6F D2
   ld     hl, (var_D25D)               ; 00:06B6 - 2A 5D D2
   ld     (var_D271), hl               ; 00:06B9 - 22 71 D2
   ret                                 ; 00:06BC - C9

addr_006BD:
   bit    5, (iy+var_D200-IYBASE)      ; 00:06BD - FD CB 00 6E
   ret    z                            ; 00:06C1 - C8
   di                                  ; 00:06C2 - F3
   ld     a, $04                       ; 00:06C3 - 3E 04
   .IF 0
   ;; BUGFIX: PAGERACE: Race condition, defeatable with a well-timed interrupt. Swapped ops around to fix.
   ld     (g_committed_rompage_1), a   ; 00:06C8 - 32 35 D2
   ld     (rompage_1), a               ; 00:06C5 - 32 FE FF
   ld     a, $05                       ; 00:06CB - 3E 05
   ;; BUGFIX: PAGERACE: Race condition, defeatable with a well-timed interrupt. Swapped ops around to fix.
   ld     (g_committed_rompage_2), a   ; 00:06D0 - 32 36 D2
   ld     (rompage_2), a               ; 00:06CD - 32 FF FF
   .ELSE
   call set_slot_1_2
   .ENDIF
   ei                                  ; 00:06D3 - FB
   .IF 0
   ld     a, (var_D2D4)                ; 00:06D4 - 3A D4 D2
   add    a, a                         ; 00:06D7 - 87
   ld     c, a                         ; 00:06D8 - 4F
   ld     b, $00                       ; 00:06D9 - 06 00
   ld     hl, PTRLUT_level_tile_flags  ; 00:06DB - 21 65 3A
   add    hl, bc                       ; 00:06DE - 09
   ld     a, (hl)                      ; 00:06DF - 7E
   inc    hl                           ; 00:06E0 - 23
   ld     h, (hl)                      ; 00:06E1 - 66
   ld     l, a                         ; 00:06E2 - 6F
   .ELSE
   call fetch_PTRLUT_level_tile_flags
   .ENDIF
   ld     (var_D210), hl               ; 00:06E3 - 22 10 D2
   bit    0, (iy+var_D202-IYBASE)      ; 00:06E6 - FD CB 02 46
   jp     z, addr_00772                ; 00:06EA - CA 72 07
   bit    6, (iy+var_D200-IYBASE)      ; 00:06ED - FD CB 00 76
   .IF 0
   jr     nz, addr_006FA               ; 00:06F1 - 20 07
   ld     b, $00                       ; 00:06F3 - 06 00
   ld     c, $08                       ; 00:06F5 - 0E 08
   jp     addr_0070B                   ; 00:06F7 - C3 0B 07
   .ELSE
   ;; Hoist out common code.
   ;; If we do it here, we have B=$00 and C=$08 as useful constants!
   ;; We can also invert the jump condition and change the branch as we've emptied this branch out.
   ld bc, $0008
   jr z, addr_0070B
   ; 06FA -> 06F6 - SAVING: 4 bytes (although one JP kinda became a JR)
   .ENDIF

addr_006FA:
   ld     a, (g_vdp_scroll_x)          ; 00:06FA - 3A 51 D2
   ;; Basically:
   ;; %000ABCDE + %00001000
   ;; -> get %00x00000 and set C to %0000000x
   .IF 0
   and    $1F                          ; 00:06FD - E6 1F
   add    a, $08                       ; 00:06FF - C6 08
   rrca                                ; 00:0701 - 0F
   rrca                                ; 00:0702 - 0F
   rrca                                ; 00:0703 - 0F
   rrca                                ; 00:0704 - 0F
   rrca                                ; 00:0705 - 0F
   and    $01                          ; 00:0706 - E6 01
   ld     b, $00                       ; 00:0708 - 06 00
   ld     c, a                         ; 00:070A - 4F
   .ELSE
   ;; But we can rely on unsigned overflow here.
   or $E0      ; 06FD 2
   ;; Also, C=$08 on entry
   add a, c    ; 06FF 1
   ;; But we want C to be $00 here... oh look, B=$00 on entry
   ld c, b     ; 0700 1
   ;; Shift it in!
   rl c        ; 0701 2
   ; 070B -> 0703 - SAVING: 8 bytes
   .ENDIF

addr_0070B:
   call   addr_008D5                   ; 00:070B - CD D5 08
   ld     a, (g_vdp_scroll_x)          ; 00:070E - 3A 51 D2
   bit    6, (iy+var_D200-IYBASE)      ; 00:0711 - FD CB 00 76
   jr     z, addr_00719                ; 00:0715 - 28 02
   add    a, $08                       ; 00:0717 - C6 08

addr_00719:
   .IF 0
   and    $1F                          ; 00:0719 - E6 1F
   srl    a                            ; 00:071B - CB 3F
   srl    a                            ; 00:071D - CB 3F
   srl    a                            ; 00:071F - CB 3F
   .ELSE
   rrca     ; 0719 1
   rrca     ; 071A 1
   rrca     ; 071B 1
   and $03  ; 071C 2
   ; 0721 -> 071E - SAVING: 3 bytes (and 12 cycles)
   .ENDIF
   ld     c, a                         ; 00:0721 - 4F
   ld     b, $00                       ; 00:0722 - 06 00
   ld     (g_FF_string_high_byte), bc  ; 00:0724 - ED 43 0E D2
   exx                                 ; 00:0728 - D9
   ld     de, var_D180                 ; 00:0729 - 11 80 D1
   exx                                 ; 00:072C - D9
   ld     de, (var_D238)               ; 00:072D - ED 5B 38 D2
   ld     b, $07                       ; 00:0731 - 06 07

addr_00733:
   ld     a, (hl)                      ; 00:0733 - 7E
   exx                                 ; 00:0734 - D9
   ld     c, a                         ; 00:0735 - 4F
   ld     b, $00                       ; 00:0736 - 06 00
   ld     hl, (var_D210)               ; 00:0738 - 2A 10 D2
   add    hl, bc                       ; 00:073B - 09
   rlca                                ; 00:073C - 07
   rlca                                ; 00:073D - 07
   rlca                                ; 00:073E - 07
   rlca                                ; 00:073F - 07
   ld     c, a                         ; 00:0740 - 4F
   and    $0F                          ; 00:0741 - E6 0F
   ld     b, a                         ; 00:0743 - 47
   ld     a, c                         ; 00:0744 - 79
   xor    b                            ; 00:0745 - A8
   ld     c, a                         ; 00:0746 - 4F
   ld     a, (hl)                      ; 00:0747 - 7E
   rrca                                ; 00:0748 - 0F
   rrca                                ; 00:0749 - 0F
   rrca                                ; 00:074A - 0F
   and    $10                          ; 00:074B - E6 10
   ld     hl, (g_FF_string_high_byte)  ; 00:074D - 2A 0E D2
   add    hl, bc                       ; 00:0750 - 09
   ld     bc, (var_D24F)               ; 00:0751 - ED 4B 4F D2
   add    hl, bc                       ; 00:0755 - 09
   ld     bc, $0004                    ; 00:0756 - 01 04 00
   ldi                                 ; 00:0759 - ED A0
   ld     (de), a                      ; 00:075B - 12
   inc    e                            ; 00:075C - 1C
   add    hl, bc                       ; 00:075D - 09
   ldi                                 ; 00:075E - ED A0
   ld     (de), a                      ; 00:0760 - 12
   inc    e                            ; 00:0761 - 1C
   inc    c                            ; 00:0762 - 0C
   add    hl, bc                       ; 00:0763 - 09
   ldi                                 ; 00:0764 - ED A0
   ld     (de), a                      ; 00:0766 - 12
   inc    e                            ; 00:0767 - 1C
   inc    c                            ; 00:0768 - 0C
   add    hl, bc                       ; 00:0769 - 09
   ldi                                 ; 00:076A - ED A0
   ld     (de), a                      ; 00:076C - 12
   inc    e                            ; 00:076D - 1C
   exx                                 ; 00:076E - D9
   add    hl, de                       ; 00:076F - 19
   djnz   addr_00733                   ; 00:0770 - 10 C1

addr_00772:
   bit    1, (iy+var_D202-IYBASE)      ; 00:0772 - FD CB 02 4E
   jp     z, addr_007DA                ; 00:0776 - CA DA 07
   bit    7, (iy+var_D200-IYBASE)      ; 00:0779 - FD CB 00 7E
   .IF 0
   ;; Original code
   jr     nz, addr_00786               ; 00:077D - 20 07
   ld     b, $06                       ; 00:077F - 06 06
   ld     c, $00                       ; 00:0781 - 0E 00
   jp     addr_00789                   ; 00:0783 - C3 89 07

addr_00786:
   ld     b, $00                       ; 00:0786 - 06 00
   ld     c, b                         ; 00:0788 - 48

   .ELSE
   ;; New code
   ;;
   ;; Misuse some constants for size.
   ;; Also we ate a branch, so invert the branch condition!
   ld bc, $0600     ; 077D 3
   jr z, addr_00789 ; 0780 2
   ld b, c          ; 0782 1
   ; 0789 -> 0783 - SAVING: 6 bytes
   .ENDIF

addr_00789:
   call   addr_008D5                   ; 00:0789 - CD D5 08
   ld     a, (g_vdp_scroll_y)          ; 00:078C - 3A 52 D2
   and    $1F                          ; 00:078F - E6 1F
   srl    a                            ; 00:0791 - CB 3F
   and    $FC                          ; 00:0793 - E6 FC
   ld     c, a                         ; 00:0795 - 4F
   ld     b, $00                       ; 00:0796 - 06 00
   ld     (g_FF_string_high_byte), bc  ; 00:0798 - ED 43 0E D2
   exx                                 ; 00:079C - D9
   ld     de, var_D100                 ; 00:079D - 11 00 D1
   exx                                 ; 00:07A0 - D9
   ld     b, $09                       ; 00:07A1 - 06 09

addr_007A3:
   ld     a, (hl)                      ; 00:07A3 - 7E
   exx                                 ; 00:07A4 - D9
   ld     c, a                         ; 00:07A5 - 4F
   ld     b, $00                       ; 00:07A6 - 06 00
   ld     hl, (var_D210)               ; 00:07A8 - 2A 10 D2
   add    hl, bc                       ; 00:07AB - 09
   rlca                                ; 00:07AC - 07
   rlca                                ; 00:07AD - 07
   rlca                                ; 00:07AE - 07
   rlca                                ; 00:07AF - 07
   ld     c, a                         ; 00:07B0 - 4F
   and    $0F                          ; 00:07B1 - E6 0F
   ld     b, a                         ; 00:07B3 - 47
   ld     a, c                         ; 00:07B4 - 79
   xor    b                            ; 00:07B5 - A8
   ld     c, a                         ; 00:07B6 - 4F
   ld     a, (hl)                      ; 00:07B7 - 7E
   rrca                                ; 00:07B8 - 0F
   rrca                                ; 00:07B9 - 0F
   rrca                                ; 00:07BA - 0F
   and    $10                          ; 00:07BB - E6 10
   ld     hl, (g_FF_string_high_byte)  ; 00:07BD - 2A 0E D2
   add    hl, bc                       ; 00:07C0 - 09
   ld     bc, (var_D24F)               ; 00:07C1 - ED 4B 4F D2
   add    hl, bc                       ; 00:07C5 - 09
   ldi                                 ; 00:07C6 - ED A0
   ld     (de), a                      ; 00:07C8 - 12
   inc    e                            ; 00:07C9 - 1C
   ldi                                 ; 00:07CA - ED A0
   ld     (de), a                      ; 00:07CC - 12
   inc    e                            ; 00:07CD - 1C
   ldi                                 ; 00:07CE - ED A0
   ld     (de), a                      ; 00:07D0 - 12
   inc    e                            ; 00:07D1 - 1C
   ldi                                 ; 00:07D2 - ED A0
   ld     (de), a                      ; 00:07D4 - 12
   inc    e                            ; 00:07D5 - 1C
   exx                                 ; 00:07D6 - D9
   inc    hl                           ; 00:07D7 - 23
   djnz   addr_007A3                   ; 00:07D8 - 10 C9

addr_007DA:
   ret                                 ; 00:07DA - C9

addr_007DB:
   bit    0, (iy+var_D202-IYBASE)      ; 00:07DB - FD CB 02 46
   jp     z, addr_00849                ; 00:07DF - CA 49 08
   exx                                 ; 00:07E2 - D9
   push   hl                           ; 00:07E3 - E5
   push   de                           ; 00:07E4 - D5
   push   bc                           ; 00:07E5 - C5
   ld     a, (g_vdp_scroll_y)          ; 00:07E6 - 3A 52 D2

   ;; Compute tilemap VRAM address.
   .IF 0
   ;; Original code
   and    $F8                          ; 00:07E9 - E6 F8
   ld     b, $00                       ; 00:07EB - 06 00
   add    a, a                         ; 00:07ED - 87
   rl     b                            ; 00:07EE - CB 10
   add    a, a                         ; 00:07F0 - 87
   rl     b                            ; 00:07F1 - CB 10
   add    a, a                         ; 00:07F3 - 87
   rl     b                            ; 00:07F4 - CB 10
   ld     c, a                         ; 00:07F6 - 4F
   ld     a, (g_vdp_scroll_x)          ; 00:07F7 - 3A 51 D2
   bit    6, (iy+var_D200-IYBASE)      ; 00:07FA - FD CB 00 76
   jr     z, addr_00802                ; 00:07FE - 28 02
   add    a, $08                       ; 00:0800 - C6 08

addr_00802:
   and    $F8                          ; 00:0802 - E6 F8
   srl    a                            ; 00:0804 - CB 3F
   srl    a                            ; 00:0806 - CB 3F
   add    a, c                         ; 00:0808 - 81
   ld     c, a                         ; 00:0809 - 4F
   ld     hl, $3800                    ; 00:080A - 21 00 38
   add    hl, bc                       ; 00:080D - 09
   set    6, h                         ; 00:080E - CB F4
   .ELSE

   ;; New code
   ;;
   ;; Swap HL and BC around.
   ;; ADD HL,HL is 1 cycle faster than ADD A,A / RL B.
   ;; It might be faster to use 3x RLCA than 3x ADD HL,HL, but it is definitely a bit bigger.
   and $F8                      ; 07E9 2
   ld h, $00                    ; 07EB 2
   ld l, a                      ; 07ED 1
   add hl, hl                   ; 07EE 1
   add hl, hl                   ; 07EF 1
   add hl, hl                   ; 07F0 1
   ld a, (g_vdp_scroll_x)       ; 07F1 3
   bit 6, (iy+var_D200-IYBASE)  ; 07F4 4
   jr z, +                      ; 07F8 2
      add a, $08                ; 07FA 2
   +:
   and $F8                      ; 07FC 2
   rrca                         ; 07FE 1
   rrca                         ; 07FF 1
   ld b, $78                    ; 0800 2
   ld c, a                      ; 0802 1
   add hl, bc                   ; 0803 1
   ; 0810 -> 0804 - SAVING: 12 bytes
   .ENDIF

   ld     bc, $0040                    ; 00:0810 - 01 40 00
   .IF 0
   ld     d, $7F                       ; 00:0813 - 16 7F
   ld     e, $07                       ; 00:0815 - 1E 07
   .ELSE
   ld de, $7F07
   ; SAVING: 1 byte
   .ENDIF
   exx                                 ; 00:0817 - D9
   ld     hl, var_D180                 ; 00:0818 - 21 80 D1
   ld     a, (g_vdp_scroll_y)          ; 00:081B - 3A 52 D2

   .IF 0
   and    $1F                          ; 00:081E - E6 1F
   srl    a                            ; 00:0820 - CB 3F
   srl    a                            ; 00:0822 - CB 3F
   srl    a                            ; 00:0824 - CB 3F
   ld     c, a                         ; 00:0826 - 4F
   ld     b, $00                       ; 00:0827 - 06 00
   add    hl, bc                       ; 00:0829 - 09
   add    hl, bc                       ; 00:082A - 09
   .ELSE
   and $18     ; 081E 2
   rrca        ; 0820 1
   rrca        ; 0821 1
   ;; One right rotate is omitted so we can premultiply A by 2.
   ld c, a     ; 0822 1
   ld b, $00   ; 0823 2
   add hl, bc  ; 0825 1
   ; 082B -> 0826 - SAVING: 5 bytes (and 27 cycles)
   .ENDIF

   .IF 0
   ld     b, $32                       ; 00:082B - 06 32
   ld     c, $BE                       ; 00:082D - 0E BE
   .ELSE
   ld bc, $32BE
   ; SAVING: 1 byte
   .ENDIF

addr_0082F:
   exx                                 ; 00:082F - D9
   ld     a, l                         ; 00:0830 - 7D
   out    ($BF), a                     ; 00:0831 - D3 BF
   ld     a, h                         ; 00:0833 - 7C
   out    ($BF), a                     ; 00:0834 - D3 BF
   add    hl, bc                       ; 00:0836 - 09
   ld     a, h                         ; 00:0837 - 7C
   cp     d                            ; 00:0838 - BA
   jp     nc, addr_008D0               ; 00:0839 - D2 D0 08

addr_0083C:
   exx                                 ; 00:083C - D9
   outi                                ; 00:083D - ED A3
   outi                                ; 00:083F - ED A3
   jp     nz, addr_0082F               ; 00:0841 - C2 2F 08
   exx                                 ; 00:0844 - D9
   pop    bc                           ; 00:0845 - C1
   pop    de                           ; 00:0846 - D1
   pop    hl                           ; 00:0847 - E1
   exx                                 ; 00:0848 - D9

addr_00849:
   bit    1, (iy+var_D202-IYBASE)      ; 00:0849 - FD CB 02 4E
   jp     z, addr_008CF                ; 00:084D - CA CF 08
   ld     a, (g_vdp_scroll_y)          ; 00:0850 - 3A 52 D2
   ld     b, $00                       ; 00:0853 - 06 00
   .IF 0
   srl    a                            ; 00:0855 - CB 3F
   srl    a                            ; 00:0857 - CB 3F
   srl    a                            ; 00:0859 - CB 3F
   .ELSE
   rrca
   rrca
   rrca
   and $1F
   ; SAVING: 1 byte
   .ENDIF
   bit    7, (iy+var_D200-IYBASE)      ; 00:085B - FD CB 00 7E
   jr     nz, addr_00863               ; 00:085F - 20 02
   add    a, $18                       ; 00:0861 - C6 18

addr_00863:
   cp     $1C                          ; 00:0863 - FE 1C
   jr     c, addr_00869                ; 00:0865 - 38 02
   sub    $1C                          ; 00:0867 - D6 1C

addr_00869:
   .IF 0
   add    a, a                         ; 00:0869 - 87
   add    a, a                         ; 00:086A - 87
   add    a, a                         ; 00:086B - 87
   add    a, a                         ; 00:086C - 87
   rl     b                            ; 00:086D - CB 10
   add    a, a                         ; 00:086F - 87
   rl     b                            ; 00:0870 - CB 10
   add    a, a                         ; 00:0872 - 87
   rl     b                            ; 00:0873 - CB 10
   ld     c, a                         ; 00:0875 - 4F
   .ELSE
   rrca
   rrca
   ld b, a
   and $C0
   ld c, a
   xor b
   ld b, a
   ; SAVING: 5 bytes
   .ENDIF
   ld     a, (g_vdp_scroll_x)          ; 00:0876 - 3A 51 D2
   add    a, $08                       ; 00:0879 - C6 08
   and    $F8                          ; 00:087B - E6 F8
   .IF 0
   srl    a                            ; 00:087D - CB 3F
   srl    a                            ; 00:087F - CB 3F
   .ELSE
   rrca
   rrca
   ; SAVING: 2 bytes
   .ENDIF
   add    a, c                         ; 00:0881 - 81
   ld     c, a                         ; 00:0882 - 4F
   ld     hl, $3800                    ; 00:0883 - 21 00 38
   add    hl, bc                       ; 00:0886 - 09
   set    6, h                         ; 00:0887 - CB F4
   ex     de, hl                       ; 00:0889 - EB
   ld     hl, var_D100                 ; 00:088A - 21 00 D1
   ld     a, (g_vdp_scroll_x)          ; 00:088D - 3A 51 D2
   .IF 0
   and    $1F                          ; 00:0890 - E6 1F
   add    a, $08                       ; 00:0892 - C6 08
   srl    a                            ; 00:0894 - CB 3F
   srl    a                            ; 00:0896 - CB 3F
   srl    a                            ; 00:0898 - CB 3F
   ld     c, a                         ; 00:089A - 4F
   ld     b, $00                       ; 00:089B - 06 00
   add    hl, bc                       ; 00:089D - 09
   add    hl, bc                       ; 00:089E - 09
   .ELSE
   and $18
   add a, $08
   rrca
   rrca
   ld c, a
   ld b, $00
   add hl, bc
   ; SAVING: 5 bytes
   .ENDIF
   ld     a, e                         ; 00:089F - 7B
   and    $C0                          ; 00:08A0 - E6 C0
   ld     (g_FF_string_high_byte), a   ; 00:08A2 - 32 0E D2
   ld     a, e                         ; 00:08A5 - 7B
   out    ($BF), a                     ; 00:08A6 - D3 BF
   and    $3F                          ; 00:08A8 - E6 3F
   ld     e, a                         ; 00:08AA - 5F
   ld     a, d                         ; 00:08AB - 7A
   out    ($BF), a                     ; 00:08AC - D3 BF
   .IF 0
   ld     b, $3E                       ; 00:08AE - 06 3E
   ld     c, $BE                       ; 00:08B0 - 0E BE
   .ELSE
   ld bc, $3EBE
   ; SAVING: 1 byte
   .ENDIF

addr_008B2:
   bit    6, e                         ; 00:08B2 - CB 73
   jr     nz, addr_008C0               ; 00:08B4 - 20 0A
   inc    e                            ; 00:08B6 - 1C
   inc    e                            ; 00:08B7 - 1C
   outi                                ; 00:08B8 - ED A3
   outi                                ; 00:08BA - ED A3
   jp     nz, addr_008B2               ; 00:08BC - C2 B2 08
   ret                                 ; 00:08BF - C9

addr_008C0:
   ld     a, (g_FF_string_high_byte)   ; 00:08C0 - 3A 0E D2
   out    ($BF), a                     ; 00:08C3 - D3 BF
   ld     a, d                         ; 00:08C5 - 7A
   out    ($BF), a                     ; 00:08C6 - D3 BF

addr_008C8:
   outi                                ; 00:08C8 - ED A3
   outi                                ; 00:08CA - ED A3
   jp     nz, addr_008C8               ; 00:08CC - C2 C8 08

addr_008CF:
   ret                                 ; 00:08CF - C9

addr_008D0:
   sub    e                            ; 00:08D0 - 93
   ld     h, a                         ; 00:08D1 - 67
   jp     addr_0083C                   ; 00:08D2 - C3 3C 08

addr_008D5:
.IF 0
   ;;
   ;; Original code
   ;;
   ld     a, (var_D238)                ; 00:08D5 - 3A 38 D2
   rlca                                ; 00:08D8 - 07
   jr     c, addr_008E7                ; 00:08D9 - 38 0C
   rlca                                ; 00:08DB - 07
   jr     c, addr_008FD                ; 00:08DC - 38 1F
   rlca                                ; 00:08DE - 07
   jr     c, addr_00917                ; 00:08DF - 38 36
   rlca                                ; 00:08E1 - 07
   jr     c, addr_00935                ; 00:08E2 - 38 51
   jp     addr_00957                   ; 00:08E4 - C3 57 09

addr_008E7:
   ld     a, (var_D258)                ; 00:08E7 - 3A 58 D2
   add    a, b                         ; 00:08EA - 80
   ld     e, $00                       ; 00:08EB - 1E 00
   srl    a                            ; 00:08ED - CB 3F
   rr     e                            ; 00:08EF - CB 1B
   ld     d, a                         ; 00:08F1 - 57
   ld     a, (var_D257)                ; 00:08F2 - 3A 57 D2
   add    a, c                         ; 00:08F5 - 81
   add    a, e                         ; 00:08F6 - 83
   ld     e, a                         ; 00:08F7 - 5F
   ld     hl, var_C000                 ; 00:08F8 - 21 00 C0
   add    hl, de                       ; 00:08FB - 19
   ret                                 ; 00:08FC - C9

addr_008FD:
   ld     a, (var_D258)                ; 00:08FD - 3A 58 D2
   add    a, b                         ; 00:0900 - 80
   ld     e, $00                       ; 00:0901 - 1E 00
   srl    a                            ; 00:0903 - CB 3F
   rr     e                            ; 00:0905 - CB 1B
   srl    a                            ; 00:0907 - CB 3F
   rr     e                            ; 00:0909 - CB 1B
   ld     d, a                         ; 00:090B - 57
   ld     a, (var_D257)                ; 00:090C - 3A 57 D2
   add    a, c                         ; 00:090F - 81
   add    a, e                         ; 00:0910 - 83
   ld     e, a                         ; 00:0911 - 5F
   ld     hl, var_C000                 ; 00:0912 - 21 00 C0
   add    hl, de                       ; 00:0915 - 19
   ret                                 ; 00:0916 - C9

addr_00917:
   ld     a, (var_D258)                ; 00:0917 - 3A 58 D2
   add    a, b                         ; 00:091A - 80
   ld     e, $00                       ; 00:091B - 1E 00
   srl    a                            ; 00:091D - CB 3F
   rr     e                            ; 00:091F - CB 1B
   srl    a                            ; 00:0921 - CB 3F
   rr     e                            ; 00:0923 - CB 1B
   srl    a                            ; 00:0925 - CB 3F
   rr     e                            ; 00:0927 - CB 1B
   ld     d, a                         ; 00:0929 - 57
   ld     a, (var_D257)                ; 00:092A - 3A 57 D2
   add    a, c                         ; 00:092D - 81
   add    a, e                         ; 00:092E - 83
   ld     e, a                         ; 00:092F - 5F
   ld     hl, var_C000                 ; 00:0930 - 21 00 C0
   add    hl, de                       ; 00:0933 - 19
   ret                                 ; 00:0934 - C9

addr_00935:
   ld     a, (var_D258)                ; 00:0935 - 3A 58 D2
   add    a, b                         ; 00:0938 - 80
   ld     e, $00                       ; 00:0939 - 1E 00
   srl    a                            ; 00:093B - CB 3F
   rr     e                            ; 00:093D - CB 1B
   srl    a                            ; 00:093F - CB 3F
   rr     e                            ; 00:0941 - CB 1B
   srl    a                            ; 00:0943 - CB 3F
   rr     e                            ; 00:0945 - CB 1B
   srl    a                            ; 00:0947 - CB 3F
   rr     e                            ; 00:0949 - CB 1B
   ld     d, a                         ; 00:094B - 57
   ld     a, (var_D257)                ; 00:094C - 3A 57 D2
   add    a, c                         ; 00:094F - 81
   add    a, e                         ; 00:0950 - 83
   ld     e, a                         ; 00:0951 - 5F
   ld     hl, var_C000                 ; 00:0952 - 21 00 C0
   add    hl, de                       ; 00:0955 - 19
   ret                                 ; 00:0956 - C9

addr_00957:
   ld     a, (var_D258)                ; 00:0957 - 3A 58 D2
   add    a, b                         ; 00:095A - 80
   ld     d, a                         ; 00:095B - 57
   ld     a, (var_D257)                ; 00:095C - 3A 57 D2
   add    a, c                         ; 00:095F - 81
   ld     e, a                         ; 00:0960 - 5F
   ld     hl, var_C000                 ; 00:0961 - 21 00 C0
   add    hl, de                       ; 00:0964 - 19
   ret                                 ; 00:0965 - C9

.ELSE
   ;;
   ;; New code
   ;;
   ld hl, var_D258
   ld a, (hl)
   add a, b
   ld d, a
   ld a, (var_D238)
   and a
   jr z, +
   ld e, a
   xor a
   -:
      srl d
      rra
      rlc e
      jp nc, -
   +:
   add a, c
   dec l  ; HL = var_D257
   add a, (hl)
   ld e, a
   ld hl, var_C000
   add hl, de
   ret
   ; 1072 -> 1186
   ; SAVING: 114 bytes
.ENDIF

addr_00966:
   di                                  ; 00:0966 - F3
   ld     a, $04                       ; 00:0967 - 3E 04
   .IF 0
   ;; BUGFIX: PAGERACE: Race condition, defeatable with a well-timed interrupt. Swapped ops around to fix.
   ld     (g_committed_rompage_1), a   ; 00:096C - 32 35 D2
   ld     (rompage_1), a               ; 00:0969 - 32 FE FF
   ld     a, $05                       ; 00:096F - 3E 05
   ;; BUGFIX: PAGERACE: Race condition, defeatable with a well-timed interrupt. Swapped ops around to fix.
   ld     (g_committed_rompage_2), a   ; 00:0974 - 32 36 D2
   ld     (rompage_2), a               ; 00:0971 - 32 FF FF
   .ELSE
   call set_slot_1_2
   .ENDIF
   ld     bc, $0000                    ; 00:0977 - 01 00 00
   call   addr_008D5                   ; 00:097A - CD D5 08
   ld     de, $3800                    ; 00:097D - 11 00 38
   ld     b, $06                       ; 00:0980 - 06 06

addr_00982:
   push   bc                           ; 00:0982 - C5
   push   hl                           ; 00:0983 - E5
   push   de                           ; 00:0984 - D5
   ld     b, $08                       ; 00:0985 - 06 08

addr_00987:
   push   bc                           ; 00:0987 - C5
   push   hl                           ; 00:0988 - E5
   push   de                           ; 00:0989 - D5
   ld     a, (hl)                      ; 00:098A - 7E
   exx                                 ; 00:098B - D9
   ld     e, a                         ; 00:098C - 5F
   .IF 0
   ld     a, (var_D2D4)                ; 00:098D - 3A D4 D2
   add    a, a                         ; 00:0990 - 87
   ld     c, a                         ; 00:0991 - 4F
   ld     b, $00                       ; 00:0992 - 06 00
   ld     hl, PTRLUT_level_tile_flags  ; 00:0994 - 21 65 3A
   add    hl, bc                       ; 00:0997 - 09
   ld     a, (hl)                      ; 00:0998 - 7E
   inc    hl                           ; 00:0999 - 23
   ld     h, (hl)                      ; 00:099A - 66
   ld     l, a                         ; 00:099B - 6F
   .ELSE
   call fetch_PTRLUT_level_tile_flags
   .ENDIF
   ld     d, $00                       ; 00:099C - 16 00
   add    hl, de                       ; 00:099E - 19
   ld     a, (hl)                      ; 00:099F - 7E
   rrca                                ; 00:09A0 - 0F
   rrca                                ; 00:09A1 - 0F
   rrca                                ; 00:09A2 - 0F
   and    $10                          ; 00:09A3 - E6 10
   ld     c, a                         ; 00:09A5 - 4F
   exx                                 ; 00:09A6 - D9
   ld     l, (hl)                      ; 00:09A7 - 6E
   ld     h, $00                       ; 00:09A8 - 26 00
   add    hl, hl                       ; 00:09AA - 29
   add    hl, hl                       ; 00:09AB - 29
   add    hl, hl                       ; 00:09AC - 29
   add    hl, hl                       ; 00:09AD - 29
   ld     bc, (var_D24F)               ; 00:09AE - ED 4B 4F D2
   add    hl, bc                       ; 00:09B2 - 09
   ex     de, hl                       ; 00:09B3 - EB
   ld     b, $04                       ; 00:09B4 - 06 04

addr_009B6:
   ld     a, l                         ; 00:09B6 - 7D
   out    ($BF), a                     ; 00:09B7 - D3 BF
   ld     a, h                         ; 00:09B9 - 7C
   or     $40                          ; 00:09BA - F6 40
   out    ($BF), a                     ; 00:09BC - D3 BF
   ld     a, (de)                      ; 00:09BE - 1A
   out    ($BE), a                     ; 00:09BF - D3 BE
   inc    de                           ; 00:09C1 - 13
   exx                                 ; 00:09C2 - D9
   ld     a, c                         ; 00:09C3 - 79
   exx                                 ; 00:09C4 - D9
   out    ($BE), a                     ; 00:09C5 - D3 BE
   nop                                 ; 00:09C7 - 00
   nop                                 ; 00:09C8 - 00
   ld     a, (de)                      ; 00:09C9 - 1A
   out    ($BE), a                     ; 00:09CA - D3 BE
   inc    de                           ; 00:09CC - 13
   exx                                 ; 00:09CD - D9
   ld     a, c                         ; 00:09CE - 79
   exx                                 ; 00:09CF - D9
   out    ($BE), a                     ; 00:09D0 - D3 BE
   nop                                 ; 00:09D2 - 00
   nop                                 ; 00:09D3 - 00
   ld     a, (de)                      ; 00:09D4 - 1A
   out    ($BE), a                     ; 00:09D5 - D3 BE
   inc    de                           ; 00:09D7 - 13
   exx                                 ; 00:09D8 - D9
   ld     a, c                         ; 00:09D9 - 79
   exx                                 ; 00:09DA - D9
   out    ($BE), a                     ; 00:09DB - D3 BE
   nop                                 ; 00:09DD - 00
   nop                                 ; 00:09DE - 00
   ld     a, (de)                      ; 00:09DF - 1A
   out    ($BE), a                     ; 00:09E0 - D3 BE
   inc    de                           ; 00:09E2 - 13
   exx                                 ; 00:09E3 - D9
   ld     a, c                         ; 00:09E4 - 79
   exx                                 ; 00:09E5 - D9
   out    ($BE), a                     ; 00:09E6 - D3 BE
   ld     a, b                         ; 00:09E8 - 78
   ld     bc, $0040                    ; 00:09E9 - 01 40 00
   add    hl, bc                       ; 00:09EC - 09
   ld     b, a                         ; 00:09ED - 47
   djnz   addr_009B6                   ; 00:09EE - 10 C6
   pop    de                           ; 00:09F0 - D1
   pop    hl                           ; 00:09F1 - E1
   inc    hl                           ; 00:09F2 - 23
   ld     bc, $0008                    ; 00:09F3 - 01 08 00
   ex     de, hl                       ; 00:09F6 - EB
   add    hl, bc                       ; 00:09F7 - 09
   ex     de, hl                       ; 00:09F8 - EB
   pop    bc                           ; 00:09F9 - C1
   djnz   addr_00987                   ; 00:09FA - 10 8B
   pop    de                           ; 00:09FC - D1
   pop    hl                           ; 00:09FD - E1
   ld     bc, (var_D238)               ; 00:09FE - ED 4B 38 D2
   add    hl, bc                       ; 00:0A02 - 09
   ex     de, hl                       ; 00:0A03 - EB
   ld     bc, $0100                    ; 00:0A04 - 01 00 01
   add    hl, bc                       ; 00:0A07 - 09
   ex     de, hl                       ; 00:0A08 - EB
   pop    bc                           ; 00:0A09 - C1
   dec    b                            ; 00:0A0A - 05
   jp     nz, addr_00982               ; 00:0A0B - C2 82 09
   ei                                  ; 00:0A0E - FB
   ret                                 ; 00:0A0F - C9

unpack_level_layout_into_ram:
   ld     de, var_C000                 ; 00:0A10 - 11 00 C0
.IF 1
   ;; Optimising this function should be a rite of passage.
   ;; Pre-decrement so we only need to read the top bit of B.
   ;; BIT takes 8 cycles, the same amount as LD A, B / OR C but this also leaves the A register alone.
---:
   dec bc          ; 0A13 1
--:
   ;; Check count
   bit 7, b        ; 0A15 2
   ret nz          ; 0A17 1
   ;; Stash current and copy
   ld a, (hl)      ; 0A18 1
   ldi             ; 0A19 2
   ;; If there is no difference in the next one, then loop.
   cp (hl)         ; 0A1B 1
   jr nz, --       ; 0A1D 2
   ;; Check count, again, just in case the above overflowed.
   bit 7, b        ; 0A1F 2
   ret nz          ; 0A21 1
   ;; No more length checks should be needed. If they are, the input is screwed up.
   ;; Take note that neither this nor the old version protects against the *output* overflowing.
   ;; We need to save BC as we'll be making use of B here.
   ;; A = the byte we wish to copy.
   push bc         ; 0A22 1
      ;; Advance past the values in the `cp (hl)` op.
      inc hl          ; 0A23 1
      ;; Read the length.
      ld b, (hl)      ; 0A24 1
      inc hl          ; 0A25 1
      -:
         ld (de), a      ; 0A26 1
         inc de          ; 0A27 1
         djnz -          ; 0A28 2
   pop bc          ; 0A2A 1
   dec bc          ; 0A2B 1
   jr ---          ; 0A2C 2 - sneak an extra DEC BC
   ;; 0A40 -> 0A2E - SAVING: 18 bytes
   ;; Note, the original uses JP for speed, so a fair comparison might be a 16-byte saving.
   ;; But it also uses IY, so we can probably take the hit with JR anyway.

   ;; Let's do a cycle count compare anyway...
   ;; Original -> Register instead of IY -> New
   ;; - Literal:  95 ->  65 ->  54
   ;; - Copy:    152 -> 122 -> 120 (+25*N for all cases as the copy loop is identical)
   ;; So basically, always faster, and a lot smaller.
   ;; Also if we simply had a spare register then the original code would save 6 bytes.

.ELSE
--:
   ld     a, (hl)                      ; 00:0A13 - 7E
   cpl                                 ; 00:0A14 - 2F
   ld     (iy+g_last_rle_byte-IYBASE), a  ; 00:0A15 - FD 77 01

-:
   ld     a, (hl)                      ; 00:0A18 - 7E
   cp     (iy+g_last_rle_byte-IYBASE)  ; 00:0A19 - FD BE 01
   jr     z, +                         ; 00:0A1C - 28 0D
   ld     (de), a                      ; 00:0A1E - 12
   ld     (iy+g_last_rle_byte-IYBASE), a  ; 00:0A1F - FD 77 01
   inc    hl                           ; 00:0A22 - 23
   inc    de                           ; 00:0A23 - 13
   dec    bc                           ; 00:0A24 - 0B
   ld     a, b                         ; 00:0A25 - 78
   or     c                            ; 00:0A26 - B1
   jp     nz, -                        ; 00:0A27 - C2 18 0A
   ret                                 ; 00:0A2A - C9

+:
   dec    bc                           ; 00:0A2B - 0B
   ld     a, b                         ; 00:0A2C - 78
   or     c                            ; 00:0A2D - B1
   ret    z                            ; 00:0A2E - C8
   ld     a, (hl)                      ; 00:0A2F - 7E
   inc    hl                           ; 00:0A30 - 23
   push   bc                           ; 00:0A31 - C5
   ld     b, (hl)                      ; 00:0A32 - 46

-:
   ld     (de), a                      ; 00:0A33 - 12
   inc    de                           ; 00:0A34 - 13
   djnz   -                            ; 00:0A35 - 10 FC
   pop    bc                           ; 00:0A37 - C1
   inc    hl                           ; 00:0A38 - 23
   dec    bc                           ; 00:0A39 - 0B
   ld     a, b                         ; 00:0A3A - 78
   or     c                            ; 00:0A3B - B1
   jp     nz, --                       ; 00:0A3C - C2 13 0A
   ret                                 ; 00:0A3F - C9
.ENDIF

addr_00A40:
   ld     a, $01                       ; 00:0A40 - 3E 01
   .IF 0
   ;; BUGFIX: PAGERACE: Race condition, defeatable with a well-timed interrupt. Swapped ops around to fix.
   ld     (g_committed_rompage_1), a   ; 00:0A45 - 32 35 D2
   ld     (rompage_1), a               ; 00:0A42 - 32 FE FF
   ld     a, $02                       ; 00:0A48 - 3E 02
   ld     (g_committed_rompage_2), a   ; 00:0A4D - 32 36 D2
   ld     (rompage_2), a               ; 00:0A4A - 32 FF FF
   .ELSE
   call set_slot_1_2
   .ENDIF
   ld     a, (iy+g_sprite_count-IYBASE)  ; 00:0A50 - FD 7E 0A
   res    0, (iy+var_D200-IYBASE)      ; 00:0A53 - FD CB 00 86
   call   wait_until_irq_ticked        ; 00:0A57 - CD 1C 03
   ld     (iy+g_sprite_count-IYBASE), a  ; 00:0A5A - FD 77 0A
   .IF 0
   ld     b, $04                       ; 00:0A5D - 06 04
   .ELSE
   ;; C is now otherwise unused, so we can avoid a PUSH BC.
   ;; Savings noted in the former-DJNZ.
   ld c, $04
   .ENDIF

addr_00A5F:
   .IF 0
   ;; See above, B is safe now.
   push   bc                           ; 00:0A5F - C5
   .ENDIF
   ld     hl, (var_D230)               ; 00:0A60 - 2A 30 D2
   ld     de, var_D3BC                 ; 00:0A63 - 11 BC D3
   .IF 0
   .ELSE
   push de
   .ENDIF
   ld     b, $10                       ; 00:0A66 - 06 10
   call   palette_fade_to_black        ; 00:0A68 - CD 90 0A
   ld     hl, (var_D232)               ; 00:0A6B - 2A 32 D2
   ld     b, $10                       ; 00:0A6E - 06 10
   call   palette_fade_to_black        ; 00:0A70 - CD 90 0A
   .IF 0
   ld     hl, var_D3BC                 ; 00:0A73 - 21 BC D3
   .ELSE
   pop hl
   ; SAVING: 1 byte
   .ENDIF
   ld     a, $03                       ; 00:0A76 - 3E 03
   call   signal_load_palettes         ; 00:0A78 - CD 33 03
   ld     b, $0A                       ; 00:0A7B - 06 0A

addr_00A7D:
   ld     a, (iy+g_sprite_count-IYBASE)  ; 00:0A7D - FD 7E 0A
   res    0, (iy+var_D200-IYBASE)      ; 00:0A80 - FD CB 00 86
   call   wait_until_irq_ticked        ; 00:0A84 - CD 1C 03
   ld     (iy+g_sprite_count-IYBASE), a  ; 00:0A87 - FD 77 0A
   djnz   addr_00A7D                   ; 00:0A8A - 10 F1
   .IF 0
   ;; See above, B is safe now.
   pop    bc                           ; 00:0A8C - C1
   djnz   addr_00A5F                   ; 00:0A8D - 10 D0
   .ELSE
   dec c
   jr nz, addr_00A5F
   ; SAVING: 1 byte
   .ENDIF
   ret                                 ; 00:0A8F - C9

palette_fade_to_black:
.IF 0
   ;; Original code
   ld     a, (hl)                      ; 00:0A90 - 7E
   and    $03                          ; 00:0A91 - E6 03
   jr     z, @clamp_red                ; 00:0A93 - 28 01
   dec    a                            ; 00:0A95 - 3D

@clamp_red:
   ld     c, a                         ; 00:0A96 - 4F
   ld     a, (hl)                      ; 00:0A97 - 7E
   and    $0C                          ; 00:0A98 - E6 0C
   jr     z, @clamp_green              ; 00:0A9A - 28 02
   sub    $04                          ; 00:0A9C - D6 04

@clamp_green:
   or     c                            ; 00:0A9E - B1
   ld     c, a                         ; 00:0A9F - 4F
   ld     a, (hl)                      ; 00:0AA0 - 7E
   and    $30                          ; 00:0AA1 - E6 30
   jr     z, @clamp_blue               ; 00:0AA3 - 28 02
   sub    $10                          ; 00:0AA5 - D6 10

@clamp_blue:
   or     c                            ; 00:0AA7 - B1

.ELSE
   ;; New code
   ;; Use bit twiddling.
   ;; We only ever fade *down* to black
   ;; So we can do 3 positions, and set it to 0 if and only if the two bits in the palette are 0.
   ld a, (hl)  ; 0A90 1
   rrca        ; 0A91 1
   or (hl)     ; 0A92 1
   and $15     ; 0A93 2
   sub (hl)    ; 0A95 1
   neg         ; 0A96 2
   ; 0AA8 -> 0A98 - SAVING: 16 bytes
.ENDIF
   ld     (de), a                      ; 00:0AA8 - 12
   inc    hl                           ; 00:0AA9 - 23
   inc    de                           ; 00:0AAA - 13
   djnz   palette_fade_to_black        ; 00:0AAB - 10 E3
   ret                                 ; 00:0AAD - C9

addr_00AAE:
   ld     (var_D214), hl               ; 00:0AAE - 22 14 D2
   ld     hl, (var_D230)               ; 00:0AB1 - 2A 30 D2
   ld     de, var_D3BC                 ; 00:0AB4 - 11 BC D3
   ld     bc, $0020                    ; 00:0AB7 - 01 20 00
   ldir                                ; 00:0ABA - ED B0
   ld     a, $01                       ; 00:0ABC - 3E 01
   .IF 0
   ;; BUGFIX: PAGERACE: Race condition, defeatable with a well-timed interrupt. Swapped ops around to fix.
   ld     (g_committed_rompage_1), a   ; 00:0AC1 - 32 35 D2
   ld     (rompage_1), a               ; 00:0ABE - 32 FE FF
   ld     a, $02                       ; 00:0AC4 - 3E 02
   ;; BUGFIX: PAGERACE: Race condition, defeatable with a well-timed interrupt. Swapped ops around to fix.
   ld     (g_committed_rompage_2), a   ; 00:0AC9 - 32 36 D2
   ld     (rompage_2), a               ; 00:0AC6 - 32 FF FF
   .ELSE
   call set_slot_1_2
   .ENDIF
   ld     hl, var_D3BC                 ; 00:0ACC - 21 BC D3
   ld     a, $03                       ; 00:0ACF - 3E 03
   call   signal_load_palettes         ; 00:0AD1 - CD 33 03
   ld     c, (iy+g_sprite_count-IYBASE)  ; 00:0AD4 - FD 4E 0A
   ld     a, (g_saved_vdp_reg_01)      ; 00:0AD7 - 3A 19 D2
   or     $40                          ; 00:0ADA - F6 40
   ld     (g_saved_vdp_reg_01), a      ; 00:0ADC - 32 19 D2
   res    0, (iy+var_D200-IYBASE)      ; 00:0ADF - FD CB 00 86
   call   wait_until_irq_ticked        ; 00:0AE3 - CD 1C 03
   ld     (iy+g_sprite_count-IYBASE), c  ; 00:0AE6 - FD 71 0A
   ld     b, $09                       ; 00:0AE9 - 06 09

addr_00AEB:
   ld     a, (iy+g_sprite_count-IYBASE)  ; 00:0AEB - FD 7E 0A
   res    0, (iy+var_D200-IYBASE)      ; 00:0AEE - FD CB 00 86
   call   wait_until_irq_ticked        ; 00:0AF2 - CD 1C 03
   ld     (iy+g_sprite_count-IYBASE), a  ; 00:0AF5 - FD 77 0A
   djnz   addr_00AEB                   ; 00:0AF8 - 10 F1
   ld     b, $04                       ; 00:0AFA - 06 04

addr_00AFC:
   push   bc                           ; 00:0AFC - C5
   ld     hl, (var_D214)               ; 00:0AFD - 2A 14 D2
   ld     de, var_D3BC                 ; 00:0B00 - 11 BC D3
   ld     b, $20                       ; 00:0B03 - 06 20

addr_00B05:
   ;; FIXME: I need to find out where this code gets called! --GM
.IF 1
   ;; Original code
   push   bc                           ; 00:0B05 - C5
   ld     a, (hl)                      ; 00:0B06 - 7E
   and    $03                          ; 00:0B07 - E6 03
   ld     b, a                         ; 00:0B09 - 47
   ld     a, (de)                      ; 00:0B0A - 1A
   and    $03                          ; 00:0B0B - E6 03
   cp     b                            ; 00:0B0D - B8
   jr     z, addr_00B11                ; 00:0B0E - 28 01
   dec    a                            ; 00:0B10 - 3D

addr_00B11:
   ld     c, a                         ; 00:0B11 - 4F
   ld     a, (hl)                      ; 00:0B12 - 7E
   and    $0C                          ; 00:0B13 - E6 0C
   ld     b, a                         ; 00:0B15 - 47
   ld     a, (de)                      ; 00:0B16 - 1A
   and    $0C                          ; 00:0B17 - E6 0C
   cp     b                            ; 00:0B19 - B8
   jr     z, addr_00B1E                ; 00:0B1A - 28 02
   sub    $04                          ; 00:0B1C - D6 04

addr_00B1E:
   or     c                            ; 00:0B1E - B1
   ld     c, a                         ; 00:0B1F - 4F
   ld     a, (hl)                      ; 00:0B20 - 7E
   and    $30                          ; 00:0B21 - E6 30
   ld     b, a                         ; 00:0B23 - 47
   ld     a, (de)                      ; 00:0B24 - 1A
   and    $30                          ; 00:0B25 - E6 30
   cp     b                            ; 00:0B27 - B8
   jr     z, addr_00B2C                ; 00:0B28 - 28 02
   sub    $10                          ; 00:0B2A - D6 10

addr_00B2C:
   or     c                            ; 00:0B2C - B1
   ld     (de), a                      ; 00:0B2D - 12
   inc    hl                           ; 00:0B2E - 23
   inc    de                           ; 00:0B2F - 13
   pop    bc                           ; 00:0B30 - C1

.ELSE
   ;; New code
   ;; FIXME: NOT TESTED, NOT SURE WHERE IT'S CALLED --GM
   ;; Use bit twiddling, and leave the B register alone.
   ;; We only ever fade *down* to a given colour.
   ;; So we can do 3 positions, and set it to 0 if and only if the two bits in the palette are equal.
   ld a, (de)  ; 0B05 1
   xor (hl)    ; 0B06 1
   ld c, a     ; 0B07 1
   rrca        ; 0B08 1
   or c        ; 0B09 1
   and $15     ; 0B0A 2
   ld c, a     ; 0B0C 1
   ld a, (de)  ; 0B0D 1
   sub c       ; 0B0E 1
   ld (de), a  ; 0B0F 1
   inc hl      ; 0B10 1
   inc de      ; 0B11 1
   ; 0B31 -> 0B12 - SAVING: 31 bytes
.ENDIF
   djnz   addr_00B05                   ; 00:0B31 - 10 D2
   ld     hl, var_D3BC                 ; 00:0B33 - 21 BC D3
   ld     a, $03                       ; 00:0B36 - 3E 03
   call   signal_load_palettes         ; 00:0B38 - CD 33 03
   ld     b, $0A                       ; 00:0B3B - 06 0A

addr_00B3D:
   ld     a, (iy+g_sprite_count-IYBASE)  ; 00:0B3D - FD 7E 0A
   res    0, (iy+var_D200-IYBASE)      ; 00:0B40 - FD CB 00 86
   call   wait_until_irq_ticked        ; 00:0B44 - CD 1C 03
   ld     (iy+g_sprite_count-IYBASE), a  ; 00:0B47 - FD 77 0A
   djnz   addr_00B3D                   ; 00:0B4A - 10 F1
   pop    bc                           ; 00:0B4C - C1
   djnz   addr_00AFC                   ; 00:0B4D - 10 AD
   ret                                 ; 00:0B4F - C9

palette_fade_in_banks_01_02:
    ld     (var_D214), hl               ; 00:0B50 - 22 14 D2
    ld     hl, var_D3BC                 ; 00:0B53 - 21 BC D3
    ld     b, $20                       ; 00:0B56 - 06 20

addr_00B58:
@clear_starting_palette:
   ld     (hl), $00                    ; 00:0B58 - 36 00
   inc    hl                           ; 00:0B5A - 23
   djnz   @clear_starting_palette      ; 00:0B5B - 10 FB
   .IF 0
   jp     _palette_fade_up_common      ; 00:0B5D - C3 6E 0B
   .ELSE
   ;; Using JP instead of JR is a bit overkill here.
   jr _palette_fade_up_common
   ; SAVING: 1 byte
   .ENDIF

   ;; FIXME: This is only used for fading up to white. Get rid of the all-white palette and generate it here. --GM
palette_fade_up:
   .IF 0
   .ELSE
   ;; Hoist this one in. Appears 2 times total.
   ld hl, LUT_02047_all7F
   ;; SAVING: 3 bytes
   .ENDIF
   ld     (var_D214), hl               ; 00:0B60 - 22 14 D2
   ld     hl, (var_D230)               ; 00:0B63 - 2A 30 D2
   ld     de, var_D3BC                 ; 00:0B66 - 11 BC D3
   ld     bc, $0020                    ; 00:0B69 - 01 20 00
   ldir                                ; 00:0B6C - ED B0

_palette_fade_up_common:
   ld     a, $01                       ; 00:0B6E - 3E 01
   .IF 0
   ;; BUGFIX: PAGERACE: Race condition, defeatable with a well-timed interrupt. Swapped ops around to fix.
   ld     (g_committed_rompage_1), a   ; 00:0B73 - 32 35 D2
   ld     (rompage_1), a               ; 00:0B70 - 32 FE FF
   ld     a, $02                       ; 00:0B76 - 3E 02
   ;; BUGFIX: PAGERACE: Race condition, defeatable with a well-timed interrupt. Swapped ops around to fix.
   ld     (g_committed_rompage_2), a   ; 00:0B7B - 32 36 D2
   ld     (rompage_2), a               ; 00:0B78 - 32 FF FF
   .ELSE
   call set_slot_1_2
   .ENDIF
   ld     hl, var_D3BC                 ; 00:0B7E - 21 BC D3
   ld     a, $03                       ; 00:0B81 - 3E 03
   call   signal_load_palettes         ; 00:0B83 - CD 33 03
   ld     c, (iy+g_sprite_count-IYBASE)  ; 00:0B86 - FD 4E 0A
   ld     a, (g_saved_vdp_reg_01)      ; 00:0B89 - 3A 19 D2
   or     $40                          ; 00:0B8C - F6 40
   ld     (g_saved_vdp_reg_01), a      ; 00:0B8E - 32 19 D2
   res    0, (iy+var_D200-IYBASE)      ; 00:0B91 - FD CB 00 86
   call   wait_until_irq_ticked        ; 00:0B95 - CD 1C 03
   ld     (iy+g_sprite_count-IYBASE), c  ; 00:0B98 - FD 71 0A
   ld     b, $09                       ; 00:0B9B - 06 09

-:
   ld     a, (iy+g_sprite_count-IYBASE)  ; 00:0B9D - FD 7E 0A
   res    0, (iy+var_D200-IYBASE)      ; 00:0BA0 - FD CB 00 86
   call   wait_until_irq_ticked        ; 00:0BA4 - CD 1C 03
   ld     (iy+g_sprite_count-IYBASE), a  ; 00:0BA7 - FD 77 0A
   djnz   -                            ; 00:0BAA - 10 F1
   ld     b, $04                       ; 00:0BAC - 06 04

addr_00BAE:
--:
   push   bc                           ; 00:0BAE - C5
   ld     hl, (var_D214)               ; 00:0BAF - 2A 14 D2
   ld     de, var_D3BC                 ; 00:0BB2 - 11 BC D3
   ld     b, $20                       ; 00:0BB5 - 06 20

-:
   .IF 0
   ;; Original code
   push   bc                           ; 00:0BB7 - C5
   ld     a, (hl)                      ; 00:0BB8 - 7E
   and    $03                          ; 00:0BB9 - E6 03
   ld     b, a                         ; 00:0BBB - 47
   ld     a, (de)                      ; 00:0BBC - 1A
   and    $03                          ; 00:0BBD - E6 03
   cp     b                            ; 00:0BBF - B8
   jr     nc, @clamp_red               ; 00:0BC0 - 30 01
   inc    a                            ; 00:0BC2 - 3C

@clamp_red:
   ld     c, a                         ; 00:0BC3 - 4F
   ld     a, (hl)                      ; 00:0BC4 - 7E
   and    $0C                          ; 00:0BC5 - E6 0C
   ld     b, a                         ; 00:0BC7 - 47
   ld     a, (de)                      ; 00:0BC8 - 1A
   and    $0C                          ; 00:0BC9 - E6 0C
   cp     b                            ; 00:0BCB - B8
   jr     nc, @clamp_green             ; 00:0BCC - 30 02
   add    a, $04                       ; 00:0BCE - C6 04

@clamp_green:
   or     c                            ; 00:0BD0 - B1
   ld     c, a                         ; 00:0BD1 - 4F
   ld     a, (hl)                      ; 00:0BD2 - 7E
   and    $30                          ; 00:0BD3 - E6 30
   ld     b, a                         ; 00:0BD5 - 47
   ld     a, (de)                      ; 00:0BD6 - 1A
   and    $30                          ; 00:0BD7 - E6 30
   cp     b                            ; 00:0BD9 - B8
   jr     nc, @clamp_blue              ; 00:0BDA - 30 02
   add    a, $10                       ; 00:0BDC - C6 10

@clamp_blue:
   or     c                            ; 00:0BDE - B1
   ld     (de), a                      ; 00:0BDF - 12
   inc    hl                           ; 00:0BE0 - 23
   inc    de                           ; 00:0BE1 - 13
   pop    bc                           ; 00:0BE2 - C1

   .ELSE
   ;; New code
   ;; Use bit twiddling, and leave the B register alone.
   ;; We only ever fade *up* to a given colour.
   ;; So we can do 3 positions, and set it to 0 if and only if the two bits in the palette are equal.
   ld a, (de)  ; 0BB7 1
   xor (hl)    ; 0BB8 1
   ld c, a     ; 0BB9 1
   rrca        ; 0BBA 1
   or c        ; 0BBB 1
   and $15     ; 0BBC 2
   ld c, a     ; 0BBE 1
   ld a, (de)  ; 0BBF 1
   add a, c    ; 0BC0 1
   ld (de), a  ; 0BC1 1
   inc hl      ; 0BC2 1
   inc de      ; 0BC3 1
   ; 0BE3 -> 0BC4 - SAVING: 31 bytes
   .ENDIF

   djnz   -                            ; 00:0BE3 - 10 D2
   ld     hl, var_D3BC                 ; 00:0BE5 - 21 BC D3
   ld     a, $03                       ; 00:0BE8 - 3E 03
   call   signal_load_palettes         ; 00:0BEA - CD 33 03
   ld     b, $0A                       ; 00:0BED - 06 0A

-:
   ld     a, (iy+g_sprite_count-IYBASE)  ; 00:0BEF - FD 7E 0A
   res    0, (iy+var_D200-IYBASE)      ; 00:0BF2 - FD CB 00 86
   call   wait_until_irq_ticked        ; 00:0BF6 - CD 1C 03
   ld     (iy+g_sprite_count-IYBASE), a  ; 00:0BF9 - FD 77 0A
   djnz   -                            ; 00:0BFC - 10 F1
   pop    bc                           ; 00:0BFE - C1
   djnz   --                           ; 00:0BFF - 10 AD
   ret                                 ; 00:0C01 - C9

calc_level_offset_HL_and_mask_C:
   ld     a, (g_level)                 ; 00:0C02 - 3A 3E D2
   .IF 0
   ld     c, a                         ; 00:0C05 - 4F
   srl    a                            ; 00:0C06 - CB 3F
   srl    a                            ; 00:0C08 - CB 3F
   srl    a                            ; 00:0C0A - CB 3F
   ld     e, a                         ; 00:0C0C - 5F
   .ELSE
   ld e, a
   srl e
   srl e
   srl e
   ; SAVING: 1 byte
   .ENDIF
   ld     d, $00                       ; 00:0C0D - 16 00
   add    hl, de                       ; 00:0C0F - 19
   .IF 0
   ld     a, c                         ; 00:0C10 - 79
   .ENDIF
   ; SAVING: 1 byte
   ld     c, $01                       ; 00:0C11 - 0E 01
   and    $07                          ; 00:0C13 - E6 07
   ret    z                            ; 00:0C15 - C8
   ld     b, a                         ; 00:0C16 - 47
   .IF 0
   ld     a, c                         ; 00:0C17 - 79
   .ENDIF
   ; SAVING: 1 byte

   .IF 0
addr_00C18:
   rlca                                ; 00:0C18 - 07
   djnz   addr_00C18                   ; 00:0C19 - 10 FD
   ld     c, a                         ; 00:0C1B - 4F
   .ELSE
   -:
      rlc c
      djnz -
   .ENDIF
   ; At parity.
   ret                                 ; 00:0C1C - C9

UNK_00C1D:
   di                                  ; 00:0C1D - F3
   ld     a, $05                       ; 00:0C1E - 3E 05
   ld     (rompage_1), a               ; 00:0C20 - 32 FE FF
   ld     a, (var_D223)                ; 00:0C23 - 3A 23 D2
   and    $0F                          ; 00:0C26 - E6 0F
   add    a, a                         ; 00:0C28 - 87
   add    a, a                         ; 00:0C29 - 87
   add    a, a                         ; 00:0C2A - 87
   ld     e, a                         ; 00:0C2B - 5F
   ld     d, $00                       ; 00:0C2C - 16 00
   add    hl, de                       ; 00:0C2E - 19
   ex     de, hl                       ; 00:0C2F - EB
   ld     bc, $2B80                    ; 00:0C30 - 01 80 2B
   add    hl, bc                       ; 00:0C33 - 09
   ld     a, l                         ; 00:0C34 - 7D
   out    ($BF), a                     ; 00:0C35 - D3 BF
   ld     a, h                         ; 00:0C37 - 7C
   or     $40                          ; 00:0C38 - F6 40
   out    ($BF), a                     ; 00:0C3A - D3 BF
   ld     b, $04                       ; 00:0C3C - 06 04

-:
   .IF 0
   ld     a, (de)                      ; 00:0C3E - 1A
   out    ($BE), a                     ; 00:0C3F - D3 BE
   nop                                 ; 00:0C41 - 00
   nop                                 ; 00:0C42 - 00
   inc    de                           ; 00:0C43 - 13
   ld     a, (de)                      ; 00:0C44 - 1A
   out    ($BE), a                     ; 00:0C45 - D3 BE
   inc    de                           ; 00:0C47 - 13
   .ELSE
   ;; Minimum of 30 cycles, slightly above the floor of 28.
   ld a, (de)     ; 0C3E 1
   out ($BE), a   ; 0C3F 2
   inc de         ; 0C41 1
   ld a, (de)     ; 0C42 1
   inc de         ; 0C43 1
   out ($BE), a   ; 0C44 2
   ; 0C48 -> 0C46 - SAVING: 2 bytes
   .ENDIF
   djnz   -                            ; 00:0C48 - 10 F4
   ld     a, (g_committed_rompage_1)   ; 00:0C4A - 3A 35 D2
   ld     (rompage_1), a               ; 00:0C4D - 32 FE FF
   ei                                  ; 00:0C50 - FB
   ret                                 ; 00:0C51 - C9

addr_00C52:
   xor    a                            ; 00:0C52 - AF
   ld     (g_vdp_scroll_x), a          ; 00:0C53 - 32 51 D2
   ld     (g_vdp_scroll_y), a          ; 00:0C56 - 32 52 D2
   ld     a, $FF                       ; 00:0C59 - 3E FF
   ld     (var_D216), a                ; 00:0C5B - 32 16 D2
   ld     c, $01                       ; 00:0C5E - 0E 01
   ld     a, (g_level)                 ; 00:0C60 - 3A 3E D2
   cp     $12                          ; 00:0C63 - FE 12
   ret    nc                           ; 00:0C65 - D0
   cp     $09                          ; 00:0C66 - FE 09
   jr     c, addr_00C6C                ; 00:0C68 - 38 02
   ld     c, $02                       ; 00:0C6A - 0E 02

addr_00C6C:
   ld     a, (var_D216)                ; 00:0C6C - 3A 16 D2
   cp     c                            ; 00:0C6F - B9
   jp     z, addr_00D3F                ; 00:0C70 - CA 3F 0D
   ld     a, c                         ; 00:0C73 - 79
   ld     (var_D216), a                ; 00:0C74 - 32 16 D2
   dec    a                            ; 00:0C77 - 3D
   jr     nz, addr_00CDC               ; 00:0C78 - 20 62
   ld     a, (g_saved_vdp_reg_01)      ; 00:0C7A - 3A 19 D2
   and    $BF                          ; 00:0C7D - E6 BF
   ld     (g_saved_vdp_reg_01), a      ; 00:0C7F - 32 19 D2
   res    0, (iy+var_D200-IYBASE)      ; 00:0C82 - FD CB 00 86
   call   wait_until_irq_ticked        ; 00:0C86 - CD 1C 03
   ld     hl, ART_0C_0000              ; 00:0C89 - 21 00 00
   ld     de, $0000                    ; 00:0C8C - 11 00 00
   ld     a, $0C                       ; 00:0C8F - 3E 0C
   call   load_art                     ; 00:0C91 - CD 05 04
   ld     hl, ART_09_526B              ; 00:0C94 - 21 6B 52
   ld     de, $2000                    ; 00:0C97 - 11 00 20
   ld     a, $09                       ; 00:0C9A - 3E 09
   call   load_art                     ; 00:0C9C - CD 05 04
   ld     hl, ART_09_B92E              ; 00:0C9F - 21 2E B9
   ld     de, $3000                    ; 00:0CA2 - 11 00 30
   ld     a, $09                       ; 00:0CA5 - 3E 09
   call   load_art                     ; 00:0CA7 - CD 05 04
   .IF 0
   ld     a, $05                       ; 00:0CAA - 3E 05
   ;; BUGFIX: PAGERACE: Race condition, defeatable with a well-timed interrupt. Swapped ops around to fix.
   ld     (g_committed_rompage_1), a   ; 00:0CAF - 32 35 D2
   ld     (rompage_1), a               ; 00:0CAC - 32 FE FF
   .ENDIF
   ld     hl, ARTMAP_05_627E           ; 00:0CB2 - 21 7E 62
   ld     bc, $0178                    ; 00:0CB5 - 01 78 01
   ld     de, $3800                    ; 00:0CB8 - 11 00 38
   ld     a, $10                       ; 00:0CBB - 3E 10
   ld     (g_FF_string_high_byte), a   ; 00:0CBD - 32 0E D2
   call   unpack_art_tilemap_into_vram  ; 00:0CC0 - CD 01 05
   ld     hl, ARTMAP_05_63F6           ; 00:0CC3 - 21 F6 63
   ld     bc, $0145                    ; 00:0CC6 - 01 45 01
   ld     de, $3800                    ; 00:0CC9 - 11 00 38
   ld     a, $00                       ; 00:0CCC - 3E 00
   ld     (g_FF_string_high_byte), a   ; 00:0CCE - 32 0E D2
   call   unpack_art_tilemap_into_vram  ; 00:0CD1 - CD 01 05
   ld     hl, LUT_00F0E                ; 00:0CD4 - 21 0E 0F
   call   palette_fade_in_banks_01_02  ; 00:0CD7 - CD 50 0B
   jr     addr_00D3C                   ; 00:0CDA - 18 60

addr_00CDC:
   ld     a, (g_saved_vdp_reg_01)      ; 00:0CDC - 3A 19 D2
   and    $BF                          ; 00:0CDF - E6 BF
   ld     (g_saved_vdp_reg_01), a      ; 00:0CE1 - 32 19 D2
   res    0, (iy+var_D200-IYBASE)      ; 00:0CE4 - FD CB 00 86
   call   wait_until_irq_ticked        ; 00:0CE8 - CD 1C 03
   ld     hl, ART_0C_1801              ; 00:0CEB - 21 01 18
   ld     de, $0000                    ; 00:0CEE - 11 00 00
   ld     a, $0C                       ; 00:0CF1 - 3E 0C
   call   load_art                     ; 00:0CF3 - CD 05 04
   ld     hl, ART_09_5942              ; 00:0CF6 - 21 42 59
   ld     de, $2000                    ; 00:0CF9 - 11 00 20
   ld     a, $09                       ; 00:0CFC - 3E 09
   call   load_art                     ; 00:0CFE - CD 05 04
   ld     hl, ART_09_B92E              ; 00:0D01 - 21 2E B9
   ld     de, $3000                    ; 00:0D04 - 11 00 30
   ld     a, $09                       ; 00:0D07 - 3E 09
   call   load_art                     ; 00:0D09 - CD 05 04
   .IF 0
   ld     a, $05                       ; 00:0D0C - 3E 05
   ;; BUGFIX: PAGERACE: Race condition, defeatable with a well-timed interrupt. Swapped ops around to fix.
   ld     (g_committed_rompage_1), a   ; 00:0D11 - 32 35 D2
   ld     (rompage_1), a               ; 00:0D0E - 32 FE FF
   .ENDIF
   ld     hl, ARTMAP_05_653B           ; 00:0D14 - 21 3B 65
   ld     bc, $0170                    ; 00:0D17 - 01 70 01
   ld     de, $3800                    ; 00:0D1A - 11 00 38
   ld     a, $10                       ; 00:0D1D - 3E 10
   ld     (g_FF_string_high_byte), a   ; 00:0D1F - 32 0E D2
   call   unpack_art_tilemap_into_vram  ; 00:0D22 - CD 01 05
   ld     hl, ARTMAP_05_66AB           ; 00:0D25 - 21 AB 66
   ld     bc, $0153                    ; 00:0D28 - 01 53 01
   ld     de, $3800                    ; 00:0D2B - 11 00 38
   ld     a, $00                       ; 00:0D2E - 3E 00
   ld     (g_FF_string_high_byte), a   ; 00:0D30 - 32 0E D2
   call   unpack_art_tilemap_into_vram  ; 00:0D33 - CD 01 05
   ld     hl, LUT_00F2E                ; 00:0D36 - 21 2E 0F
   call   palette_fade_in_banks_01_02  ; 00:0D39 - CD 50 0B

addr_00D3C:
   ld     a, $07                       ; 00:0D3C - 3E 07
   rst    $18                          ; 00:0D3E - DF

addr_00D3F:
   call   addr_00E86                   ; 00:0D3F - CD 86 0E
   ld     a, (g_level)                 ; 00:0D42 - 3A 3E D2
   add    a, a                         ; 00:0D45 - 87
   ld     c, a                         ; 00:0D46 - 4F
   ld     b, $00                       ; 00:0D47 - 06 00
   ld     hl, LUT_level_titles         ; 00:0D49 - 21 09 12
   add    hl, bc                       ; 00:0D4C - 09
   ld     a, (hl)                      ; 00:0D4D - 7E
   inc    hl                           ; 00:0D4E - 23
   ld     h, (hl)                      ; 00:0D4F - 66
   ld     l, a                         ; 00:0D50 - 6F
   ld     a, $10                       ; 00:0D51 - 3E 10
   ld     (g_FF_string_high_byte), a   ; 00:0D53 - 32 0E D2
   call   print_positioned_FF_string   ; 00:0D56 - CD AF 05
   ld     a, (g_level)                 ; 00:0D59 - 3A 3E D2
   ld     c, a                         ; 00:0D5C - 4F
   add    a, a                         ; 00:0D5D - 87
   add    a, c                         ; 00:0D5E - 81
   ld     e, a                         ; 00:0D5F - 5F
   ld     d, $00                       ; 00:0D60 - 16 00
   ld     hl, LUT_level_map_info       ; 00:0D62 - 21 4E 0F
   add    hl, de                       ; 00:0D65 - 19
   ld     e, (hl)                      ; 00:0D66 - 5E
   inc    hl                           ; 00:0D67 - 23
   ld     d, (hl)                      ; 00:0D68 - 56
   inc    hl                           ; 00:0D69 - 23
   ld     (var_D210), de               ; 00:0D6A - ED 53 10 D2
   ld     a, (hl)                      ; 00:0D6E - 7E
   and    a                            ; 00:0D6F - A7
   jr     z, addr_00D80                ; 00:0D70 - 28 0E
   dec    a                            ; 00:0D72 - 3D
   add    a, a                         ; 00:0D73 - 87
   ld     e, a                         ; 00:0D74 - 5F
   ld     d, $00                       ; 00:0D75 - 16 00
   ld     hl, LUT_01201                ; 00:0D77 - 21 01 12
   add    hl, de                       ; 00:0D7A - 19
   ld     a, (hl)                      ; 00:0D7B - 7E
   inc    hl                           ; 00:0D7C - 23
   ld     h, (hl)                      ; 00:0D7D - 66
   ld     l, a                         ; 00:0D7E - 6F
   jp     (hl)                         ; 00:0D7F - E9

addr_00D80:
   ld     a, $01                       ; 00:0D80 - 3E 01
   ld     (g_FF_string_high_byte), a   ; 00:0D82 - 32 0E D2
   ld     bc, $012C                    ; 00:0D85 - 01 2C 01

addr_00D88:
   push   bc                           ; 00:0D88 - C5
   call   addr_00E86                   ; 00:0D89 - CD 86 0E
   ld     a, (g_FF_string_high_byte)   ; 00:0D8C - 3A 0E D2
   dec    a                            ; 00:0D8F - 3D
   ld     (g_FF_string_high_byte), a   ; 00:0D90 - 32 0E D2
   jr     nz, addr_00DB7               ; 00:0D93 - 20 22
   ld     hl, (var_D210)               ; 00:0D95 - 2A 10 D2

addr_00D98:
   ld     e, (hl)                      ; 00:0D98 - 5E
   inc    hl                           ; 00:0D99 - 23
   ld     d, (hl)                      ; 00:0D9A - 56
   inc    hl                           ; 00:0D9B - 23
   ld     c, (hl)                      ; 00:0D9C - 4E
   inc    hl                           ; 00:0D9D - 23
   ld     b, (hl)                      ; 00:0D9E - 46
   inc    hl                           ; 00:0D9F - 23
   ld     (var_D214), bc               ; 00:0DA0 - ED 43 14 D2
   ld     a, (hl)                      ; 00:0DA4 - 7E
   inc    hl                           ; 00:0DA5 - 23
   and    a                            ; 00:0DA6 - A7
   jr     nz, addr_00DAD               ; 00:0DA7 - 20 04
   ex     de, hl                       ; 00:0DA9 - EB
   jp     addr_00D98                   ; 00:0DAA - C3 98 0D

addr_00DAD:
   ld     (g_FF_string_high_byte), a   ; 00:0DAD - 32 0E D2
   ld     (var_D210), hl               ; 00:0DB0 - 22 10 D2
   ld     (var_D212), de               ; 00:0DB3 - ED 53 12 D2

addr_00DB7:
   ld     hl, (var_D214)               ; 00:0DB7 - 2A 14 D2
   push   hl                           ; 00:0DBA - E5
   ld     e, h                         ; 00:0DBB - 5C
   ld     h, $00                       ; 00:0DBC - 26 00
   ld     d, h                         ; 00:0DBE - 54
   ld     bc, (var_D212)               ; 00:0DBF - ED 4B 12 D2
   call   addr_0350F                   ; 00:0DC3 - CD 0F 35
   pop    hl                           ; 00:0DC6 - E1
   ld     (var_D214), hl               ; 00:0DC7 - 22 14 D2
   pop    bc                           ; 00:0DCA - C1
   dec    bc                           ; 00:0DCB - 0B
   ld     a, b                         ; 00:0DCC - 78
   or     c                            ; 00:0DCD - B1
   ret    z                            ; 00:0DCE - C8
   bit    5, (iy+g_inputs_player_1-IYBASE)  ; 00:0DCF - FD CB 03 6E
   jp     nz, addr_00D88               ; 00:0DD3 - C2 88 0D
   ret    nz                           ; 00:0DD6 - C0
   scf                                 ; 00:0DD7 - 37
   ret                                 ; 00:0DD8 - C9

addr_00DD9:
   ld     hl, $0000                    ; 00:0DD9 - 21 00 00
   ld     (g_FF_string_high_byte), hl  ; 00:0DDC - 22 0E D2
   ld     hl, $00DC                    ; 00:0DDF - 21 DC 00
   ld     de, $003C                    ; 00:0DE2 - 11 3C 00
   ld     b, $00                       ; 00:0DE5 - 06 00

addr_00DE7:
   call   addr_00E86                   ; 00:0DE7 - CD 86 0E
   ld     a, (iy+g_inputs_player_1-IYBASE)  ; 00:0DEA - FD 7E 03
   cp     $FF                          ; 00:0DED - FE FF
   jp     nz, addr_00D80               ; 00:0DEF - C2 80 0D
   push   bc                           ; 00:0DF2 - C5
   ld     bc, LUT_00E72                ; 00:0DF3 - 01 72 0E
   call   addr_00EDD                   ; 00:0DF6 - CD DD 0E
   pop    bc                           ; 00:0DF9 - C1
   dec    hl                           ; 00:0DFA - 2B
   djnz   addr_00DE7                   ; 00:0DFB - 10 EA
   ld     hl, $0000                    ; 00:0DFD - 21 00 00
   ld     (g_FF_string_high_byte), hl  ; 00:0E00 - 22 0E D2
   ld     hl, $FFD8                    ; 00:0E03 - 21 D8 FF
   ld     de, $0058                    ; 00:0E06 - 11 58 00
   ld     b, $80                       ; 00:0E09 - 06 80

addr_00E0B:
   call   addr_00E86                   ; 00:0E0B - CD 86 0E
   ld     a, (iy+g_inputs_player_1-IYBASE)  ; 00:0E0E - FD 7E 03
   cp     $FF                          ; 00:0E11 - FE FF
   jp     nz, addr_00D80               ; 00:0E13 - C2 80 0D
   push   bc                           ; 00:0E16 - C5
   ld     bc, LUT_00E7A                ; 00:0E17 - 01 7A 0E
   call   addr_00EDD                   ; 00:0E1A - CD DD 0E
   pop    bc                           ; 00:0E1D - C1
   inc    hl                           ; 00:0E1E - 23
   djnz   addr_00E0B                   ; 00:0E1F - 10 EA
   jp     addr_00D80                   ; 00:0E21 - C3 80 0D

addr_00E24:
   ld     hl, $0000                    ; 00:0E24 - 21 00 00
   ld     (g_FF_string_high_byte), hl  ; 00:0E27 - 22 0E D2
   ld     hl, $0080                    ; 00:0E2A - 21 80 00
   ld     de, $00C0                    ; 00:0E2D - 11 C0 00
   ld     b, $78                       ; 00:0E30 - 06 78

addr_00E32:
   call   addr_00E86                   ; 00:0E32 - CD 86 0E
   ld     a, (iy+g_inputs_player_1-IYBASE)  ; 00:0E35 - FD 7E 03
   cp     $FF                          ; 00:0E38 - FE FF
   jp     nz, addr_00D80               ; 00:0E3A - C2 80 0D
   push   bc                           ; 00:0E3D - C5
   ld     bc, LUT_00E82                ; 00:0E3E - 01 82 0E
   call   addr_00EDD                   ; 00:0E41 - CD DD 0E
   pop    bc                           ; 00:0E44 - C1
   dec    de                           ; 00:0E45 - 1B
   djnz   addr_00E32                   ; 00:0E46 - 10 EA
   jp     addr_00D80                   ; 00:0E48 - C3 80 0D

addr_00E4B:
   ld     hl, $0000                    ; 00:0E4B - 21 00 00
   ld     (g_FF_string_high_byte), hl  ; 00:0E4E - 22 0E D2
   ld     hl, $0078                    ; 00:0E51 - 21 78 00
   ld     de, $0000                    ; 00:0E54 - 11 00 00
   ld     b, $30                       ; 00:0E57 - 06 30

addr_00E59:
   call   addr_00E86                   ; 00:0E59 - CD 86 0E
   ld     a, (iy+g_inputs_player_1-IYBASE)  ; 00:0E5C - FD 7E 03
   cp     $FF                          ; 00:0E5F - FE FF
   jp     nz, addr_00D80               ; 00:0E61 - C2 80 0D
   push   bc                           ; 00:0E64 - C5
   ld     bc, LUT_00E82                ; 00:0E65 - 01 82 0E
   call   addr_00EDD                   ; 00:0E68 - CD DD 0E
   pop    bc                           ; 00:0E6B - C1
   inc    de                           ; 00:0E6C - 13
   djnz   addr_00E59                   ; 00:0E6D - 10 EA
   jp     addr_00D80                   ; 00:0E6F - C3 80 0D

LUT_00E72:
.dw addr_01129                                                                      ; 00:0E72
.db $04, $01                                                                        ; 00:0E74

LUT_00E76:
.dw addr_0113B                                                                      ; 00:0E76
.db $04, $00                                                                        ; 00:0E78

LUT_00E7A:
.dw addr_0114D                                                                      ; 00:0E7A
.db $04, $01                                                                        ; 00:0E7C

LUT_00E7E:
.dw addr_0115F                                                                      ; 00:0E7E
.db $04, $00                                                                        ; 00:0E80

LUT_00E82:
.dw addr_01183                                                                      ; 00:0E82
.db $04, $00                                                                        ; 00:0E84

.IF 0
.ELSE
calc_lives_output:
   ; Used in 2 places.
   ld a, (g_lives)
   ld l, $40-1
   -:
      inc l
      sub $0A
      jr nc, -
   add a, $4A
   ld h, a
   add hl, hl
   ld (g_HUD_FFstr_buf), hl
   ld a, $FF
   ld (var_D2C0), a
   ret
   ; SAVING: 61 bytes
.ENDIF

addr_00E86:
   push   hl                           ; 00:0E86 - E5
   push   de                           ; 00:0E87 - D5
   push   bc                           ; 00:0E88 - C5
   ld     hl, (g_FF_string_high_byte)  ; 00:0E89 - 2A 0E D2
   push   hl                           ; 00:0E8C - E5
   res    0, (iy+var_D200-IYBASE)      ; 00:0E8D - FD CB 00 86
   call   wait_until_irq_ticked        ; 00:0E91 - CD 1C 03
   ld     (iy+g_sprite_count-IYBASE), $00  ; 00:0E94 - FD 36 0A 00
   .IF 0
   ld     a, (g_lives)                 ; 00:0E98 - 3A 46 D2
   ld     l, a                         ; 00:0E9B - 6F
   ld     h, $00                       ; 00:0E9C - 26 00
   ld     c, $0A                       ; 00:0E9E - 0E 0A
   call   UNK_0060F_PURE_maybe_a_divide_function  ; 00:0EA0 - CD 0F 06
   ld     a, l                         ; 00:0EA3 - 7D
   add    a, a                         ; 00:0EA4 - 87
   add    a, $80                       ; 00:0EA5 - C6 80
   ld     (g_HUD_FFstr_buf), a         ; 00:0EA7 - 32 BE D2
   ld     c, $0A                       ; 00:0EAA - 0E 0A
   call   mul_hl_by_c_trashing_abcde_PURE  ; 00:0EAC - CD FC 05
   ex     de, hl                       ; 00:0EAF - EB
   ld     a, (g_lives)                 ; 00:0EB0 - 3A 46 D2
   ld     l, a                         ; 00:0EB3 - 6F
   ld     h, $00                       ; 00:0EB4 - 26 00
   and    a                            ; 00:0EB6 - A7
   sbc    hl, de                       ; 00:0EB7 - ED 52
   ld     a, l                         ; 00:0EB9 - 7D
   add    a, a                         ; 00:0EBA - 87
   add    a, $80                       ; 00:0EBB - C6 80
   ld     (var_D2BF), a                ; 00:0EBD - 32 BF D2
   ld     a, $FF                       ; 00:0EC0 - 3E FF
   ld     (var_D2C0), a                ; 00:0EC2 - 32 C0 D2
   .ELSE
   call calc_lives_output
   .ENDIF
   .IF 0
   ld     b, $A7                       ; 00:0EC5 - 06 A7
   ld     c, $28                       ; 00:0EC7 - 0E 28
   .ELSE
   ld bc, $A728
   ; SAVING: 1 byte
   .ENDIF
   ld     hl, var_D000                 ; 00:0EC9 - 21 00 D0
   ld     de, g_HUD_FFstr_buf          ; 00:0ECC - 11 BE D2
   call   draw_sprite_text             ; 00:0ECF - CD CC 35
   ld     (var_D23C), hl               ; 00:0ED2 - 22 3C D2
   pop    hl                           ; 00:0ED5 - E1
   ld     (g_FF_string_high_byte), hl  ; 00:0ED6 - 22 0E D2
   pop    bc                           ; 00:0ED9 - C1
   pop    de                           ; 00:0EDA - D1
   pop    hl                           ; 00:0EDB - E1
   ret                                 ; 00:0EDC - C9

addr_00EDD:
   push   hl                           ; 00:0EDD - E5
   push   de                           ; 00:0EDE - D5
   ld     l, c                         ; 00:0EDF - 69
   ld     h, b                         ; 00:0EE0 - 60
   ld     a, (var_D20F)                ; 00:0EE1 - 3A 0F D2
   add    a, a                         ; 00:0EE4 - 87
   add    a, a                         ; 00:0EE5 - 87
   ld     e, a                         ; 00:0EE6 - 5F
   ld     d, $00                       ; 00:0EE7 - 16 00
   add    hl, de                       ; 00:0EE9 - 19
   ld     c, (hl)                      ; 00:0EEA - 4E
   inc    hl                           ; 00:0EEB - 23
   ld     b, (hl)                      ; 00:0EEC - 46
   inc    hl                           ; 00:0EED - 23
   ld     a, (g_FF_string_high_byte)   ; 00:0EEE - 3A 0E D2
   cp     (hl)                         ; 00:0EF1 - BE
   jr     c, addr_00EFD                ; 00:0EF2 - 38 09
   inc    hl                           ; 00:0EF4 - 23
   ld     a, (hl)                      ; 00:0EF5 - 7E
   ld     (var_D20F), a                ; 00:0EF6 - 32 0F D2
   xor    a                            ; 00:0EF9 - AF
   ld     (g_FF_string_high_byte), a   ; 00:0EFA - 32 0E D2

addr_00EFD:
   pop    de                           ; 00:0EFD - D1
   pop    hl                           ; 00:0EFE - E1
   push   hl                           ; 00:0EFF - E5
   push   de                           ; 00:0F00 - D5
   call   addr_0350F                   ; 00:0F01 - CD 0F 35
   ld     a, (g_FF_string_high_byte)   ; 00:0F04 - 3A 0E D2
   inc    a                            ; 00:0F07 - 3C
   ld     (g_FF_string_high_byte), a   ; 00:0F08 - 32 0E D2
   pop    de                           ; 00:0F0B - D1
   pop    hl                           ; 00:0F0C - E1
   ret                                 ; 00:0F0D - C9

LUT_00F0E:
.db $35, $01, $06, $0B, $04, $08, $0C, $3D, $1F, $39, $2A, $14, $25, $2B, $00, $3F  ; 00:0F0E
.db $2B, $20, $35, $1B, $16, $2A, $00, $3F, $03, $0F, $01, $15, $00, $3C, $00, $3F  ; 00:0F1E

LUT_00F2E:
.db $25, $01, $06, $0B, $04, $18, $2C, $35, $2B, $10, $2A, $14, $15, $1F, $00, $3F  ; 00:0F2E
.db $2B, $20, $35, $1B, $16, $2A, $00, $3F, $03, $0F, $01, $15, $07, $2D, $00, $3F  ; 00:0F3E

LUT_level_map_info:
.dw level_map_00_chunks                                                             ; 00:0F4E
.db $00                                                                             ; 00:0F50
.dw level_map_01_chunks                                                             ; 00:0F51
.db $00                                                                             ; 00:0F53
.dw level_map_02_chunks                                                             ; 00:0F54
.db $01                                                                             ; 00:0F56
.dw level_map_03_chunks                                                             ; 00:0F57
.db $00                                                                             ; 00:0F59
.dw level_map_04_chunks                                                             ; 00:0F5A
.db $00                                                                             ; 00:0F5C
.dw level_map_05_chunks                                                             ; 00:0F5D
.db $02                                                                             ; 00:0F5F
.dw level_map_06_chunks                                                             ; 00:0F60
.db $00                                                                             ; 00:0F62
.dw level_map_07_chunks                                                             ; 00:0F63
.db $00                                                                             ; 00:0F65
.dw level_map_08_chunks                                                             ; 00:0F66
.db $03                                                                             ; 00:0F68
.dw level_map_09_chunks                                                             ; 00:0F69
.db $00                                                                             ; 00:0F6B
.dw level_map_0A_chunks                                                             ; 00:0F6C
.db $00                                                                             ; 00:0F6E
.dw level_map_0B_chunks                                                             ; 00:0F6F
.db $00                                                                             ; 00:0F71
.dw level_map_0C_chunks                                                             ; 00:0F72
.db $00                                                                             ; 00:0F74
.dw level_map_0D_chunks                                                             ; 00:0F75
.db $00                                                                             ; 00:0F77
.dw level_map_0E_chunks                                                             ; 00:0F78
.db $00                                                                             ; 00:0F7A
.dw level_map_0F_chunks                                                             ; 00:0F7B
.db $00                                                                             ; 00:0F7D
.dw level_map_10_chunks                                                             ; 00:0F7E
.db $00                                                                             ; 00:0F80
.dw level_map_10_chunks                                                             ; 00:0F81
.db $00                                                                             ; 00:0F83

level_map_00_chunks:
.dw addr_010BD                                                                      ; 00:0F84
.db $50, $68, $1E                                                                   ; 00:0F86
.dw addr_010AB                                                                      ; 00:0F89
.db $50, $68, $1E                                                                   ; 00:0F8B
.dw level_map_00_chunks                                                             ; 00:0F8E
.db $00, $00, $00                                                                   ; 00:0F90

level_map_01_chunks:
.dw addr_010CF                                                                      ; 00:0F93
.db $50, $60, $1E                                                                   ; 00:0F95
.dw addr_010AB                                                                      ; 00:0F98
.db $50, $60, $1E                                                                   ; 00:0F9A
.dw level_map_01_chunks                                                             ; 00:0F9D
.db $00, $00, $00                                                                   ; 00:0F9F

level_map_03_chunks:
.dw addr_010E1                                                                      ; 00:0FA2
.db $60, $60, $1E                                                                   ; 00:0FA4
.dw addr_010AB                                                                      ; 00:0FA7
.db $60, $60, $1E                                                                   ; 00:0FA9
.dw level_map_03_chunks                                                             ; 00:0FAC
.db $00, $00, $00                                                                   ; 00:0FAE

level_map_04_chunks:
.dw addr_010F3                                                                      ; 00:0FB1
.db $80, $50, $1E                                                                   ; 00:0FB3
.dw addr_010AB                                                                      ; 00:0FB6
.db $80, $50, $1E                                                                   ; 00:0FB8
.dw level_map_04_chunks                                                             ; 00:0FBB
.db $00, $00, $00                                                                   ; 00:0FBD

level_map_06_chunks:
.dw addr_01105                                                                      ; 00:0FC0
.db $70, $48, $1E                                                                   ; 00:0FC2
.dw addr_010AB                                                                      ; 00:0FC5
.db $70, $48, $1E                                                                   ; 00:0FC7
.dw level_map_06_chunks                                                             ; 00:0FCA
.db $00, $00, $00                                                                   ; 00:0FCC

level_map_07_chunks:
.dw addr_01117                                                                      ; 00:0FCF
.db $70, $38, $1E                                                                   ; 00:0FD1
.dw addr_010AB                                                                      ; 00:0FD4
.db $70, $38, $1E                                                                   ; 00:0FD6
.dw level_map_07_chunks                                                             ; 00:0FD9
.db $00, $00, $00                                                                   ; 00:0FDB

level_map_02_chunks:
.dw addr_01183                                                                      ; 00:0FDE
.db $58, $58, $08                                                                   ; 00:0FE0
.dw addr_01183                                                                      ; 00:0FE3
.db $58, $58, $08                                                                   ; 00:0FE5
.dw addr_01183                                                                      ; 00:0FE8
.db $58, $56, $08                                                                   ; 00:0FEA
.dw addr_01183                                                                      ; 00:0FED
.db $58, $56, $08                                                                   ; 00:0FEF
.dw addr_01183                                                                      ; 00:0FF2
.db $58, $55, $08                                                                   ; 00:0FF4
.dw addr_01183                                                                      ; 00:0FF7
.db $58, $55, $08                                                                   ; 00:0FF9
.dw addr_01183                                                                      ; 00:0FFC
.db $58, $56, $08                                                                   ; 00:0FFE
.dw addr_01183                                                                      ; 00:1001
.db $58, $56, $08                                                                   ; 00:1003
.dw level_map_02_chunks                                                             ; 00:1006
.db $00, $00, $00                                                                   ; 00:1008

level_map_09_chunks:
.dw addr_01195                                                                      ; 00:100B
.db $58, $68, $1E                                                                   ; 00:100D
.dw addr_010AB                                                                      ; 00:1010
.db $58, $68, $1E                                                                   ; 00:1012
.dw level_map_09_chunks                                                             ; 00:1015
.db $00, $00, $00                                                                   ; 00:1017

level_map_0A_chunks:
.dw addr_011A7                                                                      ; 00:101A
.db $68, $78, $1E                                                                   ; 00:101C
.dw addr_010AB                                                                      ; 00:101F
.db $68, $78, $1E                                                                   ; 00:1021
.dw level_map_0A_chunks                                                             ; 00:1024
.db $00, $00, $00                                                                   ; 00:1026

level_map_0C_chunks:
.dw addr_011B9                                                                      ; 00:1029
.db $70, $58, $1E                                                                   ; 00:102B
.dw addr_010AB                                                                      ; 00:102E
.db $70, $58, $1E                                                                   ; 00:1030
.dw level_map_0C_chunks                                                             ; 00:1033
.db $00, $00, $00                                                                   ; 00:1035

level_map_0D_chunks:
.dw addr_011CB                                                                      ; 00:1038
.db $78, $48, $1E                                                                   ; 00:103A
.dw addr_010AB                                                                      ; 00:103D
.db $78, $48, $1E                                                                   ; 00:103F
.dw level_map_0D_chunks                                                             ; 00:1042
.db $00, $00, $00                                                                   ; 00:1044

level_map_0F_chunks:
.dw addr_011DD                                                                      ; 00:1047
.db $68, $28, $1E                                                                   ; 00:1049
.dw addr_010AB                                                                      ; 00:104C
.db $68, $28, $1E                                                                   ; 00:104E
.dw level_map_0F_chunks                                                             ; 00:1051
.db $00, $00, $00                                                                   ; 00:1053

level_map_10_chunks:
.dw addr_011EF                                                                      ; 00:1056
.db $80, $28, $1E                                                                   ; 00:1058
.dw addr_011EF                                                                      ; 00:105B
.db $80, $26, $08                                                                   ; 00:105D
.dw addr_011EF                                                                      ; 00:1060
.db $80, $26, $08                                                                   ; 00:1062
.dw addr_011EF                                                                      ; 00:1065
.db $80, $25, $08                                                                   ; 00:1067
.dw addr_011EF                                                                      ; 00:106A
.db $80, $25, $08                                                                   ; 00:106C
.dw addr_011EF                                                                      ; 00:106F
.db $80, $26, $08                                                                   ; 00:1071
.dw addr_011EF                                                                      ; 00:1074
.db $80, $26, $08                                                                   ; 00:1076
.dw level_map_10_chunks                                                             ; 00:1079
.db $00, $00, $00                                                                   ; 00:107B

level_map_05_chunks:
.dw addr_01183                                                                      ; 00:107E
.db $80, $48, $08                                                                   ; 00:1080
.dw level_map_05_chunks                                                             ; 00:1083
.db $00, $00, $00                                                                   ; 00:1085

level_map_08_chunks:
.dw addr_01183                                                                      ; 00:1088
.db $78, $30, $08                                                                   ; 00:108A
.dw level_map_08_chunks                                                             ; 00:108D
.db $00, $00, $00                                                                   ; 00:108F

level_map_0B_chunks:
.dw addr_01183                                                                      ; 00:1092
.db $70, $60, $08                                                                   ; 00:1094
.dw level_map_0B_chunks                                                             ; 00:1097
.db $00, $00, $00                                                                   ; 00:1099

level_map_0E_chunks:
.dw addr_01129                                                                      ; 00:109C
.db $68, $40, $08                                                                   ; 00:109E
.dw addr_0113B                                                                      ; 00:10A1
.db $68, $40, $08                                                                   ; 00:10A3
.dw level_map_0E_chunks                                                             ; 00:10A6
.db $00, $00, $00                                                                   ; 00:10A8

addr_010AB:
.db $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF  ; 00:10AB
.db $FF, $FF                                                                        ; 00:10BB

addr_010BD:
.db $00, $02, $FF, $FF, $FF, $FF, $FE, $22, $24, $26, $28, $FF, $FF, $FF, $FF, $FF  ; 00:10BD
.db $FF, $FF                                                                        ; 00:10CD

addr_010CF:
.db $04, $06, $08, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF  ; 00:10CF
.db $FF, $FF                                                                        ; 00:10DF

addr_010E1:
.db $40, $42, $44, $46, $48, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF  ; 00:10E1
.db $FF, $FF                                                                        ; 00:10F1

addr_010F3:
.db $4A, $4C, $FF, $FF, $FF, $FF, $6A, $6C, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF  ; 00:10F3
.db $FF, $FF                                                                        ; 00:1103

addr_01105:
.db $60, $62, $64, $66, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF  ; 00:1105
.db $FF, $FF                                                                        ; 00:1115

addr_01117:
.db $FE, $FE, $0E, $FF, $FF, $FF, $2A, $2C, $2E, $FF, $FF, $FF, $FF, $FF, $FF, $FF  ; 00:1117
.db $FF, $FF                                                                        ; 00:1127

addr_01129:
.db $10, $12, $14, $16, $FF, $FF, $30, $32, $34, $36, $FF, $FF, $FF, $FF, $FF, $FF  ; 00:1129
.db $FF, $FF                                                                        ; 00:1139

addr_0113B:
.db $10, $12, $14, $18, $FF, $FF, $30, $32, $34, $38, $FF, $FF, $FF, $FF, $FF, $FF  ; 00:113B
.db $FF, $FF                                                                        ; 00:114B

addr_0114D:
.db $50, $54, $56, $58, $FF, $FF, $70, $74, $76, $78, $FF, $FF, $FF, $FF, $FF, $FF  ; 00:114D
.db $FF, $FF                                                                        ; 00:115D

addr_0115F:
.db $52, $54, $56, $58, $FF, $FF, $72, $74, $76, $78, $FF, $FF, $FF, $FF, $FF, $FF  ; 00:115F
.db $FF, $FF, $50, $54, $56, $58, $FF, $FF, $70, $74, $76, $78, $FF, $FF, $FF, $FF  ; 00:116F
.db $FF, $FF, $FF, $FF                                                              ; 00:117F

addr_01183:
.db $5A, $5C, $5E, $FF, $FF, $FF, $7A, $7C, $7E, $FF, $FF, $FF, $FF, $FF, $FF, $FF  ; 00:1183
.db $FF, $FF                                                                        ; 00:1193

addr_01195:
.db $00, $02, $FF, $FF, $FF, $FF, $20, $22, $04, $FF, $FF, $FF, $FF, $FF, $FF, $FF  ; 00:1195
.db $FF, $FF                                                                        ; 00:11A5

addr_011A7:
.db $0A, $0C, $0E, $FF, $FF, $FF, $2A, $2C, $2E, $FF, $FF, $FF, $FF, $FF, $FF, $FF  ; 00:11A7
.db $FF, $FF                                                                        ; 00:11B7

addr_011B9:
.db $68, $6A, $6C, $FF, $FF, $FF, $FE, $FE, $6E, $FF, $FF, $FF, $FF, $FF, $FF, $FF  ; 00:11B9
.db $FF, $FF                                                                        ; 00:11C9

addr_011CB:
.db $06, $08, $4A, $4C, $FF, $FF, $FE, $FE, $4E, $3E, $FF, $FF, $FE, $40, $42, $44  ; 00:11CB
.db $FF, $FF                                                                        ; 00:11DB

addr_011DD:
.db $60, $62, $64, $66, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF  ; 00:11DD
.db $FF, $FF                                                                        ; 00:11ED

addr_011EF:
.db $46, $48, $26, $28, $FF, $FF, $1A, $1C, $3A, $3C, $FF, $FF, $FF, $FF, $FF, $FF  ; 00:11EF
.db $FF, $FF                                                                        ; 00:11FF

LUT_01201:
.dw addr_00DD9, addr_00E24, addr_00E4B, addr_00DD9                                  ; 00:1201

LUT_level_titles:
.dw addr_0122D, addr_0122D, addr_0122D, addr_0123C, addr_0123C, addr_0123C, addr_0124B, addr_0124B  ; 00:1209
.dw addr_0124B, addr_0125A, addr_0125A, addr_0125A, addr_01269, addr_01269, addr_01269, addr_01278  ; 00:1219
.dw addr_01278, addr_01278                                                          ; 00:1229

addr_0122D:
.db $10, $13, $46, $62, $44, $44, $51, $EB, $47, $40, $43, $43, $EB, $EB, $FF       ; 00:122D

addr_0123C:
.db $10, $13, $35, $62, $40, $37, $46, $44, $EB, $EB, $EB, $EB, $EB, $EB, $FF       ; 00:123C

addr_0124B:
.db $10, $13, $41, $81, $51, $46, $43, $44, $EB, $EB, $EB, $EB, $EB, $EB, $FF       ; 00:124B

addr_0125A:
.db $10, $13, $6F, $1E, $1F, $DE, $9F, $5E, $7F, $AF, $4F, $EB, $EB, $EB, $FF       ; 00:125A

addr_01269:
.db $10, $13, $AE, $2E, $9F, $1E, $8F, $EB, $1F, $9F, $1E, $5E, $7F, $EB, $FF       ; 00:1269

addr_01278:
.db $10, $13, $AE, $6E, $DE, $EB, $1F, $1E, $AE, $3E, $EB, $EB, $EB, $EB, $FF       ; 00:1278

run_title_screen:
   ;; Display off (blanked)
   ld     a, (g_saved_vdp_reg_01)      ; 00:1287 - 3A 19 D2
   and    $BF                          ; 00:128A - E6 BF
   ld     (g_saved_vdp_reg_01), a      ; 00:128C - 32 19 D2
   res    0, (iy+var_D200-IYBASE)      ; 00:128F - FD CB 00 86
   call   wait_until_irq_ticked        ; 00:1293 - CD 1C 03
   ;; Load some tiles
   ld     hl, ART_09_2000              ; 00:1296 - 21 00 20
   ld     de, $0000                    ; 00:1299 - 11 00 00
   ld     a, $09                       ; 00:129C - 3E 09
   call   load_art                     ; 00:129E - CD 05 04
   ld     hl, ART_09_4B0A              ; 00:12A1 - 21 0A 4B
   ld     de, $2000                    ; 00:12A4 - 11 00 20
   ld     a, $09                       ; 00:12A7 - 3E 09
   call   load_art                     ; 00:12A9 - CD 05 04
   ;; Load tile art
   .IF 0
   ld     a, $05                       ; 00:12AC - 3E 05
   ;; BUGFIX: PAGERACE: Race condition, defeatable with a well-timed interrupt. Swapped ops around to fix.
   ld     (g_committed_rompage_1), a   ; 00:12B1 - 32 35 D2
   ld     (rompage_1), a               ; 00:12AE - 32 FE FF
   .ENDIF
   ld     hl, ARTMAP_05_6000           ; 00:12B4 - 21 00 60
   ld     de, $3800                    ; 00:12B7 - 11 00 38
   ld     bc, $012E                    ; 00:12BA - 01 2E 01
   ld     a, $00                       ; 00:12BD - 3E 00
   ld     (g_FF_string_high_byte), a   ; 00:12BF - 32 0E D2
   call   unpack_art_tilemap_into_vram  ; 00:12C2 - CD 01 05

   .IF show_diet_logo
   ;; Some branding so we know this is modified
   ld hl, diet_edition_logo_art
   ld de, $3000
   ld a, :diet_edition_logo_art
   call load_art
   .ENDIF

   ;; Clear VDP scroll registers
   xor    a                            ; 00:12C5 - AF
   ld     (g_vdp_scroll_x), a          ; 00:12C6 - 32 51 D2
   ld     (g_vdp_scroll_y), a          ; 00:12C9 - 32 52 D2
   ;; Load into both palettes
   ld     hl, PAL3_title_screen        ; 00:12CC - 21 E1 13
   ld     a, $03                       ; 00:12CF - 3E 03
   call   signal_load_palettes         ; 00:12D1 - CD 33 03
   ;; TODO find what D200.b1 does --GM
   set    1, (iy+var_D200-IYBASE)      ; 00:12D4 - FD CB 00 CE
   ;; Play title screen music
   ld     a, $06                       ; 00:12D8 - 3E 06
   rst    $18                          ; 00:12DA - DF
   ;; Clear "PRESS BUTTON" cycle
   xor    a                            ; 00:12DB - AF
   ld     (var_D216), a                ; 00:12DC - 32 16 D2
   ;; Set up Sonic's hand waving sprite animation
   ld     a, $01                       ; 00:12DF - 3E 01
   ld     (var_D20F), a                ; 00:12E1 - 32 0F D2
   ld     hl, UNK_01372                ; 00:12E4 - 21 72 13
   ld     (var_D210), hl               ; 00:12E7 - 22 10 D2

@mainloop:
   ;; Display on
   ld     a, (g_saved_vdp_reg_01)      ; 00:12EA - 3A 19 D2
   or     $40                          ; 00:12ED - F6 40
   ld     (g_saved_vdp_reg_01), a      ; 00:12EF - 32 19 D2
   res    0, (iy+var_D200-IYBASE)      ; 00:12F2 - FD CB 00 86
   call   wait_until_irq_ticked        ; 00:12F6 - CD 1C 03
   ;; Increment "PRESS BUTTON" cycle, wrapping every 100 ticks
   ld     a, (var_D216)                ; 00:12F9 - 3A 16 D2
   inc    a                            ; 00:12FC - 3C
   cp     $64                          ; 00:12FD - FE 64
   jr     c, @skip_press_button_counter_wrap  ; 00:12FF - 38 01
   xor    a                            ; 00:1301 - AF

@skip_press_button_counter_wrap:
   ld     (var_D216), a                ; 00:1302 - 32 16 D2
   ;; Show or hide "PRESS BUTTON" text, only showing if cycle <= 64
   ld     hl, LUT_01352                ; 00:1305 - 21 52 13
   cp     $40                          ; 00:1308 - FE 40
   jr     c, @skip_hide_press_button_text  ; 00:130A - 38 03
   ld     hl, LUT_01362                ; 00:130C - 21 62 13

@skip_hide_press_button_text:
   xor    a                            ; 00:130F - AF
   ld     (g_FF_string_high_byte), a   ; 00:1310 - 32 0E D2
   call   print_positioned_FF_string   ; 00:1313 - CD AF 05
   ;; Decrement the counter for Sonic's hand animation
   ld     a, (var_D20F)                ; 00:1316 - 3A 0F D2
   dec    a                            ; 00:1319 - 3D
   ld     (var_D20F), a                ; 00:131A - 32 0F D2
   jr     nz, @next_sonic_hand_animation_frame  ; 00:131D - 20 16
   ;; If the counter reached 0, load the next frame and counter
   ld     hl, (var_D210)               ; 00:131F - 2A 10 D2
   ld     e, (hl)                      ; 00:1322 - 5E
   inc    hl                           ; 00:1323 - 23
   ld     d, (hl)                      ; 00:1324 - 56
   inc    hl                           ; 00:1325 - 23
   ld     a, (hl)                      ; 00:1326 - 7E
   inc    hl                           ; 00:1327 - 23
   and    a                            ; 00:1328 - A7
   ;; If the counter value is 0, move onto the demo!
   jr     z, @stop_music_and_return    ; 00:1329 - 28 25
   ;; Otherwise, store our values for animating Sonic's hand.
   ld     (var_D20F), a                ; 00:132B - 32 0F D2
   ld     (var_D210), hl               ; 00:132E - 22 10 D2
   ld     (var_D212), de               ; 00:1331 - ED 53 12 D2

@next_sonic_hand_animation_frame:
   ld     hl, var_D000                 ; 00:1335 - 21 00 D0
   ld     (var_D23C), hl               ; 00:1338 - 22 3C D2
   ld     hl, $0080                    ; 00:133B - 21 80 00
   ld     de, $0018                    ; 00:133E - 11 18 00
   ld     bc, (var_D212)               ; 00:1341 - ED 4B 12 D2
   call   addr_0350F                   ; 00:1345 - CD 0F 35
   .IF show_diet_logo
      ld hl, $0038
      ld de, $003C
      ld bc, diet_edition_logo_sprites
      call addr_0350F
   .ENDIF
   bit    5, (iy+g_inputs_player_1-IYBASE)  ; 00:1348 - FD CB 03 6E
   jp     nz, @mainloop                ; 00:134C - C2 EA 12
   scf                                 ; 00:134F - 37

@stop_music_and_return:
   ;; Stop the music and return
   rst    $20                          ; 00:1350 - E7
   ;; If we jumped here from above, AND A clears the carry flag.
   ;; If we fell through from not so far above, SCF sets the carry flag.
   ret                                 ; 00:1351 - C9

.IF show_diet_logo
diet_edition_logo_sprites:
   .db $80, $82, $84, $86, $FF, $FF
   .db $88, $8A, $8C, $8E, $FF, $FF
   .db $FF
diet_edition_logo_art:
   ;; Sorry if the compression is a bit crap here.
   ;; It's basically 2 bits per pixel and I suspect regular LZ might work better.
   ;; uncmp =   512 bytes, cmp =   398 bytes
   .db $48, $59, $18, $00, $46, $00, $80, $00, $06, $04, $07, $0E, $61, $00, $03, $3D
   .db $00, $C2, $00, $C3, $70, $F9, $73, $FC, $00, $00, $07, $00, $00, $00, $12, $12
   .db $12, $00, $1A, $12, $00, $17, $29, $29, $28, $28, $28, $35, $00, $00, $12, $12
   .db $00, $00, $12, $12, $12, $29, $39, $00, $00, $00, $00, $29, $28, $4E, $4E, $4E
   .db $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $01, $01, $01, $00, $03
   .db $03, $03, $01, $02, $03, $03, $03, $84, $87, $87, $03, $FC, $FF, $FF, $6F, $90
   .db $FF, $FF, $3F, $40, $7F, $7F, $3F, $4C, $73, $7F, $3F, $4F, $70, $7F, $3F, $48
   .db $77, $7F, $7F, $84, $FB, $FF, $3F, $44, $7B, $7F, $00, $02, $02, $02, $00, $06
   .db $06, $06, $04, $CA, $CE, $CE, $8E, $51, $DF, $DF, $CF, $30, $FF, $FF, $FF, $00
   .db $FF, $FF, $FF, $80, $7F, $FF, $FF, $C4, $3B, $FF, $FF, $40, $BF, $FF, $FF, $24
   .db $DB, $FF, $00, $20, $20, $20, $00, $60, $60, $60, $20, $5F, $7F, $7F, $7F, $80
   .db $FF, $FF, $FF, $04, $FB, $FF, $FF, $06, $F9, $FF, $FF, $02, $FD, $FF, $FF, $03
   .db $FC, $FF, $FF, $07, $F8, $FF, $FF, $65, $9A, $FF, $FF, $F1, $0E, $FF, $FF, $B1
   .db $4E, $FF, $FF, $E1, $1E, $FF, $00, $E0, $E0, $E0, $C0, $22, $E2, $E2, $C0, $3E
   .db $FE, $FE, $DC, $22, $FE, $FE, $FC, $02, $FE, $FE, $F8, $04, $FC, $FC, $F8, $E4
   .db $1C, $FC, $F0, $AE, $5E, $FE, $F8, $64, $9C, $FC, $1F, $24, $3B, $3F, $0F, $14
   .db $1B, $1F, $1F, $26, $39, $3F, $1F, $22, $3D, $3F, $3F, $42, $7D, $7F, $3F, $43
   .db $7C, $7F, $07, $F9, $FE, $FF, $07, $09, $0E, $0F, $0F, $10, $1F, $1F, $1F, $20
   .db $3F, $3F, $0F, $30, $3F, $3F, $00, $2F, $2F, $2F, $00, $08, $08, $08, $FF, $26
   .db $D9, $FF, $FF, $12, $ED, $FF, $FF, $13, $EC, $FF, $FF, $16, $E9, $FF, $FF, $14
   .db $EB, $FF, $FF, $1C, $E3, $FF, $FF, $70, $8F, $FF, $FF, $C0, $3F, $FF, $FE, $01
   .db $FF, $FF, $0C, $F2, $FE, $FE, $00, $0C, $0C, $0C, $00, $04, $04, $04, $FF, $C3
   .db $3C, $FF, $FF, $7E, $81, $FF, $FF, $20, $DF, $FF, $FF, $E0, $1F, $FF, $F8, $07
   .db $FF, $FF, $38, $C4, $FC, $FC, $00, $38, $38, $38, $F0, $0C, $FC, $FC, $F0, $08
   .db $F8, $F8, $60, $90, $F0, $F0, $00, $70, $70, $70, $00, $10, $10, $10
.ENDIF

LUT_01352:
.db $09, $12, $E3, $E4, $E5, $E6, $E6, $F1, $F1, $E9, $EB, $E7, $E7, $EA, $EC, $FF  ; 00:1352

LUT_01362:
.db $09, $12, $F1, $F1, $F1, $F1, $F1, $F1, $F1, $F1, $F1, $F1, $F1, $F1, $F1, $FF  ; 00:1362

UNK_01372:
.dw addr_013BD                                                                      ; 00:1372
.db $08                                                                             ; 00:1374
.dw addr_013CF                                                                      ; 00:1375
.db $08                                                                             ; 00:1377
.dw addr_013BD                                                                      ; 00:1378
.db $08                                                                             ; 00:137A
.dw addr_013CF                                                                      ; 00:137B
.db $08                                                                             ; 00:137D
.dw addr_013BD                                                                      ; 00:137E
.db $08                                                                             ; 00:1380
.dw addr_013CF                                                                      ; 00:1381
.db $08                                                                             ; 00:1383
.dw addr_013BD                                                                      ; 00:1384
.db $08                                                                             ; 00:1386
.dw addr_013CF                                                                      ; 00:1387
.db $08                                                                             ; 00:1389
.dw addr_013BD                                                                      ; 00:138A
.db $08                                                                             ; 00:138C
.dw addr_013CF                                                                      ; 00:138D
.db $08                                                                             ; 00:138F
.dw addr_013BD                                                                      ; 00:1390
.db $08                                                                             ; 00:1392
.dw addr_013CF                                                                      ; 00:1393
.db $08                                                                             ; 00:1395
.dw addr_013BD                                                                      ; 00:1396
.db $08                                                                             ; 00:1398
.dw addr_013CF                                                                      ; 00:1399
.db $08                                                                             ; 00:139B
.dw addr_013BD                                                                      ; 00:139C
.db $08                                                                             ; 00:139E
.dw addr_013CF                                                                      ; 00:139F
.db $08                                                                             ; 00:13A1
.dw addr_013BD                                                                      ; 00:13A2
.db $08                                                                             ; 00:13A4
.dw addr_013CF                                                                      ; 00:13A5
.db $08                                                                             ; 00:13A7
.dw addr_013BD                                                                      ; 00:13A8
.db $08                                                                             ; 00:13AA
.dw addr_013CF                                                                      ; 00:13AB
.db $08                                                                             ; 00:13AD
.dw addr_013BD                                                                      ; 00:13AE
.db $08                                                                             ; 00:13B0
.dw addr_013CF                                                                      ; 00:13B1
.db $08                                                                             ; 00:13B3

addr_013B4:
.dw addr_013BD                                                                      ; 00:13B4
.db $FF                                                                             ; 00:13B6
.dw addr_013BD                                                                      ; 00:13B7
.db $FF                                                                             ; 00:13B9
.dw addr_013B4                                                                      ; 00:13BA
.db $00                                                                             ; 00:13BC

addr_013BD:
.db $00, $02, $04, $FF, $FF, $FF, $20, $22, $24, $FF, $FF, $FF, $40, $42, $44, $FF  ; 00:13BD
.db $FF, $FF                                                                        ; 00:13CD

addr_013CF:
.db $06, $08, $FF, $FF, $FF, $FF, $26, $28, $FF, $FF, $FF, $FF, $46, $48, $FF, $FF  ; 00:13CF
.db $FF, $FF                                                                        ; 00:13DF

PAL3_title_screen:
.INCBIN "src/data/title_screen.pal3"

addr_01401:
   ld     a, (g_saved_vdp_reg_01)      ; 00:1401 - 3A 19 D2
   and    $BF                          ; 00:1404 - E6 BF
   ld     (g_saved_vdp_reg_01), a      ; 00:1406 - 32 19 D2
   res    0, (iy+var_D200-IYBASE)      ; 00:1409 - FD CB 00 86
   call   wait_until_irq_ticked        ; 00:140D - CD 1C 03
   di                                  ; 00:1410 - F3
   ld     hl, ART_09_351F              ; 00:1411 - 21 1F 35
   ld     de, $0000                    ; 00:1414 - 11 00 00
   ld     a, $09                       ; 00:1417 - 3E 09
   call   load_art                     ; 00:1419 - CD 05 04
   .IF 0
   ld     a, $05                       ; 00:141C - 3E 05
   ;; BUGFIX: PAGERACE: Race condition, defeatable with a well-timed interrupt. Swapped ops around to fix.
   ld     (g_committed_rompage_1), a   ; 00:1421 - 32 35 D2
   ld     (rompage_1), a               ; 00:141E - 32 FE FF
   .ENDIF
   ld     hl, ARTMAP_05_67FE           ; 00:1424 - 21 FE 67
   ld     bc, $0032                    ; 00:1427 - 01 32 00
   ld     de, $3800                    ; 00:142A - 11 00 38
   ld     a, $00                       ; 00:142D - 3E 00
   ld     (g_FF_string_high_byte), a   ; 00:142F - 32 0E D2
   call   unpack_art_tilemap_into_vram  ; 00:1432 - CD 01 05
   xor    a                            ; 00:1435 - AF
   ld     (g_vdp_scroll_x), a          ; 00:1436 - 32 51 D2
   ld     (g_vdp_scroll_y), a          ; 00:1439 - 32 52 D2
   ld     hl, PAL3_game_over           ; 00:143C - 21 FC 14
   ld     a, $03                       ; 00:143F - 3E 03
   call   signal_load_palettes         ; 00:1441 - CD 33 03
   ei                                  ; 00:1444 - FB
   ld     b, $78                       ; 00:1445 - 06 78

addr_01447:
   ld     a, (g_saved_vdp_reg_01)      ; 00:1447 - 3A 19 D2
   or     $40                          ; 00:144A - F6 40
   ld     (g_saved_vdp_reg_01), a      ; 00:144C - 32 19 D2
   res    0, (iy+var_D200-IYBASE)      ; 00:144F - FD CB 00 86
   call   wait_until_irq_ticked        ; 00:1453 - CD 1C 03
   djnz   addr_01447                   ; 00:1456 - 10 EF
   ld     a, (var_D284)                ; 00:1458 - 3A 84 D2
   and    a                            ; 00:145B - A7
   jr     nz, addr_01477               ; 00:145C - 20 19
   ld     bc, $00B4                    ; 00:145E - 01 B4 00

addr_01461:
   push   bc                           ; 00:1461 - C5
   res    0, (iy+var_D200-IYBASE)      ; 00:1462 - FD CB 00 86
   call   wait_until_irq_ticked        ; 00:1466 - CD 1C 03
   pop    bc                           ; 00:1469 - C1
   dec    bc                           ; 00:146A - 0B
   ld     a, b                         ; 00:146B - 78
   or     c                            ; 00:146C - B1
   ret    z                            ; 00:146D - C8
   bit    5, (iy+g_inputs_player_1-IYBASE)  ; 00:146E - FD CB 03 6E
   jp     nz, addr_01461               ; 00:1472 - C2 61 14
   and    a                            ; 00:1475 - A7
   ret                                 ; 00:1476 - C9

addr_01477:
   ld     hl, LUT_014DE                ; 00:1477 - 21 DE 14
   ld     c, $0B                       ; 00:147A - 0E 0B
   call   addr_016D9                   ; 00:147C - CD D9 16
   ld     hl, LUT_014E6                ; 00:147F - 21 E6 14
   call   print_positioned_FF_string   ; 00:1482 - CD AF 05
   ld     hl, LUT_014F1                ; 00:1485 - 21 F1 14
   call   print_positioned_FF_string   ; 00:1488 - CD AF 05
   ld     a, $09                       ; 00:148B - 3E 09
   ld     (var_D216), a                ; 00:148D - 32 16 D2

addr_01490:
   ld     b, $3C                       ; 00:1490 - 06 3C

addr_01492:
   push   bc                           ; 00:1492 - C5
   res    0, (iy+var_D200-IYBASE)      ; 00:1493 - FD CB 00 86
   call   wait_until_irq_ticked        ; 00:1497 - CD 1C 03
   ld     (iy+g_sprite_count-IYBASE), $00  ; 00:149A - FD 36 0A 00
   ld     hl, var_D216                 ; 00:149E - 21 16 D2
   ld     de, g_HUD_FFstr_buf          ; 00:14A1 - 11 BE D2
   ld     b, $01                       ; 00:14A4 - 06 01
   call   addr_01B13                   ; 00:14A6 - CD 13 1B
   ex     de, hl                       ; 00:14A9 - EB
   ld     hl, var_D000                 ; 00:14AA - 21 00 D0
   ld     c, $8C                       ; 00:14AD - 0E 8C
   ld     b, $5E                       ; 00:14AF - 06 5E
   call   draw_sprite_text             ; 00:14B1 - CD CC 35
   ld     (var_D23C), hl               ; 00:14B4 - 22 3C D2
   pop    bc                           ; 00:14B7 - C1
   bit    5, (iy+g_inputs_player_1-IYBASE)  ; 00:14B8 - FD CB 03 6E
   jr     z, addr_014CC                ; 00:14BC - 28 0E
   djnz   addr_01492                   ; 00:14BE - 10 D2
   ld     a, $1A                       ; 00:14C0 - 3E 1A
   rst    $28                          ; 00:14C2 - EF
   ld     hl, var_D216                 ; 00:14C3 - 21 16 D2
   ld     a, (hl)                      ; 00:14C6 - 7E
   and    a                            ; 00:14C7 - A7
   ret    z                            ; 00:14C8 - C8
   dec    (hl)                         ; 00:14C9 - 35
   jr     addr_01490                   ; 00:14CA - 18 C4

addr_014CC:
   ld     hl, g_level_has_checkpoint_mask  ; 00:14CC - 21 11 D3
   call   calc_level_offset_HL_and_mask_C  ; 00:14CF - CD 02 0C
   ld     a, c                         ; 00:14D2 - 79
   cpl                                 ; 00:14D3 - 2F
   ld     c, a                         ; 00:14D4 - 4F
   ld     a, (hl)                      ; 00:14D5 - 7E
   and    c                            ; 00:14D6 - A1
   ld     (hl), a                      ; 00:14D7 - 77
   ld     hl, var_D284                 ; 00:14D8 - 21 84 D2
   dec    (hl)                         ; 00:14DB - 35
   scf                                 ; 00:14DC - 37
   ret                                 ; 00:14DD - C9

LUT_014DE:
.db $0F, $80, $81, $FF, $10, $90, $91, $FF                                          ; 00:14DE

LUT_014E6:
.db $08, $0C, $67, $68, $69, $6A, $6B, $6C, $6D, $6E, $FF                           ; 00:14E6

LUT_014F1:
.db $08, $0D, $77, $78, $79, $7A, $7B, $7C, $7D, $7E, $FF                           ; 00:14F1

PAL3_game_over:
.INCBIN "src/data/game_over.pal3"

LUT_0151C:
.db $01, $00                                                                        ; 00:151C

addr_0151E:
.db $00, $00, $00, $00                                                              ; 00:151E

addr_01522:
.db $00, $00, $01, $00                                                              ; 00:1522

addr_01526:
.db $00, $00, $05, $00                                                              ; 00:1526

addr_0152A:
.db $00, $00, $10, $00                                                              ; 00:152A

addr_0152E:
.db $00, $00, $30, $00                                                              ; 00:152E

addr_01532:
.db $00, $00, $50, $00                                                              ; 00:1532

addr_01536:
.db $00, $01, $00, $00                                                              ; 00:1536

addr_0153A:
.db $00, $03, $00, $00                                                              ; 00:153A

LUT_time_bonus_upper_bounds:
.db $05, $00, $03, $00, $02, $30, $02, $00, $01, $30, $01, $00, $00, $30, $00, $00  ; 00:153E

LUT_time_bonus_scores:
.dw addr_0151E, addr_01522, addr_01526, addr_0152A, addr_0152E, addr_01532, addr_01536, addr_0153A  ; 00:154E

handle_level_score_screen:
   ld     a, (g_level)                 ; 00:155E - 3A 3E D2
   cp     $13                          ; 00:1561 - FE 13
   jp     z, _handle_level_score_screen_13  ; 00:1563 - CA 2F 17
   ld     a, (g_saved_vdp_reg_01)      ; 00:1566 - 3A 19 D2
   and    $BF                          ; 00:1569 - E6 BF
   ld     (g_saved_vdp_reg_01), a      ; 00:156B - 32 19 D2
   res    0, (iy+var_D200-IYBASE)      ; 00:156E - FD CB 00 86
   call   wait_until_irq_ticked        ; 00:1572 - CD 1C 03
   ld     hl, ART_09_B92E              ; 00:1575 - 21 2E B9
   ld     de, $3000                    ; 00:1578 - 11 00 30
   ld     a, $09                       ; 00:157B - 3E 09
   call   load_art                     ; 00:157D - CD 05 04
   ld     hl, ART_09_351F              ; 00:1580 - 21 1F 35
   ld     de, $0000                    ; 00:1583 - 11 00 00
   ld     a, $09                       ; 00:1586 - 3E 09
   call   load_art                     ; 00:1588 - CD 05 04
   .IF 0
   ld     a, $05                       ; 00:158B - 3E 05
   ;; BUGFIX: PAGERACE: Race condition, defeatable with a well-timed interrupt. Swapped ops around to fix.
   ld     (g_committed_rompage_1), a   ; 00:1590 - 32 35 D2
   ld     (rompage_1), a               ; 00:158D - 32 FE FF
   .ENDIF
   ld     hl, ARTMAP_05_612E           ; 00:1593 - 21 2E 61
   ld     bc, $00BB                    ; 00:1596 - 01 BB 00
   ld     de, $3800                    ; 00:1599 - 11 00 38
   ld     a, (g_level)                 ; 00:159C - 3A 3E D2
   cp     $1C                          ; 00:159F - FE 1C
   jr     c, @artmap_not_bonus         ; 00:15A1 - 38 09
   ld     hl, ARTMAP_05_61E9           ; 00:15A3 - 21 E9 61
   ld     bc, $0095                    ; 00:15A6 - 01 95 00
   ld     de, $3800                    ; 00:15A9 - 11 00 38

@artmap_not_bonus:
   xor    a                            ; 00:15AC - AF
   ld     (g_FF_string_high_byte), a   ; 00:15AD - 32 0E D2
   call   unpack_art_tilemap_into_vram  ; 00:15B0 - CD 01 05
   ld     hl, LUT_01711                ; 00:15B3 - 21 11 17
   ld     c, $10                       ; 00:15B6 - 0E 10
   ld     a, (var_D27F)                ; 00:15B8 - 3A 7F D2
   and    a                            ; 00:15BB - A7
   call   nz, addr_016D9               ; 00:15BC - C4 D9 16
   ld     a, (g_level)                 ; 00:15BF - 3A 3E D2
   cp     $1C                          ; 00:15C2 - FE 1C
   jr     nc, _handle_level_score_screen_bonus  ; 00:15C4 - 30 37
   ld     a, $15                       ; 00:15C6 - 3E 15
   ld     (g_HUD_FFstr_buf), a         ; 00:15C8 - 32 BE D2
   ld     a, $04                       ; 00:15CB - 3E 04
   ld     (var_D2BF), a                ; 00:15CD - 32 BF D2
   ld     a, (g_level)                 ; 00:15D0 - 3A 3E D2
   ld     e, a                         ; 00:15D3 - 5F
   ld     d, $00                       ; 00:15D4 - 16 00
   ld     hl, LUT_01B69                ; 00:15D6 - 21 69 1B
   add    hl, de                       ; 00:15D9 - 19
   ld     e, (hl)                      ; 00:15DA - 5E
   ld     hl, LUT_01B51                ; 00:15DB - 21 51 1B
   add    hl, de                       ; 00:15DE - 19
   ld     b, $04                       ; 00:15DF - 06 04

-:
   push   bc                           ; 00:15E1 - C5
   push   hl                           ; 00:15E2 - E5
   ld     de, var_D2BF                 ; 00:15E3 - 11 BF D2
   ld     a, (de)                      ; 00:15E6 - 1A
   inc    a                            ; 00:15E7 - 3C
   ld     (de), a                      ; 00:15E8 - 12
   inc    de                           ; 00:15E9 - 13
   ldi                                 ; 00:15EA - ED A0
   ldi                                 ; 00:15EC - ED A0
   ld     a, $FF                       ; 00:15EE - 3E FF
   ld     (de), a                      ; 00:15F0 - 12
   ld     hl, g_HUD_FFstr_buf          ; 00:15F1 - 21 BE D2
   call   print_positioned_FF_string   ; 00:15F4 - CD AF 05
   pop    hl                           ; 00:15F7 - E1
   pop    bc                           ; 00:15F8 - C1
   inc    hl                           ; 00:15F9 - 23
   inc    hl                           ; 00:15FA - 23
   djnz   -                            ; 00:15FB - 10 E4

_handle_level_score_screen_bonus:
   xor    a                            ; 00:15FD - AF
   ld     (g_vdp_scroll_x), a          ; 00:15FE - 32 51 D2
   ld     (g_vdp_scroll_y), a          ; 00:1601 - 32 52 D2
   ld     hl, PAL3_score_tally         ; 00:1604 - 21 8D 1B
   ld     a, $03                       ; 00:1607 - 3E 03
   call   signal_load_palettes         ; 00:1609 - CD 33 03
   ld     a, (g_level)                 ; 00:160C - 3A 3E D2
   cp     $1C                          ; 00:160F - FE 1C
   jr     c, +                         ; 00:1611 - 38 12
   ld     hl, var_D281                 ; 00:1613 - 21 81 D2
   inc    (hl)                         ; 00:1616 - 34
   bit    2, (iy+var_D209-IYBASE)      ; 00:1617 - FD CB 09 56
   jr     nz, +                        ; 00:161B - 20 08
   ld     hl, var_D282                 ; 00:161D - 21 82 D2
   inc    (hl)                         ; 00:1620 - 34
   ld     hl, var_D285                 ; 00:1621 - 21 85 D2
   inc    (hl)                         ; 00:1624 - 34

+:
   bit    2, (iy+var_D209-IYBASE)      ; 00:1625 - FD CB 09 56
   call   nz, addr_01719               ; 00:1629 - C4 19 17
   bit    3, (iy+var_D209-IYBASE)      ; 00:162C - FD CB 09 5E
   call   nz, addr_01726               ; 00:1630 - C4 26 17
   ld     hl, LUT_time_bonus_upper_bounds  ; 00:1633 - 21 3E 15
   ld     de, LUT_time_bonus_scores    ; 00:1636 - 11 4E 15
   ld     b, $08                       ; 00:1639 - 06 08

-:
   ld     a, (g_time_mins)             ; 00:163B - 3A CE D2
   cp     (hl)                         ; 00:163E - BE
   jr     nz, addr_0164B               ; 00:163F - 20 0A
   inc    hl                           ; 00:1641 - 23
   ld     a, (g_time_secs_BCD)         ; 00:1642 - 3A CF D2
   cp     (hl)                         ; 00:1645 - BE
   jr     nc, _handle_level_score_screen_UNK_01658  ; 00:1646 - 30 10
   inc    hl                           ; 00:1648 - 23
   jr     addr_0164F                   ; 00:1649 - 18 04

addr_0164B:
   jr     nc, _handle_level_score_screen_UNK_01658  ; 00:164B - 30 0B
   inc    hl                           ; 00:164D - 23
   inc    hl                           ; 00:164E - 23

addr_0164F:
   inc    de                           ; 00:164F - 13
   inc    de                           ; 00:1650 - 13
   djnz   -                            ; 00:1651 - 10 E8
   ld     de, addr_0151E               ; 00:1653 - 11 1E 15
   jr     ++                           ; 00:1656 - 18 04

_handle_level_score_screen_UNK_01658:
   ex     de, hl                       ; 00:1658 - EB
   ld     e, (hl)                      ; 00:1659 - 5E
   inc    hl                           ; 00:165A - 23
   ld     d, (hl)                      ; 00:165B - 56

++:
   ld     hl, var_D212                 ; 00:165C - 21 12 D2
   ex     de, hl                       ; 00:165F - EB
   ld     a, (g_level)                 ; 00:1660 - 3A 3E D2
   cp     $1C                          ; 00:1663 - FE 1C
   jr     c, +                         ; 00:1665 - 38 03
   ld     hl, LUT_01A14_allzero        ; 00:1667 - 21 14 1A

+:
   ldi                                 ; 00:166A - ED A0
   ldi                                 ; 00:166C - ED A0
   ldi                                 ; 00:166E - ED A0
   ldi                                 ; 00:1670 - ED A0
   set    1, (iy+var_D200-IYBASE)      ; 00:1672 - FD CB 00 CE
   ld     b, $78                       ; 00:1676 - 06 78

@wait_before_counting:
   push   bc                           ; 00:1678 - C5
   ld     a, (g_saved_vdp_reg_01)      ; 00:1679 - 3A 19 D2
   or     $40                          ; 00:167C - F6 40
   ld     (g_saved_vdp_reg_01), a      ; 00:167E - 32 19 D2
   res    0, (iy+var_D200-IYBASE)      ; 00:1681 - FD CB 00 86
   call   wait_until_irq_ticked        ; 00:1685 - CD 1C 03
   call   addr_01A18                   ; 00:1688 - CD 18 1A
   pop    bc                           ; 00:168B - C1
   djnz   @wait_before_counting        ; 00:168C - 10 EA

-:
   res    0, (iy+var_D200-IYBASE)      ; 00:168E - FD CB 00 86
   call   wait_until_irq_ticked        ; 00:1692 - CD 1C 03
   call   addr_01A18                   ; 00:1695 - CD 18 1A
   call   addr_019B4                   ; 00:1698 - CD B4 19
   ld     a, (g_level)                 ; 00:169B - 3A 3E D2
   cp     $1C                          ; 00:169E - FE 1C
   call   c, bonus_to_score_BCD_UNCONFIRMED  ; 00:16A0 - DC DF 19
   ld     a, (var_D216)                ; 00:16A3 - 3A 16 D2
   inc    a                            ; 00:16A6 - 3C
   ld     (var_D216), a                ; 00:16A7 - 32 16 D2
   and    $03                          ; 00:16AA - E6 03
   jr     nz, +                        ; 00:16AC - 20 03
   ld     a, $02                       ; 00:16AE - 3E 02
   rst    $28                          ; 00:16B0 - EF

+:
   ld     hl, (var_D212)               ; 00:16B1 - 2A 12 D2
   ld     de, (var_D214)               ; 00:16B4 - ED 5B 14 D2
   ld     a, (g_rings_BCD)             ; 00:16B8 - 3A AA D2
   or     h                            ; 00:16BB - B4
   or     l                            ; 00:16BC - B5
   or     d                            ; 00:16BD - B2
   or     e                            ; 00:16BE - B3
   jp     nz, -                        ; 00:16BF - C2 8E 16
   ld     b, $B4                       ; 00:16C2 - 06 B4

-:
   push   bc                           ; 00:16C4 - C5
   res    0, (iy+var_D200-IYBASE)      ; 00:16C5 - FD CB 00 86
   call   wait_until_irq_ticked        ; 00:16C9 - CD 1C 03
   call   addr_01A18                   ; 00:16CC - CD 18 1A
   pop    bc                           ; 00:16CF - C1
   bit    5, (iy+g_inputs_player_1-IYBASE)  ; 00:16D0 - FD CB 03 6E
   jr     z, +                         ; 00:16D4 - 28 02
   djnz   -                            ; 00:16D6 - 10 EC

+:
   ret                                 ; 00:16D8 - C9

addr_016D9:
   ld     b, a                         ; 00:16D9 - 47
   push   bc                           ; 00:16DA - C5
   ld     de, g_HUD_FFstr_buf          ; 00:16DB - 11 BE D2
   srl    a                            ; 00:16DE - CB 3F
   ld     b, a                         ; 00:16E0 - 47
   ld     a, c                         ; 00:16E1 - 79
   sub    b                            ; 00:16E2 - 90
   ld     (de), a                      ; 00:16E3 - 12
   inc    de                           ; 00:16E4 - 13
   ld     bc, $0004                    ; 00:16E5 - 01 04 00
   ldir                                ; 00:16E8 - ED B0
   ld     (de), a                      ; 00:16EA - 12
   inc    de                           ; 00:16EB - 13
   ld     bc, $0004                    ; 00:16EC - 01 04 00
   ldir                                ; 00:16EF - ED B0
   pop    bc                           ; 00:16F1 - C1
   xor    a                            ; 00:16F2 - AF
   ld     (g_FF_string_high_byte), a   ; 00:16F3 - 32 0E D2

addr_016F6:
   push   bc                           ; 00:16F6 - C5
   ld     hl, g_HUD_FFstr_buf          ; 00:16F7 - 21 BE D2
   call   print_positioned_FF_string   ; 00:16FA - CD AF 05
   ld     hl, var_D2C3                 ; 00:16FD - 21 C3 D2
   call   print_positioned_FF_string   ; 00:1700 - CD AF 05
   ld     hl, g_HUD_FFstr_buf          ; 00:1703 - 21 BE D2
   inc    (hl)                         ; 00:1706 - 34
   inc    (hl)                         ; 00:1707 - 34
   ld     hl, var_D2C3                 ; 00:1708 - 21 C3 D2
   inc    (hl)                         ; 00:170B - 34
   inc    (hl)                         ; 00:170C - 34
   pop    bc                           ; 00:170D - C1
   djnz   addr_016F6                   ; 00:170E - 10 E6
   ret                                 ; 00:1710 - C9

LUT_01711:
.db $14, $AD, $AE, $FF, $15, $BD, $BE, $FF                                          ; 00:1711

addr_01719:
   xor    a                            ; 00:1719 - AF
   ld     (g_rings_BCD), a             ; 00:171A - 32 AA D2
   res    3, (iy+var_D209-IYBASE)      ; 00:171D - FD CB 09 9E
   res    2, (iy+var_D209-IYBASE)      ; 00:1721 - FD CB 09 96
   ret                                 ; 00:1725 - C9

addr_01726:
   ld     hl, var_D284                 ; 00:1726 - 21 84 D2
   inc    (hl)                         ; 00:1729 - 34
   res    3, (iy+var_D209-IYBASE)      ; 00:172A - FD CB 09 9E
   ret                                 ; 00:172E - C9

_handle_level_score_screen_13:
   ld     a, $FF                       ; 00:172F - 3E FF
   ld     (var_D2FD), a                ; 00:1731 - 32 FD D2
   ld     c, $00                       ; 00:1734 - 0E 00
   ld     a, (var_D27F)                ; 00:1736 - 3A 7F D2
   cp     $06                          ; 00:1739 - FE 06
   jr     c, addr_0173F                ; 00:173B - 38 02
   ld     c, $05                       ; 00:173D - 0E 05

addr_0173F:
   ld     a, (g_level_lives_collected)  ; 00:173F - 3A 80 D2
   cp     $12                          ; 00:1742 - FE 12
   jr     c, addr_0174B                ; 00:1744 - 38 05
   ld     a, c                         ; 00:1746 - 79
   add    a, $05                       ; 00:1747 - C6 05
   daa                                 ; 00:1749 - 27
   ld     c, a                         ; 00:174A - 4F

addr_0174B:
   ld     a, (var_D281)                ; 00:174B - 3A 81 D2
   cp     $08                          ; 00:174E - FE 08
   jr     c, addr_01757                ; 00:1750 - 38 05
   ld     a, c                         ; 00:1752 - 79
   add    a, $05                       ; 00:1753 - C6 05
   daa                                 ; 00:1755 - 27
   ld     c, a                         ; 00:1756 - 4F

addr_01757:
   ld     a, (var_D282)                ; 00:1757 - 3A 82 D2
   cp     $08                          ; 00:175A - FE 08
   jr     c, addr_01763                ; 00:175C - 38 05
   ld     a, c                         ; 00:175E - 79
   add    a, $05                       ; 00:175F - C6 05
   daa                                 ; 00:1761 - 27
   ld     c, a                         ; 00:1762 - 4F

addr_01763:
   ld     a, (var_D283)                ; 00:1763 - 3A 83 D2
   and    a                            ; 00:1766 - A7
   jr     nz, addr_0176E               ; 00:1767 - 20 05
   ld     a, c                         ; 00:1769 - 79
   add    a, $0A                       ; 00:176A - C6 0A
   daa                                 ; 00:176C - 27
   ld     c, a                         ; 00:176D - 4F

addr_0176E:
   ld     a, c                         ; 00:176E - 79
   cp     $30                          ; 00:176F - FE 30
   jr     nz, addr_0177B               ; 00:1771 - 20 08
   ld     a, c                         ; 00:1773 - 79
   add    a, $0A                       ; 00:1774 - C6 0A
   daa                                 ; 00:1776 - 27
   add    a, $0A                       ; 00:1777 - C6 0A
   daa                                 ; 00:1779 - 27
   ld     c, a                         ; 00:177A - 4F

addr_0177B:
   ld     hl, var_D2FF                 ; 00:177B - 21 FF D2
   ld     (hl), c                      ; 00:177E - 71
   inc    hl                           ; 00:177F - 23
   ld     (hl), $00                    ; 00:1780 - 36 00
   inc    hl                           ; 00:1782 - 23
   ld     (hl), $00                    ; 00:1783 - 36 00
   ld     hl, LUT_01907                ; 00:1785 - 21 07 19
   call   print_positioned_FF_string   ; 00:1788 - CD AF 05
   ld     hl, LUT_0191C                ; 00:178B - 21 1C 19
   call   print_positioned_FF_string   ; 00:178E - CD AF 05
   ld     hl, LUT_01931                ; 00:1791 - 21 31 19
   call   print_positioned_FF_string   ; 00:1794 - CD AF 05
   ld     hl, LUT_01946                ; 00:1797 - 21 46 19
   call   print_positioned_FF_string   ; 00:179A - CD AF 05
   ld     hl, LUT_01953                ; 00:179D - 21 53 19
   call   print_positioned_FF_string   ; 00:17A0 - CD AF 05
   ld     hl, LUT_01960                ; 00:17A3 - 21 60 19
   call   print_positioned_FF_string   ; 00:17A6 - CD AF 05
   ld     hl, LUT_0196D                ; 00:17A9 - 21 6D 19
   call   print_positioned_FF_string   ; 00:17AC - CD AF 05
   ld     hl, LUT_0197E                ; 00:17AF - 21 7E 19
   call   print_positioned_FF_string   ; 00:17B2 - CD AF 05
   xor    a                            ; 00:17B5 - AF
   ld     (var_D216), a                ; 00:17B6 - 32 16 D2
   ld     bc, $00B4                    ; 00:17B9 - 01 B4 00
   call   addr_01860                   ; 00:17BC - CD 60 18

addr_017BF:
   ld     bc, $003C                    ; 00:17BF - 01 3C 00
   call   addr_01860                   ; 00:17C2 - CD 60 18
   ld     a, (var_D27F)                ; 00:17C5 - 3A 7F D2
   and    a                            ; 00:17C8 - A7
   jr     z, addr_017DD                ; 00:17C9 - 28 12
   dec    a                            ; 00:17CB - 3D
   ld     (var_D27F), a                ; 00:17CC - 32 7F D2
   ld     de, $0000                    ; 00:17CF - 11 00 00
   ld     c, $02                       ; 00:17D2 - 0E 02
   call   addr_039D8                   ; 00:17D4 - CD D8 39
   ld     a, $02                       ; 00:17D7 - 3E 02
   rst    $28                          ; 00:17D9 - EF
   jp     addr_017BF                   ; 00:17DA - C3 BF 17

addr_017DD:
   ld     bc, $00B4                    ; 00:17DD - 01 B4 00
   call   addr_01860                   ; 00:17E0 - CD 60 18
   ld     a, $01                       ; 00:17E3 - 3E 01
   ld     (var_D216), a                ; 00:17E5 - 32 16 D2
   ld     hl, LUT_0198E                ; 00:17E8 - 21 8E 19
   call   print_positioned_FF_string   ; 00:17EB - CD AF 05
   ld     bc, $00B4                    ; 00:17EE - 01 B4 00
   call   addr_01860                   ; 00:17F1 - CD 60 18

addr_017F4:
   ld     bc, $001E                    ; 00:17F4 - 01 1E 00
   call   addr_01860                   ; 00:17F7 - CD 60 18
   ld     a, (g_lives)                 ; 00:17FA - 3A 46 D2
   and    a                            ; 00:17FD - A7
   jr     z, addr_01812                ; 00:17FE - 28 12
   dec    a                            ; 00:1800 - 3D
   ld     (g_lives), a                 ; 00:1801 - 32 46 D2
   ld     de, $5000                    ; 00:1804 - 11 00 50
   ld     c, $00                       ; 00:1807 - 0E 00
   call   addr_039D8                   ; 00:1809 - CD D8 39
   ld     a, $02                       ; 00:180C - 3E 02
   rst    $28                          ; 00:180E - EF
   jp     addr_017F4                   ; 00:180F - C3 F4 17

addr_01812:
   ld     bc, $00B4                    ; 00:1812 - 01 B4 00
   call   addr_01860                   ; 00:1815 - CD 60 18
   ld     a, $02                       ; 00:1818 - 3E 02
   ld     (var_D216), a                ; 00:181A - 32 16 D2
   ld     hl, LUT_0199E                ; 00:181D - 21 9E 19
   call   print_positioned_FF_string   ; 00:1820 - CD AF 05
   ld     hl, LUT_0197A                ; 00:1823 - 21 7A 19
   call   print_positioned_FF_string   ; 00:1826 - CD AF 05
   ld     bc, $00B4                    ; 00:1829 - 01 B4 00
   call   addr_01860                   ; 00:182C - CD 60 18

addr_0182F:
   ld     bc, $001E                    ; 00:182F - 01 1E 00
   call   addr_01860                   ; 00:1832 - CD 60 18
   ld     a, (var_D2FF)                ; 00:1835 - 3A FF D2
   and    a                            ; 00:1838 - A7
   jr     z, addr_01859                ; 00:1839 - 28 1E
   dec    a                            ; 00:183B - 3D
   ld     c, a                         ; 00:183C - 4F
   and    $0F                          ; 00:183D - E6 0F
   cp     $0A                          ; 00:183F - FE 0A
   jr     c, addr_01847                ; 00:1841 - 38 04
   ld     a, c                         ; 00:1843 - 79
   sub    $06                          ; 00:1844 - D6 06
   ld     c, a                         ; 00:1846 - 4F

addr_01847:
   ld     a, c                         ; 00:1847 - 79
   ld     (var_D2FF), a                ; 00:1848 - 32 FF D2
   ld     de, $0000                    ; 00:184B - 11 00 00
   ld     c, $01                       ; 00:184E - 0E 01
   call   addr_039D8                   ; 00:1850 - CD D8 39
   ld     a, $02                       ; 00:1853 - 3E 02
   rst    $28                          ; 00:1855 - EF
   jp     addr_0182F                   ; 00:1856 - C3 2F 18

addr_01859:
   ld     bc, $01E0                    ; 00:1859 - 01 E0 01
   call   addr_01860                   ; 00:185C - CD 60 18
   ret                                 ; 00:185F - C9

addr_01860:
   push   bc                           ; 00:1860 - C5
   res    0, (iy+var_D200-IYBASE)      ; 00:1861 - FD CB 00 86
   call   wait_until_irq_ticked        ; 00:1865 - CD 1C 03
   ld     (iy+g_sprite_count-IYBASE), $00  ; 00:1868 - FD 36 0A 00
   ld     hl, var_D000                 ; 00:186C - 21 00 D0
   ld     (var_D23C), hl               ; 00:186F - 22 3C D2
   ld     hl, var_D2BA                 ; 00:1872 - 21 BA D2
   ld     de, g_HUD_FFstr_buf          ; 00:1875 - 11 BE D2
   ld     b, $04                       ; 00:1878 - 06 04
   call   addr_01B13                   ; 00:187A - CD 13 1B
   ex     de, hl                       ; 00:187D - EB
   ld     hl, (var_D23C)               ; 00:187E - 2A 3C D2
   ld     c, $90                       ; 00:1881 - 0E 90
   ld     b, $80                       ; 00:1883 - 06 80
   call   draw_sprite_text             ; 00:1885 - CD CC 35
   ld     (var_D23C), hl               ; 00:1888 - 22 3C D2
   ld     a, (var_D216)                ; 00:188B - 3A 16 D2
   and    a                            ; 00:188E - A7
   jr     nz, addr_018C5               ; 00:188F - 20 34
   ld     hl, var_D27F                 ; 00:1891 - 21 7F D2
   ld     de, g_HUD_FFstr_buf          ; 00:1894 - 11 BE D2
   ld     b, $01                       ; 00:1897 - 06 01
   call   addr_01B13                   ; 00:1899 - CD 13 1B
   ex     de, hl                       ; 00:189C - EB
   ld     hl, (var_D23C)               ; 00:189D - 2A 3C D2
   ld     c, $90                       ; 00:18A0 - 0E 90
   ld     b, $60                       ; 00:18A2 - 06 60
   call   draw_sprite_text             ; 00:18A4 - CD CC 35
   ld     (var_D23C), hl               ; 00:18A7 - 22 3C D2
   ld     hl, LUT_019AE                ; 00:18AA - 21 AE 19
   ld     de, g_HUD_FFstr_buf          ; 00:18AD - 11 BE D2
   ld     b, $03                       ; 00:18B0 - 06 03
   call   addr_01B13                   ; 00:18B2 - CD 13 1B
   ex     de, hl                       ; 00:18B5 - EB
   ld     hl, (var_D23C)               ; 00:18B6 - 2A 3C D2
   ld     c, $A0                       ; 00:18B9 - 0E A0
   ld     b, $60                       ; 00:18BB - 06 60
   call   draw_sprite_text             ; 00:18BD - CD CC 35
   ld     (var_D23C), hl               ; 00:18C0 - 22 3C D2
   jr     addr_018FF                   ; 00:18C3 - 18 3A

addr_018C5:
   dec    a                            ; 00:18C5 - 3D
   jr     nz, addr_018E6               ; 00:18C6 - 20 1E
   call   addr_01ACA                   ; 00:18C8 - CD CA 1A
   ld     hl, LUT_019B1                ; 00:18CB - 21 B1 19
   ld     de, g_HUD_FFstr_buf          ; 00:18CE - 11 BE D2
   ld     b, $03                       ; 00:18D1 - 06 03
   call   addr_01B13                   ; 00:18D3 - CD 13 1B
   ex     de, hl                       ; 00:18D6 - EB
   ld     hl, (var_D23C)               ; 00:18D7 - 2A 3C D2
   ld     c, $A0                       ; 00:18DA - 0E A0
   ld     b, $60                       ; 00:18DC - 06 60
   call   draw_sprite_text             ; 00:18DE - CD CC 35
   ld     (var_D23C), hl               ; 00:18E1 - 22 3C D2
   jr     addr_018FF                   ; 00:18E4 - 18 19

addr_018E6:
   ld     hl, var_D2FF                 ; 00:18E6 - 21 FF D2
   ld     de, g_HUD_FFstr_buf          ; 00:18E9 - 11 BE D2
   ld     b, $03                       ; 00:18EC - 06 03
   call   addr_01B13                   ; 00:18EE - CD 13 1B
   ex     de, hl                       ; 00:18F1 - EB
   ld     hl, (var_D23C)               ; 00:18F2 - 2A 3C D2
   ld     c, $A0                       ; 00:18F5 - 0E A0
   ld     b, $60                       ; 00:18F7 - 06 60
   call   draw_sprite_text             ; 00:18F9 - CD CC 35
   ld     (var_D23C), hl               ; 00:18FC - 22 3C D2

addr_018FF:
   pop    bc                           ; 00:18FF - C1
   dec    bc                           ; 00:1900 - 0B
   ld     a, b                         ; 00:1901 - 78
   or     c                            ; 00:1902 - B1
   jp     nz, addr_01860               ; 00:1903 - C2 60 18
   ret                                 ; 00:1906 - C9

LUT_01907:
.db $07, $09, $DA, $DB, $DB, $DB, $DB, $DB, $DB, $DB, $DB, $DB, $DB, $DB, $DB, $DB  ; 00:1907
.db $DB, $DB, $DB, $DC, $FF                                                         ; 00:1917

LUT_0191C:
.db $07, $0A, $EA, $EB, $EB, $EB, $EB, $EB, $EB, $EB, $EB, $EB, $EB, $EB, $EB, $EB  ; 00:191C
.db $EB, $EB, $EB, $EC, $FF                                                         ; 00:192C

LUT_01931:
.db $07, $0B, $FB, $FC, $FC, $FC, $FC, $FC, $FC, $FC, $FC, $FC, $FC, $FC, $FC, $FC  ; 00:1931
.db $FC, $FC, $FC, $FD, $FF                                                         ; 00:1941

LUT_01946:
.db $11, $0B, $DA, $DB, $DB, $DB, $DB, $DB, $DB, $DB, $DB, $DC, $FF                 ; 00:1946

LUT_01953:
.db $11, $0C, $EA, $EB, $EB, $EB, $EB, $EB, $EB, $EB, $EB, $EC, $FF                 ; 00:1953

LUT_01960:
.db $11, $0D, $EA, $EB, $EB, $FA, $EB, $EB, $EB, $EB, $EB, $EC, $FF                 ; 00:1960

LUT_0196D:
.db $11, $0E, $FB, $FC, $FC, $FC, $FC, $FC, $FC, $FC, $FC, $FD, $FF                 ; 00:196D

LUT_0197A:
.db $14, $0D, $EB, $FF                                                              ; 00:197A

LUT_0197E:
;; CHAQS EMERALD <-- And this is why you use ASCII, not your own EBCDIC-alike.
.db $08, $0A, $36, $47, $34, $61, $70, $EB, $44, $50, $44, $62, $34, $43, $37, $FF  ; 00:197E

LUT_0198E:
;; SONIC LEFT
.db $08, $0A, $70, $52, $51, $40, $36, $EB, $43, $44, $45, $80, $EB, $EB, $EB, $FF  ; 00:198E

;; SPECIAL BONUS
LUT_0199E:
.db $08, $0A, $70, $60, $44, $36, $40, $34, $43, $EB, $35, $52, $51, $81, $70, $FF  ; 00:199E

LUT_019AE:
.db $02, $00, $00                                                                   ; 00:19AE

LUT_019B1:
.db $00, $50, $00                                                                   ; 00:19B1

addr_019B4:
   ld     hl, g_rings_BCD              ; 00:19B4 - 21 AA D2
   ld     a, (hl)                      ; 00:19B7 - 7E
   and    a                            ; 00:19B8 - A7
   ret    z                            ; 00:19B9 - C8
   dec    a                            ; 00:19BA - 3D
   ld     c, a                         ; 00:19BB - 4F
   and    $0F                          ; 00:19BC - E6 0F
   cp     $0A                          ; 00:19BE - FE 0A
   jr     c, addr_019C6                ; 00:19C0 - 38 04
   ld     a, c                         ; 00:19C2 - 79
   sub    $06                          ; 00:19C3 - D6 06
   ld     c, a                         ; 00:19C5 - 4F

addr_019C6:
   ld     (hl), c                      ; 00:19C6 - 71
   ld     de, $0100                    ; 00:19C7 - 11 00 01
   ld     c, $00                       ; 00:19CA - 0E 00
   ld     a, (g_level)                 ; 00:19CC - 3A 3E D2
   cp     $1C                          ; 00:19CF - FE 1C
   jr     c, addr_019DB                ; 00:19D1 - 38 08
   ld     a, (var_D285)                ; 00:19D3 - 3A 85 D2
   ld     d, a                         ; 00:19D6 - 57
   ld     a, (var_D286)                ; 00:19D7 - 3A 86 D2
   ld     e, a                         ; 00:19DA - 5F

addr_019DB:
   call   addr_039D8                   ; 00:19DB - CD D8 39
   ret                                 ; 00:19DE - C9

bonus_to_score_BCD_UNCONFIRMED:
   ld     hl, (var_D212)               ; 00:19DF - 2A 12 D2
   ld     de, (var_D214)               ; 00:19E2 - ED 5B 14 D2
   ld     a, h                         ; 00:19E6 - 7C
   or     l                            ; 00:19E7 - B5
   or     d                            ; 00:19E8 - B2
   or     e                            ; 00:19E9 - B3
   ret    z                            ; 00:19EA - C8

   .IF 0
   ;; Original code
   ld     b, $03                       ; 00:19EB - 06 03
   ld     hl, var_D214                 ; 00:19ED - 21 14 D2
   scf                                 ; 00:19F0 - 37

addr_019F1:
   ld     a, (hl)                      ; 00:19F1 - 7E
   sbc    a, $00                       ; 00:19F2 - DE 00
   ld     c, a                         ; 00:19F4 - 4F
   and    $0F                          ; 00:19F5 - E6 0F
   cp     $0A                          ; 00:19F7 - FE 0A
   jr     c, addr_019FF                ; 00:19F9 - 38 04
   ld     a, c                         ; 00:19FB - 79
   sub    $06                          ; 00:19FC - D6 06
   ld     c, a                         ; 00:19FE - 4F

addr_019FF:
   ld     a, c                         ; 00:19FF - 79
   cp     $A0                          ; 00:1A00 - FE A0
   jr     c, addr_01A06                ; 00:1A02 - 38 02
   sub    $60                          ; 00:1A04 - D6 60

addr_01A06:
   ld     (hl), a                      ; 00:1A06 - 77
   ccf                                 ; 00:1A07 - 3F
   dec    hl                           ; 00:1A08 - 2B
   djnz   addr_019F1                   ; 00:1A09 - 10 E6
   ld     de, $0100                    ; 00:1A0B - 11 00 01
   ld     c, $00                       ; 00:1A0E - 0E 00
   call   addr_039D8                   ; 00:1A10 - CD D8 39

   .ELSE
   ;; New code
   ld bc, $0300
   ld hl, var_D214
   ld de, $0100
   scf
   -:
      ld a, (hl)
      sbc a, c
      daa
      ld (hl), a
      dec hl
      djnz -
   call addr_039D8
   .ENDIF

   ret                                 ; 00:1A13 - C9

LUT_01A14_allzero:
.db $00, $00, $00, $00                                                              ; 00:1A14

addr_01A18:
   ld     (iy+g_sprite_count-IYBASE), $00  ; 00:1A18 - FD 36 0A 00
   ld     hl, var_D000                 ; 00:1A1C - 21 00 D0
   ld     (var_D23C), hl               ; 00:1A1F - 22 3C D2
   ld     hl, var_D2BA                 ; 00:1A22 - 21 BA D2
   ld     de, g_HUD_FFstr_buf          ; 00:1A25 - 11 BE D2
   ld     b, $04                       ; 00:1A28 - 06 04
   call   addr_01B13                   ; 00:1A2A - CD 13 1B
   ex     de, hl                       ; 00:1A2D - EB
   ld     hl, (var_D23C)               ; 00:1A2E - 2A 3C D2
   .IF 0
   ld     c, $88                       ; 00:1A31 - 0E 88
   ld     b, $50                       ; 00:1A33 - 06 50
   .ELSE
   ld bc, $5088
   ; SAVING: 1 byte
   .ENDIF
   call   draw_sprite_text             ; 00:1A35 - CD CC 35
   ld     (var_D23C), hl               ; 00:1A38 - 22 3C D2
   ld     hl, g_rings_BCD              ; 00:1A3B - 21 AA D2
   ld     de, g_HUD_FFstr_buf          ; 00:1A3E - 11 BE D2
   ld     b, $01                       ; 00:1A41 - 06 01
   call   addr_01B13                   ; 00:1A43 - CD 13 1B
   ex     de, hl                       ; 00:1A46 - EB
   ld     hl, (var_D23C)               ; 00:1A47 - 2A 3C D2
   .IF 0
   ld     c, $98                       ; 00:1A4A - 0E 98
   ld     b, $80                       ; 00:1A4C - 06 80
   .ELSE
   ld bc, $8098
   ; SAVING: 1 byte
   .ENDIF
   ld     a, (g_level)                 ; 00:1A4E - 3A 3E D2
   cp     $1C                          ; 00:1A51 - FE 1C
   jr     c, addr_01A57                ; 00:1A53 - 38 02
   ld     b, $68                       ; 00:1A55 - 06 68

addr_01A57:
   call   draw_sprite_text             ; 00:1A57 - CD CC 35
   ld     (var_D23C), hl               ; 00:1A5A - 22 3C D2
   ld     a, (g_level)                 ; 00:1A5D - 3A 3E D2
   cp     $1C                          ; 00:1A60 - FE 1C
   jr     c, addr_01A73                ; 00:1A62 - 38 0F
   ld     hl, var_D285                 ; 00:1A64 - 21 85 D2
   ld     de, g_HUD_FFstr_buf          ; 00:1A67 - 11 BE D2
   ld     b, $02                       ; 00:1A6A - 06 02
   call   addr_01B13                   ; 00:1A6C - CD 13 1B
   ld     b, $68                       ; 00:1A6F - 06 68
   jr     addr_01A80                   ; 00:1A71 - 18 0D

addr_01A73:
   ld     hl, LUT_0151C                ; 00:1A73 - 21 1C 15
   ld     de, g_HUD_FFstr_buf          ; 00:1A76 - 11 BE D2
   ld     b, $02                       ; 00:1A79 - 06 02
   call   addr_01B13                   ; 00:1A7B - CD 13 1B
   ld     b, $80                       ; 00:1A7E - 06 80

addr_01A80:
   ld     c, $C0                       ; 00:1A80 - 0E C0
   ex     de, hl                       ; 00:1A82 - EB
   ld     hl, (var_D23C)               ; 00:1A83 - 2A 3C D2
   call   draw_sprite_text             ; 00:1A86 - CD CC 35
   ld     (var_D23C), hl               ; 00:1A89 - 22 3C D2
   call   addr_01ACA                   ; 00:1A8C - CD CA 1A
   ld     a, (g_level)                 ; 00:1A8F - 3A 3E D2
   cp     $1C                          ; 00:1A92 - FE 1C
   jr     nc, addr_01AB0               ; 00:1A94 - 30 1A
   ld     hl, var_D212                 ; 00:1A96 - 21 12 D2
   ld     de, g_HUD_FFstr_buf          ; 00:1A99 - 11 BE D2
   ld     b, $04                       ; 00:1A9C - 06 04
   call   addr_01B13                   ; 00:1A9E - CD 13 1B
   ex     de, hl                       ; 00:1AA1 - EB
   ld     hl, (var_D23C)               ; 00:1AA2 - 2A 3C D2
   .IF 0
   ld     c, $88                       ; 00:1AA5 - 0E 88
   ld     b, $68                       ; 00:1AA7 - 06 68
   .ELSE
   ld bc, $6888
   ; SAVING: 1 byte
   .ENDIF
   call   draw_sprite_text             ; 00:1AA9 - CD CC 35
   ld     (var_D23C), hl               ; 00:1AAC - 22 3C D2
   ret                                 ; 00:1AAF - C9

addr_01AB0:
   ld     hl, var_D284                 ; 00:1AB0 - 21 84 D2
   ld     de, g_HUD_FFstr_buf          ; 00:1AB3 - 11 BE D2
   ld     b, $01                       ; 00:1AB6 - 06 01
   call   addr_01B13                   ; 00:1AB8 - CD 13 1B
   ex     de, hl                       ; 00:1ABB - EB
   ld     hl, (var_D23C)               ; 00:1ABC - 2A 3C D2
   .IF 0
   ld     c, $A8                       ; 00:1ABF - 0E A8
   ld     b, $80                       ; 00:1AC1 - 06 80
   .ELSE
   ld bc, $80A8
   ; SAVING: 1 byte
   .ENDIF
   call   draw_sprite_text             ; 00:1AC3 - CD CC 35
   ld     (var_D23C), hl               ; 00:1AC6 - 22 3C D2
   ret                                 ; 00:1AC9 - C9

addr_01ACA:
   .IF 0
   ld     a, (g_lives)                 ; 00:1ACA - 3A 46 D2
   ld     l, a                         ; 00:1ACD - 6F
   ld     h, $00                       ; 00:1ACE - 26 00
   ld     c, $0A                       ; 00:1AD0 - 0E 0A
   call   UNK_0060F_PURE_maybe_a_divide_function  ; 00:1AD2 - CD 0F 06
   ld     a, l                         ; 00:1AD5 - 7D
   add    a, a                         ; 00:1AD6 - 87
   add    a, $80                       ; 00:1AD7 - C6 80
   ld     (g_HUD_FFstr_buf), a         ; 00:1AD9 - 32 BE D2
   ld     c, $0A                       ; 00:1ADC - 0E 0A
   call   mul_hl_by_c_trashing_abcde_PURE  ; 00:1ADE - CD FC 05
   ex     de, hl                       ; 00:1AE1 - EB
   ld     a, (g_lives)                 ; 00:1AE2 - 3A 46 D2
   ld     l, a                         ; 00:1AE5 - 6F
   ld     h, $00                       ; 00:1AE6 - 26 00
   and    a                            ; 00:1AE8 - A7
   sbc    hl, de                       ; 00:1AE9 - ED 52
   ld     a, l                         ; 00:1AEB - 7D
   add    a, a                         ; 00:1AEC - 87
   add    a, $80                       ; 00:1AED - C6 80
   ld     (var_D2BF), a                ; 00:1AEF - 32 BF D2
   ld     a, $FF                       ; 00:1AF2 - 3E FF
   ld     (var_D2C0), a                ; 00:1AF4 - 32 C0 D2
   .ELSE
   call calc_lives_output
   .ENDIF
   .IF 0
   ld     c, $38                       ; 00:1AF7 - 0E 38
   ld     b, $9F                       ; 00:1AF9 - 06 9F
   .ELSE
   ld bc, $9F38
   ; SAVING: 1 byte
   .ENDIF
   ld     a, (g_level)                 ; 00:1AFB - 3A 3E D2
   cp     $13                          ; 00:1AFE - FE 13
   jr     nz, addr_01B06               ; 00:1B00 - 20 04
   .IF 0
   ld     b, $60                       ; 00:1B02 - 06 60
   ld     c, $90                       ; 00:1B04 - 0E 90
   .ELSE
   ld bc, $6090
   ; SAVING: 1 byte
   .ENDIF

addr_01B06:
   ld     hl, (var_D23C)               ; 00:1B06 - 2A 3C D2
   ld     de, g_HUD_FFstr_buf          ; 00:1B09 - 11 BE D2
   call   draw_sprite_text             ; 00:1B0C - CD CC 35
   ld     (var_D23C), hl               ; 00:1B0F - 22 3C D2
   ret                                 ; 00:1B12 - C9

addr_01B13:
   ld     a, (hl)                      ; 00:1B13 - 7E
   and    $F0                          ; 00:1B14 - E6 F0
   jr     nz, addr_01B33               ; 00:1B16 - 20 1B
   ld     a, $FE                       ; 00:1B18 - 3E FE
   ld     (de), a                      ; 00:1B1A - 12
   inc    de                           ; 00:1B1B - 13
   ld     a, (hl)                      ; 00:1B1C - 7E
   and    $0F                          ; 00:1B1D - E6 0F
   jr     nz, addr_01B3F               ; 00:1B1F - 20 1E
   ld     a, $FE                       ; 00:1B21 - 3E FE
   ld     (de), a                      ; 00:1B23 - 12
   inc    hl                           ; 00:1B24 - 23
   inc    de                           ; 00:1B25 - 13
   djnz   addr_01B13                   ; 00:1B26 - 10 EB
   ld     a, $FF                       ; 00:1B28 - 3E FF
   ld     (de), a                      ; 00:1B2A - 12
   dec    de                           ; 00:1B2B - 1B
   ld     a, $80                       ; 00:1B2C - 3E 80
   ld     (de), a                      ; 00:1B2E - 12
   ld     hl, g_HUD_FFstr_buf          ; 00:1B2F - 21 BE D2
   ret                                 ; 00:1B32 - C9

addr_01B33:
   ld     a, (hl)                      ; 00:1B33 - 7E
   .IF 0
   rrca                                ; 00:1B34 - 0F
   rrca                                ; 00:1B35 - 0F
   rrca                                ; 00:1B36 - 0F
   rrca                                ; 00:1B37 - 0F
   and    $0F                          ; 00:1B38 - E6 0F
   add    a, a                         ; 00:1B3A - 87
   add    a, $80                       ; 00:1B3B - C6 80
   .ELSE
   rrca
   rrca
   scf
   rra
   and $9E
   ; SAVING: 3 bytes
   .ENDIF
   ld     (de), a                      ; 00:1B3D - 12
   inc    de                           ; 00:1B3E - 13

addr_01B3F:
   ld     a, (hl)                      ; 00:1B3F - 7E
   and    $0F                          ; 00:1B40 - E6 0F
   add    a, a                         ; 00:1B42 - 87
   add    a, $80                       ; 00:1B43 - C6 80
   ld     (de), a                      ; 00:1B45 - 12
   inc    hl                           ; 00:1B46 - 23
   inc    de                           ; 00:1B47 - 13
   djnz   addr_01B33                   ; 00:1B48 - 10 E9
   ld     a, $FF                       ; 00:1B4A - 3E FF
   ld     (de), a                      ; 00:1B4C - 12
   ld     hl, g_HUD_FFstr_buf          ; 00:1B4D - 21 BE D2
   ret                                 ; 00:1B50 - C9

LUT_01B51:
.db $83, $84, $93, $94, $A3, $A4, $B3, $B4, $85, $86, $95, $96, $A5, $A6, $B5, $B6  ; 00:1B51
.db $87, $88, $97, $98, $A7, $A8, $B7, $B8                                          ; 00:1B61

LUT_01B69:
.db $00, $08, $10, $00, $08, $10, $00, $08, $10, $00, $08, $10, $00, $08, $10, $00  ; 00:1B69
.db $08, $10, $00, $00, $08, $08, $08, $08, $08, $08, $08, $08, $00, $00, $00, $00  ; 00:1B79
.db $00, $00, $00, $00                                                              ; 00:1B89

PAL3_score_tally:
.INCBIN "src/data/score_tally.pal3"

update_demo_inputs:
   .IF 0
   ;; Original code
   ld     hl, (g_demo_next_input_relptr)  ; 00:1BAD - 2A B5 D2
   ld     de, ARRAY_demo_inputs        ; 00:1BB0 - 11 C6 1B
   add    hl, de                       ; 00:1BB3 - 19
   ld     a, (hl)                      ; 00:1BB4 - 7E
   ld     (iy+g_inputs_player_1-IYBASE), a  ; 00:1BB5 - FD 77 03
   ld     a, (var_D223)                ; 00:1BB8 - 3A 23 D2
   and    $1F                          ; 00:1BBB - E6 1F
   ret    nz                           ; 00:1BBD - C0
   ld     hl, (g_demo_next_input_relptr)  ; 00:1BBE - 2A B5 D2
   inc    hl                           ; 00:1BC1 - 23
   ld     (g_demo_next_input_relptr), hl  ; 00:1BC2 - 22 B5 D2
   ret                                 ; 00:1BC5 - C9

   .ELSE
   ;; New code
   ;; Hi = previous input
   ;; Lo = actual relptr to fetch
   ld hl, (g_demo_next_input_relptr)
   ld a, h
   sub $20
   ld h, a
   jr nc, +
      ;; RLE counter decremented, need to fetch new byte
      ld h, $00
      ld de, ARRAY_demo_inputs
      ld a, l
      add hl, de
      ld h, (hl)
      inc a
      ld l, a
   +:
   ;; Build input
   ld a, h
   and $1F
   add a, $10
   or $D0
   ld (iy+g_inputs_player_1-IYBASE), a

   ;; See if we can advance
   ld a, (var_D223)
   and $1F
   ret nz

   ;; We can. Store our update!
   ld (g_demo_next_input_relptr), hl
   ret
   ;; This costs 14 bytes. But if we actually compress the demo data, then...
   ; SAVING: 62 bytes
   ;; We actually save 76 bytes on the actual data.
   ;; That is: 131 -> 55 bytes.
   .ENDIF


ARRAY_demo_inputs:
.IF 0
.db $F7, $F7, $F7, $F7, $DF, $F7, $FF, $FF, $D7, $F7, $F7, $F7, $FF, $DF, $F7, $F7  ; 00:1BC6
.db $DF, $F7, $F7, $F7, $F7, $FF, $FF, $DF, $F7, $FF, $FF, $FF, $FB, $F7, $F7, $F5  ; 00:1BD6
.db $FF, $FF, $FF, $FF, $FB, $FB, $F9, $FF, $FF, $FF, $FF, $F7, $F7, $F7, $F7, $D7  ; 00:1BE6
.db $FF, $FF, $D7, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $D7, $FB, $FF, $FF, $FF, $FF  ; 00:1BF6
.db $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $D7, $F7, $F7, $FF, $D7  ; 00:1C06
.db $FB, $F7, $F7, $F7, $F7, $FB, $FB, $F7, $FF, $D7, $FB, $FF, $F7, $F7, $D7, $FB  ; 00:1C16
.db $D7, $F7, $F7, $F7, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $F7, $F7, $F7, $D7, $FF  ; 00:1C26
.db $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF  ; 00:1C36
.db $FF, $FF, $00                                                                   ; 00:1C46

.ELIF 0
;; RLE-compatible uncompressed.
.db $17, $17, $17, $17
.db $0F
.db $17
.db $1F, $1F
.db $07
.db $17, $17, $17
.db $1F
.db $0F
.db $17, $17
.db $0F
.db $17, $17, $17, $17
.db $1F, $1F
.db $0F
.db $17
.db $1F, $1F, $1F
.db $1B
.db $17, $17
.db $15
.db $1F, $1F, $1F, $1F
.db $1B, $1B
.db $19
.db $1F, $1F, $1F, $1F
.db $17, $17, $17, $17
.db $07
.db $1F, $1F
.db $07
.db $1F, $1F, $1F, $1F, $1F, $1F, $1F
.db $07
.db $1B
.db $1F, $1F, $1F, $1F, $1F, $1F, $1F, $1F, $1F, $1F, $1F, $1F, $1F, $1F, $1F
.db $07
.db $17, $17
.db $1F
.db $07
.db $1B
.db $17, $17, $17, $17
.db $1B, $1B
.db $17
.db $1F
.db $07
.db $1B
.db $1F
.db $17, $17
.db $07
.db $1B
.db $07
.db $17, $17, $17
.db $1F, $1F, $1F, $1F, $1F, $1F, $1F
.db $17, $17, $17
.db $07
.db $1F, $1F, $1F, $1F, $1F, $1F, $1F, $1F, $1F, $1F, $1F, $1F, $1F, $1F, $1F, $1F, $1F, $1F, $1F
.db $00

.ELSE
;; RLE-compressed.
.db $17 | ((4-1)<<5)
.db $0F
.db $17
.db $1F | ((2-1)<<5)
.db $07
.db $17 | ((3-1)<<5)
.db $1F
.db $0F
.db $17 | ((2-1)<<5)
.db $0F
.db $17 | ((3-1)<<5)
.db $1F | ((2-1)<<5)
.db $0F
.db $17
.db $1F | ((3-1)<<5)
.db $1B
.db $17 | ((2-1)<<5)
.db $15
.db $1F | ((4-1)<<5)
.db $1B | ((2-1)<<5)
.db $19
.db $1F | ((4-1)<<5)
.db $17 | ((4-1)<<5)
.db $07
.db $1F | ((2-1)<<5)
.db $07
.db $1F | ((7-1)<<5)
.db $07
.db $1B
.db $1F | ((8-1)<<5)
.db $1F | ((7-1)<<5)
.db $07
.db $17 | ((2-1)<<5)
.db $1F
.db $07
.db $1B
.db $17 | ((4-1)<<5)
.db $1B | ((2-1)<<5)
.db $17
.db $1F
.db $07
.db $1B
.db $1F
.db $17 | ((2-1)<<5)
.db $07
.db $1B
.db $07
.db $17 | ((3-1)<<5)
.db $1F | ((7-1)<<5)
.db $17 | ((3-1)<<5)
.db $07
.db $1F | ((8-1)<<5)
.db $1F | ((8-1)<<5)
.db $1F | ((3-1)<<5)
.db $00

.ENDIF

_reset_01C49:
   set    0, (iy+var_D200-IYBASE)      ; 00:1C49 - FD CB 00 C6
   ei                                  ; 00:1C4D - FB

;addr_01C4E:
   ld     a, $03                       ; 00:1C4E - 3E 03
   ld     (g_lives), a                 ; 00:1C50 - 32 46 D2
   ld     a, $05                       ; 00:1C53 - 3E 05
   ld     (var_D2FD), a                ; 00:1C55 - 32 FD D2
   ld     a, $1C                       ; 00:1C58 - 3E 1C
   ld     (g_next_bonus_level), a      ; 00:1C5A - 32 3F D2
   ;; RAM has been cleared already, so no need to explicitly clear this...
   .IF 0
      ;; NOTE: Actually, the demo affects things here... but there's an easy enough fix - just do a proper reset.
      ;; Otherwise the demo desyncs on repeat playthroughs.
      xor    a                            ; 00:1C5D - AF
      ;ld     (g_level), a                 ; 00:1C5E - 32 3E D2
      ld     (var_D223), a                ; 00:1C61 - 32 23 D2
      ;; This one is especially silly as the IY dereference saves no bytes and wastes 6 extra cycles.
      ld     (iy+var_D20D-IYBASE), a      ; 00:1C64 - FD 77 0D
      ;; But wait, there's more! Here we clear already-$00-filled arrays with $00.
      ld     hl, var_D27F                 ; 00:1C67 - 21 7F D2
      ld     b, $08                       ; 00:1C6A - 06 08
      call   fill_ram_at_hl_for_b_bytes_with_a  ; 00:1C6C - CD E8 1C
      ld     hl, var_D200                 ; 00:1C6F - 21 00 D2
      ld     b, $0E                       ; 00:1C72 - 06 0E
      call   fill_ram_at_hl_for_b_bytes_with_a  ; 00:1C74 - CD E8 1C
      ld     hl, var_D2BA                 ; 00:1C77 - 21 BA D2
      ld     b, $04                       ; 00:1C7A - 06 04
      call   fill_ram_at_hl_for_b_bytes_with_a  ; 00:1C7C - CD E8 1C
      ld     hl, g_level_lives_collected_mask  ; 00:1C7F - 21 05 D3
      ld     b, $18                       ; 00:1C82 - 06 18
      call   fill_ram_at_hl_for_b_bytes_with_a  ; 00:1C84 - CD E8 1C
   .ENDIF

   ;; Of course, I like being able to test on different levels so here, have a level select hack.
   ld hl, g_level               ; 1C5D 3
   ld (hl), cht_starting_level  ; 1C60 2
   ; 1C87 -> 1C62 - SAVING: 37 bytes

   ;; Show the title screen!
   res    0, (iy+var_D202-IYBASE)      ; 00:1C87 - FD CB 02 86
   res    1, (iy+var_D202-IYBASE)      ; 00:1C8B - FD CB 02 8E
   call   clear_sprite_table           ; 00:1C8F - CD E2 05
   call   run_title_screen             ; 00:1C92 - CD 87 12
   res    1, (iy+var_D205-IYBASE)      ; 00:1C95 - FD CB 05 8E
   ;; If the carry flag is clear, we want to show the demo.
   ;; If it is set, then we want to actually play the game.
   jr     c, addr_01C9F                ; 00:1C99 - 38 04
   set    1, (iy+var_D205-IYBASE)      ; 00:1C9B - FD CB 05 CE
   ;; HACK: Force GHZ1 if it's the demo (just in case we have a level select cheat/hack enabled)
   ld a, $00
   ld (g_level), a

addr_01C9F:
   ld     a, (g_level)                 ; 00:1C9F - 3A 3E D2
   ;; HACK: Allow starting on really high level numbers.
   ;; Also, SAVING: 4 bytes
   .IF 0
   cp     $13                          ; 00:1CA2 - FE 13
   ;jr     nc, addr_01C4E               ; 00:1CA4 - 30 A8
   jr nc, reset_trampoline_after_title
   .ENDIF
   res    0, (iy+var_D202-IYBASE)      ; 00:1CA6 - FD CB 02 86
   res    1, (iy+var_D202-IYBASE)      ; 00:1CAA - FD CB 02 8E
   call   clear_sprite_table           ; 00:1CAE - CD E2 05
   call   addr_00C52                   ; 00:1CB1 - CD 52 0C
   bit    1, (iy+var_D205-IYBASE)      ; 00:1CB4 - FD CB 05 4E
   jr     z, addr_01CBD                ; 00:1CB8 - 28 03
   .IF 0
   jp     c, addr_01C4E                ; 00:1CBA - DA 4E 1C
   .ELIF 0
   ; This literally cannot work - it seems that BIT clears the carry flag.
   jr c, reset_trampoline_after_title
   .ELSE
   ; SAVING: 3 bytes
   .ENDIF

addr_01CBD:
   call   addr_00A40                   ; 00:1CBD - CD 40 0A
   call   clear_sprite_table           ; 00:1CC0 - CD E2 05
   bit    0, (iy+var_D205-IYBASE)      ; 00:1CC3 - FD CB 05 46
   jr     nz, addr_01CCF               ; 00:1CC7 - 20 06
   bit    4, (iy+var_D206-IYBASE)      ; 00:1CC9 - FD CB 06 66
   jr     nz, addr_01CDB               ; 00:1CCD - 20 0C

addr_01CCF:
   ld     b, $3C                       ; 00:1CCF - 06 3C

addr_01CD1:
   res    0, (iy+var_D200-IYBASE)      ; 00:1CD1 - FD CB 00 86
   call   wait_until_irq_ticked        ; 00:1CD5 - CD 1C 03
   djnz   addr_01CD1                   ; 00:1CD8 - 10 F7
   rst    $20                          ; 00:1CDA - E7

addr_01CDB:
   call   load_level_header_UNCONFIRMED  ; 00:1CDB - CD ED 1C
   and    a                            ; 00:1CDE - A7
   ;jp     z, addr_01C4E                ; 00:1CDF - CA 4E 1C
   jr z, reset_trampoline_after_title
   dec    a                            ; 00:1CE2 - 3D
   jr     z, addr_01C9F                ; 00:1CE3 - 28 BA
   jp     addr_01CBD                   ; 00:1CE5 - C3 BD 1C

reset_trampoline_after_title:
   rst $00

fill_ram_at_hl_for_b_bytes_with_a:
   ld     (hl), a                      ; 00:1CE8 - 77
   inc    hl                           ; 00:1CE9 - 23
   djnz   fill_ram_at_hl_for_b_bytes_with_a  ; 00:1CEA - 10 FC
   ret                                 ; 00:1CEC - C9

.IF 1
;; SEE BELOW - if unreferenced, turn this off!
load_level_header_LUT_01: .dw $0060, $0088, $0060, $0070
.ENDIF

load_level_header_UNCONFIRMED:
   ld     a, $05                       ; 00:1CED - 3E 05
   .IF 0
   ;; BUGFIX: PAGERACE: Race condition, defeatable with a well-timed interrupt. Swapped ops around to fix.
   ld     (g_committed_rompage_1), a   ; 00:1CF2 - 32 35 D2
   ld     (rompage_1), a               ; 00:1CEF - 32 FE FF
   .ELSE
   call set_slot_1
   .ENDIF
   ld     a, (g_level)                 ; 00:1CF5 - 3A 3E D2
   bit    4, (iy+var_D206-IYBASE)      ; 00:1CF8 - FD CB 06 66
   jr     z, +                         ; 00:1CFC - 28 03
   ld     a, (var_D2D3)                ; 00:1CFE - 3A D3 D2

+:
   add    a, a                         ; 00:1D01 - 87
   ld     l, a                         ; 00:1D02 - 6F
   ld     h, $00                       ; 00:1D03 - 26 00
   ld     de, level_headers_rel        ; 00:1D05 - 11 80 55
   add    hl, de                       ; 00:1D08 - 19
   ld     a, (hl)                      ; 00:1D09 - 7E
   inc    hl                           ; 00:1D0A - 23
   ld     h, (hl)                      ; 00:1D0B - 66
   ld     l, a                         ; 00:1D0C - 6F
   or     h                            ; 00:1D0D - B4
   jp     z, addr_0258B                ; 00:1D0E - CA 8B 25
   add    hl, de                       ; 00:1D11 - 19
   call   addr_020CB                   ; 00:1D12 - CD CB 20
   set    0, (iy+var_D202-IYBASE)      ; 00:1D15 - FD CB 02 C6
   set    1, (iy+var_D202-IYBASE)      ; 00:1D19 - FD CB 02 CE
   set    1, (iy+var_D200-IYBASE)      ; 00:1D1D - FD CB 00 CE
   set    3, (iy+var_D206-IYBASE)      ; 00:1D21 - FD CB 06 DE
   res    3, (iy+var_D207-IYBASE)      ; 00:1D25 - FD CB 07 9E
   res    0, (iy+var_D209-IYBASE)      ; 00:1D29 - FD CB 09 86
   res    6, (iy+var_D206-IYBASE)      ; 00:1D2D - FD CB 06 B6
   res    0, (iy+var_D208-IYBASE)      ; 00:1D31 - FD CB 08 86
   res    6, (iy+var_D200-IYBASE)      ; 00:1D35 - FD CB 00 B6
   bit    3, (iy+var_D205-IYBASE)      ; 00:1D39 - FD CB 05 5E
   call   nz, addr_01ED8               ; 00:1D3D - C4 D8 1E
   ld     b, $10                       ; 00:1D40 - 06 10

addr_01D42:
   push   bc                           ; 00:1D42 - C5
   res    0, (iy+var_D200-IYBASE)      ; 00:1D43 - FD CB 00 86
   call   wait_until_irq_ticked        ; 00:1D47 - CD 1C 03
   ld     (iy+g_inputs_player_1-IYBASE), $FF  ; 00:1D4A - FD 36 03 FF
   ld     hl, (var_D223)               ; 00:1D4E - 2A 23 D2
   inc    hl                           ; 00:1D51 - 23
   ld     (var_D223), hl               ; 00:1D52 - 22 23 D2
   ld     a, $0B                       ; 00:1D55 - 3E 0B
   .IF 0
   ;; BUGFIX: PAGERACE: Race condition, defeatable with a well-timed interrupt. Swapped ops around to fix.
   ld     (g_committed_rompage_1), a   ; 00:1D5A - 32 35 D2
   ld     (rompage_1), a               ; 00:1D57 - 32 FE FF
   .ELSE
   call set_slot_1
   .ENDIF
   bit    2, (iy+var_D205-IYBASE)      ; 00:1D5D - FD CB 05 56
   call   nz, addr_03879               ; 00:1D61 - C4 79 38
   .IF 0
   ld     hl, $0060                    ; 00:1D64 - 21 60 00
   ld     (var_D25F), hl               ; 00:1D67 - 22 5F D2
   ld     hl, $0088                    ; 00:1D6A - 21 88 00
   ld     (var_D261), hl               ; 00:1D6D - 22 61 D2
   ld     hl, $0060                    ; 00:1D70 - 21 60 00
   ld     (var_D263), hl               ; 00:1D73 - 22 63 D2
   ld     hl, $0070                    ; 00:1D76 - 21 70 00
   ld     (var_D265), hl               ; 00:1D79 - 22 65 D2
   .ELSE
   ;; Load from a LUT.
   ld hl, load_level_header_LUT_01 ; 1D64 3
   ld de, var_D25F                 ; 1D67 3
   ld bc, $0008                    ; 1D6A 3
   ldir                            ; 1D6D 2
   .ENDIF
   ; 1D7C -> 1D6F - SAVING: 13 bytes
   call   addr_0239C                   ; 00:1D7C - CD 9C 23
   ld     a, $01                       ; 00:1D7F - 3E 01
   .IF 0
   ;; BUGFIX: PAGERACE: Race condition, defeatable with a well-timed interrupt. Swapped ops around to fix.
   ld     (g_committed_rompage_1), a   ; 00:1D84 - 32 35 D2
   ld     (rompage_1), a               ; 00:1D81 - 32 FE FF
   ld     a, $02                       ; 00:1D87 - 3E 02
   ;; BUGFIX: PAGERACE: Race condition, defeatable with a well-timed interrupt. Swapped ops around to fix.
   ld     (g_committed_rompage_2), a   ; 00:1D8C - 32 36 D2
   ld     (rompage_2), a               ; 00:1D89 - 32 FF FF
   .ELSE
   call set_slot_1_2
   .ENDIF
   call   addr_02E5A                   ; 00:1D8F - CD 5A 2E
   call   addr_0063E                   ; 00:1D92 - CD 3E 06
   call   addr_006BD                   ; 00:1D95 - CD BD 06
   set    5, (iy+var_D200-IYBASE)      ; 00:1D98 - FD CB 00 EE
   pop    bc                           ; 00:1D9C - C1
   djnz   addr_01D42                   ; 00:1D9D - 10 A3
   bit    1, (iy+var_D205-IYBASE)      ; 00:1D9F - FD CB 05 4E
   jr     z, addr_01DAE                ; 00:1DA3 - 28 09
   ld     hl, $0000                    ; 00:1DA5 - 21 00 00
   ld     (g_demo_next_input_relptr), hl  ; 00:1DA8 - 22 B5 D2
   ld     (iy+g_sprite_count-IYBASE), h  ; 00:1DAB - FD 74 0A

addr_01DAE:
   res    0, (iy+var_D200-IYBASE)      ; 00:1DAE - FD CB 00 86
   call   wait_until_irq_ticked        ; 00:1DB2 - CD 1C 03
   ld     a, $0B                       ; 00:1DB5 - 3E 0B
   .IF 0
   ;; BUGFIX: PAGERACE: Race condition, defeatable with a well-timed interrupt. Swapped ops around to fix.
   ld     (g_committed_rompage_1), a   ; 00:1DBA - 32 35 D2
   ld     (rompage_1), a               ; 00:1DB7 - 32 FE FF
   .ELSE
   call set_slot_1
   .ENDIF
   bit    2, (iy+var_D205-IYBASE)      ; 00:1DBD - FD CB 05 56
   call   nz, addr_03879               ; 00:1DC1 - C4 79 38
   bit    3, (iy+var_D206-IYBASE)      ; 00:1DC4 - FD CB 06 5E
   call   nz, tick_game_time           ; 00:1DC8 - C4 03 3A
   ld     a, (var_D223)                ; 00:1DCB - 3A 23 D2
   and    $01                          ; 00:1DCE - E6 01
   jr     nz, addr_01DDB               ; 00:1DD0 - 20 09
   ld     a, (g_signpost_tickdown_counter)  ; 00:1DD2 - 3A 89 D2
   and    a                            ; 00:1DD5 - A7
   call   nz, update_signpost_timer    ; 00:1DD6 - C4 A9 1F
   jr     addr_01DF0                   ; 00:1DD9 - 18 15

addr_01DDB:
   ld     a, (var_D287)                ; 00:1DDB - 3A 87 D2
   and    a                            ; 00:1DDE - A7
   jp     nz, addr_02067               ; 00:1DDF - C2 67 20

addr_01DE2:
   ld     a, (var_D2B1)                ; 00:1DE2 - 3A B1 D2
   and    a                            ; 00:1DE5 - A7
   call   nz, addr_01F06               ; 00:1DE6 - C4 06 1F
   bit    1, (iy+var_D207-IYBASE)      ; 00:1DE9 - FD CB 07 4E
   call   nz, addr_01F49               ; 00:1DED - C4 49 1F

addr_01DF0:
   bit    1, (iy+var_D206-IYBASE)      ; 00:1DF0 - FD CB 06 4E
   call   nz, addr_01E78               ; 00:1DF4 - C4 78 1E
   bit    1, (iy+var_D205-IYBASE)      ; 00:1DF7 - FD CB 05 4E
   jr     z, addr_01E07                ; 00:1DFB - 28 0A
   bit    5, (iy+g_inputs_player_1-IYBASE)  ; 00:1DFD - FD CB 03 6E
   jp     z, addr_020B8                ; 00:1E01 - CA B8 20
   call   update_demo_inputs           ; 00:1E04 - CD AD 1B

addr_01E07:
   ld     hl, (var_D223)               ; 00:1E07 - 2A 23 D2
   inc    hl                           ; 00:1E0A - 23
   ld     (var_D223), hl               ; 00:1E0B - 22 23 D2
   bit    3, (iy+var_D205-IYBASE)      ; 00:1E0E - FD CB 05 5E
   call   nz, addr_01EE2               ; 00:1E12 - C4 E2 1E
   bit    4, (iy+var_D205-IYBASE)      ; 00:1E15 - FD CB 05 66
   call   nz, addr_01EF2               ; 00:1E19 - C4 F2 1E
   bit    7, (iy+var_D205-IYBASE)      ; 00:1E1C - FD CB 05 7E
   call   nz, addr_01EFF               ; 00:1E20 - C4 FF 1E
   call   addr_023C9                   ; 00:1E23 - CD C9 23
   bit    2, (iy+var_D205-IYBASE)      ; 00:1E26 - FD CB 05 56
   call   nz, addr_0239C               ; 00:1E2A - C4 9C 23
   xor    a                            ; 00:1E2D - AF
   ld     (var_D302), a                ; 00:1E2E - 32 02 D3
   ld     (var_D2DE), a                ; 00:1E31 - 32 DE D2
   ld     (iy+g_sprite_count-IYBASE), $15  ; 00:1E34 - FD 36 0A 15
   ld     hl, var_D03F                 ; 00:1E38 - 21 3F D0
   ld     (var_D23C), hl               ; 00:1E3B - 22 3C D2
   ld     hl, var_D001                 ; 00:1E3E - 21 01 D0
   ld     b, $07                       ; 00:1E41 - 06 07
   ld     de, $0003                    ; 00:1E43 - 11 03 00
   ld     a, $E0                       ; 00:1E46 - 3E E0

addr_01E48:
   ld     (hl), a                      ; 00:1E48 - 77
   add    hl, de                       ; 00:1E49 - 19
   ld     (hl), a                      ; 00:1E4A - 77
   add    hl, de                       ; 00:1E4B - 19
   ld     (hl), a                      ; 00:1E4C - 77
   add    hl, de                       ; 00:1E4D - 19
   djnz   addr_01E48                   ; 00:1E4E - 10 F8
   ld     a, $01                       ; 00:1E50 - 3E 01
   .IF 0
   ;; BUGFIX: PAGERACE: Race condition, defeatable with a well-timed interrupt. Swapped ops around to fix.
   ld     (g_committed_rompage_1), a   ; 00:1E55 - 32 35 D2
   ld     (rompage_1), a               ; 00:1E52 - 32 FE FF
   ld     a, $02                       ; 00:1E58 - 3E 02
   ;; BUGFIX: PAGERACE: Race condition, defeatable with a well-timed interrupt. Swapped ops around to fix.
   ld     (g_committed_rompage_2), a   ; 00:1E5D - 32 36 D2
   ld     (rompage_2), a               ; 00:1E5A - 32 FF FF
   .ELSE
   call set_slot_1_2
   .ENDIF
   call   addr_02E5A                   ; 00:1E60 - CD 5A 2E
   call   addr_0063E                   ; 00:1E63 - CD 3E 06
   call   addr_006BD                   ; 00:1E66 - CD BD 06
   ld     hl, g_saved_vdp_reg_01       ; 00:1E69 - 21 19 D2
   set    6, (hl)                      ; 00:1E6C - CB F6
   bit    3, (iy+var_D207-IYBASE)      ; 00:1E6E - FD CB 07 5E
   call   nz, addr_01E9E               ; 00:1E72 - C4 9E 1E
   jp     addr_01DAE                   ; 00:1E75 - C3 AE 1D

addr_01E78:
   ld     (iy+g_inputs_player_1-IYBASE), $F7  ; 00:1E78 - FD 36 03 F7
   ld     hl, (var_D273)               ; 00:1E7C - 2A 73 D2
   ld     de, $0112                    ; 00:1E7F - 11 12 01
   add    hl, de                       ; 00:1E82 - 19
   ex     de, hl                       ; 00:1E83 - EB
   ld     hl, (sonic_x)                ; 00:1E84 - 2A FE D3
   xor    a                            ; 00:1E87 - AF
   sbc    hl, de                       ; 00:1E88 - ED 52
   ret    c                            ; 00:1E8A - D8
   ld     (iy+g_inputs_player_1-IYBASE), $FF  ; 00:1E8B - FD 36 03 FF
   ld     l, a                         ; 00:1E8F - 6F
   ld     h, a                         ; 00:1E90 - 67
   ld     (sonic_vel_x_sub), hl        ; 00:1E91 - 22 03 D4
   ld     (sonic_vel_x_hi), a          ; 00:1E94 - 32 05 D4
   ld     (sonic_vel_y_sub), hl        ; 00:1E97 - 22 06 D4
   ld     (sonic_vel_y_hi), a          ; 00:1E9A - 32 08 D4
   ret                                 ; 00:1E9D - C9

addr_01E9E:
   bit    1, (iy+var_D205-IYBASE)      ; 00:1E9E - FD CB 05 4E
   ret    nz                           ; 00:1EA2 - C0
   rst    $20                          ; 00:1EA3 - E7

addr_01EA4:
   ld     a, (iy+g_sprite_count-IYBASE)  ; 00:1EA4 - FD 7E 0A
   res    0, (iy+var_D200-IYBASE)      ; 00:1EA7 - FD CB 00 86
   call   wait_until_irq_ticked        ; 00:1EAB - CD 1C 03
   ld     (iy+g_sprite_count-IYBASE), a  ; 00:1EAE - FD 77 0A
   ld     a, $0B                       ; 00:1EB1 - 3E 0B
   .IF 0
   ;; BUGFIX: PAGERACE: Race condition, defeatable with a well-timed interrupt. Swapped ops around to fix.
   ld     (g_committed_rompage_1), a   ; 00:1EB6 - 32 35 D2
   ld     (rompage_1), a               ; 00:1EB3 - 32 FE FF
   .ELSE
   call set_slot_1
   .ENDIF
   bit    2, (iy+var_D205-IYBASE)      ; 00:1EB9 - FD CB 05 56
   call   nz, addr_03879               ; 00:1EBD - C4 79 38
   call   addr_023C9                   ; 00:1EC0 - CD C9 23
   call   addr_0239C                   ; 00:1EC3 - CD 9C 23
   bit    3, (iy+var_D207-IYBASE)      ; 00:1EC6 - FD CB 07 5E
   jr     nz, addr_01EA4               ; 00:1ECA - 20 D8
   ld     a, $03                       ; 00:1ECC - 3E 03
   .IF 0
   ;; BUGFIX: PAGERACE: Race condition, defeatable with a well-timed interrupt. Swapped ops around to fix.
   ld     (g_committed_rompage_1), a   ; 00:1ED1 - 32 35 D2
   ld     (rompage_1), a               ; 00:1ECE - 32 FE FF
   .ELSE
   call set_slot_1
   .ENDIF
   call   snddrv_UNK_4009              ; 00:1ED4 - CD 09 40
   ret                                 ; 00:1ED7 - C9

addr_01ED8:
   ld     hl, (var_D25A)               ; 00:1ED8 - 2A 5A D2
   ld     (var_D273), hl               ; 00:1EDB - 22 73 D2
   ld     (var_D275), hl               ; 00:1EDE - 22 75 D2
   ret                                 ; 00:1EE1 - C9

addr_01EE2:
   ld     a, (var_D223)                ; 00:1EE2 - 3A 23 D2
   rrca                                ; 00:1EE5 - 0F
   ret    nc                           ; 00:1EE6 - D0
   ld     hl, (var_D273)               ; 00:1EE7 - 2A 73 D2
   inc    hl                           ; 00:1EEA - 23
   ld     (var_D273), hl               ; 00:1EEB - 22 73 D2
   ld     (var_D275), hl               ; 00:1EEE - 22 75 D2
   ret                                 ; 00:1EF1 - C9

addr_01EF2:
   ld     a, (var_D223)                ; 00:1EF2 - 3A 23 D2
   rrca                                ; 00:1EF5 - 0F
   ret    nc                           ; 00:1EF6 - D0
   ld     hl, (var_D279)               ; 00:1EF7 - 2A 79 D2
   dec    hl                           ; 00:1EFA - 2B
   ld     (var_D279), hl               ; 00:1EFB - 22 79 D2
   ret                                 ; 00:1EFE - C9

addr_01EFF:
   ld     hl, (var_D25D)               ; 00:1EFF - 2A 5D D2
   ld     (var_D279), hl               ; 00:1F02 - 22 79 D2
   ret                                 ; 00:1F05 - C9

addr_01F06:
   dec    a                            ; 00:1F06 - 3D
   ld     (var_D2B1), a                ; 00:1F07 - 32 B1 D2
   ld     e, a                         ; 00:1F0A - 5F
   di                                  ; 00:1F0B - F3
   ld     a, $01                       ; 00:1F0C - 3E 01
   .IF 0
   ;; BUGFIX: PAGERACE: Race condition, defeatable with a well-timed interrupt. Swapped ops around to fix.
   ld     (g_committed_rompage_1), a   ; 00:1F11 - 32 35 D2
   ld     (rompage_1), a               ; 00:1F0E - 32 FE FF
   ld     a, $02                       ; 00:1F14 - 3E 02
   ;; BUGFIX: PAGERACE: Race condition, defeatable with a well-timed interrupt. Swapped ops around to fix.
   ld     (g_committed_rompage_2), a   ; 00:1F19 - 32 36 D2
   ld     (rompage_2), a               ; 00:1F16 - 32 FF FF
   .ELSE
   call set_slot_1_2
   .ENDIF
   ld     e, $00                       ; 00:1F1C - 1E 00
   ld     a, (var_D2B2)                ; 00:1F1E - 3A B2 D2
   ld     hl, (var_D230)               ; 00:1F21 - 2A 30 D2
   and    a                            ; 00:1F24 - A7
   jp     p, addr_01F2F                ; 00:1F25 - F2 2F 1F
   and    $7F                          ; 00:1F28 - E6 7F
   ld     hl, (var_D232)               ; 00:1F2A - 2A 32 D2
   ld     e, $10                       ; 00:1F2D - 1E 10

addr_01F2F:
   ld     c, a                         ; 00:1F2F - 4F
   ld     b, $00                       ; 00:1F30 - 06 00
   add    hl, bc                       ; 00:1F32 - 09
   add    a, e                         ; 00:1F33 - 83
   out    ($BF), a                     ; 00:1F34 - D3 BF
   ld     a, $C0                       ; 00:1F36 - 3E C0
   out    ($BF), a                     ; 00:1F38 - D3 BF
   ld     a, (var_D2B1)                ; 00:1F3A - 3A B1 D2
   and    $01                          ; 00:1F3D - E6 01
   ld     a, (hl)                      ; 00:1F3F - 7E
   jr     z, addr_01F45                ; 00:1F40 - 28 03
   ld     a, (var_D2B3)                ; 00:1F42 - 3A B3 D2

addr_01F45:
   out    ($BE), a                     ; 00:1F45 - D3 BE
   ei                                  ; 00:1F47 - FB
   ret                                 ; 00:1F48 - C9

addr_01F49:
   ld     de, (var_D2E9)               ; 00:1F49 - ED 5B E9 D2
   ld     hl, $00AA                    ; 00:1F4D - 21 AA 00
   xor    a                            ; 00:1F50 - AF
   sbc    hl, de                       ; 00:1F51 - ED 52
   jr     nc, addr_01F5D               ; 00:1F53 - 30 08
   ld     bc, LUT_01F9D                ; 00:1F55 - 01 9D 1F
   ld     e, a                         ; 00:1F58 - 5F
   ld     d, a                         ; 00:1F59 - 57
   jp     addr_01F80                   ; 00:1F5A - C3 80 1F

addr_01F5D:
   ld     bc, LUT_01FA5                ; 00:1F5D - 01 A5 1F
   ld     hl, $0082                    ; 00:1F60 - 21 82 00
   sbc    hl, de                       ; 00:1F63 - ED 52
   jr     z, addr_01F7B                ; 00:1F65 - 28 14
   ld     bc, LUT_01FA1                ; 00:1F67 - 01 A1 1F
   ld     hl, $0064                    ; 00:1F6A - 21 64 00
   sbc    hl, de                       ; 00:1F6D - ED 52
   jr     z, addr_01F80                ; 00:1F6F - 28 0F
   ld     bc, LUT_01F9D                ; 00:1F71 - 01 9D 1F
   ld     a, e                         ; 00:1F74 - 7B
   or     d                            ; 00:1F75 - B2
   jr     z, addr_01F80                ; 00:1F76 - 28 08
   jp     addr_01F97                   ; 00:1F78 - C3 97 1F

addr_01F7B:
   push   bc                           ; 00:1F7B - C5
   ld     a, $13                       ; 00:1F7C - 3E 13
   rst    $28                          ; 00:1F7E - EF
   pop    bc                           ; 00:1F7F - C1

addr_01F80:
   ld     hl, g_palette_cycle_tick_remain  ; 00:1F80 - 21 A4 D2
   ld     a, (bc)                      ; 00:1F83 - 0A
   ld     (hl), a                      ; 00:1F84 - 77
   inc    hl                           ; 00:1F85 - 23
   ld     (hl), a                      ; 00:1F86 - 77
   inc    hl                           ; 00:1F87 - 23
   inc    bc                           ; 00:1F88 - 03
   ld     (hl), $00                    ; 00:1F89 - 36 00
   inc    hl                           ; 00:1F8B - 23
   ld     a, (bc)                      ; 00:1F8C - 0A
   ld     (hl), a                      ; 00:1F8D - 77
   inc    bc                           ; 00:1F8E - 03
   ld     a, (bc)                      ; 00:1F8F - 0A
   ld     l, a                         ; 00:1F90 - 6F
   inc    bc                           ; 00:1F91 - 03
   ld     a, (bc)                      ; 00:1F92 - 0A
   ld     h, a                         ; 00:1F93 - 67
   ld     (g_palette_cycle_baseptr), hl  ; 00:1F94 - 22 A8 D2

addr_01F97:
   inc    de                           ; 00:1F97 - 13
   ld     (var_D2E9), de               ; 00:1F98 - ED 53 E9 D2
   ret                                 ; 00:1F9C - C9

LUT_01F9D:
.db $02, $04                                                                        ; 00:1F9D

LUT_01F9D_elem_1F9F:
.dw LVCYCPAL1_SKY_1A                                                                ; 00:1F9F

LUT_01FA1:
.db $02, $04                                                                        ; 00:1FA1

LUT_01FA1_elem_1FA3:
.dw LVCYCPAL1_SKY_1B                                                                ; 00:1FA3

LUT_01FA5:
.db $02, $04                                                                        ; 00:1FA5

LUT_01FA5_elem_1FA7:
.dw LVCYCPAL1_SKY_1C                                                                ; 00:1FA7

update_signpost_timer:
   dec    a                            ; 00:1FA9 - 3D
   ld     (g_signpost_tickdown_counter), a  ; 00:1FAA - 32 89 D2
   jr     z, @go_to_next_level         ; 00:1FAD - 28 15
   cp     $88                          ; 00:1FAF - FE 88
   ret    nz                           ; 00:1FB1 - C0
   ld     a, (g_current_signpost)      ; 00:1FB2 - 3A 88 D2
   add    a, a                         ; 00:1FB5 - 87
   ld     e, a                         ; 00:1FB6 - 5F
   ld     d, $00                       ; 00:1FB7 - 16 00
   ld     hl, LUT_signpost_funcs       ; 00:1FB9 - 21 23 20
   add    hl, de                       ; 00:1FBC - 19
   ld     a, (hl)                      ; 00:1FBD - 7E
   inc    hl                           ; 00:1FBE - 23
   ld     h, (hl)                      ; 00:1FBF - 66
   ld     l, a                         ; 00:1FC0 - 6F
   or     h                            ; 00:1FC1 - B4
   ret    z                            ; 00:1FC2 - C8
   jp     (hl)                         ; 00:1FC3 - E9

@go_to_next_level:
   call   addr_00A40                   ; 00:1FC4 - CD 40 0A
   pop    hl                           ; 00:1FC7 - E1
   res    5, (iy+var_D200-IYBASE)      ; 00:1FC8 - FD CB 00 AE
   bit    2, (iy+var_D20D-IYBASE)      ; 00:1FCC - FD CB 0D 56
   jr     nz, addr_0201C               ; 00:1FD0 - 20 4A
   bit    4, (iy+var_D206-IYBASE)      ; 00:1FD2 - FD CB 06 66
   jr     nz, addr_02020               ; 00:1FD6 - 20 48
   rst    $20                          ; 00:1FD8 - E7
   bit    7, (iy+var_D206-IYBASE)      ; 00:1FD9 - FD CB 06 7E
   call   nz, addr_020A4               ; 00:1FDD - C4 A4 20
   call   clear_sprite_table           ; 00:1FE0 - CD E2 05
   call   handle_level_score_screen    ; 00:1FE3 - CD 5E 15
   ld     a, (g_level)                 ; 00:1FE6 - 3A 3E D2
   cp     $1A                          ; 00:1FE9 - FE 1A
   jr     nc, @level_was_bonus         ; 00:1FEB - 30 28
   bit    0, (iy+var_D207-IYBASE)      ; 00:1FED - FD CB 07 46
   jr     z, @level_was_normal_no_bonus  ; 00:1FF1 - 28 1B
   .IF 0
   ;; Hoisted into the function.
   ld     hl, LUT_02047_all7F          ; 00:1FF3 - 21 47 20
   .ENDIF
   call   palette_fade_up              ; 00:1FF6 - CD 60 0B
   ld     a, (g_level)                 ; 00:1FF9 - 3A 3E D2
   push   af                           ; 00:1FFC - F5
   ld     a, (g_next_bonus_level)      ; 00:1FFD - 3A 3F D2
   ld     (g_level), a                 ; 00:2000 - 32 3E D2
   inc    a                            ; 00:2003 - 3C
   ld     (g_next_bonus_level), a      ; 00:2004 - 32 3F D2
   call   load_level_header_UNCONFIRMED  ; 00:2007 - CD ED 1C
   pop    af                           ; 00:200A - F1
   ld     (g_level), a                 ; 00:200B - 32 3E D2

@level_was_normal_no_bonus:
   ld     hl, g_level                  ; 00:200E - 21 3E D2
   inc    (hl)                         ; 00:2011 - 34
   ld     a, $01                       ; 00:2012 - 3E 01
   ret                                 ; 00:2014 - C9

@level_was_bonus:
   res    0, (iy+var_D207-IYBASE)      ; 00:2015 - FD CB 07 86
   ld     a, $FF                       ; 00:2019 - 3E FF
   ret                                 ; 00:201B - C9

addr_0201C:
   ld     hl, g_level                  ; 00:201C - 21 3E D2
   inc    (hl)                         ; 00:201F - 34

addr_02020:
   ld     a, $FF                       ; 00:2020 - 3E FF
   ret                                 ; 00:2022 - C9

LUT_signpost_funcs:
.dw ENTRY_RESET, signpost_func_nothing, signpost_func_extra_life, signpost_func_10_rings, signpost_func_bonus_stage  ; 00:2023

signpost_func_nothing:
   ld     a, $0E                       ; 00:202D - 3E 0E
   rst    $28                          ; 00:202F - EF
   ret                                 ; 00:2030 - C9

signpost_func_extra_life:
   ld     hl, g_lives                  ; 00:2031 - 21 46 D2
   inc    (hl)                         ; 00:2034 - 34
   ld     a, $09                       ; 00:2035 - 3E 09
   rst    $28                          ; 00:2037 - EF
   ret                                 ; 00:2038 - C9

signpost_func_10_rings:
   ld     a, $10                       ; 00:2039 - 3E 10
   call   add_A_rings                  ; 00:203B - CD AC 39
   ret                                 ; 00:203E - C9

signpost_func_bonus_stage:
   ld     a, $07                       ; 00:203F - 3E 07
   rst    $28                          ; 00:2041 - EF
   set    0, (iy+var_D207-IYBASE)      ; 00:2042 - FD CB 07 C6
   ret                                 ; 00:2046 - C9

LUT_02047_all7F:
.db $7F, $7F, $7F, $7F, $7F, $7F, $7F, $7F, $7F, $7F, $7F, $7F, $7F, $7F, $7F, $7F  ; 00:2047
.db $7F, $7F, $7F, $7F, $7F, $7F, $7F, $7F, $7F, $7F, $7F, $7F, $7F, $7F, $7F, $7F  ; 00:2057

addr_02067:
   dec    a                            ; 00:2067 - 3D
   ld     (var_D287), a                ; 00:2068 - 32 87 D2
   jp     nz, addr_01DE2               ; 00:206B - C2 E2 1D
   bit    1, (iy+var_D205-IYBASE)      ; 00:206E - FD CB 05 4E
   jr     nz, addr_020B8               ; 00:2072 - 20 44
   bit    4, (iy+var_D20C-IYBASE)      ; 00:2074 - FD CB 0C 66
   jr     z, addr_0207E                ; 00:2078 - 28 04
   set    4, (iy+var_D206-IYBASE)      ; 00:207A - FD CB 06 E6

addr_0207E:
   bit    7, (iy+var_D206-IYBASE)      ; 00:207E - FD CB 06 7E
   call   nz, addr_020A4               ; 00:2082 - C4 A4 20
   ld     a, (g_lives)                 ; 00:2085 - 3A 46 D2
   and    a                            ; 00:2088 - A7
   ld     a, $02                       ; 00:2089 - 3E 02
   ret    nz                           ; 00:208B - C0
   call   addr_00A40                   ; 00:208C - CD 40 0A
   call   clear_sprite_table           ; 00:208F - CD E2 05
   res    5, (iy+var_D200-IYBASE)      ; 00:2092 - FD CB 00 AE
   call   addr_01401                   ; 00:2096 - CD 01 14
   ld     a, $00                       ; 00:2099 - 3E 00
   ret    nc                           ; 00:209B - D0
   ld     a, $03                       ; 00:209C - 3E 03
   ld     (g_lives), a                 ; 00:209E - 32 46 D2
   ld     a, $01                       ; 00:20A1 - 3E 01
   ret                                 ; 00:20A3 - C9

addr_020A4:
   ld     a, (g_water_irq_line_state)  ; 00:20A4 - 3A 47 D2
   and    a                            ; 00:20A7 - A7
   jr     nz, addr_020A4               ; 00:20A8 - 20 FA
   di                                  ; 00:20AA - F3
   res    7, (iy+var_D206-IYBASE)      ; 00:20AB - FD CB 06 BE
   xor    a                            ; 00:20AF - AF
   ld     (g_water_onscreen_y), a      ; 00:20B0 - 32 48 D2
   ld     (var_D2DB), a                ; 00:20B3 - 32 DB D2
   ei                                  ; 00:20B6 - FB
   ret                                 ; 00:20B7 - C9

addr_020B8:
   ld     a, $03                       ; 00:20B8 - 3E 03
   .IF 0
   ;; BUGFIX: PAGERACE: Race condition, defeatable with a well-timed interrupt. Swapped ops around to fix.
   ld     (g_committed_rompage_1), a   ; 00:20BD - 32 35 D2
   ld     (rompage_1), a               ; 00:20BA - 32 FE FF
   .ELSE
   call set_slot_1
   .ENDIF
   ld     hl, $0028                    ; 00:20C0 - 21 28 00
   call   snddrv_UNK_400C              ; 00:20C3 - CD 0C 40
   call   addr_00A40                   ; 00:20C6 - CD 40 0A
   xor    a                            ; 00:20C9 - AF
   ret                                 ; 00:20CA - C9

addr_020CB:
   ld     a, (g_saved_vdp_reg_01)      ; 00:20CB - 3A 19 D2
   and    $BF                          ; 00:20CE - E6 BF
   ld     (g_saved_vdp_reg_01), a      ; 00:20D0 - 32 19 D2
   res    0, (iy+var_D200-IYBASE)      ; 00:20D3 - FD CB 00 86
   call   wait_until_irq_ticked        ; 00:20D7 - CD 1C 03
   ld     de, var_D354                 ; 00:20DA - 11 54 D3
   ld     bc, $0028                    ; 00:20DD - 01 28 00
   ldir                                ; 00:20E0 - ED B0
   ld     hl, var_D354                 ; 00:20E2 - 21 54 D3
   push   hl                           ; 00:20E5 - E5
   ld     a, (iy+var_D205-IYBASE)      ; 00:20E6 - FD 7E 05
   ld     (iy+var_D20B-IYBASE), a      ; 00:20E9 - FD 77 0B
   ld     a, (iy+var_D206-IYBASE)      ; 00:20EC - FD 7E 06
   ld     (iy+var_D20C-IYBASE), a      ; 00:20EF - FD 77 0C
   ld     a, $FF                       ; 00:20F2 - 3E FF
   ld     (var_D2AB), a                ; 00:20F4 - 32 AB D2
   xor    a                            ; 00:20F7 - AF
   ld     l, a                         ; 00:20F8 - 6F
   ld     h, a                         ; 00:20F9 - 67
   ld     (g_vdp_scroll_x), a          ; 00:20FA - 32 51 D2
   ld     (g_vdp_scroll_y), a          ; 00:20FD - 32 52 D2
   ld     (var_D27B), hl               ; 00:2100 - 22 7B D2
   ld     (var_D27D), hl               ; 00:2103 - 22 7D D2
   ld     (var_D2B7), hl               ; 00:2106 - 22 B7 D2
   ld     (g_water_irq_line_state), a  ; 00:2109 - 32 47 D2
   ld     (g_water_onscreen_y), a      ; 00:210C - 32 48 D2
   ld     hl, var_D287                 ; 00:210F - 21 87 D2
   ld     b, $1D                       ; 00:2112 - 06 1D
   call   fill_ram_at_hl_for_b_bytes_with_a  ; 00:2114 - CD E8 1C
   ld     hl, g_level_has_checkpoint_mask  ; 00:2117 - 21 11 D3
   call   calc_level_offset_HL_and_mask_C  ; 00:211A - CD 02 0C
   ex     de, hl                       ; 00:211D - EB
   ld     hl, $0800                    ; 00:211E - 21 00 08
   ld     a, (g_level)                 ; 00:2121 - 3A 3E D2
   cp     $09                          ; 00:2124 - FE 09
   jr     c, addr_0213A                ; 00:2126 - 38 12
   cp     $0B                          ; 00:2128 - FE 0B
   jr     z, addr_02132                ; 00:212A - 28 06
   jr     nc, addr_0213A               ; 00:212C - 30 0C
   ld     a, (de)                      ; 00:212E - 1A
   and    c                            ; 00:212F - A1
   jr     z, addr_0213A                ; 00:2130 - 28 08

addr_02132:
   ld     a, $FF                       ; 00:2132 - 3E FF
   ld     (var_D2DB), a                ; 00:2134 - 32 DB D2
   ld     hl, $0020                    ; 00:2137 - 21 20 00

addr_0213A:
   ld     (var_D2DC), hl               ; 00:213A - 22 DC D2
   ld     hl, $FFFE                    ; 00:213D - 21 FE FF
   ld     (var_D29F), hl               ; 00:2140 - 22 9F D2
   ld     hl, UNK_023FF                ; 00:2143 - 21 FF 23
   bit    4, (iy+var_D206-IYBASE)      ; 00:2146 - FD CB 06 66
   jr     z, addr_02155                ; 00:214A - 28 09
   bit    0, (iy+var_D205-IYBASE)      ; 00:214C - FD CB 05 46
   jr     z, addr_02172                ; 00:2150 - 28 20
   ld     hl, LUT_bonus_stage_time_limits  ; 00:2152 - 21 02 24

addr_02155:
   xor    a                            ; 00:2155 - AF
   ld     (g_rings_BCD), a             ; 00:2156 - 32 AA D2
   ld     a, (g_level)                 ; 00:2159 - 3A 3E D2
   sub    $1C                          ; 00:215C - D6 1C
   jr     c, addr_0216A                ; 00:215E - 38 0A
   ld     c, a                         ; 00:2160 - 4F
   add    a, a                         ; 00:2161 - 87
   add    a, c                         ; 00:2162 - 81
   ld     e, a                         ; 00:2163 - 5F
   ld     d, $00                       ; 00:2164 - 16 00
   ld     hl, LUT_bonus_stage_time_limits_offs_01  ; 00:2166 - 21 05 24
   add    hl, de                       ; 00:2169 - 19

addr_0216A:
   ld     de, g_time_mins              ; 00:216A - 11 CE D2
   ld     bc, $0003                    ; 00:216D - 01 03 00
   ldir                                ; 00:2170 - ED B0

addr_02172:
   ld     hl, ART_09_B92E              ; 00:2172 - 21 2E B9
   ld     de, $3000                    ; 00:2175 - 11 00 30
   ld     a, $09                       ; 00:2178 - 3E 09
   call   load_art                     ; 00:217A - CD 05 04
   pop    hl                           ; 00:217D - E1
   ;; Get bank $04 offset index thing
   ld     a, (hl)                      ; 00:217E - 7E
   ld     (var_D2D4), a                ; 00:217F - 32 D4 D2
   inc    hl                           ; 00:2182 - 23
   ;; Get level width
   ld     e, (hl)                      ; 00:2183 - 5E
   inc    hl                           ; 00:2184 - 23
   ld     d, (hl)                      ; 00:2185 - 56
   inc    hl                           ; 00:2186 - 23
   ld     (var_D238), de               ; 00:2187 - ED 53 38 D2
   ;; Get level height
   ld     e, (hl)                      ; 00:218B - 5E
   inc    hl                           ; 00:218C - 23
   ld     d, (hl)                      ; 00:218D - 56
   inc    hl                           ; 00:218E - 23
   ld     (var_D23A), de               ; 00:218F - ED 53 3A D2
   ;; Copy 8 bytes which are the level bounds (x0, x1, y0, y1)
   ld     de, var_D273                 ; 00:2193 - 11 73 D2
   ld     bc, $0008                    ; 00:2196 - 01 08 00
   ldir                                ; 00:2199 - ED B0
   push   hl                           ; 00:219B - E5
   push   hl                           ; 00:219C - E5
   ld     hl, g_level_has_checkpoint_mask  ; 00:219D - 21 11 D3
   call   calc_level_offset_HL_and_mask_C  ; 00:21A0 - CD 02 0C
   ld     a, (hl)                      ; 00:21A3 - 7E
   ex     de, hl                       ; 00:21A4 - EB
   pop    hl                           ; 00:21A5 - E1
   and    c                            ; 00:21A6 - A1
   jr     z, addr_021C4                ; 00:21A7 - 28 1B
   cpl                                 ; 00:21A9 - 2F
   ld     c, a                         ; 00:21AA - 4F
   ld     a, (de)                      ; 00:21AB - 1A
   and    c                            ; 00:21AC - A1
   ld     (de), a                      ; 00:21AD - 12
   ld     hl, LUT_bonus_stage_time_limits  ; 00:21AE - 21 02 24
   ld     de, g_time_mins              ; 00:21B1 - 11 CE D2
   ld     bc, $0003                    ; 00:21B4 - 01 03 00
   ldir                                ; 00:21B7 - ED B0
   ld     a, (g_level)                 ; 00:21B9 - 3A 3E D2
   add    a, a                         ; 00:21BC - 87
   ld     e, a                         ; 00:21BD - 5F
   ld     d, $00                       ; 00:21BE - 16 00
   ld     hl, var_D32E                 ; 00:21C0 - 21 2E D3
   add    hl, de                       ; 00:21C3 - 19

addr_021C4:
   ld     (var_D216), hl               ; 00:21C4 - 22 16 D2
   ld     a, (hl)                      ; 00:21C7 - 7E
   sub    $03                          ; 00:21C8 - D6 03
   jr     nc, addr_021CD               ; 00:21CA - 30 01
   xor    a                            ; 00:21CC - AF

addr_021CD:
   ld     (var_D257), a                ; 00:21CD - 32 57 D2
   ld     e, $00                       ; 00:21D0 - 1E 00
   rrca                                ; 00:21D2 - 0F
   rr     e                            ; 00:21D3 - CB 1B
   rrca                                ; 00:21D5 - 0F
   rr     e                            ; 00:21D6 - CB 1B
   rrca                                ; 00:21D8 - 0F
   rr     e                            ; 00:21D9 - CB 1B
   and    $1F                          ; 00:21DB - E6 1F
   ld     d, a                         ; 00:21DD - 57
   ld     (var_D25A), de               ; 00:21DE - ED 53 5A D2
   ld     (var_D26F), de               ; 00:21E2 - ED 53 6F D2
   inc    hl                           ; 00:21E6 - 23
   ld     a, (hl)                      ; 00:21E7 - 7E
   sub    $03                          ; 00:21E8 - D6 03
   jr     nc, addr_021ED               ; 00:21EA - 30 01
   xor    a                            ; 00:21EC - AF

addr_021ED:
   ld     (var_D258), a                ; 00:21ED - 32 58 D2
   ld     e, $00                       ; 00:21F0 - 1E 00
   rrca                                ; 00:21F2 - 0F
   rr     e                            ; 00:21F3 - CB 1B
   rrca                                ; 00:21F5 - 0F
   rr     e                            ; 00:21F6 - CB 1B
   rrca                                ; 00:21F8 - 0F
   rr     e                            ; 00:21F9 - CB 1B
   and    $1F                          ; 00:21FB - E6 1F
   ld     d, a                         ; 00:21FD - 57
   ld     (var_D25D), de               ; 00:21FE - ED 53 5D D2
   ld     (var_D271), de               ; 00:2202 - ED 53 71 D2
   pop    hl                           ; 00:2206 - E1
   inc    hl                           ; 00:2207 - 23
   inc    hl                           ; 00:2208 - 23
   ld     e, (hl)                      ; 00:2209 - 5E
   inc    hl                           ; 00:220A - 23
   ld     d, (hl)                      ; 00:220B - 56
   inc    hl                           ; 00:220C - 23
   ld     c, (hl)                      ; 00:220D - 4E
   inc    hl                           ; 00:220E - 23
   ld     b, (hl)                      ; 00:220F - 46
   inc    hl                           ; 00:2210 - 23
   push   hl                           ; 00:2211 - E5
   ex     de, hl                       ; 00:2212 - EB
   ;; The usual implementation of this is a bit wasteful.
   ;; However, we can go one better.
   ;; Instead of merely being less wasteful, we can allow access to up to 16 KB more for level data!
   .IF 0
   ld     a, h                         ; 00:2213 - 7C
   di                                  ; 00:2214 - F3
   cp     $40                          ; 00:2215 - FE 40
   jr     c, addr_0222E                ; 00:2217 - 38 15
   sub    $40                          ; 00:2219 - D6 40
   ld     h, a                         ; 00:221B - 67
   ld     a, $06                       ; 00:221C - 3E 06
   ;; BUGFIX: PAGERACE: Race condition, defeatable with a well-timed interrupt. Swapped ops around to fix.
   ld     (g_committed_rompage_1), a   ; 00:2221 - 32 35 D2
   ld     (rompage_1), a               ; 00:221E - 32 FE FF
   ld     a, $07                       ; 00:2224 - 3E 07
   ;; BUGFIX: PAGERACE: Race condition, defeatable with a well-timed interrupt. Swapped ops around to fix.
   ld     (g_committed_rompage_2), a   ; 00:2229 - 32 36 D2
   ld     (rompage_2), a               ; 00:2226 - 32 FF FF
   jr     addr_0223E                   ; 00:222C - 18 10

addr_0222E:
   ld     a, $05                       ; 00:222E - 3E 05
   ;; BUGFIX: PAGERACE: Race condition, defeatable with a well-timed interrupt. Swapped ops around to fix.
   ld     (g_committed_rompage_1), a   ; 00:2233 - 32 35 D2
   ld     (rompage_1), a               ; 00:2230 - 32 FE FF
   ld     a, $06                       ; 00:2236 - 3E 06
   ;; BUGFIX: PAGERACE: Race condition, defeatable with a well-timed interrupt. Swapped ops around to fix.
   ld     (g_committed_rompage_2), a   ; 00:223B - 32 36 D2
   ld     (rompage_2), a               ; 00:2238 - 32 FF FF

addr_0223E:
   ei                                  ; 00:223E - FB
   ld     de, $4000                    ; 00:223F - 11 00 40
   add    hl, de                       ; 00:2242 - 19

   .ELSE
   ;; BETTER VERSION
   ;;
   ;; The interrupt should be fine now that stuff is ordered properly so let's not turn them off.
   ld a, h                        ; 2213 1
   rlca                           ; 2214 1
   rlca                           ; 2215 1
   and $03                        ; 2216 2
   add a, $05                     ; 2218 2
   call set_slot_1_2              ; 221A 3
   ;; Set top bits of H to 01 - that is, put HL in the $4000 through $7FFF range
   res 7, h                       ; 221D 2
   set 6, h                       ; 221F 2
   ; 2243 -> 2221 - SAVING: 34 bytes
   .ENDIF
   call   unpack_level_layout_into_ram  ; 00:2243 - CD 10 0A
   pop    hl                           ; 00:2246 - E1
   ld     e, (hl)                      ; 00:2247 - 5E
   inc    hl                           ; 00:2248 - 23
   ld     d, (hl)                      ; 00:2249 - 56
   inc    hl                           ; 00:224A - 23
   ex     de, hl                       ; 00:224B - EB
   ld     bc, $4000                    ; 00:224C - 01 00 40
   add    hl, bc                       ; 00:224F - 09
   ld     (var_D24F), hl               ; 00:2250 - 22 4F D2
   ex     de, hl                       ; 00:2253 - EB
   ;; Load VRAM $0000 art from bank $0C
   ld     e, (hl)                      ; 00:2254 - 5E
   inc    hl                           ; 00:2255 - 23
   ld     d, (hl)                      ; 00:2256 - 56
   inc    hl                           ; 00:2257 - 23
   push   hl                           ; 00:2258 - E5
   ex     de, hl                       ; 00:2259 - EB
   ld     de, $0000                    ; 00:225A - 11 00 00
   ld     a, $0C                       ; 00:225D - 3E 0C
   call   load_art                     ; 00:225F - CD 05 04
   pop    hl                           ; 00:2262 - E1
   ;; Load VRAM $2000 art typically from bank $09
   ld     a, (hl)                      ; 00:2263 - 7E
   inc    hl                           ; 00:2264 - 23
   ld     e, (hl)                      ; 00:2265 - 5E
   inc    hl                           ; 00:2266 - 23
   ld     d, (hl)                      ; 00:2267 - 56
   inc    hl                           ; 00:2268 - 23
   push   hl                           ; 00:2269 - E5
   ex     de, hl                       ; 00:226A - EB
   ld     de, $2000                    ; 00:226B - 11 00 20
   call   load_art                     ; 00:226E - CD 05 04
   pop    hl                           ; 00:2271 - E1
   ;; Load base pal3
   ld     a, (hl)                      ; 00:2272 - 7E
   push   hl                           ; 00:2273 - E5
   add    a, a                         ; 00:2274 - 87
   ld     e, a                         ; 00:2275 - 5F
   ld     d, $00                       ; 00:2276 - 16 00
   ld     hl, LUT_base_PAL3s           ; 00:2278 - 21 7C 62
   add    hl, de                       ; 00:227B - 19
   di                                  ; 00:227C - F3
   ld     a, $01                       ; 00:227D - 3E 01
   .IF 0
   ;; BUGFIX: PAGERACE: Race condition, defeatable with a well-timed interrupt. Swapped ops around to fix.
   ld     (g_committed_rompage_1), a   ; 00:2282 - 32 35 D2
   ld     (rompage_1), a               ; 00:227F - 32 FE FF
   ld     a, $02                       ; 00:2285 - 3E 02
   ;; BUGFIX: PAGERACE: Race condition, defeatable with a well-timed interrupt. Swapped ops around to fix.
   ld     (g_committed_rompage_2), a   ; 00:228A - 32 36 D2
   ld     (rompage_2), a               ; 00:2287 - 32 FF FF
   .ELSE
   call set_slot_1_2
   .ENDIF
   ei                                  ; 00:228D - FB
   ld     a, (hl)                      ; 00:228E - 7E
   inc    hl                           ; 00:228F - 23
   ld     h, (hl)                      ; 00:2290 - 66
   ld     l, a                         ; 00:2291 - 6F
   ld     a, $03                       ; 00:2292 - 3E 03
   call   signal_load_palettes         ; 00:2294 - CD 33 03
   res    0, (iy+var_D200-IYBASE)      ; 00:2297 - FD CB 00 86
   call   wait_until_irq_ticked        ; 00:229B - CD 1C 03
   call   addr_00966                   ; 00:229E - CD 66 09
   pop    hl                           ; 00:22A1 - E1
   inc    hl                           ; 00:22A2 - 23
   ;; Load palette cycle period and size
   ld     de, g_palette_cycle_tick_remain  ; 00:22A3 - 11 A4 D2
   .IF 0
   ld     a, (hl)                      ; 00:22A6 - 7E
   ld     (de), a                      ; 00:22A7 - 12
   inc    de                           ; 00:22A8 - 13
   ld     (de), a                      ; 00:22A9 - 12
   inc    de                           ; 00:22AA - 13
   inc    hl                           ; 00:22AB - 23
   xor    a                            ; 00:22AC - AF
   ld     (de), a                      ; 00:22AD - 12
   inc    de                           ; 00:22AE - 13
   ld     a, (hl)                      ; 00:22AF - 7E
   ld     (de), a                      ; 00:22B0 - 12
   inc    hl                           ; 00:22B1 - 23
   .ELSE
   ld a, (hl)
   ld (de), a
   inc de
   ldi
   xor a
   ld (de), a
   inc de
   ldi
   ; SAVING: 2 bytes
   .ENDIF
   ;; Load palette cycle index
   ld     a, (hl)                      ; 00:22B2 - 7E
   ex     de, hl                       ; 00:22B3 - EB
   add    a, a                         ; 00:22B4 - 87
   ld     c, a                         ; 00:22B5 - 4F
   ld     b, $00                       ; 00:22B6 - 06 00
   ld     hl, LUT_PAL1_cycles          ; 00:22B8 - 21 8C 62
   add    hl, bc                       ; 00:22BB - 09
   di                                  ; 00:22BC - F3
   ld     a, $01                       ; 00:22BD - 3E 01
   .IF 0
   ;; BUGFIX: PAGERACE: Race condition, defeatable with a well-timed interrupt. Swapped ops around to fix.
   ld     (g_committed_rompage_1), a   ; 00:22C2 - 32 35 D2
   ld     (rompage_1), a               ; 00:22BF - 32 FE FF
   ld     a, $02                       ; 00:22C5 - 3E 02
   ;; BUGFIX: PAGERACE: Race condition, defeatable with a well-timed interrupt. Swapped ops around to fix.
   ld     (g_committed_rompage_2), a   ; 00:22CA - 32 36 D2
   ld     (rompage_2), a               ; 00:22C7 - 32 FF FF
   .ELSE
   call set_slot_1_2
   .ENDIF
   ei                                  ; 00:22CD - FB
   ld     a, (hl)                      ; 00:22CE - 7E
   inc    hl                           ; 00:22CF - 23
   ld     h, (hl)                      ; 00:22D0 - 66
   ld     l, a                         ; 00:22D1 - 6F
   ld     (g_palette_cycle_baseptr), hl  ; 00:22D2 - 22 A8 D2
   ex     de, hl                       ; 00:22D5 - EB
   inc    hl                           ; 00:22D6 - 23
   ld     e, (hl)                      ; 00:22D7 - 5E
   inc    hl                           ; 00:22D8 - 23
   ld     d, (hl)                      ; 00:22D9 - 56
   inc    hl                           ; 00:22DA - 23
   push   hl                           ; 00:22DB - E5
   ld     hl, level_headers_rel        ; 00:22DC - 21 80 55
   add    hl, de                       ; 00:22DF - 19
   ld     a, $05                       ; 00:22E0 - 3E 05
   .IF 0
   ;; BUGFIX: PAGERACE: Race condition, defeatable with a well-timed interrupt. Swapped ops around to fix.
   ld     (g_committed_rompage_1), a   ; 00:22E5 - 32 35 D2
   ld     (rompage_1), a               ; 00:22E2 - 32 FE FF
   .ELSE
   call set_slot_1
   .ENDIF
   call   load_object_list             ; 00:22E8 - CD 2B 23
   pop    hl                           ; 00:22EB - E1
   ld     c, (hl)                      ; 00:22EC - 4E
   ld     a, (iy+var_D205-IYBASE)      ; 00:22ED - FD 7E 05
   and    $02                          ; 00:22F0 - E6 02
   or     c                            ; 00:22F2 - B1
   ld     (iy+var_D205-IYBASE), a      ; 00:22F3 - FD 77 05
   inc    hl                           ; 00:22F6 - 23
   ld     a, (hl)                      ; 00:22F7 - 7E
   ld     (iy+var_D206-IYBASE), a      ; 00:22F8 - FD 77 06
   inc    hl                           ; 00:22FB - 23
   ld     a, (hl)                      ; 00:22FC - 7E
   ld     (iy+var_D207-IYBASE), a      ; 00:22FD - FD 77 07
   inc    hl                           ; 00:2300 - 23
   ld     a, (hl)                      ; 00:2301 - 7E
   ld     (iy+var_D208-IYBASE), a      ; 00:2302 - FD 77 08
   inc    hl                           ; 00:2305 - 23
   ld     a, (var_D2D2)                ; 00:2306 - 3A D2 D2
   cp     (hl)                         ; 00:2309 - BE
   jr     z, addr_02315                ; 00:230A - 28 09
   ld     a, (hl)                      ; 00:230C - 7E
   and    a                            ; 00:230D - A7
   jp     m, addr_02315                ; 00:230E - FA 15 23
   ld     (var_D2FC), a                ; 00:2311 - 32 FC D2
   rst    $18                          ; 00:2314 - DF

addr_02315:
   ld     b, $20                       ; 00:2315 - 06 20
   ld     hl, g_object_ptrs            ; 00:2317 - 21 7C D3
   xor    a                            ; 00:231A - AF

addr_0231B:
   ld     (hl), a                      ; 00:231B - 77
   inc    hl                           ; 00:231C - 23
   ld     (hl), a                      ; 00:231D - 77
   inc    hl                           ; 00:231E - 23
   djnz   addr_0231B                   ; 00:231F - 10 FA
   bit    5, (iy+var_D20C-IYBASE)      ; 00:2321 - FD CB 0C 6E
   ret    z                            ; 00:2325 - C8
   set    5, (iy+var_D206-IYBASE)      ; 00:2326 - FD CB 06 EE
   ret                                 ; 00:232A - C9

load_object_list:
   push   hl                           ; 00:232B - E5
   ld     ix, object_list              ; 00:232C - DD 21 FC D3
   ld     de, $001A                    ; 00:2330 - 11 1A 00
   ld     c, $00                       ; 00:2333 - 0E 00
   ld     hl, (var_D216)               ; 00:2335 - 2A 16 D2
   ld     a, $00                       ; 00:2338 - 3E 00
   call   load_object_from_level_spec  ; 00:233A - CD 5E 23
   pop    hl                           ; 00:233D - E1
   ld     a, (hl)                      ; 00:233E - 7E
   inc    hl                           ; 00:233F - 23
   .IF 0
   ld     (g_object_count), a          ; 00:2340 - 32 F2 D2
   .ELSE
   ;; g_object_count only exists for the benefit of this function, and we no longer need it.
   ; SAVING: 3 bytes
   .ENDIF
   dec    a                            ; 00:2343 - 3D
   ld     b, a                         ; 00:2344 - 47
   .IF 0
   .ELSE
   ld c, $20
   ;; See below
   .ENDIF

-:
   ld     a, (hl)                      ; 00:2345 - 7E
   inc    hl                           ; 00:2346 - 23
   call   load_object_from_level_spec  ; 00:2347 - CD 5E 23
   .IF 0
   .ELSE
   dec c
   ret z
   ;; See below
   .ENDIF
   djnz   -                            ; 00:234A - 10 F9
   .IF 0
   ld     a, (g_object_count)          ; 00:234C - 3A F2 D2
   ld     b, a                         ; 00:234F - 47
   ld     a, $20                       ; 00:2350 - 3E 20
   sub    b                            ; 00:2352 - 90
   ret    z                            ; 00:2353 - C8
   ld     b, a                         ; 00:2354 - 47
   .ELSE
   ;; Welcome to below.
   ld b, c
   ; SAVING: 4 bytes
   .ENDIF

-:
   ld     (ix+0), $FF                  ; 00:2355 - DD 36 00 FF
   add    ix, de                       ; 00:2359 - DD 19
   djnz   -                            ; 00:235B - 10 F8
   ret                                 ; 00:235D - C9

load_object_from_level_spec:
   ld     (ix+0), a                    ; 00:235E - DD 77 00
   ld     a, (hl)                      ; 00:2361 - 7E
   exx                                 ; 00:2362 - D9
   ld     l, a                         ; 00:2363 - 6F
   ld     h, $00                       ; 00:2364 - 26 00
   ld     (ix+1), h                    ; 00:2366 - DD 74 01
   add    hl, hl                       ; 00:2369 - 29
   add    hl, hl                       ; 00:236A - 29
   add    hl, hl                       ; 00:236B - 29
   add    hl, hl                       ; 00:236C - 29
   add    hl, hl                       ; 00:236D - 29
   ld     (ix+2), l                    ; 00:236E - DD 75 02
   ld     (ix+3), h                    ; 00:2371 - DD 74 03
   exx                                 ; 00:2374 - D9
   inc    hl                           ; 00:2375 - 23
   ld     a, (hl)                      ; 00:2376 - 7E
   exx                                 ; 00:2377 - D9
   ld     l, a                         ; 00:2378 - 6F
   ld     h, $00                       ; 00:2379 - 26 00
   ld     (ix+4), h                    ; 00:237B - DD 74 04
   add    hl, hl                       ; 00:237E - 29
   add    hl, hl                       ; 00:237F - 29
   add    hl, hl                       ; 00:2380 - 29
   add    hl, hl                       ; 00:2381 - 29
   add    hl, hl                       ; 00:2382 - 29
   ld     (ix+5), l                    ; 00:2383 - DD 75 05
   ld     (ix+6), h                    ; 00:2386 - DD 74 06
   push   ix                           ; 00:2389 - DD E5
   pop    hl                           ; 00:238B - E1
   ld     de, $0007                    ; 00:238C - 11 07 00
   add    hl, de                       ; 00:238F - 19
   ld     b, $13                       ; 00:2390 - 06 13
   xor    a                            ; 00:2392 - AF

-:
   ld     (hl), a                      ; 00:2393 - 77
   inc    hl                           ; 00:2394 - 23
   djnz   -                            ; 00:2395 - 10 FC
   exx                                 ; 00:2397 - D9
   inc    hl                           ; 00:2398 - 23
   add    ix, de                       ; 00:2399 - DD 19
   ret                                 ; 00:239B - C9

addr_0239C:
   ld     a, (var_D297)                ; 00:239C - 3A 97 D2
   ld     e, a                         ; 00:239F - 5F
   ld     d, $00                       ; 00:23A0 - 16 00
   ld     hl, LUT_023F9                ; 00:23A2 - 21 F9 23
   add    hl, de                       ; 00:23A5 - 19
   ld     a, (hl)                      ; 00:23A6 - 7E
   ld     l, d                         ; 00:23A7 - 6A
   srl    a                            ; 00:23A8 - CB 3F
   rr     l                            ; 00:23AA - CB 1D
   ld     h, a                         ; 00:23AC - 67
   ld     de, $7CF0                    ; 00:23AD - 11 F0 7C
   add    hl, de                       ; 00:23B0 - 19
   ld     (var_D293), hl               ; 00:23B1 - 22 93 D2
   ld     hl, var_D298                 ; 00:23B4 - 21 98 D2
   ld     a, (hl)                      ; 00:23B7 - 7E
   inc    a                            ; 00:23B8 - 3C
   ld     (hl), a                      ; 00:23B9 - 77
   cp     $0A                          ; 00:23BA - FE 0A
   ret    c                            ; 00:23BC - D8
   ld     (hl), $00                    ; 00:23BD - 36 00
   dec    hl                           ; 00:23BF - 2B
   ld     a, (hl)                      ; 00:23C0 - 7E
   inc    a                            ; 00:23C1 - 3C
   cp     $06                          ; 00:23C2 - FE 06
   jr     c, addr_023C7                ; 00:23C4 - 38 01
   xor    a                            ; 00:23C6 - AF

addr_023C7:
   ld     (hl), a                      ; 00:23C7 - 77
   ret                                 ; 00:23C8 - C9

addr_023C9:
   ld     a, (g_palette_cycle_tick_remain)  ; 00:23C9 - 3A A4 D2
   dec    a                            ; 00:23CC - 3D
   ld     (g_palette_cycle_tick_remain), a  ; 00:23CD - 32 A4 D2
   ret    nz                           ; 00:23D0 - C0
   ld     a, (g_palette_cycle_index)   ; 00:23D1 - 3A A6 D2
   ld     l, a                         ; 00:23D4 - 6F
   ld     h, $00                       ; 00:23D5 - 26 00
   add    hl, hl                       ; 00:23D7 - 29
   add    hl, hl                       ; 00:23D8 - 29
   add    hl, hl                       ; 00:23D9 - 29
   add    hl, hl                       ; 00:23DA - 29
   ld     de, (g_palette_cycle_baseptr)  ; 00:23DB - ED 5B A8 D2
   add    hl, de                       ; 00:23DF - 19
   ld     a, $01                       ; 00:23E0 - 3E 01
   call   signal_load_palettes         ; 00:23E2 - CD 33 03
   ld     hl, (g_palette_cycle_index)  ; 00:23E5 - 2A A6 D2
   ld     a, l                         ; 00:23E8 - 7D
   inc    a                            ; 00:23E9 - 3C
   cp     h                            ; 00:23EA - BC
   jr     c, addr_023EE                ; 00:23EB - 38 01
   xor    a                            ; 00:23ED - AF

addr_023EE:
   ld     l, a                         ; 00:23EE - 6F
   ld     (g_palette_cycle_index), hl  ; 00:23EF - 22 A6 D2
   ld     a, (g_palette_cycle_tick_period)  ; 00:23F2 - 3A A5 D2
   ld     (g_palette_cycle_tick_remain), a  ; 00:23F5 - 32 A4 D2
   ret                                 ; 00:23F8 - C9

LUT_023F9:
.db $05, $04, $03, $02, $01, $00                                                    ; 00:23F9

UNK_023FF:
.db $00, $00, $00                                                                   ; 00:23FF

LUT_bonus_stage_time_limits:
.db $01, $30, $00                                                                   ; 00:2402

LUT_bonus_stage_time_limits_offs_01:
.db $01, $00, $00, $01, $00, $00, $00, $45, $00, $00, $50, $00, $00, $45, $00, $00  ; 00:2405
.db $50, $00, $00, $50, $00, $00, $30, $00                                          ; 00:2415

UNK_0241D:
.db $01, $00, $00, $01, $00, $01, $02, $00, $01, $02, $FF, $02, $03, $01, $01, $03  ; 00:241D
.db $FE, $02, $04, $01, $01, $04, $FD, $03, $05, $02, $01, $06, $FB, $03, $06, $03  ; 00:242D
.db $00, $07, $FA, $03, $06, $05, $FF, $08, $F9, $03, $07, $06, $FE, $09, $F7, $03  ; 00:243D
.db $07, $08, $FD, $0A, $F6, $02, $07, $09, $FB, $0B, $F4, $01, $06, $0B, $FA, $0B  ; 00:244D
.db $F3, $00, $06, $0D, $F8, $0B, $F2, $FF, $05, $0E, $F6, $0B, $F1, $FD, $03, $10  ; 00:245D
.db $F4, $0B, $F0, $FB, $02, $12, $F2, $0A, $F0, $F9, $00, $13, $F0, $09, $F0, $F7  ; 00:246D
.db $FE, $14, $EE, $08, $F0, $F4, $FC, $15, $EC, $07, $F0, $F2, $F9, $15, $EA, $05  ; 00:247D
.db $F1, $EF, $F6, $16, $E9, $02, $F2, $ED, $F4, $15, $E7, $00, $F4, $EB, $F1, $15  ; 00:248D
.db $E6, $FD, $F5, $E8, $EE, $14, $E5, $FA, $F8, $E6, $EB, $13, $E5, $F7, $FA, $E4  ; 00:249D
.db $E8, $11, $E5, $F4, $FD, $E3, $E5, $0F, $E5, $F1, $00, $E1, $E3, $0D, $E6, $ED  ; 00:24AD
.db $03, $E0, $E0, $0A, $E7, $EA, $07, $E0, $DE, $07, $E9, $E6, $0B, $DF, $DD, $04  ; 00:24BD
.db $EB, $E3, $0E, $DF, $DB, $00, $EE, $E0, $12, $E0, $DA, $FC, $F1, $DD, $16, $E1  ; 00:24CD
.db $DA, $F8, $F4, $DB, $1A, $E3, $DA, $F4, $F8, $D8, $1E, $E5, $DA, $EF, $FC, $D7  ; 00:24DD
.db $22, $E8, $DB, $EB, $00, $D5, $25, $EB, $DC, $E6, $05, $D4, $28, $EE, $DE, $E2  ; 00:24ED
.db $09, $D4, $2B, $F2, $E1, $DE, $0E, $D4, $2D, $F6, $E4, $D9, $13, $D5, $2F, $FB  ; 00:24FD
.db $E8, $D6, $18, $D6, $31, $00, $EC, $D2, $1D, $D8, $32, $05, $F0, $CF, $22, $DA  ; 00:250D
.db $32, $0B, $F5, $CD, $27, $DD, $32, $10, $FA, $CB, $2B, $E0, $31, $16, $00, $C9  ; 00:251D
.db $2F, $E5, $2F, $1B, $06, $C8, $33, $E9, $2D, $21, $0C, $C8, $36, $EE, $2B, $26  ; 00:252D
.db $12, $C8, $39, $F4, $27, $2B, $18, $CA, $3B, $FA, $23, $30, $1E, $CB, $3D, $00  ; 00:253D
.db $1E, $35, $24, $CE, $3E, $06, $19, $39, $2A, $D1, $3E, $0D, $14, $3C, $30, $D5  ; 00:254D
.db $3D, $14, $0D, $3F, $35, $D9, $3C, $1B, $07, $41, $3A, $DF, $3A, $21, $00, $43  ; 00:255D
.db $3E, $E4, $37, $28, $F9, $44, $42, $EB, $33, $2E, $F2, $44, $45, $F1, $2F, $34  ; 00:256D
.db $EA, $43, $47, $F9, $2A, $3A, $E3, $41, $49, $00, $24, $3F, $DC, $3F            ; 00:257D

addr_0258B:
   ld     a, (g_saved_vdp_reg_01)      ; 00:258B - 3A 19 D2
   and    $BF                          ; 00:258E - E6 BF
   ld     (g_saved_vdp_reg_01), a      ; 00:2590 - 32 19 D2
   res    0, (iy+var_D200-IYBASE)      ; 00:2593 - FD CB 00 86
   call   wait_until_irq_ticked        ; 00:2597 - CD 1C 03
   xor    a                            ; 00:259A - AF
   ld     (g_vdp_scroll_x), a          ; 00:259B - 32 51 D2
   ld     (g_vdp_scroll_y), a          ; 00:259E - 32 52 D2
   ld     hl, PAL3_ending_tally        ; 00:25A1 - 21 28 28
   ld     a, $03                       ; 00:25A4 - 3E 03
   call   signal_load_palettes         ; 00:25A6 - CD 33 03
   ld     hl, ART_0C_0000              ; 00:25A9 - 21 00 00
   ld     de, $0000                    ; 00:25AC - 11 00 00
   ld     a, $0C                       ; 00:25AF - 3E 0C
   call   load_art                     ; 00:25B1 - CD 05 04
   .IF 0
   ld     a, $05                       ; 00:25B4 - 3E 05
   ;; BUGFIX: PAGERACE: Race condition, defeatable with a well-timed interrupt. Swapped ops around to fix.
   ld     (g_committed_rompage_1), a   ; 00:25B9 - 32 35 D2
   ld     (rompage_1), a               ; 00:25B6 - 32 FE FF
   .ENDIF
   ld     hl, ARTMAP_05_6830           ; 00:25BC - 21 30 68
   ld     bc, $0179                    ; 00:25BF - 01 79 01
   ld     de, $3800                    ; 00:25C2 - 11 00 38
   xor    a                            ; 00:25C5 - AF
   ld     (g_FF_string_high_byte), a   ; 00:25C6 - 32 0E D2
   call   unpack_art_tilemap_into_vram  ; 00:25C9 - CD 01 05
   ld     a, (g_saved_vdp_reg_01)      ; 00:25CC - 3A 19 D2
   or     $40                          ; 00:25CF - F6 40
   ld     (g_saved_vdp_reg_01), a      ; 00:25D1 - 32 19 D2
   res    0, (iy+var_D200-IYBASE)      ; 00:25D4 - FD CB 00 86
   call   wait_until_irq_ticked        ; 00:25D8 - CD 1C 03
   .IF 0
   ld     a, $01                       ; 00:25DB - 3E 01
   ;; BUGFIX: PAGERACE: Race condition, defeatable with a well-timed interrupt. Swapped ops around to fix.
   ld     (g_committed_rompage_1), a   ; 00:25E0 - 32 35 D2
   ld     (rompage_1), a               ; 00:25DD - 32 FE FF
   .ENDIF
   .IF !cht_force_good_ending
   ld     a, (var_D27F)                ; 00:25E3 - 3A 7F D2
   cp     $06                          ; 00:25E6 - FE 06
   jp     c, addr_02693                ; 00:25E8 - DA 93 26
   .ENDIF
   ld     b, $3C                       ; 00:25EB - 06 3C

addr_025ED:
   push   bc                           ; 00:25ED - C5
   res    0, (iy+var_D200-IYBASE)      ; 00:25EE - FD CB 00 86
   call   wait_until_irq_ticked        ; 00:25F2 - CD 1C 03
   ld     hl, var_D000                 ; 00:25F5 - 21 00 D0
   ld     c, $70                       ; 00:25F8 - 0E 70
   ld     b, $60                       ; 00:25FA - 06 60
   ld     de, LUT_02825                ; 00:25FC - 11 25 28
   call   draw_sprite_text             ; 00:25FF - CD CC 35
   ld     (var_D23C), hl               ; 00:2602 - 22 3C D2
   pop    bc                           ; 00:2605 - C1
   djnz   addr_025ED                   ; 00:2606 - 10 E5
   ld     a, $13                       ; 00:2608 - 3E 13
   rst    $18                          ; 00:260A - DF
   ld     hl, UNK_0241D                ; 00:260B - 21 1D 24
   ld     b, $3D                       ; 00:260E - 06 3D

addr_02610:
   push   bc                           ; 00:2610 - C5
   ld     c, (iy+g_sprite_count-IYBASE)  ; 00:2611 - FD 4E 0A
   res    0, (iy+var_D200-IYBASE)      ; 00:2614 - FD CB 00 86
   call   wait_until_irq_ticked        ; 00:2618 - CD 1C 03
   ld     (iy+g_sprite_count-IYBASE), c  ; 00:261B - FD 71 0A
   res    0, (iy+var_D200-IYBASE)      ; 00:261E - FD CB 00 86
   call   wait_until_irq_ticked        ; 00:2622 - CD 1C 03
   ld     de, var_D000                 ; 00:2625 - 11 00 D0
   ld     (var_D23C), de               ; 00:2628 - ED 53 3C D2
   ld     b, $03                       ; 00:262C - 06 03

addr_0262E:
   push   bc                           ; 00:262E - C5
   push   hl                           ; 00:262F - E5
   ld     a, $70                       ; 00:2630 - 3E 70
   add    a, (hl)                      ; 00:2632 - 86
   ld     c, a                         ; 00:2633 - 4F
   inc    hl                           ; 00:2634 - 23
   ld     a, $60                       ; 00:2635 - 3E 60
   add    a, (hl)                      ; 00:2637 - 86
   ld     b, a                         ; 00:2638 - 47
   inc    hl                           ; 00:2639 - 23
   push   bc                           ; 00:263A - C5
   ld     de, LUT_02825                ; 00:263B - 11 25 28
   ld     hl, (var_D23C)               ; 00:263E - 2A 3C D2
   call   draw_sprite_text             ; 00:2641 - CD CC 35
   ld     (var_D23C), hl               ; 00:2644 - 22 3C D2
   pop    bc                           ; 00:2647 - C1
   pop    hl                           ; 00:2648 - E1
   ld     a, (hl)                      ; 00:2649 - 7E
   neg                                 ; 00:264A - ED 44
   add    a, $70                       ; 00:264C - C6 70
   ld     c, a                         ; 00:264E - 4F
   inc    hl                           ; 00:264F - 23
   ld     a, (hl)                      ; 00:2650 - 7E
   neg                                 ; 00:2651 - ED 44
   add    a, $60                       ; 00:2653 - C6 60
   ld     b, a                         ; 00:2655 - 47
   inc    hl                           ; 00:2656 - 23
   push   hl                           ; 00:2657 - E5
   ld     de, LUT_02825                ; 00:2658 - 11 25 28
   ld     hl, (var_D23C)               ; 00:265B - 2A 3C D2
   call   draw_sprite_text             ; 00:265E - CD CC 35
   ld     (var_D23C), hl               ; 00:2661 - 22 3C D2
   pop    hl                           ; 00:2664 - E1
   pop    bc                           ; 00:2665 - C1
   djnz   addr_0262E                   ; 00:2666 - 10 C6
   pop    bc                           ; 00:2668 - C1
   djnz   addr_02610                   ; 00:2669 - 10 A5
   .IF 0
   ;; Hoisted into the function.
   ld     hl, LUT_02047_all7F          ; 00:266B - 21 47 20
   .ENDIF
   call   palette_fade_up              ; 00:266E - CD 60 0B
   ld     (iy+g_sprite_count-IYBASE), $00  ; 00:2671 - FD 36 0A 00
   .IF 0
   ld     a, $05                       ; 00:2675 - 3E 05
   ;; BUGFIX: PAGERACE: Race condition, defeatable with a well-timed interrupt. Swapped ops around to fix.
   ld     (g_committed_rompage_1), a   ; 00:267A - 32 35 D2
   ld     (rompage_1), a               ; 00:2677 - 32 FE FF
   .ENDIF
   ld     hl, ARTMAP_05_69A9           ; 00:267D - 21 A9 69
   ld     bc, $0145                    ; 00:2680 - 01 45 01
   ld     de, $3800                    ; 00:2683 - 11 00 38
   xor    a                            ; 00:2686 - AF
   ld     (g_FF_string_high_byte), a   ; 00:2687 - 32 0E D2
   call   unpack_art_tilemap_into_vram  ; 00:268A - CD 01 05
   ld     hl, PAL3_ending_tally        ; 00:268D - 21 28 28
   call   addr_00AAE                   ; 00:2690 - CD AE 0A

addr_02693:
   ld     bc, $00F0                    ; 00:2693 - 01 F0 00
   call   addr_02745                   ; 00:2696 - CD 45 27
   call   handle_level_score_screen    ; 00:2699 - CD 5E 15
   ld     bc, $00F0                    ; 00:269C - 01 F0 00
   call   addr_02745                   ; 00:269F - CD 45 27
   call   addr_00A40                   ; 00:26A2 - CD 40 0A
   ld     bc, $0078                    ; 00:26A5 - 01 78 00
   call   addr_02745                   ; 00:26A8 - CD 45 27
   ld     hl, ART_0C_1801              ; 00:26AB - 21 01 18
   ld     de, $0000                    ; 00:26AE - 11 00 00
   ld     a, $0C                       ; 00:26B1 - 3E 0C
   call   load_art                     ; 00:26B3 - CD 05 04
   ld     hl, ART_09_4B0A              ; 00:26B6 - 21 0A 4B
   ld     de, $2000                    ; 00:26B9 - 11 00 20
   ld     a, $09                       ; 00:26BC - 3E 09
   call   load_art                     ; 00:26BE - CD 05 04
   .IF 0
   ld     a, $05                       ; 00:26C1 - 3E 05
   ;; BUGFIX: PAGERACE: Race condition, defeatable with a well-timed interrupt. Swapped ops around to fix.
   ld     (g_committed_rompage_1), a   ; 00:26C6 - 32 35 D2
   ld     (rompage_1), a               ; 00:26C3 - 32 FE FF
   .ENDIF
   ld     hl, ARTMAP_05_6C61           ; 00:26C9 - 21 61 6C
   ld     bc, $0189                    ; 00:26CC - 01 89 01
   ld     de, $3800                    ; 00:26CF - 11 00 38
   xor    a                            ; 00:26D2 - AF
   ld     (g_FF_string_high_byte), a   ; 00:26D3 - 32 0E D2
   call   unpack_art_tilemap_into_vram  ; 00:26D6 - CD 01 05

   .IF 0
   xor    a                            ; 00:26D9 - AF
   ld     hl, var_D322                 ; 00:26DA - 21 22 D3
   ld     (hl), credits_sprite_00&$FF  ; 00:26DD - 36 48
   inc    hl                           ; 00:26DF - 23
   ld     (hl), credits_sprite_00>>8   ; 00:26E0 - 36 28
   inc    hl                           ; 00:26E2 - 23
   ld     (hl), a                      ; 00:26E3 - 77
   inc    hl                           ; 00:26E4 - 23
   ld     (hl), credits_sprite_01&$FF  ; 00:26E5 - 36 57
   inc    hl                           ; 00:26E7 - 23
   ld     (hl), credits_sprite_01>>8   ; 00:26E8 - 36 28
   inc    hl                           ; 00:26EA - 23
   ld     (hl), a                      ; 00:26EB - 77
   inc    hl                           ; 00:26EC - 23
   ld     (hl), credits_sprite_02&$FF  ; 00:26ED - 36 69
   inc    hl                           ; 00:26EF - 23
   ld     (hl), credits_sprite_02>>8   ; 00:26F0 - 36 28
   inc    hl                           ; 00:26F2 - 23
   ld     (hl), a                      ; 00:26F3 - 77
   inc    hl                           ; 00:26F4 - 23
   ld     (hl), credits_sprite_03&$FF  ; 00:26F5 - 36 72
   inc    hl                           ; 00:26F7 - 23
   ld     (hl), credits_sprite_03>>8   ; 00:26F8 - 36 28
   inc    hl                           ; 00:26FA - 23
   ld     (hl), a                      ; 00:26FB - 77

   .ELSE
   ;; Use a table
   ld hl, credits_sprite_ptrs
   ld de, var_D322
   ld bc, 3*4
   ldir
   ; 11 bytes, add 12 for the table itself, totalling 23 bytes
   ; Original code: 35 bytes
   ; SAVING: 22 bytes
   .ENDIF

   ld     bc, $0001                    ; 00:26FC - 01 01 00
   call   addr_02718                   ; 00:26FF - CD 18 27
   ld     hl, LUT_02AD6                ; 00:2702 - 21 D6 2A
   call   palette_fade_in_banks_01_02  ; 00:2705 - CD 50 0B
   ld     a, $0E                       ; 00:2708 - 3E 0E
   rst    $18                          ; 00:270A - DF
   xor    a                            ; 00:270B - AF
   ld     (g_FF_string_high_byte), a   ; 00:270C - 32 0E D2
   ld     hl, UNK_2905                 ; 00:270F - 21 05 29
   call   addr_02795                   ; 00:2712 - CD 95 27

   .IF 0
end_of_credits_infloop:
   jp     end_of_credits_infloop       ; 00:2715 - C3 15 27
   .ELSE
   ;; Use JR.
   ;; I tried using RST $00 for quality of life but it resets straight after the last END letter.
   ;; That's a bit too quick, as the music hasn't finished.
   -: jr -
   ; SAVING: 1 bytes
   .ENDIF

addr_02718:
   push   af                           ; 00:2718 - F5
   push   hl                           ; 00:2719 - E5
   push   de                           ; 00:271A - D5
   push   bc                           ; 00:271B - C5

addr_0271C:
   push   bc                           ; 00:271C - C5
   res    0, (iy+var_D200-IYBASE)      ; 00:271D - FD CB 00 86
   call   wait_until_irq_ticked        ; 00:2721 - CD 1C 03
   ld     (iy+g_sprite_count-IYBASE), $00  ; 00:2724 - FD 36 0A 00
   ld     hl, var_D000                 ; 00:2728 - 21 00 D0
   ld     (var_D23C), hl               ; 00:272B - 22 3C D2
   ld     hl, var_D322                 ; 00:272E - 21 22 D3
   ld     b, $04                       ; 00:2731 - 06 04

addr_02733:
   push   bc                           ; 00:2733 - C5
   call   addr_0275A                   ; 00:2734 - CD 5A 27
   pop    bc                           ; 00:2737 - C1
   djnz   addr_02733                   ; 00:2738 - 10 F9
   pop    bc                           ; 00:273A - C1
   dec    bc                           ; 00:273B - 0B
   ld     a, b                         ; 00:273C - 78
   or     c                            ; 00:273D - B1
   jr     nz, addr_0271C               ; 00:273E - 20 DC
   pop    bc                           ; 00:2740 - C1
   pop    de                           ; 00:2741 - D1
   pop    hl                           ; 00:2742 - E1
   pop    af                           ; 00:2743 - F1
   ret                                 ; 00:2744 - C9

addr_02745:
   push   bc                           ; 00:2745 - C5
   ld     a, (iy+g_sprite_count-IYBASE)  ; 00:2746 - FD 7E 0A
   res    0, (iy+var_D200-IYBASE)      ; 00:2749 - FD CB 00 86
   call   wait_until_irq_ticked        ; 00:274D - CD 1C 03
   ld     (iy+g_sprite_count-IYBASE), a  ; 00:2750 - FD 77 0A
   pop    bc                           ; 00:2753 - C1
   dec    bc                           ; 00:2754 - 0B
   ld     a, b                         ; 00:2755 - 78
   or     c                            ; 00:2756 - B1
   jr     nz, addr_02745               ; 00:2757 - 20 EC
   ret                                 ; 00:2759 - C9

addr_0275A:
   ld     e, (hl)                      ; 00:275A - 5E
   inc    hl                           ; 00:275B - 23
   ld     d, (hl)                      ; 00:275C - 56
   inc    hl                           ; 00:275D - 23
   inc    (hl)                         ; 00:275E - 34
   ld     a, (de)                      ; 00:275F - 1A
   cp     (hl)                         ; 00:2760 - BE
   jr     nc, addr_0277E               ; 00:2761 - 30 1B
   ld     (hl), $00                    ; 00:2763 - 36 00
   inc    de                           ; 00:2765 - 13
   inc    de                           ; 00:2766 - 13
   inc    de                           ; 00:2767 - 13
   dec    hl                           ; 00:2768 - 2B
   ld     (hl), d                      ; 00:2769 - 72
   dec    hl                           ; 00:276A - 2B
   ld     (hl), e                      ; 00:276B - 73
   inc    hl                           ; 00:276C - 23
   inc    hl                           ; 00:276D - 23
   ld     a, (de)                      ; 00:276E - 1A
   cp     $FF                          ; 00:276F - FE FF
   jr     nz, addr_0277E               ; 00:2771 - 20 0B
   inc    de                           ; 00:2773 - 13
   ld     a, (de)                      ; 00:2774 - 1A
   ld     b, a                         ; 00:2775 - 47
   inc    de                           ; 00:2776 - 13
   ld     a, (de)                      ; 00:2777 - 1A
   dec    hl                           ; 00:2778 - 2B
   ld     (hl), a                      ; 00:2779 - 77
   dec    hl                           ; 00:277A - 2B
   ld     (hl), b                      ; 00:277B - 70
   jr     addr_0275A                   ; 00:277C - 18 DC

addr_0277E:
   inc    hl                           ; 00:277E - 23
   inc    de                           ; 00:277F - 13
   push   hl                           ; 00:2780 - E5
   ex     de, hl                       ; 00:2781 - EB
   ld     e, (hl)                      ; 00:2782 - 5E
   inc    hl                           ; 00:2783 - 23
   ld     d, (hl)                      ; 00:2784 - 56
   ex     de, hl                       ; 00:2785 - EB
   ld     a, (hl)                      ; 00:2786 - 7E
   inc    hl                           ; 00:2787 - 23
   ld     e, (hl)                      ; 00:2788 - 5E
   inc    hl                           ; 00:2789 - 23
   ld     c, l                         ; 00:278A - 4D
   ld     b, h                         ; 00:278B - 44
   ld     l, a                         ; 00:278C - 6F
   ld     h, $00                       ; 00:278D - 26 00
   ld     d, h                         ; 00:278F - 54
   call   addr_0350F                   ; 00:2790 - CD 0F 35
   pop    hl                           ; 00:2793 - E1
   ret                                 ; 00:2794 - C9

addr_02795:
   ld     de, g_HUD_FFstr_buf          ; 00:2795 - 11 BE D2
   ldi                                 ; 00:2798 - ED A0
   ldi                                 ; 00:279A - ED A0
   inc    de                           ; 00:279C - 13
   ld     a, $FF                       ; 00:279D - 3E FF
   ld     (de), a                      ; 00:279F - 12

addr_027A0:
   ld     a, (hl)                      ; 00:27A0 - 7E
   inc    hl                           ; 00:27A1 - 23

   .IF 0
   ;; Original code
   cp     $FF                          ; 00:27A2 - FE FF
   ret    z                            ; 00:27A4 - C8
   cp     $FE                          ; 00:27A5 - FE FE
   jr     z, addr_02795                ; 00:27A7 - 28 EC
   cp     $FC                          ; 00:27A9 - FE FC
   jr     z, addr_027D1                ; 00:27AB - 28 24
   cp     $FD                          ; 00:27AD - FE FD
   jr     nz, addr_027BA               ; 00:27AF - 20 09
   ld     c, (hl)                      ; 00:27B1 - 4E
   inc    hl                           ; 00:27B2 - 23
   ld     b, (hl)                      ; 00:27B3 - 46
   inc    hl                           ; 00:27B4 - 23
   call   addr_02718                   ; 00:27B5 - CD 18 27
   jr     addr_027A0                   ; 00:27B8 - 18 E6

addr_027BA:
   push   hl                           ; 00:27BA - E5
   ld     (var_D2C0), a                ; 00:27BB - 32 C0 D2
   ld     bc, $0008                    ; 00:27BE - 01 08 00
   call   addr_02718                   ; 00:27C1 - CD 18 27
   ld     hl, g_HUD_FFstr_buf          ; 00:27C4 - 21 BE D2
   call   print_positioned_FF_string   ; 00:27C7 - CD AF 05
   ld     hl, g_HUD_FFstr_buf          ; 00:27CA - 21 BE D2
   inc    (hl)                         ; 00:27CD - 34
   pop    hl                           ; 00:27CE - E1
   jr     addr_027A0                   ; 00:27CF - 18 CF

   .ELSE
   ;; New code
   ;; Need to invert a branch to do this.
   inc a                            ; 27A2 1 - compare $FF
   ret z                            ; 27A3 1
   inc a                            ; 27A4 1 - compare $FE
   jr z, addr_02795                 ; 27A5 2
   inc a                            ; 27A7 1 - compare $FD
   jr z, @do_FD                     ; 27A8 2
   inc a                            ; 27AA 1 - compare $FC
   jr z, addr_027D1                 ; 27AB 2
   sub $04                          ; 27AD 2
   push hl                          ; 27AF 1
   ld (var_D2C0), a                 ; 27B0 3
   ld bc, $0008                     ; 27B3 3
   call addr_02718                  ; 27B6 3
   ld hl, g_HUD_FFstr_buf           ; 27B9 3
   push hl                          ; 27BC 1
   call print_positioned_FF_string  ; 27BD 3
   pop hl                           ; 27C0 1
   inc (hl)                         ; 27C1 1
   pop hl                           ; 27C2 1
   jr addr_027A0                    ; 27C3 2
@do_FD:
   ld     c, (hl)                   ; 27C5 1
   inc    hl                        ; 27C6 1
   ld     b, (hl)                   ; 27C7 1
   inc    hl                        ; 27C8 1
   call   addr_02718                ; 27C9 3
   jr     addr_027A0                ; 27CC 2
   ; 27D1 -> 27CE - SAVING: 3 bytes
   .ENDIF

addr_027D1:
   ld     b, (hl)                      ; 00:27D1 - 46
   inc    hl                           ; 00:27D2 - 23
   push   hl                           ; 00:27D3 - E5

addr_027D4:
   push   bc                           ; 00:27D4 - C5
   ld     bc, $000C                    ; 00:27D5 - 01 0C 00
   call   addr_02718                   ; 00:27D8 - CD 18 27
   ld     de, $3AA4                    ; 00:27DB - 11 A4 3A
   ld     hl, $3AE4                    ; 00:27DE - 21 E4 3A
   ld     b, $09                       ; 00:27E1 - 06 09

addr_027E3:
   push   bc                           ; 00:27E3 - C5
   push   hl                           ; 00:27E4 - E5
   push   de                           ; 00:27E5 - D5
   ld     b, $14                       ; 00:27E6 - 06 14

addr_027E8:
   di                                  ; 00:27E8 - F3
   ld     a, l                         ; 00:27E9 - 7D
   out    ($BF), a                     ; 00:27EA - D3 BF
   ld     a, h                         ; 00:27EC - 7C
   out    ($BF), a                     ; 00:27ED - D3 BF
   push   ix                           ; 00:27EF - DD E5
   pop    ix                           ; 00:27F1 - DD E1
   in     a, ($BE)                     ; 00:27F3 - DB BE
   ld     c, a                         ; 00:27F5 - 4F
   push   ix                           ; 00:27F6 - DD E5
   pop    ix                           ; 00:27F8 - DD E1
   ld     a, e                         ; 00:27FA - 7B
   out    ($BF), a                     ; 00:27FB - D3 BF
   ld     a, d                         ; 00:27FD - 7A
   or     $40                          ; 00:27FE - F6 40
   out    ($BF), a                     ; 00:2800 - D3 BF
   push   ix                           ; 00:2802 - DD E5
   pop    ix                           ; 00:2804 - DD E1
   ld     a, c                         ; 00:2806 - 79
   out    ($BE), a                     ; 00:2807 - D3 BE
   push   ix                           ; 00:2809 - DD E5
   pop    ix                           ; 00:280B - DD E1
   ei                                  ; 00:280D - FB
   inc    hl                           ; 00:280E - 23
   inc    de                           ; 00:280F - 13
   djnz   addr_027E8                   ; 00:2810 - 10 D6
   pop    de                           ; 00:2812 - D1
   pop    hl                           ; 00:2813 - E1
   ld     bc, $0040                    ; 00:2814 - 01 40 00
   add    hl, bc                       ; 00:2817 - 09
   ex     de, hl                       ; 00:2818 - EB
   add    hl, bc                       ; 00:2819 - 09
   ex     de, hl                       ; 00:281A - EB
   pop    bc                           ; 00:281B - C1
   djnz   addr_027E3                   ; 00:281C - 10 C5
   pop    bc                           ; 00:281E - C1
   djnz   addr_027D4                   ; 00:281F - 10 B3
   pop    hl                           ; 00:2821 - E1
   jp     addr_027A0                   ; 00:2822 - C3 A0 27

LUT_02825:
.db $5C, $5E, $FF                                                                   ; 00:2825

PAL3_ending_tally:
.INCBIN "src/data/ending_tally.pal3"

.IF 0
.ELSE
credits_sprite_ptrs:
   .dw credits_sprite_00
   .db 0
   .dw credits_sprite_01
   .db 0
   .dw credits_sprite_02
   .db 0
   .dw credits_sprite_03
   .db 0
.ENDIF
;; See function 00:275A, where HL = $D322 (var_D322), and there are 4 entries initialised with the form:
;; .dw some_ptr (this one is the first!) -> gets stored into DE
;; .db $00  <-- gets incremented
;; And this structure:
;; .db some_frame_timer_counter
;; .dw some_ptr
;; and repeat until:
;; .db $FF
;; .dw next_pointer_to_jump_to
credits_sprite_00:
.db $96                                                                             ; 00:2848

credits_sprite_00_ptrs:
.dw addr_02902                                                                      ; 00:2849
.db $86                                                                             ; 00:284B
.dw addr_0289F                                                                      ; 00:284C
.db $E9                                                                             ; 00:284E
.dw addr_02902                                                                      ; 00:284F
.db $6F                                                                             ; 00:2851
.dw addr_0289F                                                                      ; 00:2852
.db $FF                                                                             ; 00:2854
.dw credits_sprite_00                                                               ; 00:2855

credits_sprite_01:
.db $36                                                                             ; 00:2857

credits_sprite_01_ptrs:
.dw addr_028B1                                                                      ; 00:2858
.db $48                                                                             ; 00:285A
.dw addr_028BA                                                                      ; 00:285B
.db $54                                                                             ; 00:285D
.dw addr_028A8                                                                      ; 00:285E
.db $1E                                                                             ; 00:2860
.dw addr_028B1                                                                      ; 00:2861
.db $44                                                                             ; 00:2863
.dw addr_028BA                                                                      ; 00:2864
.db $FF                                                                             ; 00:2866
.dw credits_sprite_01                                                               ; 00:2867

credits_sprite_02:
.db $23                                                                             ; 00:2869

credits_sprite_02_ptrs:
.dw addr_028C3                                                                      ; 00:286A
.db $23                                                                             ; 00:286C
.dw addr_028CC                                                                      ; 00:286D
.db $FF                                                                             ; 00:286F
.dw credits_sprite_02                                                               ; 00:2870

credits_sprite_03:
.db $E4                                                                             ; 00:2872

credits_sprite_03_ptrs:
.dw addr_028F3                                                                      ; 00:2873
.db $19                                                                             ; 00:2875
.dw addr_028E4                                                                      ; 00:2876
.db $19                                                                             ; 00:2878
.dw addr_028D5                                                                      ; 00:2879
.db $19                                                                             ; 00:287B
.dw addr_028E4                                                                      ; 00:287C
.db $19                                                                             ; 00:287E
.dw addr_028D5                                                                      ; 00:287F
.db $FA                                                                             ; 00:2881
.dw addr_028F3                                                                      ; 00:2882
.db $85                                                                             ; 00:2884
.dw addr_028E4                                                                      ; 00:2885
.db $E8                                                                             ; 00:2887
.dw addr_028F3                                                                      ; 00:2888
.db $19                                                                             ; 00:288A
.dw addr_028E4                                                                      ; 00:288B
.db $19                                                                             ; 00:288D
.dw addr_028D5                                                                      ; 00:288E
.db $19                                                                             ; 00:2890
.dw addr_028E4                                                                      ; 00:2891
.db $19                                                                             ; 00:2893
.dw addr_028D5                                                                      ; 00:2894
.db $19                                                                             ; 00:2896
.dw addr_028E4                                                                      ; 00:2897
.db $19                                                                             ; 00:2899
.dw addr_028D5                                                                      ; 00:289A
.db $FF                                                                             ; 00:289C
.dw credits_sprite_03                                                               ; 00:289D

addr_0289F:
.db $40, $48, $50, $FF, $FF, $FF, $FF, $FF, $FF                                     ; 00:289F

addr_028A8:
.db $40, $58, $4A, $FF, $FF, $FF, $FF, $FF, $FF                                     ; 00:28A8

addr_028B1:
.db $40, $58, $4C, $FF, $FF, $FF, $FF, $FF, $FF                                     ; 00:28B1

addr_028BA:
.db $40, $58, $4E, $FF, $FF, $FF, $FF, $FF, $FF                                     ; 00:28BA

addr_028C3:
.db $40, $78, $6A, $6C, $6E, $FF, $FF, $FF, $FF                                     ; 00:28C3

addr_028CC:
.db $40, $78, $70, $72, $74, $FF, $FF, $FF, $FF                                     ; 00:28CC

addr_028D5:
.db $48, $50, $0A, $0C, $FF, $FF, $FF, $FF, $2A, $2C, $FF, $FF, $FF, $FF, $FF       ; 00:28D5

addr_028E4:
.db $48, $50, $0E, $10, $FF, $FF, $FF, $FF, $2E, $30, $FF, $FF, $FF, $FF, $FF       ; 00:28E4

addr_028F3:
.db $48, $60, $12, $14, $FF, $FF, $FF, $FF, $32, $34, $FF, $FF, $FF, $FF, $FF       ; 00:28F3

addr_02902:
.db $40, $48, $FF                                                                   ; 00:2902

UNK_2905:
.db $14, $03, $AE, $9E, $7F, $5E, $2E, $FE, $15, $04, $AF, $4F, $3E, $FE, $13, $05  ; 00:2905
.db $4F, $3E, $2F, $4E, $3E, $4F, $9E, $4E, $FD, $3C, $00, $FE, $12, $0C, $7E, $1E  ; 00:2915
.db $AE, $AF, $3E, $9F, $FE, $13, $0D, $AE, $DE, $AE, $AF, $3E, $7E, $FE, $14, $0E  ; 00:2925
.db $BF, $3E, $9F, $AE, $5E, $9E, $7F, $FD, $3C, $00, $FC, $09, $FE, $14, $0B, $AE  ; 00:2935
.db $9E, $7F, $5E, $2E, $FE, $15, $0C, $AF, $4F, $3E, $FE, $13, $0D, $4F, $3E, $2F  ; 00:2945
.db $4E, $3E, $4F, $9E, $4E, $FD, $3C, $00, $FE, $12, $0F, $8E, $9F, $5E, $4E, $5E  ; 00:2955
.db $7F, $1E, $6F, $FE, $13, $10, $2E, $4F, $1E, $9F, $1E, $2E, $AF, $3E, $9F, $FE  ; 00:2965
.db $14, $11, $2F, $3E, $AE, $5E, $4E, $7F, $FD, $3C, $00, $FC, $04, $FE, $14, $10  ; 00:2975
.db $AB, $AE, $3E, $4E, $1E, $FD, $B4, $00, $FC, $09, $FE, $14, $0E, $AE, $AF, $1E  ; 00:2985
.db $3F, $3F, $FD, $B4, $00, $FC, $09, $FE, $12, $0B, $4E, $1E, $7E, $3E, $FE, $13  ; 00:2995
.db $0C, $8F, $9F, $9E, $4E, $9F, $1E, $7E, $FD, $3C, $00, $FE, $13, $0E, $AE, $4F  ; 00:29A5
.db $5E, $7F, $9E, $1F, $BE, $FE, $14, $0F, $4F, $1E, $DE, $1E, $AE, $4F, $5E, $FD  ; 00:29B5
.db $F0, $00, $FC, $09, $FE, $12, $0B, $4E, $9F, $1E, $8F, $4F, $5E, $2E, $FE, $14  ; 00:29C5
.db $0C, $2F, $3E, $AE, $5E, $4E, $7F, $FD, $3C, $00, $FE, $13, $0E, $1E, $DE, $1E  ; 00:29D5
.db $7F, $9E, $FE, $14, $0F, $6E, $9E, $AE, $4F, $5E, $9F, $9E, $FD, $3C, $00, $FE  ; 00:29E5
.db $13, $11, $AF, $1E, $CF, $3E, $3F, $BE, $7F, $5E, $FE, $14, $12, $DE, $BE, $7F  ; 00:29F5
.db $9E, $BE, $3E, $FD, $F0, $00, $FC, $09, $FE, $12, $0B, $AE, $9E, $BE, $7F, $2F  ; 00:2A05
.db $FE, $13, $0C, $8F, $9F, $9E, $2F, $BE, $2E, $3E, $FD, $3C, $00, $FE, $13, $0E  ; 00:2A15
.db $7E, $1E, $AE, $1E, $AF, $9E, $FE, $14, $0F, $7F, $1E, $CF, $1E, $7E, $BE, $9F  ; 00:2A25
.db $1E, $FD, $F0, $00, $FC, $09, $FE, $12, $0B, $9F, $3E, $1E, $9F, $9F, $1E, $7F  ; 00:2A35
.db $4E, $3E, $FE, $15, $0C, $1E, $7F, $2F, $FE, $12, $0D, $9E, $9F, $5E, $4E, $5E  ; 00:2A45
.db $7F, $1E, $6F, $FE, $16, $0E, $7E, $BE, $AE, $5E, $2E, $FD, $3C, $00, $FE, $13  ; 00:2A55
.db $10, $DE, $BE, $DF, $9E, $FE, $14, $11, $6E, $9E, $AE, $4F, $5E, $9F, $9E, $FD  ; 00:2A65
.db $F0, $00, $FC, $09, $FE, $13, $0D, $AE, $8F, $3E, $2E, $5E, $1E, $6F, $FE, $15  ; 00:2A75
.db $0E, $AF, $4F, $1E, $7F, $6E, $AE, $FD, $B4, $00, $FC, $02, $FE, $13, $0E, $DE  ; 00:2A85
.db $8E, $AE, $4F, $5E, $8E, $EB, $DE, $FD, $3C, $00, $FE, $13, $11, $6F, $BE, $7F  ; 00:2A95
.db $1E, $9F, $5E, $1E, $7F, $FE, $1A, $12, $AE, $4E, $FD, $B4, $00, $FC, $09, $FE  ; 00:2AA5
.db $12, $0C, $8F, $9F, $3E, $AE, $3E, $7F, $AF, $3E, $2F, $FE, $16, $0E, $1F, $DE  ; 00:2AB5
.db $FE, $15, $10, $AE, $3E, $4E, $1E, $FD, $B4, $00, $FE, $19, $13, $3E, $7F, $2F  ; 00:2AC5
.db $FF                                                                             ; 00:2AD5

LUT_02AD6:
.db $35, $3D, $1F, $39, $06, $1B, $01, $34, $2B, $10, $03, $14, $2A, $1F, $00, $3F  ; 00:2AD6
.db $35, $3D, $1F, $39, $06, $1B, $01, $34, $2B, $10, $03, $14, $2A, $1F, $00, $3F  ; 00:2AE6

LUT_object_functions_02AF6:
.dw objfunc_00_UNKNOWN, objfunc_01_monitor_rings, objfunc_02_UNKNOWN, objfunc_03_monitor_life, objfunc_04_UNKNOWN, objfunc_05_UNKNOWN, objfunc_06_UNKNOWN, objfunc_07_signpost  ; 00:2AF6
.dw objfunc_08_badnik_crabmeat, objfunc_09_UNKNOWN, objfunc_0A_UNKNOWN, objfunc_0B_UNKNOWN, objfunc_0C_UNKNOWN, objfunc_0D_UNKNOWN, objfunc_0E_UNKNOWN, objfunc_0F_UNKNOWN  ; 00:2B06
.dw objfunc_10_motobug, objfunc_11_UNKNOWN, objfunc_12_GHZ_boss, objfunc_13_UNKNOWN, objfunc_14_UNKNOWN, objfunc_15_UNKNOWN, objfunc_16_UNKNOWN, objfunc_17_UNKNOWN  ; 00:2B16
.dw objfunc_18_UNKNOWN, objfunc_19_UNKNOWN, objfunc_1A_UNKNOWN, objfunc_1B_UNKNOWN, objfunc_1C_UNKNOWN, objfunc_1D_floorbutton, objfunc_1E_door_from_button, objfunc_1F_UNKNOWN  ; 00:2B26
.dw objfunc_20_UNKNOWN, objfunc_21_UNKNOWN, objfunc_22_UNKNOWN, objfunc_23_UNKNOWN, objfunc_24_UNKNOWN, objfunc_25_UNKNOWN, objfunc_26_UNKNOWN, objfunc_27_UNKNOWN  ; 00:2B36
.dw objfunc_28_UNKNOWN, objfunc_29_UNKNOWN, objfunc_2A_UNKNOWN, objfunc_2B_UNKNOWN, objfunc_2C_UNKNOWN, objfunc_2D_UNKNOWN, objfunc_2E_UNKNOWN, objfunc_2F_UNKNOWN  ; 00:2B46
.dw objfunc_30_UNKNOWN, objfunc_31_UNKNOWN, objfunc_32_UNKNOWN, objfunc_33_UNKNOWN, objfunc_34_UNKNOWN, objfunc_35_UNKNOWN, objfunc_36_UNKNOWN, objfunc_37_UNKNOWN  ; 00:2B56
.dw objfunc_38_UNKNOWN, objfunc_39_UNKNOWN, objfunc_3A_UNKNOWN, objfunc_3B_UNKNOWN, objfunc_3C_UNKNOWN, objfunc_3D_UNKNOWN, objfunc_3E_UNKNOWN, objfunc_3F_UNKNOWN  ; 00:2B66
.dw objfunc_40_UNKNOWN, objfunc_41_UNKNOWN, objfunc_42_UNKNOWN, objfunc_43_UNKNOWN, objfunc_44_UNKNOWN, objfunc_45_UNKNOWN, objfunc_46_UNKNOWN, objfunc_47_UNKNOWN  ; 00:2B76
.dw objfunc_48_UNKNOWN, objfunc_49_UNKNOWN, objfunc_4A_UNKNOWN, objfunc_4B_UNKNOWN, objfunc_4C_UNKNOWN, ENTRY_RESET, objfunc_4E_UNKNOWN, ENTRY_RESET  ; 00:2B86
.dw objfunc_50_UNKNOWN, objfunc_51_UNKNOWN, objfunc_52_UNKNOWN, objfunc_53_UNKNOWN, objfunc_54_UNKNOWN, objfunc_55_UNKNOWN  ; 00:2B96

LUT_2BA2:
.db $00, $01, $00, $02, $00, $01, $00, $02, $20, $00, $20, $01, $20, $00, $E0, $00  ; 00:2BA2
.db $20, $00, $20, $01, $20, $00, $E0, $00, $20, $00, $20, $01, $20, $00, $E0, $00  ; 00:2BB2
.db $20, $00, $20, $01, $20, $00, $E0, $00, $20, $00, $20, $01, $20, $00, $E0, $00  ; 00:2BC2
.db $20, $00, $20, $01, $20, $00, $E0, $00, $20, $00, $20, $01, $60, $00, $E0, $00  ; 00:2BD2
.db $10, $00, $10, $01, $20, $00, $E0, $00, $A0, $00, $A0, $01, $40, $00, $00, $01  ; 00:2BE2
.db $40, $00, $40, $01, $40, $00, $00, $01, $20, $00, $20, $01, $20, $00, $E0, $00  ; 00:2BF2
.db $20, $00, $20, $01, $30, $00, $F0, $00, $00, $01, $00, $02, $00, $01, $C0, $01  ; 00:2C02
.db $40, $00, $40, $01, $40, $00, $00, $01, $A0, $00, $A0, $01, $20, $00, $E0, $00  ; 00:2C12
.db $10, $00, $10, $01, $10, $00, $D0, $00, $10, $00, $10, $01, $10, $00, $D0, $00  ; 00:2C22
.db $C0, $00, $C0, $01, $80, $00, $40, $01, $20, $00, $20, $01, $20, $00, $E0, $00  ; 00:2C32
.db $08, $00, $40, $01, $10, $00, $D0, $00, $40, $00, $08, $01, $10, $00, $D0, $00  ; 00:2C42
.db $10, $00, $10, $01, $20, $00, $E0, $00, $20, $00, $20, $01, $30, $00, $CC, $00  ; 00:2C52
.db $20, $00, $20, $01, $30, $00, $CC, $00, $20, $00, $20, $01, $30, $00, $CC, $00  ; 00:2C62
.db $20, $00, $20, $01, $20, $00, $DA, $00, $30, $00, $30, $01, $30, $00, $F0, $00  ; 00:2C72
.db $00, $01, $80, $01, $00, $01, $C0, $01, $10, $00, $10, $01, $10, $00, $D0, $00  ; 00:2C82
.db $20, $00, $20, $01, $30, $00, $C8, $00, $20, $00, $20, $01, $20, $00, $E0, $00  ; 00:2C92
.db $20, $00, $20, $01, $20, $00, $E0, $00, $20, $00, $20, $01, $80, $00, $40, $01  ; 00:2CA2
.db $10, $00, $10, $01, $80, $00, $F0, $00, $20, $00, $20, $01, $10, $00, $D0, $00  ; 00:2CB2
.db $20, $00, $20, $01, $10, $00, $D0, $00, $20, $00, $20, $01, $20, $00, $E0, $00  ; 00:2CC2
.db $10, $00, $10, $01, $60, $00, $00, $01, $28, $00, $28, $01, $00, $01, $C0, $01  ; 00:2CD2
.db $28, $00, $28, $01, $00, $01, $C0, $01, $10, $00, $10, $01, $10, $00, $D0, $00  ; 00:2CE2
.db $20, $00, $20, $01, $20, $00, $E0, $00, $10, $00, $10, $01, $10, $00, $D0, $00  ; 00:2CF2
.db $40, $00, $40, $01, $C0, $00, $80, $01, $10, $00, $10, $01, $10, $00, $D0, $00  ; 00:2D02
.db $80, $00, $80, $01, $40, $00, $C0, $01, $20, $00, $20, $01, $20, $00, $E0, $00  ; 00:2D12
.db $00, $08, $00, $08, $30, $00, $F0, $00, $10, $00, $10, $01, $20, $00, $E0, $00  ; 00:2D22
.db $20, $00, $20, $01, $20, $00, $E0, $00, $00, $00, $00, $01, $00, $00, $C0, $00  ; 00:2D32
.db $00, $02, $00, $03, $00, $02, $C0, $02, $10, $00, $10, $01, $10, $00, $D0, $00  ; 00:2D42
.db $40, $00, $40, $01, $40, $00, $00, $01, $10, $00, $10, $01, $10, $00, $D0, $00  ; 00:2D52
.db $40, $00, $40, $01, $20, $00, $E0, $00, $80, $00, $80, $01, $50, $00, $D0, $00  ; 00:2D62
.db $10, $00, $10, $01, $10, $00, $D0, $00, $10, $00, $10, $01, $60, $00, $20, $01  ; 00:2D72
.db $10, $00, $10, $01, $10, $00, $D0, $00, $60, $00, $60, $01, $60, $00, $20, $01  ; 00:2D82
.db $10, $00, $10, $01, $10, $00, $D0, $00, $20, $00, $20, $01, $20, $00, $E0, $00  ; 00:2D92
.db $00, $20, $00, $21, $20, $00, $E0, $00, $08, $00, $08, $01, $08, $00, $C8, $00  ; 00:2DA2
.db $20, $00, $20, $01, $20, $00, $E0, $00, $20, $00, $20, $01, $20, $00, $E0, $00  ; 00:2DB2
.db $20, $00, $20, $01, $20, $00, $E0, $00, $28, $00, $28, $01, $28, $00, $E8, $00  ; 00:2DC2
.db $60, $00, $60, $01, $20, $00, $E0, $00, $00, $01, $00, $02, $00, $01, $C0, $01  ; 00:2DD2
.db $10, $00, $10, $01, $10, $00, $D0, $00, $10, $00, $10, $01, $00, $01, $C0, $01  ; 00:2DE2
.db $10, $00, $10, $01, $10, $00, $D0, $00, $10, $00, $10, $01, $10, $00, $D0, $00  ; 00:2DF2
.db $20, $00, $20, $01, $20, $00, $E0, $00, $20, $00, $20, $01, $20, $00, $E0, $00  ; 00:2E02
.db $38, $00, $28, $01, $30, $00, $F0, $00, $20, $00, $20, $01, $20, $00, $E0, $00  ; 00:2E12
.db $10, $00, $10, $01, $10, $00, $D0, $00, $20, $00, $20, $01, $20, $00, $E0, $00  ; 00:2E22
.db $20, $00, $20, $01, $20, $00, $E0, $00, $00, $01, $E0, $01, $C0, $00, $80, $01  ; 00:2E32
.db $00, $01, $00, $02, $00, $01, $C0, $01, $00, $08, $00, $09, $00, $08, $C0, $08  ; 00:2E42

LUT_02E52:
.db $A6, $A8, $FF                                                                   ; 00:2E52

.IF 0
CONST_sonic_lives_FFstr_template:
.db $A0, $A2, $A4, $00, $FF                                                         ; 00:2E55
.ELSE
; Removed - SAVING: 5 bytes
.ENDIF

addr_02E5A:
   res    7, (iy+var_D207-IYBASE)      ; 00:2E5A - FD CB 07 BE
   .IF 0
   ;; Original code
   ld     hl, CONST_sonic_lives_FFstr_template  ; 00:2E5E - 21 55 2E
   ld     de, g_HUD_FFstr_buf          ; 00:2E61 - 11 BE D2
   ld     bc, $0005                    ; 00:2E64 - 01 05 00
   ldir                                ; 00:2E67 - ED B0
   ld     a, (g_lives)                 ; 00:2E69 - 3A 46 D2
   cp     $09                          ; 00:2E6C - FE 09
   jr     c, addr_02E72                ; 00:2E6E - 38 02
   ld     a, $09                       ; 00:2E70 - 3E 09

addr_02E72:
   add    a, a                         ; 00:2E72 - 87
   add    a, $80                       ; 00:2E73 - C6 80
   ld     (var_D2C1), a                ; 00:2E75 - 32 C1 D2
   ld     c, $10                       ; 00:2E78 - 0E 10
   ld     b, $AC                       ; 00:2E7A - 06 AC
   ld     hl, (var_D23C)               ; 00:2E7C - 2A 3C D2
   ld     de, g_HUD_FFstr_buf          ; 00:2E7F - 11 BE D2
   .ELSE
   ;; New code
   ld hl, g_HUD_FFstr_buf  ; 2E5E 3
   push hl                 ; 2E61 1
      ld bc, $03A0         ; 2E62 3
      -:
         ld (hl), c        ; 2E65 1
         inc hl            ; 2E66 1
         inc c             ; 2E67 1
         inc c             ; 2E68 1
         djnz -            ; 2E69 2
      ld a, (g_lives)      ; 2E6B 3
      cp $09               ; 2E6E 2
      jr c, +              ; 2E70 2
         ld a, $09         ; 2E72 2
      +:
      add a, a             ; 2E74 1
      add a, $80           ; 2E75 2
      ld (hl), a           ; 2E77 1
      inc hl               ; 2E78 1
      ld (hl), $FF         ; 2E79 2
      ld bc, $AC10         ; 2E7B 3
      ld hl, (var_D23C)    ; 2E7E 3
   pop de                  ; 2E81 1
   ; 2E82 -> 2E82 - Parity. But we saved 5 bytes by removing the table.
   .ENDIF
   call   draw_sprite_text             ; 00:2E82 - CD CC 35
   ld     (var_D23C), hl               ; 00:2E85 - 22 3C D2
   bit    2, (iy+var_D205-IYBASE)      ; 00:2E88 - FD CB 05 56
   call   nz, addr_02EE6               ; 00:2E8C - C4 E6 2E
   bit    5, (iy+var_D207-IYBASE)      ; 00:2E8F - FD CB 07 6E
   call   nz, draw_level_timer         ; 00:2E93 - C4 1F 2F
   ld     de, $0060                    ; 00:2E96 - 11 60 00
   ld     hl, var_D267                 ; 00:2E99 - 21 67 D2
   .IF 0
   ld     a, (hl)                      ; 00:2E9C - 7E
   inc    hl                           ; 00:2E9D - 23
   or     (hl)                         ; 00:2E9E - B6
   call   z, addr_0311A                ; 00:2E9F - CC 1A 31
   .ELSE
   ;; Hoisted into the call.
   call addr_0311A
   .ENDIF
   inc    hl                           ; 00:2EA2 - 23
   ld     de, $0088                    ; 00:2EA3 - 11 88 00
   .IF 0
   ld     a, (hl)                      ; 00:2EA6 - 7E
   inc    hl                           ; 00:2EA7 - 23
   or     (hl)                         ; 00:2EA8 - B6
   call   z, addr_0311A                ; 00:2EA9 - CC 1A 31
   .ELSE
   ;; Hoisted into the call.
   call addr_0311A
   .ENDIF
   inc    hl                           ; 00:2EAC - 23
   ld     de, $0060                    ; 00:2EAD - 11 60 00
   .IF 0
   ld     a, (hl)                      ; 00:2EB0 - 7E
   inc    hl                           ; 00:2EB1 - 23
   or     (hl)                         ; 00:2EB2 - B6
   call   z, addr_0311A                ; 00:2EB3 - CC 1A 31
   .ELSE
   ;; Hoisted into the call.
   call addr_0311A
   .ENDIF
   inc    hl                           ; 00:2EB6 - 23
   ld     de, $0070                    ; 00:2EB7 - 11 70 00
   bit    6, (iy+var_D205-IYBASE)      ; 00:2EBA - FD CB 05 76
   jr     z, addr_02EC3                ; 00:2EBE - 28 03
   ld     de, $0080                    ; 00:2EC0 - 11 80 00

addr_02EC3:
   .IF 0
   ld     a, (hl)                      ; 00:2EC3 - 7E
   inc    hl                           ; 00:2EC4 - 23
   or     (hl)                         ; 00:2EC5 - B6
   call   z, addr_0311A                ; 00:2EC6 - CC 1A 31
   .ELSE
   ;; Hoisted into the call.
   call addr_0311A
   .ENDIF
   bit    0, (iy+var_D205-IYBASE)      ; 00:2EC9 - FD CB 05 46
   call   z, addr_02F66                ; 00:2ECD - CC 66 2F
   .IF 0
   ld     hl, $0000                    ; 00:2ED0 - 21 00 00
   ld     (var_D267), hl               ; 00:2ED3 - 22 67 D2
   ld     (var_D269), hl               ; 00:2ED6 - 22 69 D2
   ld     (var_D26B), hl               ; 00:2ED9 - 22 6B D2
   ld     (var_D26D), hl               ; 00:2EDC - 22 6D D2
   .ELSE
   ld b, $08        ; 2ED0 2
   ld hl, var_D267  ; 2ED2 3
   -:
      ld (hl), $00  ; 2ED5 2
      inc hl        ; 2ED7 1
      djnz -        ; 2ED8 2
   ; 2EDF -> 2EDA - SAVING: 5 bytes
   .ENDIF
   call   addr_031E6                   ; 00:2EDF - CD E6 31
   call   run_all_objfuncs             ; 00:2EE2 - CD 9B 32
   ret                                 ; 00:2EE5 - C9

addr_02EE6:
   ld     a, (g_rings_BCD)             ; 00:2EE6 - 3A AA D2
   ld     c, a                         ; 00:2EE9 - 4F
   rrca                                ; 00:2EEA - 0F
   rrca                                ; 00:2EEB - 0F
   rrca                                ; 00:2EEC - 0F
   rrca                                ; 00:2EED - 0F
   and    $0F                          ; 00:2EEE - E6 0F
   add    a, a                         ; 00:2EF0 - 87
   add    a, $80                       ; 00:2EF1 - C6 80
   ld     (g_HUD_FFstr_buf), a         ; 00:2EF3 - 32 BE D2
   ld     a, c                         ; 00:2EF6 - 79
   and    $0F                          ; 00:2EF7 - E6 0F
   add    a, a                         ; 00:2EF9 - 87
   add    a, $80                       ; 00:2EFA - C6 80
   ld     (var_D2BF), a                ; 00:2EFC - 32 BF D2
   ld     a, $FF                       ; 00:2EFF - 3E FF
   ld     (var_D2C0), a                ; 00:2F01 - 32 C0 D2
   .IF 0
   ld     c, $14                       ; 00:2F04 - 0E 14
   ld     b, $00                       ; 00:2F06 - 06 00
   .ELSE
   ld bc, $0014
   ; SAVING: 1 byte
   .ENDIF
   ld     hl, (var_D23C)               ; 00:2F08 - 2A 3C D2
   ld     de, LUT_02E52                ; 00:2F0B - 11 52 2E
   call   draw_sprite_text             ; 00:2F0E - CD CC 35
   .IF 0
   ld     c, $28                       ; 00:2F11 - 0E 28
   ld     b, $00                       ; 00:2F13 - 06 00
   .ELSE
   ld bc, $0028
   ; SAVING: 1 byte
   .ENDIF
   ld     de, g_HUD_FFstr_buf          ; 00:2F15 - 11 BE D2
   call   draw_sprite_text             ; 00:2F18 - CD CC 35
   ld     (var_D23C), hl               ; 00:2F1B - 22 3C D2
   ret                                 ; 00:2F1E - C9

draw_level_timer:
   ld     hl, g_HUD_FFstr_buf          ; 00:2F1F - 21 BE D2
   ld     a, (g_time_mins)             ; 00:2F22 - 3A CE D2
   and    $0F                          ; 00:2F25 - E6 0F
   add    a, a                         ; 00:2F27 - 87
   add    a, $80                       ; 00:2F28 - C6 80
   ld     (hl), a                      ; 00:2F2A - 77
   inc    hl                           ; 00:2F2B - 23
   ld     (hl), $B0                    ; 00:2F2C - 36 B0
   inc    hl                           ; 00:2F2E - 23
   ld     a, (g_time_secs_BCD)         ; 00:2F2F - 3A CF D2
   ld     c, a                         ; 00:2F32 - 4F
   .IF 0
   srl    a                            ; 00:2F33 - CB 3F
   srl    a                            ; 00:2F35 - CB 3F
   srl    a                            ; 00:2F37 - CB 3F
   srl    a                            ; 00:2F39 - CB 3F
   add    a, a                         ; 00:2F3B - 87
   add    a, $80                       ; 00:2F3C - C6 80
   .ELSE
   and $F0  ; 2F33 2
   rrca     ; 2F35 1
   rrca     ; 2F36 1
   scf      ; 2F37 1
   rra      ; 2F38 1
   ; 2F3E -> 2F39 - SAVING: 5 bytes
   .ENDIF
   ld     (hl), a                      ; 00:2F3E - 77
   inc    hl                           ; 00:2F3F - 23
   ld     a, c                         ; 00:2F40 - 79
   and    $0F                          ; 00:2F41 - E6 0F
   add    a, a                         ; 00:2F43 - 87
   add    a, $80                       ; 00:2F44 - C6 80
   ld     (hl), a                      ; 00:2F46 - 77
   inc    hl                           ; 00:2F47 - 23
   ld     (hl), $FF                    ; 00:2F48 - 36 FF
   .IF 0
   ld     c, $18                       ; 00:2F4A - 0E 18
   ld     b, $10                       ; 00:2F4C - 06 10
   .ELSE
   ld bc, $1018
   ; SAVING: 1 byte
   .ENDIF
   ld     a, (g_level)                 ; 00:2F4E - 3A 3E D2
   cp     $1C                          ; 00:2F51 - FE 1C
   jr     c, addr_02F59                ; 00:2F53 - 38 04
   .IF 0
   ld     c, $70                       ; 00:2F55 - 0E 70
   ld     b, $38                       ; 00:2F57 - 06 38
   .ELSE
   ld bc, $3870
   ; SAVING: 1 byte
   .ENDIF

addr_02F59:
   ld     hl, (var_D23C)               ; 00:2F59 - 2A 3C D2
   ld     de, g_HUD_FFstr_buf          ; 00:2F5C - 11 BE D2
   call   draw_sprite_text             ; 00:2F5F - CD CC 35
   ld     (var_D23C), hl               ; 00:2F62 - 22 3C D2
   ret                                 ; 00:2F65 - C9

addr_02F66:
   bit    6, (iy+var_D207-IYBASE)      ; 00:2F66 - FD CB 07 76
   ret    nz                           ; 00:2F6A - C0
   ld     hl, (var_D27B)               ; 00:2F6B - 2A 7B D2
   ld     a, l                         ; 00:2F6E - 7D
   or     h                            ; 00:2F6F - B4
   call   nz, addr_03140               ; 00:2F70 - C4 40 31
   ld     hl, (var_D27D)               ; 00:2F73 - 2A 7D D2
   ld     a, l                         ; 00:2F76 - 7D
   or     h                            ; 00:2F77 - B4
   call   nz, addr_03122               ; 00:2F78 - C4 22 31
   ld     hl, (var_D267)               ; 00:2F7B - 2A 67 D2
   ld     de, (var_D25F)               ; 00:2F7E - ED 5B 5F D2
   and    a                            ; 00:2F82 - A7
   sbc    hl, de                       ; 00:2F83 - ED 52
   call   nz, addr_0315E               ; 00:2F85 - C4 5E 31
   ld     (var_D25F), de               ; 00:2F88 - ED 53 5F D2
   ld     hl, (var_D269)               ; 00:2F8C - 2A 69 D2
   ld     de, (var_D261)               ; 00:2F8F - ED 5B 61 D2
   and    a                            ; 00:2F93 - A7
   sbc    hl, de                       ; 00:2F94 - ED 52
   call   nz, addr_0315E               ; 00:2F96 - C4 5E 31
   ld     (var_D261), de               ; 00:2F99 - ED 53 61 D2
   ld     hl, (var_D26B)               ; 00:2F9D - 2A 6B D2
   ld     de, (var_D263)               ; 00:2FA0 - ED 5B 63 D2
   and    a                            ; 00:2FA4 - A7
   sbc    hl, de                       ; 00:2FA5 - ED 52
   call   nz, addr_0315E               ; 00:2FA7 - C4 5E 31
   ld     (var_D263), de               ; 00:2FAA - ED 53 63 D2
   ld     hl, (var_D26D)               ; 00:2FAE - 2A 6D D2
   ld     de, (var_D265)               ; 00:2FB1 - ED 5B 65 D2
   and    a                            ; 00:2FB5 - A7
   sbc    hl, de                       ; 00:2FB6 - ED 52
   call   nz, addr_0315E               ; 00:2FB8 - C4 5E 31
   ld     (var_D265), de               ; 00:2FBB - ED 53 65 D2
   ld     bc, (var_D25F)               ; 00:2FBF - ED 4B 5F D2
   ld     de, (sonic_x)                ; 00:2FC3 - ED 5B FE D3
   ld     hl, (var_D25A)               ; 00:2FC7 - 2A 5A D2
   add    hl, bc                       ; 00:2FCA - 09
   and    a                            ; 00:2FCB - A7
   sbc    hl, de                       ; 00:2FCC - ED 52
   jr     c, addr_02FFA                ; 00:2FCE - 38 2A
   ld     a, h                         ; 00:2FD0 - 7C
   and    a                            ; 00:2FD1 - A7
   jr     nz, addr_02FD9               ; 00:2FD2 - 20 05
   ld     a, l                         ; 00:2FD4 - 7D
   cp     $09                          ; 00:2FD5 - FE 09
   jr     c, addr_02FDC                ; 00:2FD7 - 38 03

addr_02FD9:
   ld     hl, $0008                    ; 00:2FD9 - 21 08 00

addr_02FDC:
   bit    3, (iy+var_D205-IYBASE)      ; 00:2FDC - FD CB 05 5E
   jr     nz, addr_03033               ; 00:2FE0 - 20 51
   bit    5, (iy+var_D205-IYBASE)      ; 00:2FE2 - FD CB 05 6E
   jr     z, addr_02FEB                ; 00:2FE6 - 28 03
   ld     hl, $0001                    ; 00:2FE8 - 21 01 00

addr_02FEB:
   ex     de, hl                       ; 00:2FEB - EB
   ld     hl, (var_D25A)               ; 00:2FEC - 2A 5A D2
   and    a                            ; 00:2FEF - A7
   sbc    hl, de                       ; 00:2FF0 - ED 52
   jr     c, addr_03033                ; 00:2FF2 - 38 3F
   ld     (var_D25A), hl               ; 00:2FF4 - 22 5A D2
   jp     addr_03033                   ; 00:2FF7 - C3 33 30

addr_02FFA:
   ld     bc, (var_D261)               ; 00:2FFA - ED 4B 61 D2
   ld     hl, (var_D25A)               ; 00:2FFE - 2A 5A D2
   add    hl, bc                       ; 00:3001 - 09
   and    a                            ; 00:3002 - A7
   sbc    hl, de                       ; 00:3003 - ED 52
   jr     nc, addr_03033               ; 00:3005 - 30 2C
   ld     a, l                         ; 00:3007 - 7D
   cpl                                 ; 00:3008 - 2F
   ld     l, a                         ; 00:3009 - 6F
   ld     a, h                         ; 00:300A - 7C
   cpl                                 ; 00:300B - 2F
   ld     h, a                         ; 00:300C - 67
   inc    hl                           ; 00:300D - 23
   ld     a, h                         ; 00:300E - 7C
   and    a                            ; 00:300F - A7
   jr     nz, addr_03017               ; 00:3010 - 20 05
   ld     a, l                         ; 00:3012 - 7D
   cp     $09                          ; 00:3013 - FE 09
   jr     c, addr_0301A                ; 00:3015 - 38 03

addr_03017:
   ld     hl, $0008                    ; 00:3017 - 21 08 00

addr_0301A:
   bit    3, (iy+var_D205-IYBASE)      ; 00:301A - FD CB 05 5E
   jr     nz, addr_03033               ; 00:301E - 20 13
   bit    5, (iy+var_D205-IYBASE)      ; 00:3020 - FD CB 05 6E
   jr     z, addr_03029                ; 00:3024 - 28 03
   ld     hl, $0001                    ; 00:3026 - 21 01 00

addr_03029:
   ld     de, (var_D25A)               ; 00:3029 - ED 5B 5A D2
   add    hl, de                       ; 00:302D - 19
   jr     c, addr_03033                ; 00:302E - 38 03
   ld     (var_D25A), hl               ; 00:3030 - 22 5A D2

addr_03033:
   ld     hl, (var_D25A)               ; 00:3033 - 2A 5A D2
   ld     de, (var_D273)               ; 00:3036 - ED 5B 73 D2
   and    a                            ; 00:303A - A7
   sbc    hl, de                       ; 00:303B - ED 52
   jr     nc, addr_03045               ; 00:303D - 30 06
   ld     (var_D25A), de               ; 00:303F - ED 53 5A D2
   jr     addr_03055                   ; 00:3043 - 18 10

addr_03045:
   ld     hl, (var_D25A)               ; 00:3045 - 2A 5A D2
   ld     de, (var_D275)               ; 00:3048 - ED 5B 75 D2
   and    a                            ; 00:304C - A7
   sbc    hl, de                       ; 00:304D - ED 52
   jr     c, addr_03055                ; 00:304F - 38 04
   ld     (var_D25A), de               ; 00:3051 - ED 53 5A D2

addr_03055:
   bit    6, (iy+var_D205-IYBASE)      ; 00:3055 - FD CB 05 76
   call   nz, addr_03164               ; 00:3059 - C4 64 31
   ld     bc, (var_D263)               ; 00:305C - ED 4B 63 D2
   ld     de, (sonic_y)                ; 00:3060 - ED 5B 01 D4
   ld     hl, (var_D25D)               ; 00:3064 - 2A 5D D2
   bit    6, (iy+var_D205-IYBASE)      ; 00:3067 - FD CB 05 76
   call   nz, addr_031CF               ; 00:306B - C4 CF 31
   bit    7, (iy+var_D205-IYBASE)      ; 00:306E - FD CB 05 7E
   call   nz, addr_031D3               ; 00:3072 - C4 D3 31
   add    hl, bc                       ; 00:3075 - 09
   bit    7, (iy+var_D205-IYBASE)      ; 00:3076 - FD CB 05 7E
   call   z, addr_031DB                ; 00:307A - CC DB 31
   and    a                            ; 00:307D - A7
   sbc    hl, de                       ; 00:307E - ED 52
   jr     c, addr_030B9                ; 00:3080 - 38 37
   ld     c, $09                       ; 00:3082 - 0E 09
   ld     a, h                         ; 00:3084 - 7C
   and    a                            ; 00:3085 - A7
   jr     nz, addr_03093               ; 00:3086 - 20 0B
   bit    6, (iy+var_D205-IYBASE)      ; 00:3088 - FD CB 05 76
   call   nz, addr_0311F               ; 00:308C - C4 1F 31
   ld     a, l                         ; 00:308F - 7D
   cp     c                            ; 00:3090 - B9
   jr     c, addr_03097                ; 00:3091 - 38 04

addr_03093:
   dec    c                            ; 00:3093 - 0D
   ld     l, c                         ; 00:3094 - 69
   ld     h, $00                       ; 00:3095 - 26 00

addr_03097:
   bit    7, (iy+var_D205-IYBASE)      ; 00:3097 - FD CB 05 7E
   jr     z, addr_030AA                ; 00:309B - 28 0D
   srl    h                            ; 00:309D - CB 3C
   rr     l                            ; 00:309F - CB 1D
   bit    1, (iy+var_D208-IYBASE)      ; 00:30A1 - FD CB 08 4E
   jr     nz, addr_030AA               ; 00:30A5 - 20 03
   ld     hl, $0000                    ; 00:30A7 - 21 00 00

addr_030AA:
   ex     de, hl                       ; 00:30AA - EB
   ld     hl, (var_D25D)               ; 00:30AB - 2A 5D D2
   and    a                            ; 00:30AE - A7
   sbc    hl, de                       ; 00:30AF - ED 52
   jr     c, addr_030F9                ; 00:30B1 - 38 46
   ld     (var_D25D), hl               ; 00:30B3 - 22 5D D2
   jp     addr_030F9                   ; 00:30B6 - C3 F9 30

addr_030B9:
   ld     bc, (var_D265)               ; 00:30B9 - ED 4B 65 D2
   ld     hl, (var_D25D)               ; 00:30BD - 2A 5D D2
   add    hl, bc                       ; 00:30C0 - 09
   bit    7, (iy+var_D205-IYBASE)      ; 00:30C1 - FD CB 05 7E
   call   z, addr_031DB                ; 00:30C5 - CC DB 31
   and    a                            ; 00:30C8 - A7
   sbc    hl, de                       ; 00:30C9 - ED 52
   jr     nc, addr_030F9               ; 00:30CB - 30 2C
   ld     a, l                         ; 00:30CD - 7D
   cpl                                 ; 00:30CE - 2F
   ld     l, a                         ; 00:30CF - 6F
   ld     a, h                         ; 00:30D0 - 7C
   cpl                                 ; 00:30D1 - 2F
   ld     h, a                         ; 00:30D2 - 67
   inc    hl                           ; 00:30D3 - 23
   ld     c, $09                       ; 00:30D4 - 0E 09
   ld     a, h                         ; 00:30D6 - 7C
   and    a                            ; 00:30D7 - A7
   jr     nz, addr_030E5               ; 00:30D8 - 20 0B
   bit    6, (iy+var_D205-IYBASE)      ; 00:30DA - FD CB 05 76
   call   nz, addr_0311F               ; 00:30DE - C4 1F 31
   ld     a, l                         ; 00:30E1 - 7D
   cp     c                            ; 00:30E2 - B9
   jr     c, addr_030E9                ; 00:30E3 - 38 04

addr_030E5:
   dec    c                            ; 00:30E5 - 0D
   ld     l, c                         ; 00:30E6 - 69
   ld     h, $00                       ; 00:30E7 - 26 00

addr_030E9:
   bit    4, (iy+var_D205-IYBASE)      ; 00:30E9 - FD CB 05 66
   jr     nz, addr_030F9               ; 00:30ED - 20 0A
   ld     de, (var_D25D)               ; 00:30EF - ED 5B 5D D2
   add    hl, de                       ; 00:30F3 - 19
   jr     c, addr_030F9                ; 00:30F4 - 38 03
   ld     (var_D25D), hl               ; 00:30F6 - 22 5D D2

addr_030F9:
   ld     hl, (var_D25D)               ; 00:30F9 - 2A 5D D2
   ld     de, (var_D277)               ; 00:30FC - ED 5B 77 D2
   and    a                            ; 00:3100 - A7
   sbc    hl, de                       ; 00:3101 - ED 52
   jr     nc, addr_03109               ; 00:3103 - 30 04
   ld     (var_D25D), de               ; 00:3105 - ED 53 5D D2

addr_03109:
   ld     hl, (var_D25D)               ; 00:3109 - 2A 5D D2
   ld     de, (var_D279)               ; 00:310C - ED 5B 79 D2
   and    a                            ; 00:3110 - A7
   sbc    hl, de                       ; 00:3111 - ED 52
   jr     c, addr_03119                ; 00:3113 - 38 04
   ld     (var_D25D), de               ; 00:3115 - ED 53 5D D2

addr_03119:
   ret                                 ; 00:3119 - C9

addr_0311A:
   .IF 0
   .ELSE
   ;; Hoisted in from 4 different call sites.
   ld a, (hl)
   inc hl
   or (hl)
   ret nz
   ; 3 bytes per call site, minus 4 bytes replicated here, and 4 call sites.
   ; SAVING: 8 bytes
   .ENDIF
   ld     (hl), d                      ; 00:311A - 72
   dec    hl                           ; 00:311B - 2B
   ld     (hl), e                      ; 00:311C - 73
   inc    hl                           ; 00:311D - 23
   ret                                 ; 00:311E - C9

addr_0311F:
   ld     c, $08                       ; 00:311F - 0E 08
   ret                                 ; 00:3121 - C9

addr_03122:
   ld     de, (var_D277)               ; 00:3122 - ED 5B 77 D2
   and    a                            ; 00:3126 - A7
   sbc    hl, de                       ; 00:3127 - ED 52
   ret    z                            ; 00:3129 - C8
   jr     c, addr_03136                ; 00:312A - 38 0A
   inc    de                           ; 00:312C - 13
   .IF 0
   ld     (var_D277), de               ; 00:312D - ED 53 77 D2
   ld     (var_D279), de               ; 00:3131 - ED 53 79 D2
   ret                                 ; 00:3135 - C9
   .ELSE
   jr addr_03136@skip_dec
   ; SAVING: 7 bytes
   .ENDIF

addr_03136:
   dec    de                           ; 00:3136 - 1B
   .IF 0
   .ELSE
   @skip_dec:
   .ENDIF
   ld     (var_D277), de               ; 00:3137 - ED 53 77 D2
   ld     (var_D279), de               ; 00:313B - ED 53 79 D2
   ret                                 ; 00:313F - C9

addr_03140:
   ld     de, (var_D273)               ; 00:3140 - ED 5B 73 D2
   and    a                            ; 00:3144 - A7
   sbc    hl, de                       ; 00:3145 - ED 52
   ret    z                            ; 00:3147 - C8
   jr     c, addr_03154                ; 00:3148 - 38 0A
   inc    de                           ; 00:314A - 13
   .IF 0
   ld     (var_D273), de               ; 00:314B - ED 53 73 D2
   ld     (var_D275), de               ; 00:314F - ED 53 75 D2
   ret                                 ; 00:3153 - C9
   .ELSE
   jr addr_03154@skip_dec
   ; SAVING: 7 bytes
   .ENDIF

addr_03154:
   dec    de                           ; 00:3154 - 1B
   .IF 0
   .ELSE
   @skip_dec:
   .ENDIF
   ld     (var_D273), de               ; 00:3155 - ED 53 73 D2
   ld     (var_D275), de               ; 00:3159 - ED 53 75 D2
   ret                                 ; 00:315D - C9

addr_0315E:
   jr     c, addr_03162                ; 00:315E - 38 02
   inc    de                           ; 00:3160 - 13
   ret                                 ; 00:3161 - C9

addr_03162:
   dec    de                           ; 00:3162 - 1B
   ret                                 ; 00:3163 - C9

addr_03164:
   ld     hl, (var_D29D)               ; 00:3164 - 2A 9D D2
   ld     de, (var_D29F)               ; 00:3167 - ED 5B 9F D2
   add    hl, de                       ; 00:316B - 19
   ld     bc, $0200                    ; 00:316C - 01 00 02
   ld     a, h                         ; 00:316F - 7C
   and    a                            ; 00:3170 - A7
   jp     p, addr_03179                ; 00:3171 - F2 79 31
   neg                                 ; 00:3174 - ED 44
   .IF 0
   ld     bc, $FE00                    ; 00:3176 - 01 00 FE
   .ELSE
   ld b, $FE
   ; SAVING: 1 byte
   .ENDIF

addr_03179:
   cp     $02                          ; 00:3179 - FE 02
   jr     c, addr_0317F                ; 00:317B - 38 02
   ld     l, c                         ; 00:317D - 69
   ld     h, b                         ; 00:317E - 60

addr_0317F:
   ld     (var_D29D), hl               ; 00:317F - 22 9D D2
   ld     c, l                         ; 00:3182 - 4D
   ld     b, h                         ; 00:3183 - 44
   ld     hl, (var_D25C)               ; 00:3184 - 2A 5C D2
   ld     a, (var_D25E)                ; 00:3187 - 3A 5E D2
   add    hl, bc                       ; 00:318A - 09
   ld     e, $00                       ; 00:318B - 1E 00
   bit    7, b                         ; 00:318D - CB 78
   jr     z, addr_03193                ; 00:318F - 28 02
   ld     e, $FF                       ; 00:3191 - 1E FF

addr_03193:
   adc    a, e                         ; 00:3193 - 8B
   ld     (var_D25C), hl               ; 00:3194 - 22 5C D2
   ld     (var_D25E), a                ; 00:3197 - 32 5E D2
   ld     hl, (var_D2A1)               ; 00:319A - 2A A1 D2
   ld     a, (var_D2A3)                ; 00:319D - 3A A3 D2
   add    hl, bc                       ; 00:31A0 - 09
   adc    a, e                         ; 00:31A1 - 8B
   ld     (var_D2A1), hl               ; 00:31A2 - 22 A1 D2
   ld     (var_D2A3), a                ; 00:31A5 - 32 A3 D2
   ld     hl, (var_D2A2)               ; 00:31A8 - 2A A2 D2
   bit    7, h                         ; 00:31AB - CB 7C
   jr     z, addr_031BE                ; 00:31AD - 28 0F
   ld     bc, $FFE0                    ; 00:31AF - 01 E0 FF
   and    a                            ; 00:31B2 - A7
   sbc    hl, bc                       ; 00:31B3 - ED 42
   jr     nc, addr_031BE               ; 00:31B5 - 30 07
   ld     hl, $0002                    ; 00:31B7 - 21 02 00
   ld     (var_D29F), hl               ; 00:31BA - 22 9F D2
   ret                                 ; 00:31BD - C9

addr_031BE:
   ld     hl, (var_D2A2)               ; 00:31BE - 2A A2 D2
   ld     bc, $0020                    ; 00:31C1 - 01 20 00
   and    a                            ; 00:31C4 - A7
   sbc    hl, bc                       ; 00:31C5 - ED 42
   ret    c                            ; 00:31C7 - D8
   ld     hl, $FFFE                    ; 00:31C8 - 21 FE FF
   ld     (var_D29F), hl               ; 00:31CB - 22 9F D2
   ret                                 ; 00:31CE - C9

addr_031CF:
   ld     bc, $0020                    ; 00:31CF - 01 20 00
   ret                                 ; 00:31D2 - C9

addr_031D3:
   ld     bc, $0070                    ; 00:31D3 - 01 70 00
   ret                                 ; 00:31D6 - C9

.IF 0
UNUSED_031D7:
   ld     bc, $0070                    ; 00:31D7 - 01 70 00
   ret                                 ; 00:31DA - C9
.ENDIF
; Not used? Then... SAVING: 4 bytes

addr_031DB:
   bit    6, (iy+var_D205-IYBASE)      ; 00:31DB - FD CB 05 76
   ret    nz                           ; 00:31DF - C0
   ld     bc, (var_D2B7)               ; 00:31E0 - ED 4B B7 D2
   add    hl, bc                       ; 00:31E4 - 09
   ret                                 ; 00:31E5 - C9

addr_031E6:
   ld     a, (var_D223)                ; 00:31E6 - 3A 23 D2
   and    $07                          ; 00:31E9 - E6 07
   ld     c, a                         ; 00:31EB - 4F
   ld     hl, $0068                    ; 00:31EC - 21 68 00
   call   mul_hl_by_c_trashing_abcde_PURE  ; 00:31EF - CD FC 05
   ld     de, object_list              ; 00:31F2 - 11 FC D3
   add    hl, de                       ; 00:31F5 - 19
   ex     de, hl                       ; 00:31F6 - EB
   ld     a, (var_D223)                ; 00:31F7 - 3A 23 D2
   and    $07                          ; 00:31FA - E6 07
   add    a, a                         ; 00:31FC - 87
   add    a, a                         ; 00:31FD - 87
   add    a, a                         ; 00:31FE - 87
   ld     c, a                         ; 00:31FF - 4F
   ld     b, $00                       ; 00:3200 - 06 00
   ld     hl, g_object_ptrs            ; 00:3202 - 21 7C D3
   add    hl, bc                       ; 00:3205 - 09
   ld     c, b                         ; 00:3206 - 48
   ld     b, $04                       ; 00:3207 - 06 04

addr_03209:
   ld     a, (de)                      ; 00:3209 - 1A
   cp     $56                          ; 00:320A - FE 56
   jp     nc, addr_0328B               ; 00:320C - D2 8B 32
   push   de                           ; 00:320F - D5
   pop    ix                           ; 00:3210 - DD E1
   exx                                 ; 00:3212 - D9
   add    a, a                         ; 00:3213 - 87
   ld     l, a                         ; 00:3214 - 6F
   ld     h, $00                       ; 00:3215 - 26 00
   add    hl, hl                       ; 00:3217 - 29
   add    hl, hl                       ; 00:3218 - 29
   ld     de, LUT_2BA2                 ; 00:3219 - 11 A2 2B
   add    hl, de                       ; 00:321C - 19
   ld     c, (hl)                      ; 00:321D - 4E
   inc    hl                           ; 00:321E - 23
   ld     b, (hl)                      ; 00:321F - 46
   inc    hl                           ; 00:3220 - 23
   ld     de, g_FF_string_high_byte    ; 00:3221 - 11 0E D2
   ldi                                 ; 00:3224 - ED A0
   ldi                                 ; 00:3226 - ED A0
   ldi                                 ; 00:3228 - ED A0
   ldi                                 ; 00:322A - ED A0
   ldi                                 ; 00:322C - ED A0
   ldi                                 ; 00:322E - ED A0
   ld     hl, (var_D25A)               ; 00:3230 - 2A 5A D2
   xor    a                            ; 00:3233 - AF
   sbc    hl, bc                       ; 00:3234 - ED 42
   jr     nc, addr_0323B               ; 00:3236 - 30 03
   ld     l, a                         ; 00:3238 - 6F
   ld     h, a                         ; 00:3239 - 67
   xor    a                            ; 00:323A - AF

addr_0323B:
   ld     e, (ix+2)                    ; 00:323B - DD 5E 02
   ld     d, (ix+3)                    ; 00:323E - DD 56 03
   sbc    hl, de                       ; 00:3241 - ED 52
   jp     nc, addr_0328A               ; 00:3243 - D2 8A 32
   ld     hl, (g_FF_string_high_byte)  ; 00:3246 - 2A 0E D2
   ld     bc, (var_D25A)               ; 00:3249 - ED 4B 5A D2
   add    hl, bc                       ; 00:324D - 09
   xor    a                            ; 00:324E - AF
   sbc    hl, de                       ; 00:324F - ED 52
   jp     c, addr_0328A                ; 00:3251 - DA 8A 32
   ld     hl, (var_D25D)               ; 00:3254 - 2A 5D D2
   ld     bc, (var_D210)               ; 00:3257 - ED 4B 10 D2
   sbc    hl, bc                       ; 00:325B - ED 42
   jr     nc, addr_03262               ; 00:325D - 30 03
   ld     l, a                         ; 00:325F - 6F
   ld     h, a                         ; 00:3260 - 67
   xor    a                            ; 00:3261 - AF

addr_03262:
   ld     e, (ix+5)                    ; 00:3262 - DD 5E 05
   ld     d, (ix+6)                    ; 00:3265 - DD 56 06
   sbc    hl, de                       ; 00:3268 - ED 52
   jp     nc, addr_0328A               ; 00:326A - D2 8A 32
   ld     hl, (var_D212)               ; 00:326D - 2A 12 D2
   ld     bc, (var_D25D)               ; 00:3270 - ED 4B 5D D2
   add    hl, bc                       ; 00:3274 - 09
   xor    a                            ; 00:3275 - AF
   sbc    hl, de                       ; 00:3276 - ED 52
   jp     c, addr_0328A                ; 00:3278 - DA 8A 32
   exx                                 ; 00:327B - D9
   ld     (hl), e                      ; 00:327C - 73
   inc    hl                           ; 00:327D - 23
   ld     (hl), d                      ; 00:327E - 72
   inc    hl                           ; 00:327F - 23
   push   hl                           ; 00:3280 - E5
   ld     hl, $001A                    ; 00:3281 - 21 1A 00
   add    hl, de                       ; 00:3284 - 19
   ex     de, hl                       ; 00:3285 - EB
   pop    hl                           ; 00:3286 - E1
   djnz   addr_03209                   ; 00:3287 - 10 80
   ret                                 ; 00:3289 - C9

addr_0328A:
   exx                                 ; 00:328A - D9

addr_0328B:
   ld     (hl), c                      ; 00:328B - 71
   inc    hl                           ; 00:328C - 23
   ld     (hl), c                      ; 00:328D - 71
   inc    hl                           ; 00:328E - 23
   push   hl                           ; 00:328F - E5
   ld     hl, $001A                    ; 00:3290 - 21 1A 00
   add    hl, de                       ; 00:3293 - 19
   ex     de, hl                       ; 00:3294 - EB
   pop    hl                           ; 00:3295 - E1
   dec    b                            ; 00:3296 - 05
   jp     nz, addr_03209               ; 00:3297 - C2 09 32
   ret                                 ; 00:329A - C9

run_all_objfuncs:
   ld     hl, g_active_object_ptrs     ; 00:329B - 21 7E D3
   ld     b, $1F                       ; 00:329E - 06 1F

-:
   ld     e, (hl)                      ; 00:32A0 - 5E
   inc    hl                           ; 00:32A1 - 23
   ld     d, (hl)                      ; 00:32A2 - 56
   inc    hl                           ; 00:32A3 - 23
   ld     a, e                         ; 00:32A4 - 7B
   or     d                            ; 00:32A5 - B2
   call   nz, try_run_objfunc_DE       ; 00:32A6 - C4 C8 32
   djnz   -                            ; 00:32A9 - 10 F5
   ld     a, (iy+g_sprite_count-IYBASE)  ; 00:32AB - FD 7E 0A
   ld     hl, (var_D23C)               ; 00:32AE - 2A 3C D2
   push   af                           ; 00:32B1 - F5
   push   hl                           ; 00:32B2 - E5
   ld     hl, var_D024                 ; 00:32B3 - 21 24 D0
   ld     (var_D23C), hl               ; 00:32B6 - 22 3C D2
   ld     de, object_list              ; 00:32B9 - 11 FC D3
   call   try_run_objfunc_DE           ; 00:32BC - CD C8 32
   pop    hl                           ; 00:32BF - E1
   pop    af                           ; 00:32C0 - F1
   ld     (var_D23C), hl               ; 00:32C1 - 22 3C D2
   ld     (iy+g_sprite_count-IYBASE), a  ; 00:32C4 - FD 77 0A
   ret                                 ; 00:32C7 - C9

try_run_objfunc_DE:
   ld     a, (de)                      ; 00:32C8 - 1A
   cp     $FF                          ; 00:32C9 - FE FF
   ret    z                            ; 00:32CB - C8
   push   bc                           ; 00:32CC - C5
   push   hl                           ; 00:32CD - E5
   push   de                           ; 00:32CE - D5
   pop    ix                           ; 00:32CF - DD E1
   add    a, a                         ; 00:32D1 - 87
   ld     e, a                         ; 00:32D2 - 5F
   ld     d, $00                       ; 00:32D3 - 16 00
   ld     hl, LUT_object_functions_02AF6  ; 00:32D5 - 21 F6 2A
   add    hl, de                       ; 00:32D8 - 19
   ld     a, (hl)                      ; 00:32D9 - 7E
   inc    hl                           ; 00:32DA - 23
   ld     h, (hl)                      ; 00:32DB - 66
   ld     l, a                         ; 00:32DC - 6F
   ld     de, RETPTR_032E2             ; 00:32DD - 11 E2 32
   push   de                           ; 00:32E0 - D5
   jp     (hl)                         ; 00:32E1 - E9

RETPTR_032E2:
   ld     e, (ix+7)                    ; 00:32E2 - DD 5E 07
   ld     d, (ix+8)                    ; 00:32E5 - DD 56 08
   ld     c, (ix+9)                    ; 00:32E8 - DD 4E 09
   ld     l, (ix+1)                    ; 00:32EB - DD 6E 01
   ld     h, (ix+2)                    ; 00:32EE - DD 66 02
   ld     a, (ix+3)                    ; 00:32F1 - DD 7E 03
   add    hl, de                       ; 00:32F4 - 19
   adc    a, c                         ; 00:32F5 - 89
   ld     (ix+1), l                    ; 00:32F6 - DD 75 01
   ld     (ix+2), h                    ; 00:32F9 - DD 74 02
   ld     (ix+3), a                    ; 00:32FC - DD 77 03
   ld     e, (ix+10)                   ; 00:32FF - DD 5E 0A
   ld     d, (ix+11)                   ; 00:3302 - DD 56 0B
   ld     c, (ix+12)                   ; 00:3305 - DD 4E 0C
   ld     l, (ix+4)                    ; 00:3308 - DD 6E 04
   ld     h, (ix+5)                    ; 00:330B - DD 66 05
   ld     a, (ix+6)                    ; 00:330E - DD 7E 06
   add    hl, de                       ; 00:3311 - 19
   adc    a, c                         ; 00:3312 - 89
   ld     (ix+4), l                    ; 00:3313 - DD 75 04
   ld     (ix+5), h                    ; 00:3316 - DD 74 05
   ld     (ix+6), a                    ; 00:3319 - DD 77 06
   bit    5, (ix+24)                   ; 00:331C - DD CB 18 6E
   jp     nz, addr_034E6               ; 00:3320 - C2 E6 34
   ld     b, $00                       ; 00:3323 - 06 00
   ld     d, b                         ; 00:3325 - 50
   ld     e, (ix+14)                   ; 00:3326 - DD 5E 0E
   srl    e                            ; 00:3329 - CB 3B
   bit    7, (ix+8)                    ; 00:332B - DD CB 08 7E
   jr     nz, addr_0333A               ; 00:332F - 20 09
   ld     c, (ix+13)                   ; 00:3331 - DD 4E 0D
   ld     hl, LUT_phys_tileflags_push_left  ; 00:3334 - 21 1E 41
   jp     addr_0333F                   ; 00:3337 - C3 3F 33

addr_0333A:
   ld     c, $00                       ; 00:333A - 0E 00
   ld     hl, LUT_phys_tileflags_push_right  ; 00:333C - 21 20 40

addr_0333F:
   ld     (var_D210), bc               ; 00:333F - ED 43 10 D2
   res    6, (ix+24)                   ; 00:3343 - DD CB 18 B6
   push   de                           ; 00:3347 - D5
   push   hl                           ; 00:3348 - E5
   call   addr_036F9                   ; 00:3349 - CD F9 36
   ld     e, (hl)                      ; 00:334C - 5E
   ld     d, $00                       ; 00:334D - 16 00
   .IF 0
   ld     a, (var_D2D4)                ; 00:334F - 3A D4 D2
   add    a, a                         ; 00:3352 - 87
   ld     c, a                         ; 00:3353 - 4F
   ld     b, d                         ; 00:3354 - 42
   ld     hl, PTRLUT_level_tile_flags  ; 00:3355 - 21 65 3A
   add    hl, bc                       ; 00:3358 - 09
   ld     a, (hl)                      ; 00:3359 - 7E
   inc    hl                           ; 00:335A - 23
   ld     h, (hl)                      ; 00:335B - 66
   ld     l, a                         ; 00:335C - 6F
   .ELSE
   call fetch_PTRLUT_level_tile_flags
   .ENDIF
   add    hl, de                       ; 00:335D - 19
   ld     a, (hl)                      ; 00:335E - 7E
   and    $3F                          ; 00:335F - E6 3F
   ld     (var_D214), a                ; 00:3361 - 32 14 D2
   pop    hl                           ; 00:3364 - E1
   pop    de                           ; 00:3365 - D1
   .IF 0
   and    $3F                          ; 00:3366 - E6 3F
   ;; Already masked above, flags not touched since then.
   ; SAVING: 2 bytes
   .ENDIF
   jp     z, addr_033F6                ; 00:3368 - CA F6 33
   ld     a, (var_D214)                ; 00:336B - 3A 14 D2
   add    a, a                         ; 00:336E - 87
   ld     c, a                         ; 00:336F - 4F
   ld     b, $00                       ; 00:3370 - 06 00
   ld     d, b                         ; 00:3372 - 50
   add    hl, bc                       ; 00:3373 - 09
   ld     a, (hl)                      ; 00:3374 - 7E
   inc    hl                           ; 00:3375 - 23
   ld     h, (hl)                      ; 00:3376 - 66
   ld     l, a                         ; 00:3377 - 6F
   ld     a, (ix+5)                    ; 00:3378 - DD 7E 05
   add    a, e                         ; 00:337B - 83
   and    $1F                          ; 00:337C - E6 1F
   ld     e, a                         ; 00:337E - 5F
   add    hl, de                       ; 00:337F - 19
   ld     a, (hl)                      ; 00:3380 - 7E
   cp     $80                          ; 00:3381 - FE 80
   jp     z, addr_033F6                ; 00:3383 - CA F6 33
   ld     e, a                         ; 00:3386 - 5F
   and    a                            ; 00:3387 - A7
   jp     p, addr_0338D                ; 00:3388 - F2 8D 33
   ld     d, $FF                       ; 00:338B - 16 FF

addr_0338D:
   ld     l, (ix+2)                    ; 00:338D - DD 6E 02
   ld     h, (ix+3)                    ; 00:3390 - DD 66 03
   ld     bc, (var_D210)               ; 00:3393 - ED 4B 10 D2
   add    hl, bc                       ; 00:3397 - 09
   bit    7, (ix+9)                    ; 00:3398 - DD CB 09 7E
   jr     nz, addr_033AB               ; 00:339C - 20 0D
   and    a                            ; 00:339E - A7
   jp     m, addr_033B5                ; 00:339F - FA B5 33
   ld     a, l                         ; 00:33A2 - 7D
   and    $1F                          ; 00:33A3 - E6 1F
   cp     e                            ; 00:33A5 - BB
   jr     nc, addr_033B5               ; 00:33A6 - 30 0D
   jp     addr_033F6                   ; 00:33A8 - C3 F6 33

addr_033AB:
   and    a                            ; 00:33AB - A7
   jp     m, addr_033B5                ; 00:33AC - FA B5 33
   ld     a, l                         ; 00:33AF - 7D
   and    $1F                          ; 00:33B0 - E6 1F
   cp     e                            ; 00:33B2 - BB
   jr     nc, addr_033F6               ; 00:33B3 - 30 41

addr_033B5:
   set    6, (ix+24)                   ; 00:33B5 - DD CB 18 F6
   ld     a, l                         ; 00:33B9 - 7D
   and    $E0                          ; 00:33BA - E6 E0
   ld     l, a                         ; 00:33BC - 6F
   add    hl, de                       ; 00:33BD - 19
   and    a                            ; 00:33BE - A7
   sbc    hl, bc                       ; 00:33BF - ED 42
   ld     (ix+2), l                    ; 00:33C1 - DD 75 02
   ld     (ix+3), h                    ; 00:33C4 - DD 74 03
   ld     a, (var_D214)                ; 00:33C7 - 3A 14 D2
   ld     e, a                         ; 00:33CA - 5F
   ld     d, $00                       ; 00:33CB - 16 00
   ld     hl, LUT_3FBF                 ; 00:33CD - 21 BF 3F
   add    hl, de                       ; 00:33D0 - 19
   ld     c, (hl)                      ; 00:33D1 - 4E
   ld     (ix+7), d                    ; 00:33D2 - DD 72 07
   ld     (ix+8), d                    ; 00:33D5 - DD 72 08
   ld     (ix+9), d                    ; 00:33D8 - DD 72 09
   ld     a, d                         ; 00:33DB - 7A
   ld     b, d                         ; 00:33DC - 42
   bit    7, c                         ; 00:33DD - CB 79
   jr     z, addr_033E3                ; 00:33DF - 28 02
   dec    a                            ; 00:33E1 - 3D
   dec    b                            ; 00:33E2 - 05

addr_033E3:
   ld     l, (ix+10)                   ; 00:33E3 - DD 6E 0A
   ld     h, (ix+11)                   ; 00:33E6 - DD 66 0B
   add    hl, bc                       ; 00:33E9 - 09
   adc    a, (ix+12)                   ; 00:33EA - DD 8E 0C
   ld     (ix+10), l                   ; 00:33ED - DD 75 0A
   ld     (ix+11), h                   ; 00:33F0 - DD 74 0B
   ld     (ix+12), a                   ; 00:33F3 - DD 77 0C

addr_033F6:
   ld     b, $00                       ; 00:33F6 - 06 00
   ld     d, b                         ; 00:33F8 - 50
   bit    7, (ix+11)                   ; 00:33F9 - DD CB 0B 7E
   jr     nz, addr_0340D               ; 00:33FD - 20 0E
   ld     c, (ix+13)                   ; 00:33FF - DD 4E 0D
   srl    c                            ; 00:3402 - CB 39
   ld     e, (ix+14)                   ; 00:3404 - DD 5E 0E
   ld     hl, LUT_phys_tileflags_push_up  ; 00:3407 - 21 8A 44
   jp     addr_03417                   ; 00:340A - C3 17 34

addr_0340D:
   ld     c, (ix+13)                   ; 00:340D - DD 4E 0D
   srl    c                            ; 00:3410 - CB 39
   ld     e, $00                       ; 00:3412 - 1E 00
   ld     hl, LUT_phys_tileflags_push_down  ; 00:3414 - 21 EC 41

addr_03417:
   ld     (var_D210), de               ; 00:3417 - ED 53 10 D2
   res    7, (ix+24)                   ; 00:341B - DD CB 18 BE
   push   bc                           ; 00:341F - C5
   push   hl                           ; 00:3420 - E5
   call   addr_036F9                   ; 00:3421 - CD F9 36
   ld     e, (hl)                      ; 00:3424 - 5E
   ld     d, $00                       ; 00:3425 - 16 00
   .IF 0
   ld     a, (var_D2D4)                ; 00:3427 - 3A D4 D2
   add    a, a                         ; 00:342A - 87
   ld     c, a                         ; 00:342B - 4F
   ld     b, d                         ; 00:342C - 42
   ld     hl, PTRLUT_level_tile_flags  ; 00:342D - 21 65 3A
   add    hl, bc                       ; 00:3430 - 09
   ld     a, (hl)                      ; 00:3431 - 7E
   inc    hl                           ; 00:3432 - 23
   ld     h, (hl)                      ; 00:3433 - 66
   ld     l, a                         ; 00:3434 - 6F
   .ELSE
   call fetch_PTRLUT_level_tile_flags
   .ENDIF
   add    hl, de                       ; 00:3435 - 19
   ld     a, (hl)                      ; 00:3436 - 7E
   and    $3F                          ; 00:3437 - E6 3F
   ld     (var_D214), a                ; 00:3439 - 32 14 D2
   pop    hl                           ; 00:343C - E1
   pop    bc                           ; 00:343D - C1
   .IF 0
   and    $3F                          ; 00:343E - E6 3F
   ;; Already masked above, flags not touched since then.
   ; SAVING: 2 bytes
   .ENDIF
   jp     z, addr_034E6                ; 00:3440 - CA E6 34
   ld     a, (var_D214)                ; 00:3443 - 3A 14 D2
   add    a, a                         ; 00:3446 - 87
   ld     e, a                         ; 00:3447 - 5F
   ld     d, $00                       ; 00:3448 - 16 00
   ld     b, d                         ; 00:344A - 42
   add    hl, de                       ; 00:344B - 19
   ld     a, (hl)                      ; 00:344C - 7E
   inc    hl                           ; 00:344D - 23
   ld     h, (hl)                      ; 00:344E - 66
   ld     l, a                         ; 00:344F - 6F
   ld     a, (ix+2)                    ; 00:3450 - DD 7E 02
   add    a, c                         ; 00:3453 - 81
   and    $1F                          ; 00:3454 - E6 1F
   ld     c, a                         ; 00:3456 - 4F
   add    hl, bc                       ; 00:3457 - 09
   ld     a, (hl)                      ; 00:3458 - 7E
   cp     $80                          ; 00:3459 - FE 80
   jp     z, addr_034E6                ; 00:345B - CA E6 34
   ld     c, a                         ; 00:345E - 4F
   and    a                            ; 00:345F - A7
   jp     p, addr_03465                ; 00:3460 - F2 65 34
   ld     b, $FF                       ; 00:3463 - 06 FF

addr_03465:
   ld     l, (ix+5)                    ; 00:3465 - DD 6E 05
   ld     h, (ix+6)                    ; 00:3468 - DD 66 06
   ld     de, (var_D210)               ; 00:346B - ED 5B 10 D2
   add    hl, de                       ; 00:346F - 19
   bit    7, (ix+12)                   ; 00:3470 - DD CB 0C 7E
   jr     nz, addr_03493               ; 00:3474 - 20 1D
   and    a                            ; 00:3476 - A7
   jp     m, addr_034A9                ; 00:3477 - FA A9 34
   ld     a, l                         ; 00:347A - 7D
   and    $1F                          ; 00:347B - E6 1F
   exx                                 ; 00:347D - D9
   ld     hl, (var_D214)               ; 00:347E - 2A 14 D2
   ld     h, $00                       ; 00:3481 - 26 00
   ld     de, LUT_3FF0                 ; 00:3483 - 11 F0 3F
   add    hl, de                       ; 00:3486 - 19
   add    a, (hl)                      ; 00:3487 - 86
   exx                                 ; 00:3488 - D9
   cp     c                            ; 00:3489 - B9
   jr     c, addr_034E6                ; 00:348A - 38 5A
   set    7, (ix+24)                   ; 00:348C - DD CB 18 FE
   jp     addr_034A9                   ; 00:3490 - C3 A9 34

addr_03493:
   and    a                            ; 00:3493 - A7
   jp     m, addr_034A9                ; 00:3494 - FA A9 34
   ld     a, l                         ; 00:3497 - 7D
   and    $1F                          ; 00:3498 - E6 1F
   exx                                 ; 00:349A - D9
   ld     hl, (var_D214)               ; 00:349B - 2A 14 D2
   ld     h, $00                       ; 00:349E - 26 00
   ld     de, LUT_3FF0                 ; 00:34A0 - 11 F0 3F
   add    hl, de                       ; 00:34A3 - 19
   add    a, (hl)                      ; 00:34A4 - 86
   exx                                 ; 00:34A5 - D9
   cp     c                            ; 00:34A6 - B9
   jr     nc, addr_034E6               ; 00:34A7 - 30 3D

addr_034A9:
   ld     a, l                         ; 00:34A9 - 7D
   and    $E0                          ; 00:34AA - E6 E0
   ld     l, a                         ; 00:34AC - 6F
   add    hl, bc                       ; 00:34AD - 09
   and    a                            ; 00:34AE - A7
   sbc    hl, de                       ; 00:34AF - ED 52
   ld     (ix+5), l                    ; 00:34B1 - DD 75 05
   ld     (ix+6), h                    ; 00:34B4 - DD 74 06
   ld     a, (var_D214)                ; 00:34B7 - 3A 14 D2
   ld     e, a                         ; 00:34BA - 5F
   ld     d, $00                       ; 00:34BB - 16 00
   ld     hl, LUT_3F90                 ; 00:34BD - 21 90 3F
   add    hl, de                       ; 00:34C0 - 19
   ld     c, (hl)                      ; 00:34C1 - 4E
   ld     (ix+10), d                   ; 00:34C2 - DD 72 0A
   ld     (ix+11), d                   ; 00:34C5 - DD 72 0B
   ld     (ix+12), d                   ; 00:34C8 - DD 72 0C
   ld     a, d                         ; 00:34CB - 7A
   ld     b, d                         ; 00:34CC - 42
   bit    7, c                         ; 00:34CD - CB 79
   jr     z, addr_034D3                ; 00:34CF - 28 02
   dec    a                            ; 00:34D1 - 3D
   dec    b                            ; 00:34D2 - 05

addr_034D3:
   ld     l, (ix+7)                    ; 00:34D3 - DD 6E 07
   ld     h, (ix+8)                    ; 00:34D6 - DD 66 08
   add    hl, bc                       ; 00:34D9 - 09
   adc    a, (ix+9)                    ; 00:34DA - DD 8E 09
   ld     (ix+7), l                    ; 00:34DD - DD 75 07
   ld     (ix+8), h                    ; 00:34E0 - DD 74 08
   ld     (ix+9), a                    ; 00:34E3 - DD 77 09

addr_034E6:
   ld     l, (ix+5)                    ; 00:34E6 - DD 6E 05
   ld     h, (ix+6)                    ; 00:34E9 - DD 66 06
   ld     bc, (var_D25D)               ; 00:34EC - ED 4B 5D D2
   and    a                            ; 00:34F0 - A7
   sbc    hl, bc                       ; 00:34F1 - ED 42
   ex     de, hl                       ; 00:34F3 - EB
   ld     l, (ix+2)                    ; 00:34F4 - DD 6E 02
   ld     h, (ix+3)                    ; 00:34F7 - DD 66 03
   ld     bc, (var_D25A)               ; 00:34FA - ED 4B 5A D2
   and    a                            ; 00:34FE - A7
   sbc    hl, bc                       ; 00:34FF - ED 42
   ld     c, (ix+15)                   ; 00:3501 - DD 4E 0F
   ld     b, (ix+16)                   ; 00:3504 - DD 46 10
   ld     a, c                         ; 00:3507 - 79
   or     b                            ; 00:3508 - B0
   call   nz, addr_0350F               ; 00:3509 - C4 0F 35
   pop    hl                           ; 00:350C - E1
   pop    bc                           ; 00:350D - C1
   ret                                 ; 00:350E - C9

addr_0350F:
   ld     (var_D214), hl               ; 00:350F - 22 14 D2
   push   bc                           ; 00:3512 - C5
   exx                                 ; 00:3513 - D9
   pop    bc                           ; 00:3514 - C1
   exx                                 ; 00:3515 - D9
   .IF 0
   ld     b, $00                       ; 00:3516 - 06 00
   ld     c, $03                       ; 00:3518 - 0E 03
   .ELSE
   ld bc, $0003
   ; SAVING: 1 byte
   .ENDIF

addr_0351A:
   exx                                 ; 00:351A - D9
   ld     hl, (var_D214)               ; 00:351B - 2A 14 D2
   ld     a, (bc)                      ; 00:351E - 0A
   exx                                 ; 00:351F - D9
   .IF 0
   cp     $FF                          ; 00:3520 - FE FF
   .ELSE
   inc a
   ; SAVING: 1 byte
   .ENDIF
   ret    z                            ; 00:3522 - C8
   ld     a, d                         ; 00:3523 - 7A
   cp     $FF                          ; 00:3524 - FE FF
   jr     nz, addr_03530               ; 00:3526 - 20 08
   ld     a, e                         ; 00:3528 - 7B
   cp     $F0                          ; 00:3529 - FE F0
   jr     c, addr_0356C                ; 00:352B - 38 3F
   jp     addr_03537                   ; 00:352D - C3 37 35

addr_03530:
   and    a                            ; 00:3530 - A7
   jr     nz, addr_0356C               ; 00:3531 - 20 39
   ld     a, e                         ; 00:3533 - 7B
   cp     $C0                          ; 00:3534 - FE C0
   ret    nc                           ; 00:3536 - D0

addr_03537:
   ld     b, $06                       ; 00:3537 - 06 06

addr_03539:
   exx                                 ; 00:3539 - D9
   ld     a, h                         ; 00:353A - 7C
   and    a                            ; 00:353B - A7
   jr     nz, addr_03559               ; 00:353C - 20 1B
   ld     a, (bc)                      ; 00:353E - 0A
   cp     $FE                          ; 00:353F - FE FE
   jr     nc, addr_03559               ; 00:3541 - 30 16
   ld     de, (var_D23C)               ; 00:3543 - ED 5B 3C D2
   ld     a, l                         ; 00:3547 - 7D
   ld     (de), a                      ; 00:3548 - 12
   inc    e                            ; 00:3549 - 1C
   exx                                 ; 00:354A - D9
   ld     a, e                         ; 00:354B - 7B
   exx                                 ; 00:354C - D9
   ld     (de), a                      ; 00:354D - 12
   inc    e                            ; 00:354E - 1C
   ld     a, (bc)                      ; 00:354F - 0A
   ld     (de), a                      ; 00:3550 - 12
   inc    e                            ; 00:3551 - 1C
   ld     (var_D23C), de               ; 00:3552 - ED 53 3C D2
   inc    (iy+g_sprite_count-IYBASE)   ; 00:3556 - FD 34 0A

addr_03559:
   inc    bc                           ; 00:3559 - 03
   ld     de, $0008                    ; 00:355A - 11 08 00
   add    hl, de                       ; 00:355D - 19
   exx                                 ; 00:355E - D9
   djnz   addr_03539                   ; 00:355F - 10 D8
   ld     a, c                         ; 00:3561 - 79
   ex     de, hl                       ; 00:3562 - EB
   ld     c, $10                       ; 00:3563 - 0E 10
   add    hl, bc                       ; 00:3565 - 09
   ex     de, hl                       ; 00:3566 - EB
   ld     c, a                         ; 00:3567 - 4F
   dec    c                            ; 00:3568 - 0D
   jr     nz, addr_0351A               ; 00:3569 - 20 AF
   ret                                 ; 00:356B - C9

addr_0356C:
   exx                                 ; 00:356C - D9
   ex     de, hl                       ; 00:356D - EB
   ld     hl, $0006                    ; 00:356E - 21 06 00
   add    hl, bc                       ; 00:3571 - 09
   ld     c, l                         ; 00:3572 - 4D
   ld     b, h                         ; 00:3573 - 44
   ex     de, hl                       ; 00:3574 - EB
   exx                                 ; 00:3575 - D9
   ld     a, c                         ; 00:3576 - 79
   ex     de, hl                       ; 00:3577 - EB
   ld     c, $10                       ; 00:3578 - 0E 10
   add    hl, bc                       ; 00:357A - 09
   ex     de, hl                       ; 00:357B - EB
   ld     c, a                         ; 00:357C - 4F
   dec    c                            ; 00:357D - 0D
   jr     nz, addr_0351A               ; 00:357E - 20 9A
   ret                                 ; 00:3580 - C9

UNK_03581:
   ld     hl, (var_D210)               ; 00:3581 - 2A 10 D2
   ld     bc, (var_D214)               ; 00:3584 - ED 4B 14 D2
   add    hl, bc                       ; 00:3588 - 09
   ld     bc, (var_D25D)               ; 00:3589 - ED 4B 5D D2
   and    a                            ; 00:358D - A7
   sbc    hl, bc                       ; 00:358E - ED 42
   ex     de, hl                       ; 00:3590 - EB
   ld     hl, (g_FF_string_high_byte)  ; 00:3591 - 2A 0E D2
   ld     bc, (var_D212)               ; 00:3594 - ED 4B 12 D2
   add    hl, bc                       ; 00:3598 - 09
   ld     bc, (var_D25A)               ; 00:3599 - ED 4B 5A D2
   and    a                            ; 00:359D - A7
   sbc    hl, bc                       ; 00:359E - ED 42
   ld     c, a                         ; 00:35A0 - 4F
   ld     a, h                         ; 00:35A1 - 7C
   and    a                            ; 00:35A2 - A7
   ret    nz                           ; 00:35A3 - C0
   ld     a, d                         ; 00:35A4 - 7A
   cp     $FF                          ; 00:35A5 - FE FF
   jr     nz, +                        ; 00:35A7 - 20 07
   ld     a, e                         ; 00:35A9 - 7B
   cp     $F0                          ; 00:35AA - FE F0
   ret    c                            ; 00:35AC - D8
   jp     ++                           ; 00:35AD - C3 B6 35

+:
   and    a                            ; 00:35B0 - A7
   ret    nz                           ; 00:35B1 - C0
   ld     a, e                         ; 00:35B2 - 7B
   cp     $C0                          ; 00:35B3 - FE C0
   ret    nc                           ; 00:35B5 - D0

++:
   ld     h, c                         ; 00:35B6 - 61
   ld     bc, (var_D23C)               ; 00:35B7 - ED 4B 3C D2
   ld     a, l                         ; 00:35BB - 7D
   ld     (bc), a                      ; 00:35BC - 02
   inc    c                            ; 00:35BD - 0C
   ld     a, e                         ; 00:35BE - 7B
   ld     (bc), a                      ; 00:35BF - 02
   inc    c                            ; 00:35C0 - 0C
   ld     a, h                         ; 00:35C1 - 7C
   ld     (bc), a                      ; 00:35C2 - 02
   inc    c                            ; 00:35C3 - 0C
   ld     (var_D23C), bc               ; 00:35C4 - ED 43 3C D2
   inc    (iy+g_sprite_count-IYBASE)   ; 00:35C8 - FD 34 0A
   ret                                 ; 00:35CB - C9

draw_sprite_text:
   ld     a, (de)                      ; 00:35CC - 1A
   cp     $FF                          ; 00:35CD - FE FF
   ret    z                            ; 00:35CF - C8
   cp     $FE                          ; 00:35D0 - FE FE
   jr     z, addr_035DD                ; 00:35D2 - 28 09
   ld     (hl), c                      ; 00:35D4 - 71
   inc    l                            ; 00:35D5 - 2C
   ld     (hl), b                      ; 00:35D6 - 70
   inc    l                            ; 00:35D7 - 2C
   ld     (hl), a                      ; 00:35D8 - 77
   inc    l                            ; 00:35D9 - 2C
   inc    (iy+g_sprite_count-IYBASE)   ; 00:35DA - FD 34 0A

addr_035DD:
   inc    de                           ; 00:35DD - 13
   ld     a, c                         ; 00:35DE - 79
   add    a, $08                       ; 00:35DF - C6 08
   ld     c, a                         ; 00:35E1 - 4F
   jp     draw_sprite_text             ; 00:35E2 - C3 CC 35

UNK_035E5:
   bit    0, (iy+var_D205-IYBASE)      ; 00:35E5 - FD CB 05 46
   ret    nz                           ; 00:35E9 - C0
   bit    0, (iy+var_D208-IYBASE)      ; 00:35EA - FD CB 08 46
   jp     nz, addr_036BE               ; 00:35EE - C2 BE 36
   ld     a, (var_D414)                ; 00:35F1 - 3A 14 D4
   rrca                                ; 00:35F4 - 0F
   jp     c, addr_036BE                ; 00:35F5 - DA BE 36
   and    $02                          ; 00:35F8 - E6 02
   jp     nz, addr_036BE               ; 00:35FA - C2 BE 36

addr_035FD:
   bit    0, (iy+var_D209-IYBASE)      ; 00:35FD - FD CB 09 46
   ret    nz                           ; 00:3601 - C0
   bit    6, (iy+var_D206-IYBASE)      ; 00:3602 - FD CB 06 76
   ret    nz                           ; 00:3606 - C0
   bit    0, (iy+var_D208-IYBASE)      ; 00:3607 - FD CB 08 46
   ret    nz                           ; 00:360B - C0
   bit    5, (iy+var_D206-IYBASE)      ; 00:360C - FD CB 06 6E
   jr     nz, addr_0367E               ; 00:3610 - 20 6C
   ld     a, (g_rings_BCD)             ; 00:3612 - 3A AA D2
   and    a                            ; 00:3615 - A7
   .IF cht_no_death_on_hit
   jr addr_03644
   .ELSE
   jr     nz, addr_03644               ; 00:3616 - 20 2C
   .ENDIF

kill_sonic:
   set    0, (iy+var_D205-IYBASE)      ; 00:3618 - FD CB 05 C6
   ld     hl, var_D414                 ; 00:361C - 21 14 D4
   set    7, (hl)                      ; 00:361F - CB FE
   ld     hl, $FFFA                    ; 00:3621 - 21 FA FF
   xor    a                            ; 00:3624 - AF
   ld     (sonic_vel_y_sub), a         ; 00:3625 - 32 06 D4
   ld     (sonic_vel_y), hl            ; 00:3628 - 22 07 D4
   ld     a, $60                       ; 00:362B - 3E 60
   ld     (var_D287), a                ; 00:362D - 32 87 D2
   res    6, (iy+var_D206-IYBASE)      ; 00:3630 - FD CB 06 B6
   res    5, (iy+var_D206-IYBASE)      ; 00:3634 - FD CB 06 AE
   res    6, (iy+var_D206-IYBASE)      ; 00:3638 - FD CB 06 B6
   res    0, (iy+var_D208-IYBASE)      ; 00:363C - FD CB 08 86
   ld     a, $0A                       ; 00:3640 - 3E 0A
   rst    $18                          ; 00:3642 - DF
   ret                                 ; 00:3643 - C9

addr_03644:
   xor    a                            ; 00:3644 - AF
   ld     (g_rings_BCD), a             ; 00:3645 - 32 AA D2
   call   spawn_object                 ; 00:3648 - CD 7B 7C
   jr     c, addr_0367E                ; 00:364B - 38 31
   push   ix                           ; 00:364D - DD E5
   push   hl                           ; 00:364F - E5
   pop    ix                           ; 00:3650 - DD E1
   ld     (ix+0), $55                  ; 00:3652 - DD 36 00 55
   ld     (ix+17), $06                 ; 00:3656 - DD 36 11 06
   ld     (ix+18), $00                 ; 00:365A - DD 36 12 00
   ld     hl, (sonic_x)                ; 00:365E - 2A FE D3
   ld     (ix+2), l                    ; 00:3661 - DD 75 02
   ld     (ix+3), h                    ; 00:3664 - DD 74 03
   ld     hl, (sonic_y)                ; 00:3667 - 2A 01 D4
   ld     (ix+5), l                    ; 00:366A - DD 75 05
   ld     (ix+6), h                    ; 00:366D - DD 74 06
   ld     (ix+10), $00                 ; 00:3670 - DD 36 0A 00
   ld     (ix+11), $FC                 ; 00:3674 - DD 36 0B FC
   ld     (ix+12), $FF                 ; 00:3678 - DD 36 0C FF
   pop    ix                           ; 00:367C - DD E1

addr_0367E:
   ld     hl, var_D414                 ; 00:367E - 21 14 D4
   ld     de, $FFFC                    ; 00:3681 - 11 FC FF
   xor    a                            ; 00:3684 - AF
   bit    4, (hl)                      ; 00:3685 - CB 66
   jr     z, addr_0368C                ; 00:3687 - 28 03
   ld     de, $FFFE                    ; 00:3689 - 11 FE FF

addr_0368C:
   ld     (sonic_vel_y_sub), a         ; 00:368C - 32 06 D4
   ld     (sonic_vel_y), de            ; 00:368F - ED 53 07 D4
   bit    1, (hl)                      ; 00:3693 - CB 4E
   jr     z, addr_036A1                ; 00:3695 - 28 0A
   ld     a, (hl)                      ; 00:3697 - 7E
   or     $12                          ; 00:3698 - F6 12
   ld     (hl), a                      ; 00:369A - 77
   xor    a                            ; 00:369B - AF
   ld     de, $0002                    ; 00:369C - 11 02 00
   jr     addr_036A7                   ; 00:369F - 18 06

addr_036A1:
   res    1, (hl)                      ; 00:36A1 - CB 8E
   xor    a                            ; 00:36A3 - AF
   ld     de, $FFFE                    ; 00:36A4 - 11 FE FF

addr_036A7:
   ld     (sonic_vel_x_sub), a         ; 00:36A7 - 32 03 D4
   ld     (sonic_vel_x), de            ; 00:36AA - ED 53 04 D4
   res    5, (iy+var_D206-IYBASE)      ; 00:36AE - FD CB 06 AE
   set    6, (iy+var_D206-IYBASE)      ; 00:36B2 - FD CB 06 F6
   ld     (iy+g_inputs_player_1-IYBASE), $FF  ; 00:36B6 - FD 36 03 FF
   ld     a, $11                       ; 00:36BA - 3E 11
   rst    $28                          ; 00:36BC - EF
   ret                                 ; 00:36BD - C9

addr_036BE:
   ld     (ix+0), $0A                  ; 00:36BE - DD 36 00 0A
   ld     a, (g_FF_string_high_byte)   ; 00:36C2 - 3A 0E D2
   ld     e, a                         ; 00:36C5 - 5F
   ld     d, $00                       ; 00:36C6 - 16 00
   ld     l, (ix+2)                    ; 00:36C8 - DD 6E 02
   ld     h, (ix+3)                    ; 00:36CB - DD 66 03
   add    hl, de                       ; 00:36CE - 19
   ld     (ix+2), l                    ; 00:36CF - DD 75 02
   ld     (ix+3), h                    ; 00:36D2 - DD 74 03
   ld     a, (var_D20F)                ; 00:36D5 - 3A 0F D2
   ld     e, a                         ; 00:36D8 - 5F
   ld     l, (ix+5)                    ; 00:36D9 - DD 6E 05
   ld     h, (ix+6)                    ; 00:36DC - DD 66 06
   add    hl, de                       ; 00:36DF - 19
   ld     (ix+5), l                    ; 00:36E0 - DD 75 05
   ld     (ix+6), h                    ; 00:36E3 - DD 74 06
   xor    a                            ; 00:36E6 - AF
   ld     (ix+15), a                   ; 00:36E7 - DD 77 0F
   ld     (ix+16), a                   ; 00:36EA - DD 77 10
   ld     a, $01                       ; 00:36ED - 3E 01
   rst    $28                          ; 00:36EF - EF
   ld     de, $0100                    ; 00:36F0 - 11 00 01
   ld     c, $00                       ; 00:36F3 - 0E 00
   call   addr_039D8                   ; 00:36F5 - CD D8 39
   ret                                 ; 00:36F8 - C9

;; This function gets called roughly 2 times per on-screen objfunc, except a not-dead Sonic calls this 4 times.
addr_036F9:
.IF 0
;;
;; Original code
;; This is a long one.
;;
   ld     a, (var_D238)                ; 00:36F9 - 3A 38 D2
   cp     $80                          ; 00:36FC - FE 80
   jr     z, addr_0370F                ; 00:36FE - 28 0F
   cp     $40                          ; 00:3700 - FE 40
   jr     z, addr_0373B                ; 00:3702 - 28 37
   cp     $20                          ; 00:3704 - FE 20
   jr     z, addr_03764                ; 00:3706 - 28 5C
   cp     $10                          ; 00:3708 - FE 10
   jr     z, addr_0378A                ; 00:370A - 28 7E
   jp     addr_037B3                   ; 00:370C - C3 B3 37

addr_0370F:
   ld     l, (ix+5)                    ; 00:370F - DD 6E 05
   ld     h, (ix+6)                    ; 00:3712 - DD 66 06
   add    hl, de                       ; 00:3715 - 19
   ld     a, l                         ; 00:3716 - 7D
   add    a, a                         ; 00:3717 - 87
   rl     h                            ; 00:3718 - CB 14
   add    a, a                         ; 00:371A - 87
   rl     h                            ; 00:371B - CB 14
   and    $80                          ; 00:371D - E6 80
   ld     l, a                         ; 00:371F - 6F
   ex     de, hl                       ; 00:3720 - EB
   ld     l, (ix+2)                    ; 00:3721 - DD 6E 02
   ld     h, (ix+3)                    ; 00:3724 - DD 66 03
   add    hl, bc                       ; 00:3727 - 09
   ld     a, l                         ; 00:3728 - 7D
   add    a, a                         ; 00:3729 - 87
   rl     h                            ; 00:372A - CB 14
   add    a, a                         ; 00:372C - 87
   rl     h                            ; 00:372D - CB 14
   add    a, a                         ; 00:372F - 87
   rl     h                            ; 00:3730 - CB 14
   ld     l, h                         ; 00:3732 - 6C
   ld     h, $00                       ; 00:3733 - 26 00
   add    hl, de                       ; 00:3735 - 19
   ld     de, var_C000                 ; 00:3736 - 11 00 C0
   add    hl, de                       ; 00:3739 - 19
   ret                                 ; 00:373A - C9

addr_0373B:
   ld     l, (ix+5)                    ; 00:373B - DD 6E 05
   ld     h, (ix+6)                    ; 00:373E - DD 66 06
   add    hl, de                       ; 00:3741 - 19
   ld     a, l                         ; 00:3742 - 7D
   add    a, a                         ; 00:3743 - 87
   rl     h                            ; 00:3744 - CB 14
   and    $C0                          ; 00:3746 - E6 C0
   ld     l, a                         ; 00:3748 - 6F
   ex     de, hl                       ; 00:3749 - EB
   ld     l, (ix+2)                    ; 00:374A - DD 6E 02
   ld     h, (ix+3)                    ; 00:374D - DD 66 03
   add    hl, bc                       ; 00:3750 - 09
   ld     a, l                         ; 00:3751 - 7D
   add    a, a                         ; 00:3752 - 87
   rl     h                            ; 00:3753 - CB 14
   add    a, a                         ; 00:3755 - 87
   rl     h                            ; 00:3756 - CB 14
   add    a, a                         ; 00:3758 - 87
   rl     h                            ; 00:3759 - CB 14
   ld     l, h                         ; 00:375B - 6C
   ld     h, $00                       ; 00:375C - 26 00
   add    hl, de                       ; 00:375E - 19
   ld     de, var_C000                 ; 00:375F - 11 00 C0
   add    hl, de                       ; 00:3762 - 19
   ret                                 ; 00:3763 - C9

addr_03764:
   ld     l, (ix+5)                    ; 00:3764 - DD 6E 05
   ld     h, (ix+6)                    ; 00:3767 - DD 66 06
   add    hl, de                       ; 00:376A - 19
   ld     a, l                         ; 00:376B - 7D
   and    $E0                          ; 00:376C - E6 E0
   ld     l, a                         ; 00:376E - 6F
   ex     de, hl                       ; 00:376F - EB
   ld     l, (ix+2)                    ; 00:3770 - DD 6E 02
   ld     h, (ix+3)                    ; 00:3773 - DD 66 03
   add    hl, bc                       ; 00:3776 - 09
   ld     a, l                         ; 00:3777 - 7D
   add    a, a                         ; 00:3778 - 87
   rl     h                            ; 00:3779 - CB 14
   add    a, a                         ; 00:377B - 87
   rl     h                            ; 00:377C - CB 14
   add    a, a                         ; 00:377E - 87
   rl     h                            ; 00:377F - CB 14
   ld     l, h                         ; 00:3781 - 6C
   ld     h, $00                       ; 00:3782 - 26 00
   add    hl, de                       ; 00:3784 - 19
   ld     de, var_C000                 ; 00:3785 - 11 00 C0
   add    hl, de                       ; 00:3788 - 19
   ret                                 ; 00:3789 - C9

addr_0378A:
   ld     l, (ix+5)                    ; 00:378A - DD 6E 05
   ld     h, (ix+6)                    ; 00:378D - DD 66 06
   add    hl, de                       ; 00:3790 - 19
   ld     a, l                         ; 00:3791 - 7D
   srl    h                            ; 00:3792 - CB 3C
   rra                                 ; 00:3794 - 1F
   and    $F0                          ; 00:3795 - E6 F0
   ld     l, a                         ; 00:3797 - 6F
   ex     de, hl                       ; 00:3798 - EB
   ld     l, (ix+2)                    ; 00:3799 - DD 6E 02
   ld     h, (ix+3)                    ; 00:379C - DD 66 03
   add    hl, bc                       ; 00:379F - 09
   ld     a, l                         ; 00:37A0 - 7D
   add    a, a                         ; 00:37A1 - 87
   rl     h                            ; 00:37A2 - CB 14
   add    a, a                         ; 00:37A4 - 87
   rl     h                            ; 00:37A5 - CB 14
   add    a, a                         ; 00:37A7 - 87
   rl     h                            ; 00:37A8 - CB 14
   ld     l, h                         ; 00:37AA - 6C
   ld     h, $00                       ; 00:37AB - 26 00
   add    hl, de                       ; 00:37AD - 19
   ld     de, var_C000                 ; 00:37AE - 11 00 C0
   add    hl, de                       ; 00:37B1 - 19
   ret                                 ; 00:37B2 - C9

addr_037B3:
   ld     l, (ix+5)                    ; 00:37B3 - DD 6E 05
   ld     h, (ix+6)                    ; 00:37B6 - DD 66 06
   add    hl, de                       ; 00:37B9 - 19
   ld     a, l                         ; 00:37BA - 7D
   rlca                                ; 00:37BB - 07
   rl     h                            ; 00:37BC - CB 14
   rlca                                ; 00:37BE - 07
   rl     h                            ; 00:37BF - CB 14
   rlca                                ; 00:37C1 - 07
   rl     h                            ; 00:37C2 - CB 14
   ex     de, hl                       ; 00:37C4 - EB
   ld     l, (ix+2)                    ; 00:37C5 - DD 6E 02
   ld     h, (ix+3)                    ; 00:37C8 - DD 66 03
   add    hl, bc                       ; 00:37CB - 09
   ld     a, l                         ; 00:37CC - 7D
   rlca                                ; 00:37CD - 07
   rl     h                            ; 00:37CE - CB 14
   rlca                                ; 00:37D0 - 07
   rl     h                            ; 00:37D1 - CB 14
   rlca                                ; 00:37D3 - 07
   rl     h                            ; 00:37D4 - CB 14
   ld     l, h                         ; 00:37D6 - 6C
   ld     h, $00                       ; 00:37D7 - 26 00
   ld     e, h                         ; 00:37D9 - 5C
   add    hl, de                       ; 00:37DA - 19
   ld     de, var_C000                 ; 00:37DB - 11 00 C0
   add    hl, de                       ; 00:37DE - 19
   ret                                 ; 00:37DF - C9
.ELSE
;;
;; New code
;; Use power of two calculation.
;;
   ld l, (ix+5)
   ld h, (ix+6)
   add hl, de
   ld a, l
   srl h
   rra
   and $F0
   ld l, a
   ld a, (var_D238)
   cp $10
   jr z, +
   inc a  ; Bottom bit untouched. Ensure this is set.
   ;; Resulting values:
   ;; $100 -> $01
   ;; $080 -> $81
   ;; $040 -> $41
   ;; $020 -> $21
   ;; $010 -> $11 (but we skip this particular case)
   -:
      add hl, hl
      rrca
      bit 4, a
      jp z, -
   +:
   ex de, hl
   ld l, (ix+2)
   ld h, (ix+3)
   add hl, bc
   ld a, l
   add a, a
   rl h
   add a, a
   rl h
   add a, a
   rl h
   ld a, h
   add a, <var_C000
   ld l, a
   ld h, >var_C000
   adc hl, de
   ret
; SAVING: 175 bytes
.ENDIF

addr_037E0:
   ld     de, (var_D28F)               ; 00:37E0 - ED 5B 8F D2
   ld     hl, (var_D291)               ; 00:37E4 - 2A 91 D2
   and    a                            ; 00:37E7 - A7
   sbc    hl, de                       ; 00:37E8 - ED 52
   ret    z                            ; 00:37EA - C8
   ld     hl, $3680                    ; 00:37EB - 21 80 36
   ex     de, hl                       ; 00:37EE - EB
   bit    0, (iy+var_D206-IYBASE)      ; 00:37EF - FD CB 06 46
   jp     nz, addr_0382E               ; 00:37F3 - C2 2E 38
   ld     a, e                         ; 00:37F6 - 7B
   out    ($BF), a                     ; 00:37F7 - D3 BF
   ld     a, d                         ; 00:37F9 - 7A
   or     $40                          ; 00:37FA - F6 40
   out    ($BF), a                     ; 00:37FC - D3 BF
   .IF !shrink_sonicuncart_interleave
   xor    a                            ; 00:37FE - AF
   ld     c, $BE                       ; 00:37FF - 0E BE
   ld     e, $18                       ; 00:3801 - 1E 18

addr_03803:
   outi                                ; 00:3803 - ED A3
   outi                                ; 00:3805 - ED A3
   outi                                ; 00:3807 - ED A3
   out    ($BE), a                     ; 00:3809 - D3 BE
   outi                                ; 00:380B - ED A3
   outi                                ; 00:380D - ED A3
   outi                                ; 00:380F - ED A3
   out    ($BE), a                     ; 00:3811 - D3 BE
   outi                                ; 00:3813 - ED A3
   outi                                ; 00:3815 - ED A3
   outi                                ; 00:3817 - ED A3
   out    ($BE), a                     ; 00:3819 - D3 BE
   outi                                ; 00:381B - ED A3
   outi                                ; 00:381D - ED A3
   outi                                ; 00:381F - ED A3
   out    ($BE), a                     ; 00:3821 - D3 BE
   dec    e                            ; 00:3823 - 1D
   jp     nz, addr_03803               ; 00:3824 - C2 03 38

   .ELSE
   ;;
   ;; Interleave the sprites!
   ;;
   ld bc, 0|(($FF&(($18*(3*2+1)))-3)<<8)|$BE
   ld d, >sprite_hflip_table
   ;; Clear the low bit and jump to the second row in the loop if it was set
   dec l
   bit 0, l
   jr z, @start_mirrored
   inc l
   ld b, $FF&($18*(3*2+1))
   ;; We alternate: Normal, mirrored, normal, mirrored.
   xor a
   @each_4_rows:
      outi
      outi
      outi
      out ($BE), a

   @start_mirrored:
      .REPEAT 3
      ld e, (hl)
      ld a, (de)
      inc hl
      out ($BE), a
      .ENDR
      xor a
      out ($BE), a

      outi
      outi
      outi
      out ($BE), a

      .REPEAT 3
      ld e, (hl)
      ld a, (de)
      inc hl
      out ($BE), a
      .ENDR
      xor a
      out ($BE), a

      djnz @each_4_rows

   bit 0, l
   jr z, @skip_extra_row
      outi
      outi
      outi
      out ($BE), a
   @skip_extra_row:

   .ENDIF

   ld     hl, (var_D28F)               ; 00:3827 - 2A 8F D2
   ld     (var_D291), hl               ; 00:382A - 22 91 D2
   ret                                 ; 00:382D - C9

addr_0382E:
   ld     bc, $011D                    ; 00:382E - 01 1D 01
   add    hl, bc                       ; 00:3831 - 09
   ld     a, e                         ; 00:3832 - 7B
   out    ($BF), a                     ; 00:3833 - D3 BF
   ld     a, d                         ; 00:3835 - 7A
   or     $40                          ; 00:3836 - F6 40
   out    ($BF), a                     ; 00:3838 - D3 BF
   exx                                 ; 00:383A - D9
   push   bc                           ; 00:383B - C5
   ld     b, $18                       ; 00:383C - 06 18
   exx                                 ; 00:383E - D9
   ld     de, $FFFA                    ; 00:383F - 11 FA FF
   ld     c, $BE                       ; 00:3842 - 0E BE
   xor    a                            ; 00:3844 - AF

addr_03845:
   outi                                ; 00:3845 - ED A3
   outi                                ; 00:3847 - ED A3
   outi                                ; 00:3849 - ED A3
   out    ($BE), a                     ; 00:384B - D3 BE
   add    hl, de                       ; 00:384D - 19
   outi                                ; 00:384E - ED A3
   outi                                ; 00:3850 - ED A3
   outi                                ; 00:3852 - ED A3
   out    ($BE), a                     ; 00:3854 - D3 BE
   add    hl, de                       ; 00:3856 - 19
   outi                                ; 00:3857 - ED A3
   outi                                ; 00:3859 - ED A3
   outi                                ; 00:385B - ED A3
   out    ($BE), a                     ; 00:385D - D3 BE
   add    hl, de                       ; 00:385F - 19
   outi                                ; 00:3860 - ED A3
   outi                                ; 00:3862 - ED A3
   outi                                ; 00:3864 - ED A3
   out    ($BE), a                     ; 00:3866 - D3 BE
   add    hl, de                       ; 00:3868 - 19
   exx                                 ; 00:3869 - D9
   dec    b                            ; 00:386A - 05
   exx                                 ; 00:386B - D9
   jp     nz, addr_03845               ; 00:386C - C2 45 38
   exx                                 ; 00:386F - D9
   pop    bc                           ; 00:3870 - C1
   exx                                 ; 00:3871 - D9
   ld     hl, (var_D28F)               ; 00:3872 - 2A 8F D2
   ld     (var_D291), hl               ; 00:3875 - 22 91 D2
   ret                                 ; 00:3878 - C9

addr_03879:
   ld     de, (var_D293)               ; 00:3879 - ED 5B 93 D2
   ld     hl, (var_D295)               ; 00:387D - 2A 95 D2
   and    a                            ; 00:3880 - A7
   sbc    hl, de                       ; 00:3881 - ED 52
   ret    z                            ; 00:3883 - C8
   ld     hl, $1F80                    ; 00:3884 - 21 80 1F
   ex     de, hl                       ; 00:3887 - EB
   di                                  ; 00:3888 - F3
   ld     a, e                         ; 00:3889 - 7B
   out    ($BF), a                     ; 00:388A - D3 BF
   ld     a, d                         ; 00:388C - 7A
   or     $40                          ; 00:388D - F6 40
   out    ($BF), a                     ; 00:388F - D3 BF
   ld     b, $20                       ; 00:3891 - 06 20

addr_03893:
   ld     a, (hl)                      ; 00:3893 - 7E
   out    ($BE), a                     ; 00:3894 - D3 BE
   nop                                 ; 00:3896 - 00
   inc    hl                           ; 00:3897 - 23
   ld     a, (hl)                      ; 00:3898 - 7E
   out    ($BE), a                     ; 00:3899 - D3 BE
   nop                                 ; 00:389B - 00
   inc    hl                           ; 00:389C - 23
   ld     a, (hl)                      ; 00:389D - 7E
   out    ($BE), a                     ; 00:389E - D3 BE
   nop                                 ; 00:38A0 - 00
   inc    hl                           ; 00:38A1 - 23
   ld     a, (hl)                      ; 00:38A2 - 7E
   out    ($BE), a                     ; 00:38A3 - D3 BE
   inc    hl                           ; 00:38A5 - 23
   djnz   addr_03893                   ; 00:38A6 - 10 EB
   ei                                  ; 00:38A8 - FB
   ld     hl, (var_D293)               ; 00:38A9 - 2A 93 D2
   ld     (var_D295), hl               ; 00:38AC - 22 95 D2
   ret                                 ; 00:38AF - C9

addr_038B0:
   ld     hl, (var_D2AB)               ; 00:38B0 - 2A AB D2
   ld     a, l                         ; 00:38B3 - 7D
   and    $F8                          ; 00:38B4 - E6 F8
   ld     l, a                         ; 00:38B6 - 6F
   ld     de, (var_D25A)               ; 00:38B7 - ED 5B 5A D2
   ld     a, e                         ; 00:38BB - 7B
   and    $F8                          ; 00:38BC - E6 F8
   ld     e, a                         ; 00:38BE - 5F
   xor    a                            ; 00:38BF - AF
   sbc    hl, de                       ; 00:38C0 - ED 52
   ret    c                            ; 00:38C2 - D8
   or     h                            ; 00:38C3 - B4
   ret    nz                           ; 00:38C4 - C0
   ld     a, l                         ; 00:38C5 - 7D
   cp     $08                          ; 00:38C6 - FE 08
   ret    c                            ; 00:38C8 - D8
   ld     d, a                         ; 00:38C9 - 57
   ld     a, (g_vdp_scroll_x)          ; 00:38CA - 3A 51 D2
   and    $F8                          ; 00:38CD - E6 F8
   ld     e, a                         ; 00:38CF - 5F
   add    hl, de                       ; 00:38D0 - 19
   .IF 0
   srl    h                            ; 00:38D1 - CB 3C
   rr     l                            ; 00:38D3 - CB 1D
   srl    h                            ; 00:38D5 - CB 3C
   rr     l                            ; 00:38D7 - CB 1D
   srl    h                            ; 00:38D9 - CB 3C
   rr     l                            ; 00:38DB - CB 1D
   ld     a, l                         ; 00:38DD - 7D
   .ELSE
   ld a, l
   srl h
   rra
   srl h
   rra
   srl h
   rra
   ld l, a
   ; SAVING: 2 bytes
   .ENDIF
   and    $1F                          ; 00:38DE - E6 1F
   add    a, a                         ; 00:38E0 - 87
   ld     c, a                         ; 00:38E1 - 4F
   ld     hl, (var_D2AD)               ; 00:38E2 - 2A AD D2
   ld     a, l                         ; 00:38E5 - 7D
   and    $F8                          ; 00:38E6 - E6 F8
   ld     l, a                         ; 00:38E8 - 6F
   ld     de, (var_D25D)               ; 00:38E9 - ED 5B 5D D2
   ld     a, e                         ; 00:38ED - 7B
   and    $F8                          ; 00:38EE - E6 F8
   ld     e, a                         ; 00:38F0 - 5F
   xor    a                            ; 00:38F1 - AF
   sbc    hl, de                       ; 00:38F2 - ED 52
   ret    c                            ; 00:38F4 - D8
   or     h                            ; 00:38F5 - B4
   ret    nz                           ; 00:38F6 - C0
   ld     a, l                         ; 00:38F7 - 7D
   cp     $C0                          ; 00:38F8 - FE C0
   ret    nc                           ; 00:38FA - D0
   ld     d, $00                       ; 00:38FB - 16 00
   ld     a, (g_vdp_scroll_y)          ; 00:38FD - 3A 52 D2
   and    $F8                          ; 00:3900 - E6 F8
   ld     e, a                         ; 00:3902 - 5F
   add    hl, de                       ; 00:3903 - 19
   .IF 0
   srl    h                            ; 00:3904 - CB 3C
   rr     l                            ; 00:3906 - CB 1D
   srl    h                            ; 00:3908 - CB 3C
   rr     l                            ; 00:390A - CB 1D
   srl    h                            ; 00:390C - CB 3C
   rr     l                            ; 00:390E - CB 1D
   ld     a, l                         ; 00:3910 - 7D
   .ELSE
   ld a, l
   srl h
   rra
   srl h
   rra
   srl h
   rra
   ; SAVING: 3 bytes
   .ENDIF
   cp     $1C                          ; 00:3911 - FE 1C
   jr     c, addr_03917                ; 00:3913 - 38 02
   sub    $1C                          ; 00:3915 - D6 1C

addr_03917:
   ld     l, a                         ; 00:3917 - 6F
   ld     h, $00                       ; 00:3918 - 26 00
   ld     b, h                         ; 00:391A - 44
   rrca                                ; 00:391B - 0F
   rrca                                ; 00:391C - 0F
   ld     h, a                         ; 00:391D - 67
   and    $C0                          ; 00:391E - E6 C0
   ld     l, a                         ; 00:3920 - 6F
   ld     a, h                         ; 00:3921 - 7C
   xor    l                            ; 00:3922 - AD
   .IF 0
   ld     h, a                         ; 00:3923 - 67
   add    hl, bc                       ; 00:3924 - 09
   ld     bc, $3800                    ; 00:3925 - 01 00 38
   add    hl, bc                       ; 00:3928 - 09
   .ELSE
   add a, $38
   ld h, a
   add hl, bc
   ; SAVING: 2 bytes
   .ENDIF
   ld     de, (var_D2AF)               ; 00:3929 - ED 5B AF D2
   ld     b, $02                       ; 00:392D - 06 02

addr_0392F:
   ld     a, l                         ; 00:392F - 7D
   out    ($BF), a                     ; 00:3930 - D3 BF
   ld     a, h                         ; 00:3932 - 7C
   or     $40                          ; 00:3933 - F6 40
   out    ($BF), a                     ; 00:3935 - D3 BF
   ld     a, (de)                      ; 00:3937 - 1A
   out    ($BE), a                     ; 00:3938 - D3 BE
   inc    de                           ; 00:393A - 13
   nop                                 ; 00:393B - 00
   nop                                 ; 00:393C - 00
   ld     a, (de)                      ; 00:393D - 1A
   out    ($BE), a                     ; 00:393E - D3 BE
   inc    de                           ; 00:3940 - 13
   nop                                 ; 00:3941 - 00
   nop                                 ; 00:3942 - 00
   ld     a, (de)                      ; 00:3943 - 1A
   out    ($BE), a                     ; 00:3944 - D3 BE
   inc    de                           ; 00:3946 - 13
   nop                                 ; 00:3947 - 00
   nop                                 ; 00:3948 - 00
   ld     a, (de)                      ; 00:3949 - 1A
   out    ($BE), a                     ; 00:394A - D3 BE
   inc    de                           ; 00:394C - 13
   ld     a, b                         ; 00:394D - 78
   ld     bc, $0040                    ; 00:394E - 01 40 00
   add    hl, bc                       ; 00:3951 - 09
   ld     b, a                         ; 00:3952 - 47
   djnz   addr_0392F                   ; 00:3953 - 10 DA
   ret                                 ; 00:3955 - C9

UNK_03956:
   bit    0, (iy+var_D205-IYBASE)      ; 00:3956 - FD CB 05 46
   scf                                 ; 00:395A - 37
   ret    nz                           ; 00:395B - C0
   ld     l, (ix+2)                    ; 00:395C - DD 6E 02
   ld     h, (ix+3)                    ; 00:395F - DD 66 03
   ld     c, (ix+13)                   ; 00:3962 - DD 4E 0D
   ld     b, $00                       ; 00:3965 - 06 00
   add    hl, bc                       ; 00:3967 - 09
   ld     de, (sonic_x)                ; 00:3968 - ED 5B FE D3
   xor    a                            ; 00:396C - AF
   sbc    hl, de                       ; 00:396D - ED 52
   ret    c                            ; 00:396F - D8
   ld     l, (ix+2)                    ; 00:3970 - DD 6E 02
   ld     h, (ix+3)                    ; 00:3973 - DD 66 03
   ld     a, (var_D214)                ; 00:3976 - 3A 14 D2
   ld     c, a                         ; 00:3979 - 4F
   add    hl, bc                       ; 00:397A - 09
   ex     de, hl                       ; 00:397B - EB
   ld     a, (var_D409)                ; 00:397C - 3A 09 D4
   ld     c, a                         ; 00:397F - 4F
   add    hl, bc                       ; 00:3980 - 09
   xor    a                            ; 00:3981 - AF
   sbc    hl, de                       ; 00:3982 - ED 52
   ret    c                            ; 00:3984 - D8
   ld     l, (ix+5)                    ; 00:3985 - DD 6E 05
   ld     h, (ix+6)                    ; 00:3988 - DD 66 06
   ld     c, (ix+14)                   ; 00:398B - DD 4E 0E
   add    hl, bc                       ; 00:398E - 09
   ld     de, (sonic_y)                ; 00:398F - ED 5B 01 D4
   xor    a                            ; 00:3993 - AF
   sbc    hl, de                       ; 00:3994 - ED 52
   ret    c                            ; 00:3996 - D8
   ld     l, (ix+5)                    ; 00:3997 - DD 6E 05
   ld     h, (ix+6)                    ; 00:399A - DD 66 06
   ld     a, (var_D215)                ; 00:399D - 3A 15 D2
   ld     c, a                         ; 00:39A0 - 4F
   add    hl, bc                       ; 00:39A1 - 09
   ex     de, hl                       ; 00:39A2 - EB
   ld     a, (var_D40A)                ; 00:39A3 - 3A 0A D4
   ld     c, a                         ; 00:39A6 - 4F
   add    hl, bc                       ; 00:39A7 - 09
   xor    a                            ; 00:39A8 - AF
   sbc    hl, de                       ; 00:39A9 - ED 52
   ret                                 ; 00:39AB - C9

add_A_rings:
.IF 0
   ;; Original code
   ld     c, a                         ; 00:39AC - 4F
   ld     a, (g_rings_BCD)             ; 00:39AD - 3A AA D2
   add    a, c                         ; 00:39B0 - 81
   ld     c, a                         ; 00:39B1 - 4F
   and    $0F                          ; 00:39B2 - E6 0F
   cp     $0A                          ; 00:39B4 - FE 0A
   jr     c, +                         ; 00:39B6 - 38 04
   ld     a, c                         ; 00:39B8 - 79
   add    a, $06                       ; 00:39B9 - C6 06
   ld     c, a                         ; 00:39BB - 4F

+:
   ld     a, c                         ; 00:39BC - 79
   cp     $A0                          ; 00:39BD - FE A0
   jr     c, +                         ; 00:39BF - 38 10
   sub    $A0                          ; 00:39C1 - D6 A0
   ld     (g_rings_BCD), a             ; 00:39C3 - 32 AA D2
   ld     a, (g_lives)                 ; 00:39C6 - 3A 46 D2
   inc    a                            ; 00:39C9 - 3C
   ld     (g_lives), a                 ; 00:39CA - 32 46 D2
   ld     a, $09                       ; 00:39CD - 3E 09
   rst    $28                          ; 00:39CF - EF
   ret                                 ; 00:39D0 - C9

+:
   ld     (g_rings_BCD), a             ; 00:39D1 - 32 AA D2
   ld     a, $02                       ; 00:39D4 - 3E 02
   rst    $28                          ; 00:39D6 - EF
   ret                                 ; 00:39D7 - C9
.ELSE
   ;; New code
   ld hl, g_rings_BCD
   add a, (hl)
   daa
   ld (hl), a
   ld a, $02
   jr nz, +
      ;;
      ld hl, g_lives
      inc (hl)
      ld a, $09
   +:
   rst $28
   ret
   ; SAVING: 26 bytes
.ENDIF

addr_039D8:
   ld     hl, var_D2BD                 ; 00:39D8 - 21 BD D2
   ld     a, e                         ; 00:39DB - 7B
   add    a, (hl)                      ; 00:39DC - 86
   daa                                 ; 00:39DD - 27
   ld     (hl), a                      ; 00:39DE - 77
   dec    hl                           ; 00:39DF - 2B
   ld     a, d                         ; 00:39E0 - 7A
   adc    a, (hl)                      ; 00:39E1 - 8E
   daa                                 ; 00:39E2 - 27
   ld     (hl), a                      ; 00:39E3 - 77
   dec    hl                           ; 00:39E4 - 2B
   ld     a, c                         ; 00:39E5 - 79
   adc    a, (hl)                      ; 00:39E6 - 8E
   daa                                 ; 00:39E7 - 27
   ld     (hl), a                      ; 00:39E8 - 77
   ld     c, a                         ; 00:39E9 - 4F
   dec    hl                           ; 00:39EA - 2B
   ld     a, $00                       ; 00:39EB - 3E 00
   adc    a, (hl)                      ; 00:39ED - 8E
   daa                                 ; 00:39EE - 27
   ld     (hl), a                      ; 00:39EF - 77
   ld     hl, var_D2FD                 ; 00:39F0 - 21 FD D2
   ld     a, c                         ; 00:39F3 - 79
   cp     (hl)                         ; 00:39F4 - BE
   ret    c                            ; 00:39F5 - D8
   ld     a, $05                       ; 00:39F6 - 3E 05
   add    a, (hl)                      ; 00:39F8 - 86
   daa                                 ; 00:39F9 - 27
   ld     (hl), a                      ; 00:39FA - 77
   ld     hl, g_lives                  ; 00:39FB - 21 46 D2
   inc    (hl)                         ; 00:39FE - 34
   ld     a, $09                       ; 00:39FF - 3E 09
   rst    $28                          ; 00:3A01 - EF
   ret                                 ; 00:3A02 - C9

tick_game_time:
   bit    0, (iy+var_D205-IYBASE)      ; 00:3A03 - FD CB 05 46
   ret    nz                           ; 00:3A07 - C0
   ld     hl, g_time_subsecs           ; 00:3A08 - 21 D0 D2
   bit    0, (iy+var_D207-IYBASE)      ; 00:3A0B - FD CB 07 46
   jr     nz, @time_ticks_downwards    ; 00:3A0F - 20 26
   ld     a, (hl)                      ; 00:3A11 - 7E
   inc    a                            ; 00:3A12 - 3C
   cp     $3C                          ; 00:3A13 - FE 3C
   jr     c, @up_skip_subseconds_carry_up  ; 00:3A15 - 38 01
   xor    a                            ; 00:3A17 - AF

@up_skip_subseconds_carry_up:
   ld     (hl), a                      ; 00:3A18 - 77
   dec    hl                           ; 00:3A19 - 2B
   ccf                                 ; 00:3A1A - 3F
   ld     a, (hl)                      ; 00:3A1B - 7E
   adc    a, $00                       ; 00:3A1C - CE 00
   daa                                 ; 00:3A1E - 27
   cp     $60                          ; 00:3A1F - FE 60
   jr     c, @up_skip_seconds_carry_up  ; 00:3A21 - 38 01
   xor    a                            ; 00:3A23 - AF

@up_skip_seconds_carry_up:
   ld     (hl), a                      ; 00:3A24 - 77
   dec    hl                           ; 00:3A25 - 2B
   ccf                                 ; 00:3A26 - 3F
   ld     a, (hl)                      ; 00:3A27 - 7E
   adc    a, $00                       ; 00:3A28 - CE 00
   daa                                 ; 00:3A2A - 27
   cp     $10                          ; 00:3A2B - FE 10
   jr     c, @up_time_not_expired      ; 00:3A2D - 38 06
   push   hl                           ; 00:3A2F - E5
   call   kill_sonic                   ; 00:3A30 - CD 18 36
   pop    hl                           ; 00:3A33 - E1
   xor    a                            ; 00:3A34 - AF

@up_time_not_expired:
   ld     (hl), a                      ; 00:3A35 - 77
   ret                                 ; 00:3A36 - C9

@time_ticks_downwards:
   ld     a, (hl)                      ; 00:3A37 - 7E
   inc    a                            ; 00:3A38 - 3C
   cp     $3C                          ; 00:3A39 - FE 3C
   jr     c, @down_skip_subseconds_carry_up  ; 00:3A3B - 38 01
   xor    a                            ; 00:3A3D - AF

@down_skip_subseconds_carry_up:
   ld     (hl), a                      ; 00:3A3E - 77
   dec    hl                           ; 00:3A3F - 2B
   ccf                                 ; 00:3A40 - 3F
   ld     a, (hl)                      ; 00:3A41 - 7E
   sbc    a, $00                       ; 00:3A42 - DE 00
   daa                                 ; 00:3A44 - 27
   cp     $60                          ; 00:3A45 - FE 60
   jr     c, @down_skip_seconds_carry_down  ; 00:3A47 - 38 02
   ld     a, $59                       ; 00:3A49 - 3E 59

@down_skip_seconds_carry_down:
   ld     (hl), a                      ; 00:3A4B - 77
   dec    hl                           ; 00:3A4C - 2B
   ccf                                 ; 00:3A4D - 3F
   ld     a, (hl)                      ; 00:3A4E - 7E
   sbc    a, $00                       ; 00:3A4F - DE 00
   daa                                 ; 00:3A51 - 27
   cp     $60                          ; 00:3A52 - FE 60
   jr     c, @down_time_not_expired    ; 00:3A54 - 38 0A
   ld     a, $01                       ; 00:3A56 - 3E 01
   ld     (g_signpost_tickdown_counter), a  ; 00:3A58 - 32 89 D2
   set    2, (iy+var_D209-IYBASE)      ; 00:3A5B - FD CB 09 D6
   xor    a                            ; 00:3A5F - AF

@down_time_not_expired:
   ld     (hl), a                      ; 00:3A60 - 77
   ret                                 ; 00:3A61 - C9

UNK_03A62:
.db $01, $30, $00                                                                   ; 00:3A62

.IF 0
.ELSE
;; This is called 6 times.
fetch_PTRLUT_level_tile_flags:
   ld a, (var_D2D4)
   add a, a
   ld c, a
   ld b, $00
   ld hl, PTRLUT_level_tile_flags
   add hl, bc
   ld a, (hl)
   inc hl
   ld h, (hl)
   ld l, a
   ret
; SAVING: 52 bytes (incl. from other banks)
.ENDIF

PTRLUT_level_tile_flags:
.dw LVTILEFLAGS_GHZ, LVTILEFLAGS_BRI, LVTILEFLAGS_JUN, LVTILEFLAGS_LAB, LVTILEFLAGS_SCR, LVTILEFLAGS_SKY, LVTILEFLAGS_special, LVTILEFLAGS_SKY_3  ; 00:3A65

LVTILEFLAGS_GHZ:
.INCBIN "src/data/lv_ghz.tileflags"

LVTILEFLAGS_BRI:
.INCBIN "src/data/lv_bri.tileflags"

LVTILEFLAGS_JUN:
.INCBIN "src/data/lv_jun.tileflags"

LVTILEFLAGS_LAB:
.INCBIN "src/data/lv_lab.tileflags"

LVTILEFLAGS_SCR:
.INCBIN "src/data/lv_scr.tileflags"

LVTILEFLAGS_SKY:
.INCBIN "src/data/lv_sky.tileflags"

LVTILEFLAGS_special:
.INCBIN "src/data/lv_special.tileflags"

LVTILEFLAGS_SKY_3:
.INCBIN "src/data/lv_sky_3.tileflags"

LUT_3F90:
.db $00, $1C, $1C, $E4, $E4, $12, $12, $12, $EE, $EE, $EE, $00, $00, $00, $00, $00  ; 00:3F90
.db $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00  ; 00:3FA0
.db $00, $00, $00, $00, $00, $00, $00, $00, $00, $12, $EE, $00, $00, $00, $00       ; 00:3FB0

LUT_3FBF:
.db $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00  ; 00:3FBF
.db $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00  ; 00:3FCF
.db $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00  ; 00:3FDF
.db $00                                                                             ; 00:3FEF
.ENDS

.SECTION "Bank00_overflow_to_01" SLOT 0 BANK $00 FORCE ORG $3FF0
LUT_3FF0:
.db $00, $08, $08, $08, $08, $06, $06, $06, $06, $06, $06, $03, $03, $03, $03, $03  ; 00:3FF0
.ENDS

.SECTION "Bank01" SLOT 1 BANK $01 FORCE ORG $0000
.db $03, $08, $03, $03, $03, $03, $03, $03, $00, $00, $00, $00, $00, $00, $00, $00  ; 01:4000
.db $00, $00, $00, $00, $00, $00, $00, $03, $03, $04, $04, $03, $03, $03, $03, $00  ; 01:4010

;.dsb 7, 0 ; TEST: Force non-PI code to break. --GM

LUT_phys_tileflags_push_right:
.dw addr_0407E, addr_0407E, addr_0407E, addr_0407E, addr_0407E, addr_0407E, addr_0407E, addr_0407E  ; 01:4020
.dw addr_0407E, addr_0407E, addr_0407E, addr_0407E, addr_0407E, addr_0407E, addr_0407E, addr_0407E  ; 01:4030
.dw addr_0407E, addr_0407E, addr_0407E, addr_0407E, addr_0407E, addr_0407E, addr_0409E, addr_0407E  ; 01:4040
.dw addr_0407E, addr_0407E, addr_0407E, addr_0407E, addr_0407E, addr_0407E, addr_040BE, addr_0407E  ; 01:4050
.dw addr_0407E, addr_0407E, addr_0407E, addr_0407E, addr_0407E, addr_0407E, addr_0407E, addr_040DE  ; 01:4060
.dw addr_040FE, addr_0407E, addr_0407E, addr_0407E, addr_0407E, addr_0407E, addr_0407E  ; 01:4070

addr_0407E:
.db $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80  ; 01:407E
.db $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80  ; 01:408E

addr_0409E:
.db $1C, $1C, $1C, $1C, $1C, $1C, $1C, $1C, $1C, $1C, $1C, $1C, $1C, $1C, $1C, $1C  ; 01:409E
.db $1C, $1C, $1C, $1C, $1C, $1C, $1C, $1C, $1C, $1C, $1C, $1C, $1C, $1C, $1C, $1C  ; 01:40AE

addr_040BE:
.db $1C, $1C, $1C, $1C, $1C, $1C, $1C, $1C, $1C, $1C, $1C, $1C, $1C, $1C, $1C, $1C  ; 01:40BE
.db $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80  ; 01:40CE

addr_040DE:
.db $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80  ; 01:40DE
.db $1C, $1C, $1C, $1C, $1C, $1C, $1C, $1C, $1C, $1C, $1C, $1C, $1C, $1C, $1C, $1C  ; 01:40EE

addr_040FE:
.db $80, $80, $80, $80, $80, $80, $80, $80, $1C, $1C, $1C, $1C, $1C, $1C, $1C, $1C  ; 01:40FE
.db $1C, $1C, $1C, $1C, $1C, $1C, $1C, $1C, $80, $80, $80, $80, $80, $80, $80, $80  ; 01:410E

LUT_phys_tileflags_push_left:
.dw addr_0407E, addr_0407E, addr_0407E, addr_0407E, addr_0407E, addr_0407E, addr_0407E, addr_0407E  ; 01:411E
.dw addr_0407E, addr_0407E, addr_0407E, addr_0407E, addr_0407E, addr_0407E, addr_0407E, addr_0407E  ; 01:412E
.dw addr_0407E, addr_0407E, addr_0407E, addr_0407E, addr_0407E, addr_0407E, addr_0417C, addr_0407E  ; 01:413E
.dw addr_0407E, addr_0407E, addr_0407E, addr_0407E, addr_0407E, addr_0407E, addr_0418C, addr_0407E  ; 01:414E
.dw addr_0407E, addr_0407E, addr_0407E, addr_0407E, addr_0407E, addr_0407E, addr_0407E, addr_041AC  ; 01:415E
.dw addr_041CC, addr_0407E, addr_0407E, addr_0407E, addr_0407E, addr_0407E, addr_0407E  ; 01:416E

addr_0417C:
.db $04, $04, $04, $04, $04, $04, $04, $04, $04, $04, $04, $04, $04, $04, $04, $04  ; 01:417C

addr_0418C:
.db $04, $04, $04, $04, $04, $04, $04, $04, $04, $04, $04, $04, $04, $04, $04, $04  ; 01:418C
.db $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80  ; 01:419C

addr_041AC:
.db $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80  ; 01:41AC
.db $04, $04, $04, $04, $04, $04, $04, $04, $04, $04, $04, $04, $04, $04, $04, $04  ; 01:41BC

addr_041CC:
.db $80, $80, $80, $80, $80, $80, $80, $80, $04, $04, $04, $04, $04, $04, $04, $04  ; 01:41CC
.db $04, $04, $04, $04, $04, $04, $04, $04, $80, $80, $80, $80, $80, $80, $80, $80  ; 01:41DC

LUT_phys_tileflags_push_down:
.dw addr_0407E, addr_0407E, addr_0407E, addr_0407E, addr_0407E, addr_0407E, addr_0407E, addr_0407E  ; 01:41EC
.dw addr_0407E, addr_0407E, addr_0407E, addr_0407E, addr_0407E, addr_0407E, addr_0407E, addr_0407E  ; 01:41FC
.dw addr_0407E, addr_0407E, addr_0407E, addr_0407E, addr_0407E, addr_0407E, addr_0424A, addr_0407E  ; 01:420C
.dw addr_0426A, addr_0428A, addr_042AA, addr_042CA, addr_042EA, addr_0430A, addr_0432A, addr_0434A  ; 01:421C
.dw addr_0436A, addr_0438A, addr_043AA, addr_043CA, addr_043EA, addr_0440A, addr_0442A, addr_0444A  ; 01:422C
.dw addr_0446A, addr_0407E, addr_0407E, addr_0407E, addr_0407E, addr_0407E, addr_0407E  ; 01:423C

addr_0424A:
.db $1F, $1F, $1F, $1F, $1F, $1F, $1F, $1F, $1F, $1F, $1F, $1F, $1F, $1F, $1F, $1F  ; 01:424A
.db $1F, $1F, $1F, $1F, $1F, $1F, $1F, $1F, $1F, $1F, $1F, $1F, $1F, $1F, $1F, $1F  ; 01:425A

addr_0426A:
.db $18, $18, $17, $17, $16, $16, $15, $15, $14, $14, $13, $13, $12, $12, $11, $11  ; 01:426A
.db $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10  ; 01:427A

addr_0428A:
.db $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10  ; 01:428A
.db $11, $11, $12, $12, $13, $13, $14, $14, $15, $15, $16, $16, $17, $17, $18, $18  ; 01:429A

addr_042AA:
.db $0F, $0E, $0D, $0C, $0B, $0A, $09, $08, $07, $06, $05, $04, $03, $02, $01, $00  ; 01:42AA
.db $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80  ; 01:42BA

addr_042CA:
.db $2F, $2E, $2D, $2C, $2B, $2A, $29, $28, $27, $26, $25, $24, $23, $22, $21, $20  ; 01:42CA
.db $1F, $1E, $1D, $1C, $1B, $1A, $19, $18, $17, $16, $15, $14, $13, $12, $11, $10  ; 01:42DA

addr_042EA:
.db $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $1A, $1B, $1C, $1D, $1E, $1F  ; 01:42EA
.db $20, $21, $22, $23, $24, $25, $26, $27, $28, $29, $2A, $2B, $2C, $2D, $2E, $2F  ; 01:42FA

addr_0430A:
.db $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80  ; 01:430A
.db $00, $01, $02, $03, $04, $05, $06, $07, $08, $09, $0A, $0B, $0C, $0D, $0E, $0F  ; 01:431A

addr_0432A:
.db $0F, $0F, $0F, $0F, $0F, $0F, $0F, $0F, $0F, $0F, $0F, $0F, $0F, $0F, $0F, $0F  ; 01:432A
.db $0F, $0F, $0F, $0F, $0F, $0F, $0F, $0F, $0F, $0F, $0F, $0F, $0F, $0F, $0F, $0F  ; 01:433A

addr_0434A:
.db $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80  ; 01:434A
.db $00, $00, $01, $01, $02, $02, $03, $03, $04, $04, $05, $05, $06, $06, $07, $07  ; 01:435A

addr_0436A:
.db $08, $08, $09, $09, $0A, $0A, $0B, $0B, $0C, $0C, $0D, $0D, $0E, $0E, $0F, $0F  ; 01:436A
.db $10, $10, $11, $11, $12, $12, $13, $13, $14, $14, $15, $15, $16, $16, $17, $17  ; 01:437A

addr_0438A:
.db $18, $18, $19, $19, $1A, $1A, $1B, $1B, $1C, $1C, $1D, $1D, $1E, $1E, $1F, $1F  ; 01:438A
.db $20, $20, $21, $21, $22, $22, $23, $23, $24, $24, $25, $25, $26, $26, $27, $27  ; 01:439A

addr_043AA:
.db $27, $27, $26, $26, $25, $25, $24, $24, $23, $23, $22, $22, $21, $21, $20, $20  ; 01:43AA
.db $1F, $1F, $1E, $1E, $1D, $1D, $1C, $1C, $1B, $1B, $1A, $1A, $19, $19, $18, $18  ; 01:43BA

addr_043CA:
.db $17, $17, $16, $16, $15, $15, $14, $14, $13, $13, $12, $12, $11, $11, $10, $10  ; 01:43CA
.db $0F, $0F, $0E, $0E, $0D, $0D, $0C, $0C, $0B, $0B, $0A, $0A, $09, $09, $08, $08  ; 01:43DA

addr_043EA:
.db $07, $07, $06, $06, $05, $05, $04, $04, $03, $03, $02, $02, $01, $01, $00, $00  ; 01:43EA
.db $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80  ; 01:43FA

addr_0440A:
.db $08, $08, $09, $09, $0A, $0A, $0B, $0B, $0C, $0C, $0D, $0D, $0E, $0E, $0F, $0F  ; 01:440A
.db $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10  ; 01:441A

addr_0442A:
.db $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10  ; 01:442A
.db $0F, $0F, $0E, $0E, $0D, $0D, $0C, $0C, $0B, $0B, $0A, $0A, $09, $09, $08, $08  ; 01:443A

addr_0444A:
.db $1F, $1F, $1F, $1F, $1F, $1F, $1F, $1F, $1F, $1F, $1F, $1F, $1F, $1F, $1F, $1F  ; 01:444A
.db $1F, $1F, $1F, $1F, $1F, $1F, $1F, $1F, $1F, $1F, $1F, $1F, $1F, $1F, $1F, $1F  ; 01:445A

addr_0446A:
.db $17, $17, $17, $17, $17, $17, $17, $17, $17, $17, $17, $17, $17, $17, $17, $17  ; 01:446A
.db $17, $17, $17, $17, $17, $17, $17, $17, $17, $17, $17, $17, $17, $17, $17, $17  ; 01:447A

LUT_phys_tileflags_push_up:
.dw addr_0407E, addr_044E8, addr_04508, addr_04528, addr_04548, addr_04568, addr_04588, addr_045A8  ; 01:448A
.dw addr_045C8, addr_045E8, addr_04608, addr_04628, addr_04648, addr_04668, addr_04688, addr_046A8  ; 01:449A
.dw addr_046C8, addr_046E8, addr_04708, addr_04728, addr_04748, addr_04768, addr_04788, addr_047A8  ; 01:44AA
.dw addr_0407E, addr_0407E, addr_0407E, addr_0407E, addr_0407E, addr_0407E, addr_0407E, addr_0407E  ; 01:44BA
.dw addr_0407E, addr_0407E, addr_0407E, addr_0407E, addr_0407E, addr_0407E, addr_0407E, addr_047C8  ; 01:44CA
.dw addr_047E8, addr_04808, addr_04828, addr_04848, addr_04868, addr_04888, addr_048A8  ; 01:44DA

addr_044E8:
.db $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $1A, $1B, $1C, $1D, $1E, $1F  ; 01:44E8
.db $20, $21, $22, $23, $24, $25, $26, $27, $28, $29, $2A, $2B, $2C, $2D, $2E, $2F  ; 01:44F8

addr_04508:
.db $F0, $F1, $F2, $F3, $F4, $F5, $F6, $F7, $F8, $F9, $FA, $FB, $FC, $FD, $FE, $FF  ; 01:4508
.db $00, $01, $02, $03, $04, $05, $06, $07, $08, $09, $0A, $0B, $0C, $0D, $0E, $0F  ; 01:4518

addr_04528:
.db $0F, $0E, $0D, $0C, $0B, $0A, $09, $08, $07, $06, $05, $04, $03, $02, $01, $00  ; 01:4528
.db $FF, $FE, $FD, $FC, $FB, $FA, $F9, $F8, $F7, $F6, $F5, $F4, $F3, $F2, $F1, $F0  ; 01:4538

addr_04548:
.db $2F, $2E, $2D, $2C, $2B, $2A, $29, $28, $27, $26, $25, $24, $23, $22, $21, $20  ; 01:4548
.db $1F, $1E, $1D, $1C, $1B, $1A, $19, $18, $17, $16, $15, $14, $13, $12, $11, $10  ; 01:4558

addr_04568:
.db $F8, $F8, $F9, $F9, $FA, $FA, $FB, $FB, $FC, $FC, $FD, $FD, $FE, $FE, $FF, $FF  ; 01:4568
.db $00, $00, $01, $01, $02, $02, $03, $03, $04, $04, $05, $05, $06, $06, $07, $07  ; 01:4578

addr_04588:
.db $08, $08, $09, $09, $0A, $0A, $0B, $0B, $0C, $0C, $0D, $0D, $0E, $0E, $0F, $0F  ; 01:4588
.db $10, $10, $11, $11, $12, $12, $13, $13, $14, $14, $15, $15, $16, $16, $17, $17  ; 01:4598

addr_045A8:
.db $18, $18, $19, $19, $1A, $1A, $1B, $1B, $1C, $1C, $1D, $1D, $1E, $1E, $1F, $1F  ; 01:45A8
.db $20, $20, $21, $21, $22, $22, $23, $23, $24, $24, $25, $25, $26, $26, $27, $27  ; 01:45B8

addr_045C8:
.db $27, $27, $26, $26, $25, $25, $24, $24, $23, $23, $22, $22, $21, $21, $20, $20  ; 01:45C8
.db $1F, $1F, $1E, $1E, $1D, $1D, $1C, $1C, $1B, $1B, $1A, $1A, $19, $19, $18, $18  ; 01:45D8

addr_045E8:
.db $17, $17, $16, $16, $15, $15, $14, $14, $13, $13, $12, $12, $11, $11, $10, $10  ; 01:45E8
.db $0F, $0F, $0E, $0E, $0D, $0D, $0C, $0C, $0B, $0B, $0A, $0A, $09, $09, $08, $08  ; 01:45F8

addr_04608:
.db $07, $07, $06, $06, $05, $05, $04, $04, $03, $03, $02, $02, $01, $01, $00, $00  ; 01:4608
.db $FF, $FF, $FE, $FE, $FD, $FD, $FC, $FC, $FB, $FB, $FA, $FA, $F9, $F9, $F8, $F8  ; 01:4618

addr_04628:
.db $10, $10, $10, $10, $10, $10, $10, $11, $11, $11, $11, $11, $12, $12, $12, $12  ; 01:4628
.db $12, $12, $12, $12, $12, $11, $11, $11, $11, $11, $10, $10, $10, $10, $10, $10  ; 01:4638

addr_04648:
.db $10, $10, $10, $10, $10, $10, $10, $11, $11, $11, $11, $11, $12, $12, $12, $12  ; 01:4648
.db $13, $13, $13, $14, $14, $15, $15, $15, $16, $16, $16, $17, $17, $17, $17, $17  ; 01:4658

addr_04668:
.db $17, $17, $17, $17, $17, $16, $16, $16, $15, $15, $15, $14, $14, $13, $13, $13  ; 01:4668
.db $12, $12, $12, $12, $11, $11, $11, $11, $11, $10, $10, $10, $10, $10, $10, $10  ; 01:4678

addr_04688:
.db $08, $08, $08, $08, $08, $08, $08, $09, $09, $09, $09, $09, $0A, $0A, $0A, $0A  ; 01:4688
.db $0B, $0B, $0B, $0C, $0C, $0D, $0D, $0D, $0E, $0E, $0E, $0F, $0F, $0F, $0F, $0F  ; 01:4698

addr_046A8:
.db $0F, $0F, $0F, $0F, $0F, $0E, $0E, $0E, $0D, $0D, $0D, $0C, $0C, $0B, $0B, $0B  ; 01:46A8
.db $0A, $0A, $0A, $0A, $09, $09, $09, $09, $09, $08, $08, $08, $08, $08, $08, $08  ; 01:46B8

addr_046C8:
.db $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10  ; 01:46C8
.db $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10  ; 01:46D8

addr_046E8:
.db $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $19, $1A, $1A, $1A, $1B, $1B  ; 01:46E8
.db $1B, $1B, $1B, $1A, $1A, $1A, $19, $19, $18, $17, $16, $14, $11, $10, $10, $10  ; 01:46F8

addr_04708:
.db $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10  ; 01:4708
.db $11, $11, $12, $12, $13, $13, $14, $14, $15, $15, $16, $16, $17, $17, $18, $18  ; 01:4718

addr_04728:
.db $18, $18, $17, $17, $16, $16, $15, $15, $14, $14, $13, $13, $12, $12, $11, $11  ; 01:4728
.db $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10  ; 01:4738

addr_04748:
.db $08, $08, $09, $09, $0A, $0A, $0B, $0B, $0C, $0C, $0D, $0D, $0E, $0E, $0F, $0F  ; 01:4748
.db $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10  ; 01:4758

addr_04768:
.db $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10  ; 01:4768
.db $0F, $0F, $0E, $0E, $0D, $0D, $0C, $0C, $0B, $0B, $0A, $0A, $09, $09, $08, $08  ; 01:4778

addr_04788:
.db $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF  ; 01:4788
.db $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF  ; 01:4798

addr_047A8:
.db $08, $08, $08, $08, $09, $09, $09, $09, $0A, $0A, $0A, $0A, $0B, $0B, $0B, $0B  ; 01:47A8
.db $0B, $0B, $0B, $0B, $0A, $0A, $0A, $0A, $09, $09, $09, $09, $08, $08, $08, $08  ; 01:47B8

addr_047C8:
.db $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10  ; 01:47C8
.db $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10  ; 01:47D8

addr_047E8:
.db $08, $08, $08, $08, $08, $08, $08, $08, $08, $08, $08, $08, $08, $08, $08, $08  ; 01:47E8
.db $08, $08, $08, $08, $08, $08, $08, $08, $08, $08, $08, $08, $08, $08, $08, $08  ; 01:47F8

addr_04808:
.db $08, $08, $08, $08, $09, $09, $09, $09, $0A, $0A, $0A, $0A, $0B, $0B, $0B, $0B  ; 01:4808
.db $0C, $0C, $0C, $0C, $0D, $0D, $0D, $0D, $0E, $0E, $0E, $0E, $0F, $0F, $0F, $0F  ; 01:4818

addr_04828:
.db $0F, $0F, $0F, $0F, $0E, $0E, $0E, $0E, $0D, $0D, $0D, $0D, $0C, $0C, $0C, $0C  ; 01:4828
.db $0B, $0B, $0B, $0B, $0A, $0A, $0A, $0A, $09, $09, $09, $09, $08, $08, $08, $08  ; 01:4838

addr_04848:
.db $07, $07, $06, $06, $05, $05, $04, $04, $03, $03, $02, $02, $01, $01, $00, $00  ; 01:4848
.db $00, $00, $01, $01, $02, $02, $03, $03, $04, $04, $05, $05, $06, $06, $07, $07  ; 01:4858

addr_04868:
.db $08, $08, $08, $08, $09, $09, $09, $09, $0A, $0A, $0A, $0A, $0B, $0B, $0C, $0C  ; 01:4868
.db $0C, $0C, $0B, $0B, $0A, $0A, $0A, $0A, $09, $09, $09, $09, $08, $08, $08, $08  ; 01:4878

addr_04888:
.db $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80  ; 01:4888
.db $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10  ; 01:4898

addr_048A8:
.db $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10, $10  ; 01:48A8
.db $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80, $80  ; 01:48B8

objfunc_00_UNKNOWN:
   res    1, (iy+var_D208-IYBASE)      ; 01:48C8 - FD CB 08 8E
   bit    7, (ix+24)                   ; 01:48CC - DD CB 18 7E
   call   nz, addr_04E88               ; 01:48D0 - C4 88 4E
   set    7, (iy+var_D207-IYBASE)      ; 01:48D3 - FD CB 07 FE
   bit    0, (iy+var_D205-IYBASE)      ; 01:48D7 - FD CB 05 46
   jp     nz, addr_0543C               ; 01:48DB - C2 3C 54
   ld     a, (var_D412)                ; 01:48DE - 3A 12 D4
   and    a                            ; 01:48E1 - A7
   call   nz, addr_04FF0               ; 01:48E2 - C4 F0 4F
   res    5, (ix+24)                   ; 01:48E5 - DD CB 18 AE
   bit    6, (iy+var_D206-IYBASE)      ; 01:48E9 - FD CB 06 76
   call   nz, addr_0510A               ; 01:48ED - C4 0A 51
   ld     a, (var_D28C)                ; 01:48F0 - 3A 8C D2
   and    a                            ; 01:48F3 - A7
   call   nz, addr_0568F               ; 01:48F4 - C4 8F 56
   bit    0, (iy+var_D207-IYBASE)      ; 01:48F7 - FD CB 07 46
   call   nz, addr_05100               ; 01:48FB - C4 00 51
   bit    0, (iy+var_D208-IYBASE)      ; 01:48FE - FD CB 08 46
   call   nz, addr_04FF5               ; 01:4902 - C4 F5 4F
   bit    4, (ix+24)                   ; 01:4905 - DD CB 18 66
   call   nz, addr_05009               ; 01:4909 - C4 09 50
   ld     a, (var_D28B)                ; 01:490C - 3A 8B D2
   and    a                            ; 01:490F - A7
   call   nz, addr_05285               ; 01:4910 - C4 85 52
   ld     a, (var_D28A)                ; 01:4913 - 3A 8A D2
   and    a                            ; 01:4916 - A7
   jp     nz, addr_05117               ; 01:4917 - C2 17 51
   bit    6, (iy+var_D208-IYBASE)      ; 01:491A - FD CB 08 76
   jp     nz, addr_05193               ; 01:491E - C2 93 51
   bit    7, (iy+var_D208-IYBASE)      ; 01:4921 - FD CB 08 7E
   call   nz, addr_0529C               ; 01:4925 - C4 9C 52
   bit    4, (ix+24)                   ; 01:4928 - DD CB 18 66
   jp     z, addr_0494F                ; 01:492C - CA 4F 49
   ld     hl, UNK_4DDD                 ; 01:492F - 21 DD 4D
   ld     de, g_FF_string_high_byte    ; 01:4932 - 11 0E D2
   ld     bc, $0009                    ; 01:4935 - 01 09 00
   ldir                                ; 01:4938 - ED B0
   ld     hl, $0100                    ; 01:493A - 21 00 01
   ld     (var_D240), hl               ; 01:493D - 22 40 D2
   ld     hl, $FD80                    ; 01:4940 - 21 80 FD
   ld     (var_D242), hl               ; 01:4943 - 22 42 D2
   ld     hl, $0010                    ; 01:4946 - 21 10 00
   ld     (var_D244), hl               ; 01:4949 - 22 44 D2
   jp     addr_049D9                   ; 01:494C - C3 D9 49

addr_0494F:
   ld     a, (ix+21)                   ; 01:494F - DD 7E 15
   and    a                            ; 01:4952 - A7
   jr     nz, addr_049AD               ; 01:4953 - 20 58
   bit    0, (iy+var_D207-IYBASE)      ; 01:4955 - FD CB 07 46
   jr     nz, addr_04981               ; 01:4959 - 20 26

addr_0495B:
   ld     hl, UNK_4DCB                 ; 01:495B - 21 CB 4D
   ld     de, g_FF_string_high_byte    ; 01:495E - 11 0E D2
   ld     bc, $0009                    ; 01:4961 - 01 09 00
   ldir                                ; 01:4964 - ED B0
   ld     hl, $0300                    ; 01:4966 - 21 00 03
   ld     (var_D240), hl               ; 01:4969 - 22 40 D2
   ld     hl, $FC80                    ; 01:496C - 21 80 FC
   ld     (var_D242), hl               ; 01:496F - 22 42 D2
   ld     hl, $0038                    ; 01:4972 - 21 38 00
   ld     (var_D244), hl               ; 01:4975 - 22 44 D2
   ld     hl, (var_DC0C)               ; 01:4978 - 2A 0C DC
   ld     (var_DC0A), hl               ; 01:497B - 22 0A DC
   jp     addr_049D9                   ; 01:497E - C3 D9 49

addr_04981:
   bit    7, (ix+24)                   ; 01:4981 - DD CB 18 7E
   jr     nz, addr_0495B               ; 01:4985 - 20 D4
   ld     hl, UNK_4DD4                 ; 01:4987 - 21 D4 4D
   ld     de, g_FF_string_high_byte    ; 01:498A - 11 0E D2
   ld     bc, $0009                    ; 01:498D - 01 09 00
   ldir                                ; 01:4990 - ED B0
   ld     hl, $0C00                    ; 01:4992 - 21 00 0C
   ld     (var_D240), hl               ; 01:4995 - 22 40 D2
   ld     hl, $FC80                    ; 01:4998 - 21 80 FC
   ld     (var_D242), hl               ; 01:499B - 22 42 D2
   ld     hl, $0038                    ; 01:499E - 21 38 00
   ld     (var_D244), hl               ; 01:49A1 - 22 44 D2
   ld     hl, (var_DC0C)               ; 01:49A4 - 2A 0C DC
   ld     (var_DC0A), hl               ; 01:49A7 - 22 0A DC
   jp     addr_049D9                   ; 01:49AA - C3 D9 49

addr_049AD:
   ld     hl, UNK_4DE6                 ; 01:49AD - 21 E6 4D
   ld     de, g_FF_string_high_byte    ; 01:49B0 - 11 0E D2
   ld     bc, $0009                    ; 01:49B3 - 01 09 00
   ldir                                ; 01:49B6 - ED B0
   ld     hl, $0600                    ; 01:49B8 - 21 00 06
   ld     (var_D240), hl               ; 01:49BB - 22 40 D2
   ld     hl, $FC80                    ; 01:49BE - 21 80 FC
   ld     (var_D242), hl               ; 01:49C1 - 22 42 D2
   ld     hl, $0038                    ; 01:49C4 - 21 38 00
   ld     (var_D244), hl               ; 01:49C7 - 22 44 D2
   ld     hl, (var_DC0C)               ; 01:49CA - 2A 0C DC
   inc    hl                           ; 01:49CD - 23
   ld     (var_DC0A), hl               ; 01:49CE - 22 0A DC
   ld     a, (var_D223)                ; 01:49D1 - 3A 23 D2
   and    $03                          ; 01:49D4 - E6 03
   call   z, addr_04FEC                ; 01:49D6 - CC EC 4F

addr_049D9:
   bit    1, (iy+g_inputs_player_1-IYBASE)  ; 01:49D9 - FD CB 03 4E
   call   z, addr_050C1                ; 01:49DD - CC C1 50
   bit    1, (iy+g_inputs_player_1-IYBASE)  ; 01:49E0 - FD CB 03 4E
   call   nz, addr_050E3               ; 01:49E4 - C4 E3 50
   ld     a, $0F                       ; 01:49E7 - 3E 0F
   .IF 0
   ;; BUGFIX: PAGERACE: Race condition, defeatable with a well-timed interrupt. Swapped ops around to fix.
   ld     (g_committed_rompage_2), a   ; 01:49EC - 32 36 D2
   ld     (rompage_2), a               ; 01:49E9 - 32 FF FF
   .ELSE
   call set_slot_2
   .ENDIF
   ld     bc, $000C                    ; 01:49EF - 01 0C 00
   ld     de, $0010                    ; 01:49F2 - 11 10 00
   call   addr_036F9                   ; 01:49F5 - CD F9 36
   ld     e, (hl)                      ; 01:49F8 - 5E
   ld     d, $00                       ; 01:49F9 - 16 00
   ld     a, (var_D2D4)                ; 01:49FB - 3A D4 D2
   add    a, a                         ; 01:49FE - 87
   ld     l, a                         ; 01:49FF - 6F
   ld     h, d                         ; 01:4A00 - 62
   ld     bc, $B9ED                    ; 01:4A01 - 01 ED B9
   add    hl, bc                       ; 01:4A04 - 09
   ld     a, (hl)                      ; 01:4A05 - 7E
   inc    hl                           ; 01:4A06 - 23
   ld     h, (hl)                      ; 01:4A07 - 66
   ld     l, a                         ; 01:4A08 - 6F
   add    hl, de                       ; 01:4A09 - 19
   add    hl, bc                       ; 01:4A0A - 09
   ld     a, (hl)                      ; 01:4A0B - 7E
   cp     $1C                          ; 01:4A0C - FE 1C
   jr     nc, addr_04A28               ; 01:4A0E - 30 18
   add    a, a                         ; 01:4A10 - 87
   ld     l, a                         ; 01:4A11 - 6F
   ld     h, d                         ; 01:4A12 - 62
   ld     de, LUT_058E5                ; 01:4A13 - 11 E5 58
   add    hl, de                       ; 01:4A16 - 19
   ld     a, (hl)                      ; 01:4A17 - 7E
   inc    hl                           ; 01:4A18 - 23
   ld     h, (hl)                      ; 01:4A19 - 66
   ld     l, a                         ; 01:4A1A - 6F
   ld     de, addr_04A28               ; 01:4A1B - 11 28 4A
   ld     a, $02                       ; 01:4A1E - 3E 02
   ;; BUGFIX: PAGERACE: Race condition, defeatable with a well-timed interrupt. Swapped ops around to fix.
   .IF 0
   ld     (g_committed_rompage_2), a   ; 01:4A23 - 32 36 D2
   ld     (rompage_2), a               ; 01:4A20 - 32 FF FF
   .ELSE
   call set_slot_2
   .ENDIF
   push   de                           ; 01:4A26 - D5
   jp     (hl)                         ; 01:4A27 - E9

addr_04A28:
   ld     hl, (sonic_y)                ; 01:4A28 - 2A 01 D4
   ld     de, $0024                    ; 01:4A2B - 11 24 00
   add    hl, de                       ; 01:4A2E - 19
   ex     de, hl                       ; 01:4A2F - EB
   ld     hl, (var_D279)               ; 01:4A30 - 2A 79 D2
   ld     bc, $00C0                    ; 01:4A33 - 01 C0 00
   add    hl, bc                       ; 01:4A36 - 09
   xor    a                            ; 01:4A37 - AF
   sbc    hl, de                       ; 01:4A38 - ED 52
   call   c, kill_sonic                ; 01:4A3A - DC 18 36
   ld     hl, $0000                    ; 01:4A3D - 21 00 00
   ld     a, (iy+g_inputs_player_1-IYBASE)  ; 01:4A40 - FD 7E 03
   cp     $FF                          ; 01:4A43 - FE FF
   jr     nz, addr_04A59               ; 01:4A45 - 20 12
   ld     de, (sonic_vel_x_sub)        ; 01:4A47 - ED 5B 03 D4
   ld     a, e                         ; 01:4A4B - 7B
   or     d                            ; 01:4A4C - B2
   jr     nz, addr_04A59               ; 01:4A4D - 20 0A
   ld     a, (var_D414)                ; 01:4A4F - 3A 14 D4
   rlca                                ; 01:4A52 - 07
   jr     nc, addr_04A59               ; 01:4A53 - 30 04
   ld     hl, (var_D299)               ; 01:4A55 - 2A 99 D2
   inc    hl                           ; 01:4A58 - 23

addr_04A59:
   ld     (var_D299), hl               ; 01:4A59 - 22 99 D2
   bit    7, (iy+var_D206-IYBASE)      ; 01:4A5C - FD CB 06 7E
   call   nz, addr_050E8               ; 01:4A60 - C4 E8 50
   ld     (ix+20), $05                 ; 01:4A63 - DD 36 14 05
   ld     hl, (var_D299)               ; 01:4A67 - 2A 99 D2
   ld     de, $0168                    ; 01:4A6A - 11 68 01
   and    a                            ; 01:4A6D - A7
   sbc    hl, de                       ; 01:4A6E - ED 52
   call   nc, addr_05105               ; 01:4A70 - D4 05 51
   ld     a, (iy+g_inputs_player_1-IYBASE)  ; 01:4A73 - FD 7E 03
   cp     $FE                          ; 01:4A76 - FE FE
   call   z, addr_04EDD                ; 01:4A78 - CC DD 4E
   bit    0, (iy+g_inputs_player_1-IYBASE)  ; 01:4A7B - FD CB 03 46
   call   nz, addr_04FD3               ; 01:4A7F - C4 D3 4F
   bit    0, (ix+24)                   ; 01:4A82 - DD CB 18 46
   jp     nz, addr_0532E               ; 01:4A86 - C2 2E 53
   ld     a, (ix+14)                   ; 01:4A89 - DD 7E 0E
   cp     $20                          ; 01:4A8C - FE 20
   jr     z, addr_04A9A                ; 01:4A8E - 28 0A
   ld     hl, (sonic_y)                ; 01:4A90 - 2A 01 D4
   ld     de, $FFF8                    ; 01:4A93 - 11 F8 FF
   add    hl, de                       ; 01:4A96 - 19
   ld     (sonic_y), hl                ; 01:4A97 - 22 01 D4

addr_04A9A:
   ld     (ix+13), $18                 ; 01:4A9A - DD 36 0D 18
   ld     (ix+14), $20                 ; 01:4A9E - DD 36 0E 20
   ld     hl, (sonic_vel_x_sub)        ; 01:4AA2 - 2A 03 D4
   ld     b, (ix+9)                    ; 01:4AA5 - DD 46 09
   ld     c, $00                       ; 01:4AA8 - 0E 00
   ld     e, c                         ; 01:4AAA - 59
   ld     d, c                         ; 01:4AAB - 51
   ;; Is right button held?
   bit    3, (iy+g_inputs_player_1-IYBASE)  ; 01:4AAC - FD CB 03 5E
   jp     z, addr_04F01                ; 01:4AB0 - CA 01 4F
   ;; Is left button held?
   bit    2, (iy+g_inputs_player_1-IYBASE)  ; 01:4AB3 - FD CB 03 56
   jp     z, addr_04F5C                ; 01:4AB7 - CA 5C 4F
   ld     a, h                         ; 01:4ABA - 7C
   or     l                            ; 01:4ABB - B5
   or     b                            ; 01:4ABC - B0
   jr     z, addr_04B1B                ; 01:4ABD - 28 5C
   ld     (ix+20), $01                 ; 01:4ABF - DD 36 14 01
   bit    7, b                         ; 01:4AC3 - CB 78
   jr     nz, addr_04AF7               ; 01:4AC5 - 20 30
   ld     de, (var_D212)               ; 01:4AC7 - ED 5B 12 D2
   ld     a, e                         ; 01:4ACB - 7B
   cpl                                 ; 01:4ACC - 2F
   ld     e, a                         ; 01:4ACD - 5F
   ld     a, d                         ; 01:4ACE - 7A
   cpl                                 ; 01:4ACF - 2F
   ld     d, a                         ; 01:4AD0 - 57
   inc    de                           ; 01:4AD1 - 13
   ld     c, $FF                       ; 01:4AD2 - 0E FF
   push   hl                           ; 01:4AD4 - E5
   push   de                           ; 01:4AD5 - D5
   ld     de, (var_D240)               ; 01:4AD6 - ED 5B 40 D2
   xor    a                            ; 01:4ADA - AF
   sbc    hl, de                       ; 01:4ADB - ED 52
   pop    de                           ; 01:4ADD - D1
   pop    hl                           ; 01:4ADE - E1
   jr     c, addr_04B1B                ; 01:4ADF - 38 3A
   ld     de, (g_FF_string_high_byte)  ; 01:4AE1 - ED 5B 0E D2
   ld     a, e                         ; 01:4AE5 - 7B
   cpl                                 ; 01:4AE6 - 2F
   ld     e, a                         ; 01:4AE7 - 5F
   ld     a, d                         ; 01:4AE8 - 7A
   cpl                                 ; 01:4AE9 - 2F
   ld     d, a                         ; 01:4AEA - 57
   inc    de                           ; 01:4AEB - 13
   ld     c, $FF                       ; 01:4AEC - 0E FF
   ld     a, (var_D216)                ; 01:4AEE - 3A 16 D2
   ld     (ix+20), a                   ; 01:4AF1 - DD 77 14
   jp     addr_04B1B                   ; 01:4AF4 - C3 1B 4B

addr_04AF7:
   ld     de, (var_D212)               ; 01:4AF7 - ED 5B 12 D2
   ld     c, $00                       ; 01:4AFB - 0E 00
   push   hl                           ; 01:4AFD - E5
   push   de                           ; 01:4AFE - D5
   ld     a, l                         ; 01:4AFF - 7D
   cpl                                 ; 01:4B00 - 2F
   ld     l, a                         ; 01:4B01 - 6F
   ld     a, h                         ; 01:4B02 - 7C
   cpl                                 ; 01:4B03 - 2F
   ld     h, a                         ; 01:4B04 - 67
   inc    hl                           ; 01:4B05 - 23
   ld     de, (var_D240)               ; 01:4B06 - ED 5B 40 D2
   xor    a                            ; 01:4B0A - AF
   sbc    hl, de                       ; 01:4B0B - ED 52
   pop    de                           ; 01:4B0D - D1
   pop    hl                           ; 01:4B0E - E1
   jr     c, addr_04B1B                ; 01:4B0F - 38 0A
   ld     de, (g_FF_string_high_byte)  ; 01:4B11 - ED 5B 0E D2
   ld     a, (var_D216)                ; 01:4B15 - 3A 16 D2
   ld     (ix+20), a                   ; 01:4B18 - DD 77 14

addr_04B1B:
   ld     a, b                         ; 01:4B1B - 78
   and    a                            ; 01:4B1C - A7
   jp     m, addr_04B38                ; 01:4B1D - FA 38 4B
   add    hl, de                       ; 01:4B20 - 19
   adc    a, c                         ; 01:4B21 - 89
   ld     c, a                         ; 01:4B22 - 4F
   jp     p, addr_04B42                ; 01:4B23 - F2 42 4B
   ld     a, (sonic_vel_x_sub)         ; 01:4B26 - 3A 03 D4
   or     (ix+8)                       ; 01:4B29 - DD B6 08
   or     (ix+9)                       ; 01:4B2C - DD B6 09
   jr     z, addr_04B42                ; 01:4B2F - 28 11
   ld     c, $00                       ; 01:4B31 - 0E 00
   ld     l, c                         ; 01:4B33 - 69
   ld     h, c                         ; 01:4B34 - 61
   jp     addr_04B42                   ; 01:4B35 - C3 42 4B

addr_04B38:
   add    hl, de                       ; 01:4B38 - 19
   adc    a, c                         ; 01:4B39 - 89
   ld     c, a                         ; 01:4B3A - 4F
   jp     m, addr_04B42                ; 01:4B3B - FA 42 4B
   ld     c, $00                       ; 01:4B3E - 0E 00
   ld     l, c                         ; 01:4B40 - 69
   ld     h, c                         ; 01:4B41 - 61

addr_04B42:
   ld     a, c                         ; 01:4B42 - 79
   ld     (sonic_vel_x_sub), hl        ; 01:4B43 - 22 03 D4
   ld     (sonic_vel_x_hi), a          ; 01:4B46 - 32 05 D4

addr_04B49:
   ld     hl, (sonic_vel_y_sub)        ; 01:4B49 - 2A 06 D4
   ld     b, (ix+12)                   ; 01:4B4C - DD 46 0C
   ld     c, $00                       ; 01:4B4F - 0E 00
   ld     e, c                         ; 01:4B51 - 59
   ld     d, c                         ; 01:4B52 - 51
   bit    7, (ix+24)                   ; 01:4B53 - DD CB 18 7E
   call   nz, addr_050AF               ; 01:4B57 - C4 AF 50
   bit    0, (ix+24)                   ; 01:4B5A - DD CB 18 46
   jp     nz, addr_05407               ; 01:4B5E - C2 07 54
   ld     a, (var_D28E)                ; 01:4B61 - 3A 8E D2
   and    a                            ; 01:4B64 - A7
   jr     nz, addr_04B79               ; 01:4B65 - 20 12
   bit    7, (ix+24)                   ; 01:4B67 - DD CB 18 7E
   jr     z, addr_04B9D                ; 01:4B6B - 28 30
   bit    3, (ix+24)                   ; 01:4B6D - DD CB 18 5E
   jr     nz, addr_04B79               ; 01:4B71 - 20 06
   ;; RESEARCH NOTE: If we got here, we were landing with the jump button pressed.
   bit    5, (iy+g_inputs_player_1-IYBASE)  ; 01:4B73 - FD CB 03 6E
   jr     z, addr_04B9D                ; 01:4B77 - 28 24

addr_04B79:
   bit    5, (iy+g_inputs_player_1-IYBASE)  ; 01:4B79 - FD CB 03 6E
   jr     nz, addr_04BA4               ; 01:4B7D - 20 25

addr_04B7F:
   ld     a, (var_D28E)                ; 01:4B7F - 3A 8E D2
   and    a                            ; 01:4B82 - A7
   call   z, addr_0509D                ; 01:4B83 - CC 9D 50
   ld     hl, (var_D242)               ; 01:4B86 - 2A 42 D2
   ld     b, $FF                       ; 01:4B89 - 06 FF
   ld     c, $00                       ; 01:4B8B - 0E 00
   ld     e, c                         ; 01:4B8D - 59
   ld     d, c                         ; 01:4B8E - 51
   ld     a, (var_D28E)                ; 01:4B8F - 3A 8E D2
   dec    a                            ; 01:4B92 - 3D
   ld     (var_D28E), a                ; 01:4B93 - 32 8E D2
   set    2, (ix+24)                   ; 01:4B96 - DD CB 18 D6
   jp     addr_04BBE                   ; 01:4B9A - C3 BE 4B

addr_04B9D:
   ;; Suppress jumping.
   res    3, (ix+24)                   ; 01:4B9D - DD CB 18 9E
   jp     addr_04BA8                   ; 01:4BA1 - C3 A8 4B

addr_04BA4:
   ;; Allow jumping.
   set    3, (ix+24)                   ; 01:4BA4 - DD CB 18 DE

addr_04BA8:
   xor    a                            ; 01:4BA8 - AF
   ld     (var_D28E), a                ; 01:4BA9 - 32 8E D2

addr_04BAC:
   bit    7, h                         ; 01:4BAC - CB 7C
   jr     nz, addr_04BB8               ; 01:4BAE - 20 08
   ld     a, (var_D215)                ; 01:4BB0 - 3A 15 D2
   cp     h                            ; 01:4BB3 - BC
   jr     z, addr_04BBE                ; 01:4BB4 - 28 08
   jr     c, addr_04BBE                ; 01:4BB6 - 38 06

addr_04BB8:
   ld     de, (var_D244)               ; 01:4BB8 - ED 5B 44 D2
   ld     c, $00                       ; 01:4BBC - 0E 00

addr_04BBE:
   bit    0, (iy+var_D206-IYBASE)      ; 01:4BBE - FD CB 06 46
   jr     z, addr_04BD6                ; 01:4BC2 - 28 12
   push   hl                           ; 01:4BC4 - E5
   ld     a, e                         ; 01:4BC5 - 7B
   cpl                                 ; 01:4BC6 - 2F
   ld     e, a                         ; 01:4BC7 - 5F
   ld     a, d                         ; 01:4BC8 - 7A
   cpl                                 ; 01:4BC9 - 2F
   ld     d, a                         ; 01:4BCA - 57
   ld     a, c                         ; 01:4BCB - 79
   cpl                                 ; 01:4BCC - 2F
   ld     hl, $0001                    ; 01:4BCD - 21 01 00
   add    hl, de                       ; 01:4BD0 - 19
   ex     de, hl                       ; 01:4BD1 - EB
   adc    a, $00                       ; 01:4BD2 - CE 00
   ld     c, a                         ; 01:4BD4 - 4F
   pop    hl                           ; 01:4BD5 - E1

addr_04BD6:
   add    hl, de                       ; 01:4BD6 - 19
   ld     a, b                         ; 01:4BD7 - 78
   adc    a, c                         ; 01:4BD8 - 89
   ld     (sonic_vel_y_sub), hl        ; 01:4BD9 - 22 06 D4
   ld     (sonic_vel_y_hi), a          ; 01:4BDC - 32 08 D4
   push   hl                           ; 01:4BDF - E5
   ld     a, e                         ; 01:4BE0 - 7B
   cpl                                 ; 01:4BE1 - 2F
   ld     l, a                         ; 01:4BE2 - 6F
   ld     a, d                         ; 01:4BE3 - 7A
   cpl                                 ; 01:4BE4 - 2F
   ld     h, a                         ; 01:4BE5 - 67
   ld     a, c                         ; 01:4BE6 - 79
   cpl                                 ; 01:4BE7 - 2F
   ld     de, $0001                    ; 01:4BE8 - 11 01 00
   add    hl, de                       ; 01:4BEB - 19
   adc    a, $00                       ; 01:4BEC - CE 00
   ld     (var_D2E6), hl               ; 01:4BEE - 22 E6 D2
   ld     (var_D2E8), a                ; 01:4BF1 - 32 E8 D2
   pop    hl                           ; 01:4BF4 - E1
   bit    2, (ix+24)                   ; 01:4BF5 - DD CB 18 56
   call   nz, addr_05280               ; 01:4BF9 - C4 80 52
   ld     a, h                         ; 01:4BFC - 7C
   and    a                            ; 01:4BFD - A7
   jp     p, addr_04C08                ; 01:4BFE - F2 08 4C
   ld     a, h                         ; 01:4C01 - 7C
   cpl                                 ; 01:4C02 - 2F
   ld     h, a                         ; 01:4C03 - 67
   ld     a, l                         ; 01:4C04 - 7D
   cpl                                 ; 01:4C05 - 2F
   ld     l, a                         ; 01:4C06 - 6F
   inc    hl                           ; 01:4C07 - 23

addr_04C08:
   ld     de, $0100                    ; 01:4C08 - 11 00 01
   ex     de, hl                       ; 01:4C0B - EB
   and    a                            ; 01:4C0C - A7
   sbc    hl, de                       ; 01:4C0D - ED 52
   jr     nc, addr_04C28               ; 01:4C0F - 30 17
   ld     a, (var_D414)                ; 01:4C11 - 3A 14 D4
   and    $85                          ; 01:4C14 - E6 85
   jr     nz, addr_04C28               ; 01:4C16 - 20 10
   bit    7, (ix+12)                   ; 01:4C18 - DD CB 0C 7E
   jr     z, addr_04C24                ; 01:4C1C - 28 06
   ld     (ix+20), $13                 ; 01:4C1E - DD 36 14 13
   jr     addr_04C28                   ; 01:4C22 - 18 04

addr_04C24:
   ld     (ix+20), $01                 ; 01:4C24 - DD 36 14 01

addr_04C28:
   ld     bc, $000C                    ; 01:4C28 - 01 0C 00
   ld     de, $0008                    ; 01:4C2B - 11 08 00
   call   addr_036F9                   ; 01:4C2E - CD F9 36
   ld     a, (hl)                      ; 01:4C31 - 7E
   and    $7F                          ; 01:4C32 - E6 7F
   cp     $79                          ; 01:4C34 - FE 79
   call   nc, addr_04DEF               ; 01:4C36 - D4 EF 4D

addr_04C39:
   ld     a, (var_D28C)                ; 01:4C39 - 3A 8C D2
   and    a                            ; 01:4C3C - A7
   call   nz, addr_051B3               ; 01:4C3D - C4 B3 51
   bit    6, (iy+var_D206-IYBASE)      ; 01:4C40 - FD CB 06 76
   call   nz, addr_051BC               ; 01:4C44 - C4 BC 51
   bit    2, (iy+var_D208-IYBASE)      ; 01:4C47 - FD CB 08 56
   call   nz, addr_051DD               ; 01:4C4B - C4 DD 51
   ld     a, (var_D410)                ; 01:4C4E - 3A 10 D4
   cp     $0A                          ; 01:4C51 - FE 0A
   call   z, addr_051F3                ; 01:4C53 - CC F3 51
   ld     l, (ix+20)                   ; 01:4C56 - DD 6E 14
   ld     c, l                         ; 01:4C59 - 4D
   ld     h, $00                       ; 01:4C5A - 26 00
   add    hl, hl                       ; 01:4C5C - 29
   ld     de, LUT_UNK_05965            ; 01:4C5D - 11 65 59
   add    hl, de                       ; 01:4C60 - 19
   ld     e, (hl)                      ; 01:4C61 - 5E
   inc    hl                           ; 01:4C62 - 23
   ld     d, (hl)                      ; 01:4C63 - 56
   ld     (var_D40D), de               ; 01:4C64 - ED 53 0D D4
   ld     a, (var_D2DF)                ; 01:4C68 - 3A DF D2
   sub    c                            ; 01:4C6B - 91
   call   nz, addr_0521F               ; 01:4C6C - C4 1F 52
   ld     a, (var_D40F)                ; 01:4C6F - 3A 0F D4

addr_04C72:
   ld     h, $00                       ; 01:4C72 - 26 00
   ld     l, a                         ; 01:4C74 - 6F
   add    hl, de                       ; 01:4C75 - 19
   ld     a, (hl)                      ; 01:4C76 - 7E
   and    a                            ; 01:4C77 - A7
   jp     p, addr_04C83                ; 01:4C78 - F2 83 4C
   inc    hl                           ; 01:4C7B - 23
   ld     a, (hl)                      ; 01:4C7C - 7E
   ld     (var_D40F), a                ; 01:4C7D - 32 0F D4
   jp     addr_04C72                   ; 01:4C80 - C3 72 4C

addr_04C83:
   ld     d, a                         ; 01:4C83 - 57
   .IF !shrink_sonicuncart_interleave
   ld     bc, $4000                    ; 01:4C84 - 01 00 40
   bit    1, (ix+24)                   ; 01:4C87 - DD CB 18 4E
   jr     z, addr_04C90                ; 01:4C8B - 28 03
   ld     bc, $7000                    ; 01:4C8D - 01 00 70

addr_04C90:
   .ELSE
   ld bc, sonic_art
   bit 1, (ix+24)
   jr z, +
      set 0, c
   +:
   .ENDIF
   bit    5, (iy+var_D206-IYBASE)      ; 01:4C90 - FD CB 06 6E
   call   nz, addr_05206               ; 01:4C94 - C4 06 52
   ld     a, (var_D302)                ; 01:4C97 - 3A 02 D3
   and    a                            ; 01:4C9A - A7
   call   nz, addr_04E48               ; 01:4C9B - C4 48 4E
   ld     a, d                         ; 01:4C9E - 7A
   rrca                                ; 01:4C9F - 0F
   rrca                                ; 01:4CA0 - 0F
   rrca                                ; 01:4CA1 - 0F
   ld     e, a                         ; 01:4CA2 - 5F
   and    $E0                          ; 01:4CA3 - E6 E0
   ld     l, a                         ; 01:4CA5 - 6F
   ld     a, e                         ; 01:4CA6 - 7B
   .IF 0
   and    $1F                          ; 01:4CA7 - E6 1F
   .ELSE
   xor l
   ; SAVING: 1 byte
   .ENDIF
   add    a, d                         ; 01:4CA9 - 82
   ld     h, a                         ; 01:4CAA - 67
   add    hl, bc                       ; 01:4CAB - 09
   ld     (var_D28F), hl               ; 01:4CAC - 22 8F D2
   ld     hl, UNK_0591D                ; 01:4CAF - 21 1D 59
   .IF shrink_sonicuncart_interleave
   bit 0, c
   call nz, addr_0520F
   .ENDIF
   bit    0, (iy+var_D206-IYBASE)      ; 01:4CB2 - FD CB 06 46
   call   nz, addr_0520F               ; 01:4CB6 - C4 0F 52
   ld     a, (var_D410)                ; 01:4CB9 - 3A 10 D4
   cp     $13                          ; 01:4CBC - FE 13
   call   z, addr_05213                ; 01:4CBE - CC 13 52
   ld     a, (var_D302)                ; 01:4CC1 - 3A 02 D3
   and    a                            ; 01:4CC4 - A7
   call   nz, addr_04E4D               ; 01:4CC5 - C4 4D 4E
   ld     (var_D40B), hl               ; 01:4CC8 - 22 0B D4
   ld     c, $10                       ; 01:4CCB - 0E 10
   ld     a, (sonic_vel_x)             ; 01:4CCD - 3A 04 D4
   and    a                            ; 01:4CD0 - A7
   jp     p, addr_04CD8                ; 01:4CD1 - F2 D8 4C
   neg                                 ; 01:4CD4 - ED 44
   ld     c, $F0                       ; 01:4CD6 - 0E F0

addr_04CD8:
   cp     $10                          ; 01:4CD8 - FE 10
   jr     c, addr_04CE0                ; 01:4CDA - 38 04
   ld     a, c                         ; 01:4CDC - 79
   ld     (sonic_vel_x), a             ; 01:4CDD - 32 04 D4

addr_04CE0:
   ld     c, $10                       ; 01:4CE0 - 0E 10
   ld     a, (sonic_vel_y)             ; 01:4CE2 - 3A 07 D4
   and    a                            ; 01:4CE5 - A7
   jp     p, addr_04CED                ; 01:4CE6 - F2 ED 4C
   neg                                 ; 01:4CE9 - ED 44
   ld     c, $F0                       ; 01:4CEB - 0E F0

addr_04CED:
   cp     $10                          ; 01:4CED - FE 10
   jr     c, addr_04CF5                ; 01:4CEF - 38 04
   ld     a, c                         ; 01:4CF1 - 79
   ld     (sonic_vel_y), a             ; 01:4CF2 - 32 07 D4

addr_04CF5:
   ld     de, (sonic_y)                ; 01:4CF5 - ED 5B 01 D4
   ld     hl, $0010                    ; 01:4CF9 - 21 10 00
   and    a                            ; 01:4CFC - A7
   sbc    hl, de                       ; 01:4CFD - ED 52
   jr     c, addr_04D05                ; 01:4CFF - 38 04
   add    hl, de                       ; 01:4D01 - 19
   ld     (sonic_y), hl                ; 01:4D02 - 22 01 D4

addr_04D05:
   bit    7, (iy+var_D206-IYBASE)      ; 01:4D05 - FD CB 06 7E
   call   nz, addr_05224               ; 01:4D09 - C4 24 52
   bit    0, (iy+var_D208-IYBASE)      ; 01:4D0C - FD CB 08 46
   call   nz, addr_04E8D               ; 01:4D10 - C4 8D 4E
   ld     a, (var_D2E1)                ; 01:4D13 - 3A E1 D2
   and    a                            ; 01:4D16 - A7
   call   nz, addr_05231               ; 01:4D17 - C4 31 52
   ld     a, (var_D321)                ; 01:4D1A - 3A 21 D3
   and    a                            ; 01:4D1D - A7
   call   nz, addr_04E51               ; 01:4D1E - C4 51 4E
   bit    1, (iy+var_D206-IYBASE)      ; 01:4D21 - FD CB 06 4E
   jr     nz, addr_04D81               ; 01:4D25 - 20 5A
   ld     hl, (var_D273)               ; 01:4D27 - 2A 73 D2
   ld     bc, $0008                    ; 01:4D2A - 01 08 00
   add    hl, bc                       ; 01:4D2D - 09
   ex     de, hl                       ; 01:4D2E - EB
   ld     hl, (sonic_x)                ; 01:4D2F - 2A FE D3
   and    a                            ; 01:4D32 - A7
   sbc    hl, de                       ; 01:4D33 - ED 52
   jr     nc, addr_04D4F               ; 01:4D35 - 30 18
   ld     (sonic_x), de                ; 01:4D37 - ED 53 FE D3
   ld     a, (sonic_vel_x_hi)          ; 01:4D3B - 3A 05 D4
   and    a                            ; 01:4D3E - A7
   jp     p, addr_04D81                ; 01:4D3F - F2 81 4D
   xor    a                            ; 01:4D42 - AF
   ld     (sonic_vel_x_sub), a         ; 01:4D43 - 32 03 D4
   ld     (sonic_vel_x), a             ; 01:4D46 - 32 04 D4
   ld     (sonic_vel_x_hi), a          ; 01:4D49 - 32 05 D4
   jp     addr_04D81                   ; 01:4D4C - C3 81 4D

addr_04D4F:
   ld     hl, (var_D275)               ; 01:4D4F - 2A 75 D2
   ld     de, $00F8                    ; 01:4D52 - 11 F8 00
   add    hl, de                       ; 01:4D55 - 19
   ex     de, hl                       ; 01:4D56 - EB
   ld     hl, (sonic_x)                ; 01:4D57 - 2A FE D3
   ld     c, $18                       ; 01:4D5A - 0E 18
   add    hl, bc                       ; 01:4D5C - 09
   and    a                            ; 01:4D5D - A7
   sbc    hl, de                       ; 01:4D5E - ED 52
   jr     c, addr_04D81                ; 01:4D60 - 38 1F
   ex     de, hl                       ; 01:4D62 - EB
   scf                                 ; 01:4D63 - 37
   sbc    hl, bc                       ; 01:4D64 - ED 42
   ld     (sonic_x), hl                ; 01:4D66 - 22 FE D3
   ld     a, (sonic_vel_x_hi)          ; 01:4D69 - 3A 05 D4
   and    a                            ; 01:4D6C - A7
   jp     m, addr_04D81                ; 01:4D6D - FA 81 4D
   ld     hl, (sonic_vel_x)            ; 01:4D70 - 2A 04 D4
   or     h                            ; 01:4D73 - B4
   or     l                            ; 01:4D74 - B5
   jr     z, addr_04D81                ; 01:4D75 - 28 0A
   xor    a                            ; 01:4D77 - AF
   ld     (sonic_vel_x_sub), a         ; 01:4D78 - 32 03 D4
   ld     (sonic_vel_x), a             ; 01:4D7B - 32 04 D4
   ld     (sonic_vel_x_hi), a          ; 01:4D7E - 32 05 D4

addr_04D81:
   ld     a, (var_D414)                ; 01:4D81 - 3A 14 D4
   ld     (var_D2B9), a                ; 01:4D84 - 32 B9 D2
   ld     a, (var_D410)                ; 01:4D87 - 3A 10 D4
   ld     (var_D2DF), a                ; 01:4D8A - 32 DF D2
   ld     d, $01                       ; 01:4D8D - 16 01
   ld     c, $30                       ; 01:4D8F - 0E 30
   cp     $01                          ; 01:4D91 - FE 01
   jr     z, addr_04DA1                ; 01:4D93 - 28 0C
   ld     d, $06                       ; 01:4D95 - 16 06
   ld     c, $50                       ; 01:4D97 - 0E 50
   cp     $09                          ; 01:4D99 - FE 09
   jr     z, addr_04DA1                ; 01:4D9B - 28 04
   inc    (ix+19)                      ; 01:4D9D - DD 34 13
   ret                                 ; 01:4DA0 - C9

addr_04DA1:
   ld     a, (var_D2E0)                ; 01:4DA1 - 3A E0 D2
   ld     b, a                         ; 01:4DA4 - 47
   ld     hl, (sonic_vel_x_sub)        ; 01:4DA5 - 2A 03 D4
   bit    7, h                         ; 01:4DA8 - CB 7C
   jr     z, addr_04DB3                ; 01:4DAA - 28 07
   ld     a, l                         ; 01:4DAC - 7D
   cpl                                 ; 01:4DAD - 2F
   ld     l, a                         ; 01:4DAE - 6F
   ld     a, h                         ; 01:4DAF - 7C
   cpl                                 ; 01:4DB0 - 2F
   ld     h, a                         ; 01:4DB1 - 67
   inc    hl                           ; 01:4DB2 - 23

addr_04DB3:
   srl    h                            ; 01:4DB3 - CB 3C
   rr     l                            ; 01:4DB5 - CB 1D
   ld     a, l                         ; 01:4DB7 - 7D
   add    a, b                         ; 01:4DB8 - 80
   ld     (var_D2E0), a                ; 01:4DB9 - 32 E0 D2
   ld     a, h                         ; 01:4DBC - 7C
   adc    a, d                         ; 01:4DBD - 8A
   adc    a, (ix+19)                   ; 01:4DBE - DD 8E 13
   ld     (var_D40F), a                ; 01:4DC1 - 32 0F D4
   cp     c                            ; 01:4DC4 - B9
   ret    c                            ; 01:4DC5 - D8
   sub    c                            ; 01:4DC6 - 91
   ld     (var_D40F), a                ; 01:4DC7 - 32 0F D4
   ret                                 ; 01:4DCA - C9

UNK_4DCB:
.db $10, $00, $30, $00, $08, $00, $00, $08, $02                                     ; 01:4DCB

UNK_4DD4:
.db $10, $00, $30, $00, $02, $00, $00, $08, $02                                     ; 01:4DD4

UNK_4DDD:
.db $04, $00, $0C, $00, $02, $00, $00, $02, $01                                     ; 01:4DDD

UNK_4DE6:
.db $10, $00, $30, $00, $08, $00, $00, $08, $02                                     ; 01:4DE6

addr_04DEF:
   ex     de, hl                       ; 01:4DEF - EB
   ld     hl, (sonic_y)                ; 01:4DF0 - 2A 01 D4
   ld     bc, (var_D25D)               ; 01:4DF3 - ED 4B 5D D2
   and    a                            ; 01:4DF7 - A7
   sbc    hl, bc                       ; 01:4DF8 - ED 42
   ret    c                            ; 01:4DFA - D8
   ld     bc, $0010                    ; 01:4DFB - 01 10 00
   and    a                            ; 01:4DFE - A7
   sbc    hl, bc                       ; 01:4DFF - ED 42
   ret    c                            ; 01:4E01 - D8
   ld     hl, (sonic_x)                ; 01:4E02 - 2A FE D3
   ld     bc, $000C                    ; 01:4E05 - 01 0C 00
   add    hl, bc                       ; 01:4E08 - 09
   ld     a, (de)                      ; 01:4E09 - 1A
   ld     c, a                         ; 01:4E0A - 4F
   ld     a, l                         ; 01:4E0B - 7D
   rrca                                ; 01:4E0C - 0F
   rrca                                ; 01:4E0D - 0F
   rrca                                ; 01:4E0E - 0F
   rrca                                ; 01:4E0F - 0F
   and    $01                          ; 01:4E10 - E6 01
   inc    a                            ; 01:4E12 - 3C
   ld     b, a                         ; 01:4E13 - 47
   ld     a, c                         ; 01:4E14 - 79
   and    b                            ; 01:4E15 - A0
   ret    z                            ; 01:4E16 - C8
   ld     a, l                         ; 01:4E17 - 7D
   and    $F0                          ; 01:4E18 - E6 F0
   ld     l, a                         ; 01:4E1A - 6F
   ld     (var_D2AB), hl               ; 01:4E1B - 22 AB D2
   ld     (var_D31D), hl               ; 01:4E1E - 22 1D D3
   ld     a, c                         ; 01:4E21 - 79
   xor    b                            ; 01:4E22 - A8
   ld     (de), a                      ; 01:4E23 - 12
   ld     hl, (sonic_y)                ; 01:4E24 - 2A 01 D4
   ld     bc, $0008                    ; 01:4E27 - 01 08 00
   add    hl, bc                       ; 01:4E2A - 09
   ld     a, l                         ; 01:4E2B - 7D
   and    $E0                          ; 01:4E2C - E6 E0
   add    a, $08                       ; 01:4E2E - C6 08
   ld     l, a                         ; 01:4E30 - 6F
   ld     (var_D2AD), hl               ; 01:4E31 - 22 AD D2
   ld     (var_D31F), hl               ; 01:4E34 - 22 1F D3
   ld     a, $06                       ; 01:4E37 - 3E 06
   ld     (var_D321), a                ; 01:4E39 - 32 21 D3
   ld     hl, UNK_0595D                ; 01:4E3C - 21 5D 59
   ld     (var_D2AF), hl               ; 01:4E3F - 22 AF D2
   ld     a, $01                       ; 01:4E42 - 3E 01
   call   add_A_rings                  ; 01:4E44 - CD AC 39
   ret                                 ; 01:4E47 - C9

addr_04E48:
   ld     d, a                         ; 01:4E48 - 57
   .IF !shrink_sonicuncart_interleave
   ld     bc, $7000                    ; 01:4E49 - 01 00 70
   .ELSE
   ;set 0, c
   ld bc, sonic_art+1
   .ENDIF
   ret                                 ; 01:4E4C - C9

addr_04E4D:
   ld     hl, $0000                    ; 01:4E4D - 21 00 00
   ret                                 ; 01:4E50 - C9

addr_04E51:
   dec    a                            ; 01:4E51 - 3D
   ld     (var_D321), a                ; 01:4E52 - 32 21 D3
   ld     hl, (var_D31D)               ; 01:4E55 - 2A 1D D3
   ld     (g_FF_string_high_byte), hl  ; 01:4E58 - 22 0E D2
   ld     hl, (var_D31F)               ; 01:4E5B - 2A 1F D3
   ld     (var_D210), hl               ; 01:4E5E - 22 10 D2
   ld     hl, $0000                    ; 01:4E61 - 21 00 00
   ld     (var_D212), hl               ; 01:4E64 - 22 12 D2
   ld     hl, $FFFE                    ; 01:4E67 - 21 FE FF
   ld     (var_D214), hl               ; 01:4E6A - 22 14 D2
   cp     $03                          ; 01:4E6D - FE 03
   jr     c, addr_04E82                ; 01:4E6F - 38 11
   ld     a, $B2                       ; 01:4E71 - 3E B2
   call   UNK_03581                    ; 01:4E73 - CD 81 35
   ld     hl, $0008                    ; 01:4E76 - 21 08 00
   ld     (var_D212), hl               ; 01:4E79 - 22 12 D2
   ld     hl, $0002                    ; 01:4E7C - 21 02 00
   ld     (var_D214), hl               ; 01:4E7F - 22 14 D2

addr_04E82:
   ld     a, $5A                       ; 01:4E82 - 3E 5A
   call   UNK_03581                    ; 01:4E84 - CD 81 35
   ret                                 ; 01:4E87 - C9

addr_04E88:
   set    1, (iy+var_D208-IYBASE)      ; 01:4E88 - FD CB 08 CE
   ret                                 ; 01:4E8C - C9

addr_04E8D:
   ld     hl, (sonic_x)                ; 01:4E8D - 2A FE D3
   ld     (g_FF_string_high_byte), hl  ; 01:4E90 - 22 0E D2
   ld     hl, (sonic_y)                ; 01:4E93 - 2A 01 D4
   ld     (var_D210), hl               ; 01:4E96 - 22 10 D2
   ld     hl, var_D2F3                 ; 01:4E99 - 21 F3 D2
   ld     a, (var_D223)                ; 01:4E9C - 3A 23 D2
   rrca                                ; 01:4E9F - 0F
   rrca                                ; 01:4EA0 - 0F
   jr     nc, addr_04EA6               ; 01:4EA1 - 30 03
   ld     hl, var_D2F7                 ; 01:4EA3 - 21 F7 D2

addr_04EA6:
   ld     de, var_D212                 ; 01:4EA6 - 11 12 D2
   ldi                                 ; 01:4EA9 - ED A0
   ldi                                 ; 01:4EAB - ED A0
   ldi                                 ; 01:4EAD - ED A0
   ldi                                 ; 01:4EAF - ED A0
   rrca                                ; 01:4EB1 - 0F
   ld     a, $94                       ; 01:4EB2 - 3E 94
   jr     nc, addr_04EB8               ; 01:4EB4 - 30 02
   ld     a, $96                       ; 01:4EB6 - 3E 96

addr_04EB8:
   call   UNK_03581                    ; 01:4EB8 - CD 81 35
   ld     a, (var_D223)                ; 01:4EBB - 3A 23 D2
   ld     c, a                         ; 01:4EBE - 4F
   and    $07                          ; 01:4EBF - E6 07
   ret    nz                           ; 01:4EC1 - C0
   ld     b, $02                       ; 01:4EC2 - 06 02
   ld     hl, var_D2F3                 ; 01:4EC4 - 21 F3 D2
   bit    3, c                         ; 01:4EC7 - CB 59
   jr     z, addr_04ECE                ; 01:4EC9 - 28 03
   ld     hl, var_D2F7                 ; 01:4ECB - 21 F7 D2

addr_04ECE:
   push   hl                           ; 01:4ECE - E5
   call   random_A                     ; 01:4ECF - CD 25 06
   pop    hl                           ; 01:4ED2 - E1
   and    $0F                          ; 01:4ED3 - E6 0F
   ld     (hl), a                      ; 01:4ED5 - 77
   inc    hl                           ; 01:4ED6 - 23
   ld     (hl), $00                    ; 01:4ED7 - 36 00
   inc    hl                           ; 01:4ED9 - 23
   djnz   addr_04ECE                   ; 01:4EDA - 10 F2
   ret                                 ; 01:4EDC - C9

addr_04EDD:
   ld     hl, (sonic_vel_x_sub)        ; 01:4EDD - 2A 03 D4
   ld     a, h                         ; 01:4EE0 - 7C
   or     l                            ; 01:4EE1 - B5
   ret    nz                           ; 01:4EE2 - C0
   ld     a, (var_D414)                ; 01:4EE3 - 3A 14 D4
   rlca                                ; 01:4EE6 - 07
   ret    nc                           ; 01:4EE7 - D0
   ld     (ix+20), $0C                 ; 01:4EE8 - DD 36 14 0C
   ld     de, (var_D2B7)               ; 01:4EEC - ED 5B B7 D2
   bit    7, d                         ; 01:4EF0 - CB 7A
   jr     nz, addr_04EFB               ; 01:4EF2 - 20 07
   ld     hl, $002C                    ; 01:4EF4 - 21 2C 00
   and    a                            ; 01:4EF7 - A7
   sbc    hl, de                       ; 01:4EF8 - ED 52
   ret    c                            ; 01:4EFA - D8

addr_04EFB:
   inc    de                           ; 01:4EFB - 13
   ld     (var_D2B7), de               ; 01:4EFC - ED 53 B7 D2
   ret                                 ; 01:4F00 - C9

addr_04F01:
   res    1, (ix+24)                   ; 01:4F01 - DD CB 18 8E
   ;; Are we moving left?
   bit    7, b                         ; 01:4F05 - CB 78
   jr     nz, addr_04F31               ; 01:4F07 - 20 28
   ld     de, (g_FF_string_high_byte)  ; 01:4F09 - ED 5B 0E D2
   ld     c, $00                       ; 01:4F0D - 0E 00
   ;; Start walking animation.
   ld     (ix+20), $01                 ; 01:4F0F - DD 36 14 01
   push   hl                           ; 01:4F13 - E5
   exx                                 ; 01:4F14 - D9
   pop    hl                           ; 01:4F15 - E1
   ld     de, (var_D240)               ; 01:4F16 - ED 5B 40 D2
   xor    a                            ; 01:4F1A - AF
   sbc    hl, de                       ; 01:4F1B - ED 52
   exx                                 ; 01:4F1D - D9
   ;; Are we below the speed cap?
   .IF cht_inverse_speed_cap
   jp nc, addr_04B1B
   .ELSE
   jp     c, addr_04B1B                ; 01:4F1E - DA 1B 4B
   .ENDIF
   .IF cht_no_speed_cap
   .ELSE
   ld     b, a                         ; 01:4F21 - 47
   ld     e, a                         ; 01:4F22 - 5F
   ld     d, a                         ; 01:4F23 - 57
   ld     c, a                         ; 01:4F24 - 4F
   ld     hl, (var_D240)               ; 01:4F25 - 2A 40 D2
   .ENDIF
   ld     a, (var_D216)                ; 01:4F28 - 3A 16 D2
   ld     (ix+20), a                   ; 01:4F2B - DD 77 14
   jp     addr_04B1B                   ; 01:4F2E - C3 1B 4B

addr_04F31:
   ;; Holding right while moving left - start braking.
   set    1, (ix+24)                   ; 01:4F31 - DD CB 18 CE
   ld     (ix+20), $0A                 ; 01:4F35 - DD 36 14 0A
   push   hl                           ; 01:4F39 - E5
   ld     a, l                         ; 01:4F3A - 7D
   cpl                                 ; 01:4F3B - 2F
   ld     l, a                         ; 01:4F3C - 6F
   ld     a, h                         ; 01:4F3D - 7C
   cpl                                 ; 01:4F3E - 2F
   ld     h, a                         ; 01:4F3F - 67
   inc    hl                           ; 01:4F40 - 23
   ld     de, $0100                    ; 01:4F41 - 11 00 01
   and    a                            ; 01:4F44 - A7
   sbc    hl, de                       ; 01:4F45 - ED 52
   pop    hl                           ; 01:4F47 - E1
   ld     de, (var_D210)               ; 01:4F48 - ED 5B 10 D2
   ld     c, $00                       ; 01:4F4C - 0E 00
   jp     nc, addr_04B1B               ; 01:4F4E - D2 1B 4B
   res    1, (ix+24)                   ; 01:4F51 - DD CB 18 8E
   ld     (ix+20), $01                 ; 01:4F55 - DD 36 14 01
   jp     addr_04B1B                   ; 01:4F59 - C3 1B 4B

addr_04F5C:
   set    1, (ix+24)                   ; 01:4F5C - DD CB 18 CE
   ld     a, l                         ; 01:4F60 - 7D
   or     h                            ; 01:4F61 - B4
   jr     z, addr_04F68                ; 01:4F62 - 28 04
   ;; Are we moving right?
   bit    7, b                         ; 01:4F64 - CB 78
   jr     z, addr_04FA6                ; 01:4F66 - 28 3E

addr_04F68:
   ld     de, (g_FF_string_high_byte)  ; 01:4F68 - ED 5B 0E D2
   ld     a, e                         ; 01:4F6C - 7B
   cpl                                 ; 01:4F6D - 2F
   ld     e, a                         ; 01:4F6E - 5F
   ld     a, d                         ; 01:4F6F - 7A
   cpl                                 ; 01:4F70 - 2F
   ld     d, a                         ; 01:4F71 - 57
   inc    de                           ; 01:4F72 - 13
   ld     c, $FF                       ; 01:4F73 - 0E FF
   ;; Start walking animation.
   ld     (ix+20), $01                 ; 01:4F75 - DD 36 14 01
   push   hl                           ; 01:4F79 - E5
   exx                                 ; 01:4F7A - D9
   pop    hl                           ; 01:4F7B - E1
   ld     a, l                         ; 01:4F7C - 7D
   cpl                                 ; 01:4F7D - 2F
   ld     l, a                         ; 01:4F7E - 6F
   ld     a, h                         ; 01:4F7F - 7C
   cpl                                 ; 01:4F80 - 2F
   ld     h, a                         ; 01:4F81 - 67
   inc    hl                           ; 01:4F82 - 23
   ld     de, (var_D240)               ; 01:4F83 - ED 5B 40 D2
   xor    a                            ; 01:4F87 - AF
   sbc    hl, de                       ; 01:4F88 - ED 52
   exx                                 ; 01:4F8A - D9
   ;; Are we below the speed cap?
   .IF cht_inverse_speed_cap
   jp nc, addr_04B1B
   .ELSE
   jp     c, addr_04B1B                ; 01:4F8B - DA 1B 4B
   .ENDIF
   .IF cht_no_speed_cap
   .ELSE
   ld     e, a                         ; 01:4F8E - 5F
   ld     d, a                         ; 01:4F8F - 57
   ld     c, a                         ; 01:4F90 - 4F
   ld     hl, (var_D240)               ; 01:4F91 - 2A 40 D2
   ld     a, l                         ; 01:4F94 - 7D
   cpl                                 ; 01:4F95 - 2F
   ld     l, a                         ; 01:4F96 - 6F
   ld     a, h                         ; 01:4F97 - 7C
   cpl                                 ; 01:4F98 - 2F
   ld     h, a                         ; 01:4F99 - 67
   inc    hl                           ; 01:4F9A - 23
   ld     b, $FF                       ; 01:4F9B - 06 FF
   .ENDIF
   ld     a, (var_D216)                ; 01:4F9D - 3A 16 D2
   ld     (ix+20), a                   ; 01:4FA0 - DD 77 14
   jp     addr_04B1B                   ; 01:4FA3 - C3 1B 4B

addr_04FA6:
   ;; Holding left while moving right - start braking.
   res    1, (ix+24)                   ; 01:4FA6 - DD CB 18 8E
   ld     (ix+20), $0A                 ; 01:4FAA - DD 36 14 0A
   ld     de, (var_D210)               ; 01:4FAE - ED 5B 10 D2
   ld     a, e                         ; 01:4FB2 - 7B
   cpl                                 ; 01:4FB3 - 2F
   ld     e, a                         ; 01:4FB4 - 5F
   ld     a, d                         ; 01:4FB5 - 7A
   cpl                                 ; 01:4FB6 - 2F
   ld     d, a                         ; 01:4FB7 - 57
   inc    de                           ; 01:4FB8 - 13
   ld     c, $FF                       ; 01:4FB9 - 0E FF
   push   hl                           ; 01:4FBB - E5
   exx                                 ; 01:4FBC - D9
   pop    hl                           ; 01:4FBD - E1
   ld     bc, $0100                    ; 01:4FBE - 01 00 01
   and    a                            ; 01:4FC1 - A7
   sbc    hl, bc                       ; 01:4FC2 - ED 42
   exx                                 ; 01:4FC4 - D9
   jp     nc, addr_04B1B               ; 01:4FC5 - D2 1B 4B
   set    1, (ix+24)                   ; 01:4FC8 - DD CB 18 CE
   ld     (ix+20), $01                 ; 01:4FCC - DD 36 14 01
   jp     addr_04B1B                   ; 01:4FD0 - C3 1B 4B

addr_04FD3:
   bit    0, (ix+24)                   ; 01:4FD3 - DD CB 18 46
   ret    nz                           ; 01:4FD7 - C0
   ld     hl, (var_D2B7)               ; 01:4FD8 - 2A B7 D2
   ld     a, h                         ; 01:4FDB - 7C
   or     l                            ; 01:4FDC - B5
   ret    z                            ; 01:4FDD - C8
   bit    7, h                         ; 01:4FDE - CB 7C
   jr     z, addr_04FE7                ; 01:4FE0 - 28 05
   inc    hl                           ; 01:4FE2 - 23
   ld     (var_D2B7), hl               ; 01:4FE3 - 22 B7 D2
   ret                                 ; 01:4FE6 - C9

addr_04FE7:
   dec    hl                           ; 01:4FE7 - 2B
   ld     (var_D2B7), hl               ; 01:4FE8 - 22 B7 D2
   ret                                 ; 01:4FEB - C9

addr_04FEC:
   dec    (ix+21)                      ; 01:4FEC - DD 35 15
   ret                                 ; 01:4FEF - C9

addr_04FF0:
   dec    a                            ; 01:4FF0 - 3D
   ld     (var_D412), a                ; 01:4FF1 - 32 12 D4
   ret                                 ; 01:4FF4 - C9

addr_04FF5:
   ld     a, (var_D223)                ; 01:4FF5 - 3A 23 D2
   and    $03                          ; 01:4FF8 - E6 03
   ret    nz                           ; 01:4FFA - C0
   ld     hl, var_D28D                 ; 01:4FFB - 21 8D D2
   dec    (hl)                         ; 01:4FFE - 35
   ret    nz                           ; 01:4FFF - C0
   res    0, (iy+var_D208-IYBASE)      ; 01:5000 - FD CB 08 86
   ld     a, (var_D2FC)                ; 01:5004 - 3A FC D2
   rst    $18                          ; 01:5007 - DF
   ret                                 ; 01:5008 - C9

addr_05009:
   ld     a, (var_D2D4)                ; 01:5009 - 3A D4 D2
   cp     $03                          ; 01:500C - FE 03
   ret    nz                           ; 01:500E - C0
   ld     a, (g_level)                 ; 01:500F - 3A 3E D2
   cp     $0B                          ; 01:5012 - FE 0B
   ret    z                            ; 01:5014 - C8
   ld     hl, (var_D29B)               ; 01:5015 - 2A 9B D2
   inc    hl                           ; 01:5018 - 23
   ld     (var_D29B), hl               ; 01:5019 - 22 9B D2
   ld     de, $0300                    ; 01:501C - 11 00 03
   and    a                            ; 01:501F - A7
   sbc    hl, de                       ; 01:5020 - ED 52
   ret    c                            ; 01:5022 - D8
   ld     a, $05                       ; 01:5023 - 3E 05
   sub    h                            ; 01:5025 - 94
   jr     nc, addr_05051               ; 01:5026 - 30 29
   res    5, (iy+var_D206-IYBASE)      ; 01:5028 - FD CB 06 AE
   res    6, (iy+var_D206-IYBASE)      ; 01:502C - FD CB 06 B6
   res    0, (iy+var_D208-IYBASE)      ; 01:5030 - FD CB 08 86
   set    3, (iy+var_D208-IYBASE)      ; 01:5034 - FD CB 08 DE
   set    0, (iy+var_D205-IYBASE)      ; 01:5038 - FD CB 05 C6
   ld     a, $C0                       ; 01:503C - 3E C0
   ld     (var_D287), a                ; 01:503E - 32 87 D2
   ld     a, $0A                       ; 01:5041 - 3E 0A
   rst    $18                          ; 01:5043 - DF
   call   UNK_091EB                    ; 01:5044 - CD EB 91
   call   UNK_091EB                    ; 01:5047 - CD EB 91
   call   UNK_091EB                    ; 01:504A - CD EB 91
   call   UNK_091EB                    ; 01:504D - CD EB 91
   xor    a                            ; 01:5050 - AF

addr_05051:
   ld     e, a                         ; 01:5051 - 5F
   add    a, a                         ; 01:5052 - 87
   add    a, $80                       ; 01:5053 - C6 80
   ld     (g_HUD_FFstr_buf), a         ; 01:5055 - 32 BE D2
   ld     a, $FF                       ; 01:5058 - 3E FF
   ld     (var_D2BF), a                ; 01:505A - 32 BF D2
   ld     d, $00                       ; 01:505D - 16 00
   ld     hl, UNK_05097                ; 01:505F - 21 97 50
   add    hl, de                       ; 01:5062 - 19
   ld     a, (var_D223)                ; 01:5063 - 3A 23 D2
   and    (hl)                         ; 01:5066 - A6
   jr     nz, addr_0506C               ; 01:5067 - 20 03
   ld     a, $1A                       ; 01:5069 - 3E 1A
   rst    $28                          ; 01:506B - EF

addr_0506C:
   ld     a, (var_D223)                ; 01:506C - 3A 23 D2
   rrca                                ; 01:506F - 0F
   ret    nc                           ; 01:5070 - D0
   ld     hl, (sonic_x)                ; 01:5071 - 2A FE D3
   ld     de, (var_D25A)               ; 01:5074 - ED 5B 5A D2
   and    a                            ; 01:5078 - A7
   sbc    hl, de                       ; 01:5079 - ED 52
   ld     a, l                         ; 01:507B - 7D
   add    a, $08                       ; 01:507C - C6 08
   ld     c, a                         ; 01:507E - 4F
   ld     hl, (sonic_y)                ; 01:507F - 2A 01 D4
   ld     de, (var_D25D)               ; 01:5082 - ED 5B 5D D2
   and    a                            ; 01:5086 - A7
   sbc    hl, de                       ; 01:5087 - ED 52
   ld     a, l                         ; 01:5089 - 7D
   add    a, $EC                       ; 01:508A - C6 EC
   ld     b, a                         ; 01:508C - 47
   ld     hl, var_D03C                 ; 01:508D - 21 3C D0
   ld     de, g_HUD_FFstr_buf          ; 01:5090 - 11 BE D2
   call   draw_sprite_text             ; 01:5093 - CD CC 35
   ret                                 ; 01:5096 - C9

UNK_05097:
.db $01, $07, $0F, $1F, $3F, $7F                                                    ; 01:5097

addr_0509D:
   ld     a, $10                       ; 01:509D - 3E 10
   ld     (var_D28E), a                ; 01:509F - 32 8E D2
   ld     a, $00                       ; 01:50A2 - 3E 00
   rst    $28                          ; 01:50A4 - EF
   ret                                 ; 01:50A5 - C9
.db $AF, $32, $FD, $D3, $ED, $53, $FE, $D3, $C9                                     ; 01:50A6

addr_050AF:
   exx                                 ; 01:50AF - D9
   ld     hl, (sonic_y)                ; 01:50B0 - 2A 01 D4
   ld     (var_D2D9), hl               ; 01:50B3 - 22 D9 D2
   exx                                 ; 01:50B6 - D9
   bit    2, (ix+24)                   ; 01:50B7 - DD CB 18 56
   ret    z                            ; 01:50BB - C8
   res    2, (ix+24)                   ; 01:50BC - DD CB 18 96
   ret                                 ; 01:50C0 - C9

addr_050C1:
   bit    2, (ix+24)                   ; 01:50C1 - DD CB 18 56
   ret    nz                           ; 01:50C5 - C0
   bit    0, (ix+24)                   ; 01:50C6 - DD CB 18 46
   ret    nz                           ; 01:50CA - C0
   bit    7, (ix+24)                   ; 01:50CB - DD CB 18 7E
   ret    z                            ; 01:50CF - C8
   set    0, (ix+24)                   ; 01:50D0 - DD CB 18 C6
   ld     hl, (sonic_vel_x_sub)        ; 01:50D4 - 2A 03 D4
   ld     a, l                         ; 01:50D7 - 7D
   or     h                            ; 01:50D8 - B4
   jr     z, addr_050DE                ; 01:50D9 - 28 03
   ld     a, $06                       ; 01:50DB - 3E 06
   rst    $28                          ; 01:50DD - EF

addr_050DE:
   set    2, (iy+var_D207-IYBASE)      ; 01:50DE - FD CB 07 D6
   ret                                 ; 01:50E2 - C9

addr_050E3:
   res    2, (iy+var_D207-IYBASE)      ; 01:50E3 - FD CB 07 96
   ret                                 ; 01:50E7 - C9

addr_050E8:
   ld     hl, (var_D2DC)               ; 01:50E8 - 2A DC D2
   ld     de, (sonic_y)                ; 01:50EB - ED 5B 01 D4
   and    a                            ; 01:50EF - A7
   sbc    hl, de                       ; 01:50F0 - ED 52
   jp     c, addr_055A8                ; 01:50F2 - DA A8 55
   ld     hl, $0000                    ; 01:50F5 - 21 00 00
   ld     (var_D29B), hl               ; 01:50F8 - 22 9B D2
   res    4, (ix+24)                   ; 01:50FB - DD CB 18 A6
   ret                                 ; 01:50FF - C9

addr_05100:
   set    2, (ix+24)                   ; 01:5100 - DD CB 18 D6
   ret                                 ; 01:5104 - C9

addr_05105:
   ld     (ix+20), $0D                 ; 01:5105 - DD 36 14 0D
   ret                                 ; 01:5109 - C9

addr_0510A:
   ld     (iy+g_inputs_player_1-IYBASE), $FF  ; 01:510A - FD 36 03 FF
   ld     a, (var_D414)                ; 01:510E - 3A 14 D4
   and    $FA                          ; 01:5111 - E6 FA
   ld     (var_D414), a                ; 01:5113 - 32 14 D4
   ret                                 ; 01:5116 - C9

addr_05117:
   dec    a                            ; 01:5117 - 3D
   ld     (var_D28A), a                ; 01:5118 - 32 8A D2
   jr     z, addr_05142                ; 01:511B - 28 25
   cp     $14                          ; 01:511D - FE 14
   jr     c, addr_05137                ; 01:511F - 38 16
   xor    a                            ; 01:5121 - AF
   ld     l, a                         ; 01:5122 - 6F
   ld     h, a                         ; 01:5123 - 67
   ld     (sonic_vel_x_sub), a         ; 01:5124 - 32 03 D4
   ld     (sonic_vel_x), hl            ; 01:5127 - 22 04 D4
   ld     (sonic_vel_y_sub), a         ; 01:512A - 32 06 D4
   ld     (sonic_vel_y), hl            ; 01:512D - 22 07 D4
   ld     (ix+20), $0F                 ; 01:5130 - DD 36 14 0F
   jp     addr_04C39                   ; 01:5134 - C3 39 4C

addr_05137:
   res    1, (ix+24)                   ; 01:5137 - DD CB 18 8E
   ld     (ix+20), $0E                 ; 01:513B - DD 36 14 0E
   jp     addr_04C39                   ; 01:513F - C3 39 4C

addr_05142:
   ld     hl, (var_D2D5)               ; 01:5142 - 2A D5 D2
   ld     b, (hl)                      ; 01:5145 - 46
   inc    hl                           ; 01:5146 - 23
   ld     c, (hl)                      ; 01:5147 - 4E
   inc    hl                           ; 01:5148 - 23
   ld     a, (hl)                      ; 01:5149 - 7E
   and    a                            ; 01:514A - A7
   jr     z, addr_05163                ; 01:514B - 28 16
   jp     m, addr_05159                ; 01:514D - FA 59 51
   ld     (var_D2D3), a                ; 01:5150 - 32 D3 D2
   set    4, (iy+var_D206-IYBASE)      ; 01:5153 - FD CB 06 E6
   jr     addr_0515D                   ; 01:5157 - 18 04

addr_05159:
   set    2, (iy+var_D20D-IYBASE)      ; 01:5159 - FD CB 0D D6

addr_0515D:
   ld     a, $01                       ; 01:515D - 3E 01
   ld     (g_signpost_tickdown_counter), a  ; 01:515F - 32 89 D2
   ret                                 ; 01:5162 - C9

addr_05163:
   ld     a, b                         ; 01:5163 - 78
   ld     h, $00                       ; 01:5164 - 26 00
   ld     b, $05                       ; 01:5166 - 06 05

addr_05168:
   add    a, a                         ; 01:5168 - 87
   rl     h                            ; 01:5169 - CB 14
   djnz   addr_05168                   ; 01:516B - 10 FB
   ld     l, a                         ; 01:516D - 6F
   ld     de, $0008                    ; 01:516E - 11 08 00
   add    hl, de                       ; 01:5171 - 19
   ld     (sonic_x), hl                ; 01:5172 - 22 FE D3
   ld     a, c                         ; 01:5175 - 79
   ld     h, $00                       ; 01:5176 - 26 00
   add    a, a                         ; 01:5178 - 87
   rl     h                            ; 01:5179 - CB 14
   add    a, a                         ; 01:517B - 87
   rl     h                            ; 01:517C - CB 14
   add    a, a                         ; 01:517E - 87
   rl     h                            ; 01:517F - CB 14
   add    a, a                         ; 01:5181 - 87
   rl     h                            ; 01:5182 - CB 14
   add    a, a                         ; 01:5184 - 87
   rl     h                            ; 01:5185 - CB 14
   ld     l, a                         ; 01:5187 - 6F
   ld     (sonic_y), hl                ; 01:5188 - 22 01 D4
   xor    a                            ; 01:518B - AF
   ld     (sonic_x_sub), a             ; 01:518C - 32 FD D3
   ld     (sonic_y_sub), a             ; 01:518F - 32 00 D4
   ret                                 ; 01:5192 - C9

addr_05193:
   xor    a                            ; 01:5193 - AF
   ld     l, a                         ; 01:5194 - 6F
   ld     h, a                         ; 01:5195 - 67
   ld     (sonic_vel_y_sub), hl        ; 01:5196 - 22 06 D4
   ld     (sonic_vel_y_hi), a          ; 01:5199 - 32 08 D4
   ld     (ix+20), $16                 ; 01:519C - DD 36 14 16
   ld     a, (var_D40F)                ; 01:51A0 - 3A 0F D4
   cp     $12                          ; 01:51A3 - FE 12
   jp     c, addr_04C39                ; 01:51A5 - DA 39 4C
   res    6, (iy+var_D208-IYBASE)      ; 01:51A8 - FD CB 08 B6
   set    2, (ix+24)                   ; 01:51AC - DD CB 18 D6
   jp     addr_04C39                   ; 01:51B0 - C3 39 4C

addr_051B3:
   dec    a                            ; 01:51B3 - 3D
   ld     (var_D28C), a                ; 01:51B4 - 32 8C D2
   ld     (ix+20), $11                 ; 01:51B7 - DD 36 14 11
   ret                                 ; 01:51BB - C9

addr_051BC:
   ld     (ix+13), $1C                 ; 01:51BC - DD 36 0D 1C
   ld     (ix+20), $10                 ; 01:51C0 - DD 36 14 10
   bit    7, (ix+12)                   ; 01:51C4 - DD CB 0C 7E
   ret    nz                           ; 01:51C8 - C0
   bit    7, (ix+24)                   ; 01:51C9 - DD CB 18 7E
   ret    z                            ; 01:51CD - C8
   res    6, (iy+var_D206-IYBASE)      ; 01:51CE - FD CB 06 B6
   xor    a                            ; 01:51D2 - AF
   ld     (sonic_vel_x_sub), a         ; 01:51D3 - 32 03 D4
   ld     (sonic_vel_x), a             ; 01:51D6 - 32 04 D4
   ld     (sonic_vel_x_hi), a          ; 01:51D9 - 32 05 D4
   ret                                 ; 01:51DC - C9

addr_051DD:
   ld     a, (var_D414)                ; 01:51DD - 3A 14 D4
   and    $FA                          ; 01:51E0 - E6 FA
   ld     (var_D414), a                ; 01:51E2 - 32 14 D4
   ld     (ix+20), $14                 ; 01:51E5 - DD 36 14 14
   ld     hl, var_D2FB                 ; 01:51E9 - 21 FB D2
   dec    (hl)                         ; 01:51EC - 35
   ret    nz                           ; 01:51ED - C0
   res    2, (iy+var_D208-IYBASE)      ; 01:51EE - FD CB 08 96
   ret                                 ; 01:51F2 - C9

addr_051F3:
   ld     a, (var_D412)                ; 01:51F3 - 3A 12 D4
   and    a                            ; 01:51F6 - A7
   ret    nz                           ; 01:51F7 - C0
   bit    7, (ix+24)                   ; 01:51F8 - DD CB 18 7E
   ret    z                            ; 01:51FC - C8
   ld     a, $03                       ; 01:51FD - 3E 03
   rst    $28                          ; 01:51FF - EF
   ld     a, $3C                       ; 01:5200 - 3E 3C
   ld     (var_D412), a                ; 01:5202 - 32 12 D4
   ret                                 ; 01:5205 - C9

addr_05206:
   ld     a, (var_D223)                ; 01:5206 - 3A 23 D2
   and    $01                          ; 01:5209 - E6 01
   ret    nz                           ; 01:520B - C0
   ld     d, $18                       ; 01:520C - 16 18
   ret                                 ; 01:520E - C9

addr_0520F:
   ld     hl, UNK_0592B                ; 01:520F - 21 2B 59
   ret                                 ; 01:5212 - C9

addr_05213:
   ld     hl, UNK_05939                ; 01:5213 - 21 39 59
   bit    1, (ix+24)                   ; 01:5216 - DD CB 18 4E
   ret    z                            ; 01:521A - C8
   ld     hl, UNK_0594B                ; 01:521B - 21 4B 59
   ret                                 ; 01:521E - C9

addr_0521F:
   ld     (ix+19), $00                 ; 01:521F - DD 36 13 00
   ret                                 ; 01:5223 - C9

addr_05224:
   bit    4, (ix+24)                   ; 01:5224 - DD CB 18 66
   ret    z                            ; 01:5228 - C8
   ld     a, (var_D223)                ; 01:5229 - 3A 23 D2
   and    a                            ; 01:522C - A7
   call   z, UNK_091EB                 ; 01:522D - CC EB 91
   ret                                 ; 01:5230 - C9

addr_05231:
   dec    a                            ; 01:5231 - 3D
   ld     (var_D2E1), a                ; 01:5232 - 32 E1 D2
   cp     $06                          ; 01:5235 - FE 06
   jr     c, addr_0523C                ; 01:5237 - 38 03
   cp     $0A                          ; 01:5239 - FE 0A
   ret    c                            ; 01:523B - D8

addr_0523C:
   ld     a, (iy+g_sprite_count-IYBASE)  ; 01:523C - FD 7E 0A
   ld     hl, (var_D23C)               ; 01:523F - 2A 3C D2
   push   af                           ; 01:5242 - F5
   push   hl                           ; 01:5243 - E5
   ld     hl, var_D000                 ; 01:5244 - 21 00 D0
   ld     (var_D23C), hl               ; 01:5247 - 22 3C D2
   ld     de, (var_D25D)               ; 01:524A - ED 5B 5D D2
   ld     hl, (var_D2E4)               ; 01:524E - 2A E4 D2
   and    a                            ; 01:5251 - A7
   sbc    hl, de                       ; 01:5252 - ED 52
   ex     de, hl                       ; 01:5254 - EB
   ld     bc, (var_D25A)               ; 01:5255 - ED 4B 5A D2
   ld     hl, (var_D2E2)               ; 01:5259 - 2A E2 D2
   and    a                            ; 01:525C - A7
   sbc    hl, bc                       ; 01:525D - ED 42
   ld     bc, UNK_0526E                ; 01:525F - 01 6E 52
   call   addr_0350F                   ; 01:5262 - CD 0F 35
   pop    hl                           ; 01:5265 - E1
   pop    af                           ; 01:5266 - F1
   ld     (var_D23C), hl               ; 01:5267 - 22 3C D2
   ld     (iy+g_sprite_count-IYBASE), a  ; 01:526A - FD 77 0A
   ret                                 ; 01:526D - C9

UNK_0526E:
.db $00, $02, $04, $06, $FF, $FF, $20, $22, $24, $26, $FF, $FF, $FF, $FF, $FF, $FF  ; 01:526E
.db $FF, $FF                                                                        ; 01:527E

addr_05280:
   ld     (ix+20), $09                 ; 01:5280 - DD 36 14 09
   ret                                 ; 01:5284 - C9

addr_05285:
   dec    a                            ; 01:5285 - 3D
   ld     (var_D28B), a                ; 01:5286 - 32 8B D2
   ret    nz                           ; 01:5289 - C0
   ld     a, (var_D2FC)                ; 01:528A - 3A FC D2
   rst    $18                          ; 01:528D - DF
   ld     c, (iy+g_sprite_count-IYBASE)  ; 01:528E - FD 4E 0A
   res    0, (iy+var_D200-IYBASE)      ; 01:5291 - FD CB 00 86
   call   wait_until_irq_ticked        ; 01:5295 - CD 1C 03
   ld     (iy+g_sprite_count-IYBASE), c  ; 01:5298 - FD 71 0A
   ret                                 ; 01:529B - C9

addr_0529C:
   ld     (iy+g_inputs_player_1-IYBASE), $FB  ; 01:529C - FD 36 03 FB
   ld     hl, (sonic_x)                ; 01:52A0 - 2A FE D3
   ld     de, $1B60                    ; 01:52A3 - 11 60 1B
   and    a                            ; 01:52A6 - A7
   sbc    hl, de                       ; 01:52A7 - ED 52
   ret    nc                           ; 01:52A9 - D0
   ld     (iy+g_inputs_player_1-IYBASE), $FF  ; 01:52AA - FD 36 03 FF
   ld     hl, (sonic_vel_x_sub)        ; 01:52AE - 2A 03 D4
   ld     a, l                         ; 01:52B1 - 7D
   or     h                            ; 01:52B2 - B4
   ret    nz                           ; 01:52B3 - C0
   res    1, (ix+24)                   ; 01:52B4 - DD CB 18 8E
   pop    hl                           ; 01:52B8 - E1
   set    1, (ix+24)                   ; 01:52B9 - DD CB 18 CE
   ld     (ix+20), $18                 ; 01:52BD - DD 36 14 18
   ld     hl, var_D2FE                 ; 01:52C1 - 21 FE D2
   bit    0, (iy+var_D20D-IYBASE)      ; 01:52C4 - FD CB 0D 46
   jr     nz, addr_0530B               ; 01:52C8 - 20 41
   ld     (hl), $50                    ; 01:52CA - 36 50
   call   spawn_object                 ; 01:52CC - CD 7B 7C
   jp     c, addr_04C39                ; 01:52CF - DA 39 4C
   push   ix                           ; 01:52D2 - DD E5
   push   hl                           ; 01:52D4 - E5
   pop    ix                           ; 01:52D5 - DD E1
   xor    a                            ; 01:52D7 - AF
   ld     (ix+0), $54                  ; 01:52D8 - DD 36 00 54
   ld     (ix+17), a                   ; 01:52DC - DD 77 11
   ld     (ix+24), a                   ; 01:52DF - DD 77 18
   ld     (ix+1), a                    ; 01:52E2 - DD 77 01
   ld     hl, (sonic_x)                ; 01:52E5 - 2A FE D3
   ld     de, $0002                    ; 01:52E8 - 11 02 00
   add    hl, de                       ; 01:52EB - 19
   ld     (ix+2), l                    ; 01:52EC - DD 75 02
   ld     (ix+3), h                    ; 01:52EF - DD 74 03
   ld     (ix+4), a                    ; 01:52F2 - DD 77 04
   ld     hl, (sonic_y)                ; 01:52F5 - 2A 01 D4
   ld     de, $000E                    ; 01:52F8 - 11 0E 00
   add    hl, de                       ; 01:52FB - 19
   ld     (ix+5), l                    ; 01:52FC - DD 75 05
   ld     (ix+6), h                    ; 01:52FF - DD 74 06
   pop    ix                           ; 01:5302 - DD E1
   set    0, (iy+var_D20D-IYBASE)      ; 01:5304 - FD CB 0D C6
   jp     addr_04C39                   ; 01:5308 - C3 39 4C

addr_0530B:
   bit    1, (iy+var_D20D-IYBASE)      ; 01:530B - FD CB 0D 4E
   jr     nz, addr_0531B               ; 01:530F - 20 0A
   dec    (hl)                         ; 01:5311 - 35
   jp     nz, addr_04C39               ; 01:5312 - C2 39 4C
   set    1, (iy+var_D20D-IYBASE)      ; 01:5315 - FD CB 0D CE
   ld     (hl), $8C                    ; 01:5319 - 36 8C

addr_0531B:
   ld     (ix+20), $17                 ; 01:531B - DD 36 14 17
   ld     a, (hl)                      ; 01:531F - 7E
   and    a                            ; 01:5320 - A7
   jr     z, addr_05327                ; 01:5321 - 28 04
   dec    (hl)                         ; 01:5323 - 35
   jp     addr_04C39                   ; 01:5324 - C3 39 4C

addr_05327:
   ld     (ix+20), $19                 ; 01:5327 - DD 36 14 19
   jp     addr_04C39                   ; 01:532B - C3 39 4C

addr_0532E:
   ld     a, (ix+14)                   ; 01:532E - DD 7E 0E
   cp     $18                          ; 01:5331 - FE 18
   jr     z, addr_0533F                ; 01:5333 - 28 0A
   ld     hl, (sonic_y)                ; 01:5335 - 2A 01 D4
   ld     de, $0008                    ; 01:5338 - 11 08 00
   add    hl, de                       ; 01:533B - 19
   ld     (sonic_y), hl                ; 01:533C - 22 01 D4

addr_0533F:
   ld     (ix+13), $18                 ; 01:533F - DD 36 0D 18
   ld     (ix+14), $18                 ; 01:5343 - DD 36 0E 18
   ld     hl, (sonic_vel_x_sub)        ; 01:5347 - 2A 03 D4
   ld     b, (ix+9)                    ; 01:534A - DD 46 09
   ld     c, $00                       ; 01:534D - 0E 00
   ld     e, c                         ; 01:534F - 59
   ld     d, c                         ; 01:5350 - 51
   ld     a, h                         ; 01:5351 - 7C
   or     l                            ; 01:5352 - B5
   or     b                            ; 01:5353 - B0
   jp     z, addr_053B9                ; 01:5354 - CA B9 53
   ld     (ix+20), $09                 ; 01:5357 - DD 36 14 09
   bit    2, (iy+g_inputs_player_1-IYBASE)  ; 01:535B - FD CB 03 56
   jr     nz, addr_05381               ; 01:535F - 20 20
   bit    1, (iy+g_inputs_player_1-IYBASE)  ; 01:5361 - FD CB 03 4E
   jr     z, addr_05381                ; 01:5365 - 28 1A
   bit    7, (ix+24)                   ; 01:5367 - DD CB 18 7E
   jp     z, addr_05379                ; 01:536B - CA 79 53
   bit    7, b                         ; 01:536E - CB 78
   jr     nz, addr_053A7               ; 01:5370 - 20 35
   res    0, (ix+24)                   ; 01:5372 - DD CB 18 86
   jp     addr_04FA6                   ; 01:5376 - C3 A6 4F

addr_05379:
   ld     de, $FFF0                    ; 01:5379 - 11 F0 FF
   ld     c, $FF                       ; 01:537C - 0E FF
   jp     addr_04B1B                   ; 01:537E - C3 1B 4B

addr_05381:
   bit    3, (iy+g_inputs_player_1-IYBASE)  ; 01:5381 - FD CB 03 5E
   jr     nz, addr_053A7               ; 01:5385 - 20 20
   bit    1, (iy+g_inputs_player_1-IYBASE)  ; 01:5387 - FD CB 03 4E
   jr     z, addr_053A7                ; 01:538B - 28 1A
   bit    7, (ix+24)                   ; 01:538D - DD CB 18 7E
   jp     z, addr_0539F                ; 01:5391 - CA 9F 53
   bit    7, b                         ; 01:5394 - CB 78
   jr     z, addr_053A7                ; 01:5396 - 28 0F
   res    0, (ix+24)                   ; 01:5398 - DD CB 18 86
   jp     addr_04FA6                   ; 01:539C - C3 A6 4F

addr_0539F:
   ld     de, $0010                    ; 01:539F - 11 10 00
   ld     c, $00                       ; 01:53A2 - 0E 00
   jp     addr_04B1B                   ; 01:53A4 - C3 1B 4B

addr_053A7:
   ld     de, $0004                    ; 01:53A7 - 11 04 00
   ld     c, $00                       ; 01:53AA - 0E 00
   ld     a, b                         ; 01:53AC - 78
   and    a                            ; 01:53AD - A7
   jp     m, addr_04B1B                ; 01:53AE - FA 1B 4B
   ld     de, $FFFC                    ; 01:53B1 - 11 FC FF
   ld     c, $FF                       ; 01:53B4 - 0E FF
   jp     addr_04B1B                   ; 01:53B6 - C3 1B 4B

addr_053B9:
   bit    7, (ix+24)                   ; 01:53B9 - DD CB 18 7E
   jr     z, addr_053E0                ; 01:53BD - 28 21
   ld     (ix+20), $07                 ; 01:53BF - DD 36 14 07
   res    0, (ix+24)                   ; 01:53C3 - DD CB 18 86
   ld     de, (var_D2B7)               ; 01:53C7 - ED 5B B7 D2
   bit    7, d                         ; 01:53CB - CB 7A
   jr     z, addr_053D8                ; 01:53CD - 28 09
   ld     hl, $FFB0                    ; 01:53CF - 21 B0 FF
   and    a                            ; 01:53D2 - A7
   sbc    hl, de                       ; 01:53D3 - ED 52
   jp     nc, addr_04B49               ; 01:53D5 - D2 49 4B

addr_053D8:
   dec    de                           ; 01:53D8 - 1B
   ld     (var_D2B7), de               ; 01:53D9 - ED 53 B7 D2
   jp     addr_04B49                   ; 01:53DD - C3 49 4B

addr_053E0:
   ld     (ix+20), $09                 ; 01:53E0 - DD 36 14 09
   push   de                           ; 01:53E4 - D5
   push   hl                           ; 01:53E5 - E5
   bit    7, b                         ; 01:53E6 - CB 78
   jr     z, addr_053F1                ; 01:53E8 - 28 07
   ld     a, l                         ; 01:53EA - 7D
   cpl                                 ; 01:53EB - 2F
   ld     l, a                         ; 01:53EC - 6F
   ld     a, h                         ; 01:53ED - 7C
   cpl                                 ; 01:53EE - 2F
   ld     h, a                         ; 01:53EF - 67
   inc    hl                           ; 01:53F0 - 23

addr_053F1:
   ld     de, (var_D240)               ; 01:53F1 - ED 5B 40 D2
   xor    a                            ; 01:53F5 - AF
   sbc    hl, de                       ; 01:53F6 - ED 52
   pop    hl                           ; 01:53F8 - E1
   pop    de                           ; 01:53F9 - D1
   jp     c, addr_04B1B                ; 01:53FA - DA 1B 4B
   ld     c, a                         ; 01:53FD - 4F
   ld     e, c                         ; 01:53FE - 59
   ld     d, c                         ; 01:53FF - 51
   ld     (ix+20), $09                 ; 01:5400 - DD 36 14 09
   jp     addr_04B1B                   ; 01:5404 - C3 1B 4B

addr_05407:
   bit    7, (ix+24)                   ; 01:5407 - DD CB 18 7E
   jr     z, addr_0542E                ; 01:540B - 28 21
   bit    3, (ix+24)                   ; 01:540D - DD CB 18 5E
   jr     nz, addr_05419               ; 01:5411 - 20 06
   bit    5, (iy+g_inputs_player_1-IYBASE)  ; 01:5413 - FD CB 03 6E
   jr     z, addr_0542E                ; 01:5417 - 28 15

addr_05419:
   bit    5, (iy+g_inputs_player_1-IYBASE)  ; 01:5419 - FD CB 03 6E
   jr     nz, addr_05435               ; 01:541D - 20 16
   res    0, (ix+24)                   ; 01:541F - DD CB 18 86
   ld     a, (sonic_vel_x_sub)         ; 01:5423 - 3A 03 D4
   and    $F8                          ; 01:5426 - E6 F8
   ld     (sonic_vel_x_sub), a         ; 01:5428 - 32 03 D4
   jp     addr_04B7F                   ; 01:542B - C3 7F 4B

addr_0542E:
   ;; Suppress jumping.
   res    3, (ix+24)                   ; 01:542E - DD CB 18 9E
   jp     addr_04BAC                   ; 01:5432 - C3 AC 4B

addr_05435:
   ;; Allow jumping.
   set    3, (ix+24)                   ; 01:5435 - DD CB 18 DE
   jp     addr_04BAC                   ; 01:5439 - C3 AC 4B

addr_0543C:
   set    5, (ix+24)                   ; 01:543C - DD CB 18 EE
   ld     a, (var_D287)                ; 01:5440 - 3A 87 D2
   cp     $60                          ; 01:5443 - FE 60
   jr     z, addr_054AA                ; 01:5445 - 28 63
   ld     hl, (var_D25D)               ; 01:5447 - 2A 5D D2
   ld     de, $00C0                    ; 01:544A - 11 C0 00
   add    hl, de                       ; 01:544D - 19
   ld     de, (sonic_y)                ; 01:544E - ED 5B 01 D4
   sbc    hl, de                       ; 01:5452 - ED 52
   jr     nc, addr_0546C               ; 01:5454 - 30 16
   bit    2, (iy+var_D206-IYBASE)      ; 01:5456 - FD CB 06 56
   jr     nz, addr_0546C               ; 01:545A - 20 10
   ld     a, $01                       ; 01:545C - 3E 01
   ld     (var_D283), a                ; 01:545E - 32 83 D2
   ld     hl, g_lives                  ; 01:5461 - 21 46 D2
   dec    (hl)                         ; 01:5464 - 35
   set    2, (iy+var_D206-IYBASE)      ; 01:5465 - FD CB 06 D6
   jp     addr_054AA                   ; 01:5469 - C3 AA 54

addr_0546C:
   xor    a                            ; 01:546C - AF
   ld     hl, $0080                    ; 01:546D - 21 80 00
   bit    3, (iy+var_D208-IYBASE)      ; 01:5470 - FD CB 08 5E
   jr     nz, addr_0549B               ; 01:5474 - 20 25
   ld     de, (sonic_vel_y_sub)        ; 01:5476 - ED 5B 06 D4
   bit    7, d                         ; 01:547A - CB 7A
   jr     nz, addr_05486               ; 01:547C - 20 08
   ld     hl, $0600                    ; 01:547E - 21 00 06
   and    a                            ; 01:5481 - A7
   sbc    hl, de                       ; 01:5482 - ED 52
   jr     c, addr_054A1                ; 01:5484 - 38 1B

addr_05486:
   ex     de, hl                       ; 01:5486 - EB
   ld     b, (ix+12)                   ; 01:5487 - DD 46 0C
   ld     a, h                         ; 01:548A - 7C
   cp     $80                          ; 01:548B - FE 80
   jr     nc, addr_05493               ; 01:548D - 30 04
   cp     $08                          ; 01:548F - FE 08
   jr     nc, addr_05498               ; 01:5491 - 30 05

addr_05493:
   ld     de, $0030                    ; 01:5493 - 11 30 00
   ld     c, $00                       ; 01:5496 - 0E 00

addr_05498:
   add    hl, de                       ; 01:5498 - 19
   ld     a, b                         ; 01:5499 - 78
   adc    a, c                         ; 01:549A - 89

addr_0549B:
   ld     (sonic_vel_y_sub), hl        ; 01:549B - 22 06 D4
   ld     (sonic_vel_y_hi), a          ; 01:549E - 32 08 D4

addr_054A1:
   xor    a                            ; 01:54A1 - AF
   ld     l, a                         ; 01:54A2 - 6F
   ld     h, a                         ; 01:54A3 - 67
   ld     (sonic_vel_x_sub), hl        ; 01:54A4 - 22 03 D4
   ld     (sonic_vel_x_hi), a          ; 01:54A7 - 32 05 D4

addr_054AA:
   ld     (ix+20), $0B                 ; 01:54AA - DD 36 14 0B
   bit    3, (iy+var_D208-IYBASE)      ; 01:54AE - FD CB 08 5E
   jp     z, addr_04C39                ; 01:54B2 - CA 39 4C
   ld     (ix+20), $15                 ; 01:54B5 - DD 36 14 15
   jp     addr_04C39                   ; 01:54B9 - C3 39 4C

addr_054BC:
   bit    7, (iy+var_D206-IYBASE)      ; 01:54BC - FD CB 06 7E
   ret    nz                           ; 01:54C0 - C0
   res    4, (ix+24)                   ; 01:54C1 - DD CB 18 A6
   ret                                 ; 01:54C5 - C9

addr_054C6:
   bit    0, (iy+var_D205-IYBASE)      ; 01:54C6 - FD CB 05 46
   jp     z, addr_035FD                ; 01:54CA - CA FD 35
   ret                                 ; 01:54CD - C9

addr_054CE:
   ld     a, (ix+2)                    ; 01:54CE - DD 7E 02
   add    a, $0C                       ; 01:54D1 - C6 0C
   and    $1F                          ; 01:54D3 - E6 1F
   cp     $1A                          ; 01:54D5 - FE 1A
   ret    c                            ; 01:54D7 - D8
   ld     a, (var_D414)                ; 01:54D8 - 3A 14 D4
   rrca                                ; 01:54DB - 0F
   jr     c, addr_054E1                ; 01:54DC - 38 03
   and    $02                          ; 01:54DE - E6 02
   ret    z                            ; 01:54E0 - C8

addr_054E1:
   ld     l, (ix+7)                    ; 01:54E1 - DD 6E 07
   ld     h, (ix+8)                    ; 01:54E4 - DD 66 08
   bit    7, (ix+9)                    ; 01:54E7 - DD CB 09 7E
   ret    nz                           ; 01:54EB - C0
   ld     de, $0301                    ; 01:54EC - 11 01 03
   and    a                            ; 01:54EF - A7
   sbc    hl, de                       ; 01:54F0 - ED 52
   ret    c                            ; 01:54F2 - D8
   ld     l, (ix+8)                    ; 01:54F3 - DD 6E 08
   ld     h, (ix+9)                    ; 01:54F6 - DD 66 09
   add    hl, hl                       ; 01:54F9 - 29
   ld     a, l                         ; 01:54FA - 7D
   cpl                                 ; 01:54FB - 2F
   ld     l, a                         ; 01:54FC - 6F
   ld     a, h                         ; 01:54FD - 7C
   cpl                                 ; 01:54FE - 2F
   ld     h, a                         ; 01:54FF - 67
   inc    hl                           ; 01:5500 - 23
   ld     (ix+10), $00                 ; 01:5501 - DD 36 0A 00
   ld     (ix+11), l                   ; 01:5505 - DD 75 0B
   ld     (ix+12), h                   ; 01:5508 - DD 74 0C
   ld     a, $05                       ; 01:550B - 3E 05
   rst    $28                          ; 01:550D - EF
   ret                                 ; 01:550E - C9

addr_0550F:
   ld     a, (ix+2)                    ; 01:550F - DD 7E 02
   add    a, $0C                       ; 01:5512 - C6 0C
   and    $1F                          ; 01:5514 - E6 1F
   cp     $10                          ; 01:5516 - FE 10
   ret    c                            ; 01:5518 - D8
   ld     (ix+7), $00                  ; 01:5519 - DD 36 07 00
   ld     (ix+8), $F8                  ; 01:551D - DD 36 08 F8
   ld     (ix+9), $FF                  ; 01:5521 - DD 36 09 FF
   set    1, (ix+24)                   ; 01:5525 - DD CB 18 CE
   ld     a, $04                       ; 01:5529 - 3E 04
   rst    $28                          ; 01:552B - EF
   ret                                 ; 01:552C - C9

addr_0552D:
   ld     a, (ix+2)                    ; 01:552D - DD 7E 02
   add    a, $0C                       ; 01:5530 - C6 0C
   and    $1F                          ; 01:5532 - E6 1F
   cp     $10                          ; 01:5534 - FE 10
   ret    c                            ; 01:5536 - D8
   bit    7, (ix+24)                   ; 01:5537 - DD CB 18 7E
   ret    z                            ; 01:553B - C8
   ld     a, (var_D2B9)                ; 01:553C - 3A B9 D2
   and    $80                          ; 01:553F - E6 80
   ret    nz                           ; 01:5541 - C0
   res    6, (iy+var_D206-IYBASE)      ; 01:5542 - FD CB 06 B6
   ld     (ix+10), $00                 ; 01:5546 - DD 36 0A 00
   ld     (ix+11), $F4                 ; 01:554A - DD 36 0B F4
   ld     (ix+12), $FF                 ; 01:554E - DD 36 0C FF
   ld     a, $04                       ; 01:5552 - 3E 04
   rst    $28                          ; 01:5554 - EF
   ret                                 ; 01:5555 - C9

addr_05556:
   ld     a, (ix+2)                    ; 01:5556 - DD 7E 02
   add    a, $0C                       ; 01:5559 - C6 0C
   and    $1F                          ; 01:555B - E6 1F
   cp     $10                          ; 01:555D - FE 10
   ret    nc                           ; 01:555F - D0
   res    6, (iy+var_D206-IYBASE)      ; 01:5560 - FD CB 06 B6
   ld     (ix+7), $00                  ; 01:5564 - DD 36 07 00
   ld     (ix+8), $08                  ; 01:5568 - DD 36 08 08
   ld     (ix+9), $00                  ; 01:556C - DD 36 09 00
   res    1, (ix+24)                   ; 01:5570 - DD CB 18 8E
   ld     a, $04                       ; 01:5574 - 3E 04
   rst    $28                          ; 01:5576 - EF
   ret                                 ; 01:5577 - C9

addr_05578:
   bit    7, (ix+24)                   ; 01:5578 - DD CB 18 7E
   ret    z                            ; 01:557C - C8
   ld     hl, (sonic_x_sub)            ; 01:557D - 2A FD D3
   ld     a, (var_D3FF)                ; 01:5580 - 3A FF D3
   ld     de, $FE80                    ; 01:5583 - 11 80 FE
   add    hl, de                       ; 01:5586 - 19
   adc    a, $FF                       ; 01:5587 - CE FF
   ld     (sonic_x_sub), hl            ; 01:5589 - 22 FD D3
   ld     (var_D3FF), a                ; 01:558C - 32 FF D3
   ret                                 ; 01:558F - C9

addr_05590:
   bit    7, (ix+24)                   ; 01:5590 - DD CB 18 7E
   ret    z                            ; 01:5594 - C8
   ld     hl, (sonic_x_sub)            ; 01:5595 - 2A FD D3
   ld     a, (var_D3FF)                ; 01:5598 - 3A FF D3
   ld     de, $0200                    ; 01:559B - 11 00 02
   add    hl, de                       ; 01:559E - 19
   adc    a, $00                       ; 01:559F - CE 00
   ld     (sonic_x_sub), hl            ; 01:55A1 - 22 FD D3
   ld     (var_D3FF), a                ; 01:55A4 - 32 FF D3
   ret                                 ; 01:55A7 - C9

addr_055A8:
   bit    4, (ix+24)                   ; 01:55A8 - DD CB 18 66
   jr     nz, addr_055B1               ; 01:55AC - 20 03
   ld     a, $12                       ; 01:55AE - 3E 12
   rst    $28                          ; 01:55B0 - EF

addr_055B1:
   set    4, (ix+24)                   ; 01:55B1 - DD CB 18 E6
   ret                                 ; 01:55B5 - C9

addr_055B6:
   ld     a, (ix+2)                    ; 01:55B6 - DD 7E 02
   add    a, $0C                       ; 01:55B9 - C6 0C
   and    $1F                          ; 01:55BB - E6 1F
   cp     $08                          ; 01:55BD - FE 08
   ret    c                            ; 01:55BF - D8
   cp     $18                          ; 01:55C0 - FE 18
   ret    nc                           ; 01:55C2 - D0
   bit    7, (ix+24)                   ; 01:55C3 - DD CB 18 7E
   ret    z                            ; 01:55C7 - C8
   ld     a, (var_D2B9)                ; 01:55C8 - 3A B9 D2
   and    $80                          ; 01:55CB - E6 80
   ret    nz                           ; 01:55CD - C0
   res    6, (iy+var_D206-IYBASE)      ; 01:55CE - FD CB 06 B6
   ld     (ix+10), $00                 ; 01:55D2 - DD 36 0A 00
   ld     (ix+11), $F4                 ; 01:55D6 - DD 36 0B F4
   ld     (ix+12), $FF                 ; 01:55DA - DD 36 0C FF
   ld     a, $04                       ; 01:55DE - 3E 04
   rst    $28                          ; 01:55E0 - EF
   ret                                 ; 01:55E1 - C9

addr_055E2:
   bit    7, (ix+12)                   ; 01:55E2 - DD CB 0C 7E
   ret    nz                           ; 01:55E6 - C0
   ld     a, $05                       ; 01:55E7 - 3E 05
   rst    $28                          ; 01:55E9 - EF
   ret                                 ; 01:55EA - C9

addr_055EB:
   bit    4, (iy+var_D206-IYBASE)      ; 01:55EB - FD CB 06 66
   ret    nz                           ; 01:55EF - C0
   ld     a, (sonic_x)                 ; 01:55F0 - 3A FE D3
   add    a, $0C                       ; 01:55F3 - C6 0C
   and    $1F                          ; 01:55F5 - E6 1F
   cp     $08                          ; 01:55F7 - FE 08
   ret    c                            ; 01:55F9 - D8
   cp     $18                          ; 01:55FA - FE 18
   ret    nc                           ; 01:55FC - D0
   ld     hl, (sonic_x)                ; 01:55FD - 2A FE D3
   ld     bc, $000C                    ; 01:5600 - 01 0C 00
   add    hl, bc                       ; 01:5603 - 09
   ld     a, l                         ; 01:5604 - 7D
   add    a, a                         ; 01:5605 - 87
   rl     h                            ; 01:5606 - CB 14
   add    a, a                         ; 01:5608 - 87
   rl     h                            ; 01:5609 - CB 14
   add    a, a                         ; 01:560B - 87
   rl     h                            ; 01:560C - CB 14
   ld     e, h                         ; 01:560E - 5C
   ld     hl, (sonic_y)                ; 01:560F - 2A 01 D4
   ld     bc, $0010                    ; 01:5612 - 01 10 00
   add    hl, bc                       ; 01:5615 - 09
   ld     a, l                         ; 01:5616 - 7D
   add    a, a                         ; 01:5617 - 87
   rl     h                            ; 01:5618 - CB 14
   add    a, a                         ; 01:561A - 87
   rl     h                            ; 01:561B - CB 14
   add    a, a                         ; 01:561D - 87
   rl     h                            ; 01:561E - CB 14
   ld     d, h                         ; 01:5620 - 54
   ld     hl, UNK_05643                ; 01:5621 - 21 43 56
   ld     b, $05                       ; 01:5624 - 06 05

addr_05626:
   ld     a, (hl)                      ; 01:5626 - 7E
   inc    hl                           ; 01:5627 - 23
   cp     e                            ; 01:5628 - BB
   jr     nz, addr_0563C               ; 01:5629 - 20 11
   ld     a, (hl)                      ; 01:562B - 7E
   cp     d                            ; 01:562C - BA
   jr     nz, addr_0563C               ; 01:562D - 20 0D
   inc    hl                           ; 01:562F - 23
   ld     (var_D2D5), hl               ; 01:5630 - 22 D5 D2
   ld     a, $50                       ; 01:5633 - 3E 50
   ld     (var_D28A), a                ; 01:5635 - 32 8A D2
   ld     a, $06                       ; 01:5638 - 3E 06
   rst    $28                          ; 01:563A - EF
   ret                                 ; 01:563B - C9

addr_0563C:
   inc    hl                           ; 01:563C - 23
   inc    hl                           ; 01:563D - 23
   inc    hl                           ; 01:563E - 23
   inc    hl                           ; 01:563F - 23
   djnz   addr_05626                   ; 01:5640 - 10 E4
   ret                                 ; 01:5642 - C9

UNK_05643:
.db $34, $3C, $34, $2F, $00, $19, $3A, $19, $04, $00, $0E, $3A, $00, $00, $16, $1B  ; 01:5643
.db $32, $00, $00, $17, $2F, $0C, $00, $00, $FF                                     ; 01:5653

addr_0565C:
   ld     hl, (sonic_vel_x_sub)        ; 01:565C - 2A 03 D4
   ld     a, (sonic_vel_x_hi)          ; 01:565F - 3A 05 D4
   ld     de, $FFF8                    ; 01:5662 - 11 F8 FF
   add    hl, de                       ; 01:5665 - 19
   adc    a, $FF                       ; 01:5666 - CE FF
   ld     (sonic_vel_x_sub), hl        ; 01:5668 - 22 03 D4
   ld     (sonic_vel_x_hi), a          ; 01:566B - 32 05 D4
   bit    4, (ix+24)                   ; 01:566E - DD CB 18 66
   jr     nz, addr_05677               ; 01:5672 - 20 03
   ld     a, $12                       ; 01:5674 - 3E 12
   rst    $28                          ; 01:5676 - EF

addr_05677:
   set    4, (ix+24)                   ; 01:5677 - DD CB 18 E6
   ret                                 ; 01:567B - C9

addr_0567C:
   xor    a                            ; 01:567C - AF
   ld     hl, $0005                    ; 01:567D - 21 05 00
   ld     (sonic_vel_x_sub), a         ; 01:5680 - 32 03 D4
   ld     (sonic_vel_x), hl            ; 01:5683 - 22 04 D4
   res    1, (ix+24)                   ; 01:5686 - DD CB 18 8E

addr_0568A:
   ld     a, $06                       ; 01:568A - 3E 06
   ld     (var_D28C), a                ; 01:568C - 32 8C D2

addr_0568F:
   ld     a, (iy+g_inputs_player_1-IYBASE)  ; 01:568F - FD 7E 03
   or     $0F                          ; 01:5692 - F6 0F
   ld     (iy+g_inputs_player_1-IYBASE), a  ; 01:5694 - FD 77 03
   ld     hl, $0004                    ; 01:5697 - 21 04 00
   ld     (sonic_vel_y), hl            ; 01:569A - 22 07 D4
   res    0, (ix+24)                   ; 01:569D - DD CB 18 86
   res    2, (ix+24)                   ; 01:56A1 - DD CB 18 96
   ret                                 ; 01:56A5 - C9

addr_056A6:
   xor    a                            ; 01:56A6 - AF
   ld     hl, $0006                    ; 01:56A7 - 21 06 00
   ld     (sonic_vel_x_sub), a         ; 01:56AA - 32 03 D4
   ld     (sonic_vel_x), hl            ; 01:56AD - 22 04 D4
   res    1, (ix+24)                   ; 01:56B0 - DD CB 18 8E
   jr     addr_0568A                   ; 01:56B4 - 18 D4

addr_056B6:
   xor    a                            ; 01:56B6 - AF
   ld     hl, $FFFB                    ; 01:56B7 - 21 FB FF
   ld     (sonic_vel_x_sub), a         ; 01:56BA - 32 03 D4
   ld     (sonic_vel_x), hl            ; 01:56BD - 22 04 D4
   set    1, (ix+24)                   ; 01:56C0 - DD CB 18 CE
   jr     addr_0568A                   ; 01:56C4 - 18 C4

addr_056C6:
   xor    a                            ; 01:56C6 - AF
   ld     hl, $FFFA                    ; 01:56C7 - 21 FA FF
   ld     (sonic_vel_x_sub), a         ; 01:56CA - 32 03 D4
   ld     (sonic_vel_x), hl            ; 01:56CD - 22 04 D4
   set    1, (ix+24)                   ; 01:56D0 - DD CB 18 CE
   jr     addr_0568A                   ; 01:56D4 - 18 B4

addr_056D6:
   ld     a, (var_D2E1)                ; 01:56D6 - 3A E1 D2
   cp     $08                          ; 01:56D9 - FE 08
   ret    nc                           ; 01:56DB - D0
   call   addr_05727                   ; 01:56DC - CD 27 57
   ld     de, $0001                    ; 01:56DF - 11 01 00
   ld     hl, (sonic_vel_y_sub)        ; 01:56E2 - 2A 06 D4
   ld     a, l                         ; 01:56E5 - 7D
   cpl                                 ; 01:56E6 - 2F
   ld     l, a                         ; 01:56E7 - 6F
   ld     a, h                         ; 01:56E8 - 7C
   cpl                                 ; 01:56E9 - 2F
   ld     h, a                         ; 01:56EA - 67
   ld     a, (sonic_vel_y_hi)          ; 01:56EB - 3A 08 D4
   cpl                                 ; 01:56EE - 2F
   add    hl, de                       ; 01:56EF - 19
   adc    a, $00                       ; 01:56F0 - CE 00
   and    a                            ; 01:56F2 - A7
   jp     p, addr_056FC                ; 01:56F3 - F2 FC 56
   ld     de, $FFC8                    ; 01:56F6 - 11 C8 FF
   add    hl, de                       ; 01:56F9 - 19
   adc    a, $FF                       ; 01:56FA - CE FF

addr_056FC:
   ld     (sonic_vel_y_sub), hl        ; 01:56FC - 22 06 D4
   ld     (sonic_vel_y_hi), a          ; 01:56FF - 32 08 D4
   ld     bc, $000C                    ; 01:5702 - 01 0C 00
   ld     hl, (sonic_x)                ; 01:5705 - 2A FE D3
   add    hl, bc                       ; 01:5708 - 09
   ld     a, l                         ; 01:5709 - 7D
   and    $E0                          ; 01:570A - E6 E0
   ld     l, a                         ; 01:570C - 6F
   ld     (var_D2E2), hl               ; 01:570D - 22 E2 D2
   ld     bc, $0010                    ; 01:5710 - 01 10 00
   ld     hl, (sonic_y)                ; 01:5713 - 2A 01 D4
   add    hl, bc                       ; 01:5716 - 09
   ld     a, l                         ; 01:5717 - 7D
   and    $E0                          ; 01:5718 - E6 E0
   ld     l, a                         ; 01:571A - 6F
   ld     (var_D2E4), hl               ; 01:571B - 22 E4 D2
   ld     a, $10                       ; 01:571E - 3E 10
   ld     (var_D2E1), a                ; 01:5720 - 32 E1 D2
   ld     a, $07                       ; 01:5723 - 3E 07
   rst    $28                          ; 01:5725 - EF
   ret                                 ; 01:5726 - C9

addr_05727:
   ld     hl, (sonic_vel_x_sub)        ; 01:5727 - 2A 03 D4
   ld     a, (sonic_vel_x_hi)          ; 01:572A - 3A 05 D4
   ld     c, a                         ; 01:572D - 4F
   and    $80                          ; 01:572E - E6 80
   ld     b, a                         ; 01:5730 - 47
   ld     a, (sonic_x)                 ; 01:5731 - 3A FE D3
   add    a, $0C                       ; 01:5734 - C6 0C
   and    $1F                          ; 01:5736 - E6 1F
   sub    $10                          ; 01:5738 - D6 10
   and    $80                          ; 01:573A - E6 80
   cp     b                            ; 01:573C - B8
   jr     z, addr_05748                ; 01:573D - 28 09
   ld     a, l                         ; 01:573F - 7D
   cpl                                 ; 01:5740 - 2F
   ld     l, a                         ; 01:5741 - 6F
   ld     a, h                         ; 01:5742 - 7C
   cpl                                 ; 01:5743 - 2F
   ld     h, a                         ; 01:5744 - 67
   ld     a, c                         ; 01:5745 - 79
   cpl                                 ; 01:5746 - 2F
   ld     c, a                         ; 01:5747 - 4F

addr_05748:
   ld     de, $0001                    ; 01:5748 - 11 01 00
   ld     a, c                         ; 01:574B - 79
   add    hl, de                       ; 01:574C - 19
   adc    a, $00                       ; 01:574D - CE 00
   ld     e, l                         ; 01:574F - 5D
   ld     d, h                         ; 01:5750 - 54
   ld     c, a                         ; 01:5751 - 4F
   sra    c                            ; 01:5752 - CB 29
   rr     d                            ; 01:5754 - CB 1A
   rr     e                            ; 01:5756 - CB 1B
   add    hl, de                       ; 01:5758 - 19
   adc    a, c                         ; 01:5759 - 89
   ld     (sonic_vel_x_sub), hl        ; 01:575A - 22 03 D4
   ld     (sonic_vel_x_hi), a          ; 01:575D - 32 05 D4
   ret                                 ; 01:5760 - C9

addr_05761:
   ld     (ix+10), $00                 ; 01:5761 - DD 36 0A 00
   ld     (ix+11), $F6                 ; 01:5765 - DD 36 0B F6
   ld     (ix+12), $FF                 ; 01:5769 - DD 36 0C FF
   ld     a, $04                       ; 01:576D - 3E 04
   rst    $28                          ; 01:576F - EF
   ret                                 ; 01:5770 - C9

addr_05771:
   ld     (ix+10), $00                 ; 01:5771 - DD 36 0A 00
   ld     (ix+11), $F4                 ; 01:5775 - DD 36 0B F4
   ld     (ix+12), $FF                 ; 01:5779 - DD 36 0C FF
   ld     a, $04                       ; 01:577D - 3E 04
   rst    $28                          ; 01:577F - EF
   ret                                 ; 01:5780 - C9

addr_05781:
   ld     (ix+10), $00                 ; 01:5781 - DD 36 0A 00
   ld     (ix+11), $F2                 ; 01:5785 - DD 36 0B F2
   ld     (ix+12), $FF                 ; 01:5789 - DD 36 0C FF
   ld     a, $04                       ; 01:578D - 3E 04
   rst    $28                          ; 01:578F - EF
   ret                                 ; 01:5790 - C9

addr_05791:
   ld     a, (var_D2B1)                ; 01:5791 - 3A B1 D2
   and    a                            ; 01:5794 - A7
   ret    nz                           ; 01:5795 - C0
   ld     de, $0001                    ; 01:5796 - 11 01 00
   ld     hl, (sonic_vel_x_sub)        ; 01:5799 - 2A 03 D4
   ld     a, l                         ; 01:579C - 7D
   cpl                                 ; 01:579D - 2F
   ld     l, a                         ; 01:579E - 6F
   ld     a, h                         ; 01:579F - 7C
   cpl                                 ; 01:57A0 - 2F
   ld     h, a                         ; 01:57A1 - 67
   ld     a, (sonic_vel_x_hi)          ; 01:57A2 - 3A 05 D4
   cpl                                 ; 01:57A5 - 2F
   add    hl, de                       ; 01:57A6 - 19
   adc    a, $00                       ; 01:57A7 - CE 00
   ld     de, $FF00                    ; 01:57A9 - 11 00 FF
   ld     c, $FF                       ; 01:57AC - 0E FF
   jp     m, addr_057B6                ; 01:57AE - FA B6 57
   ld     de, $0100                    ; 01:57B1 - 11 00 01
   ld     c, $00                       ; 01:57B4 - 0E 00

addr_057B6:
   add    hl, de                       ; 01:57B6 - 19
   adc    a, c                         ; 01:57B7 - 89
   ld     (sonic_vel_x_sub), hl        ; 01:57B8 - 22 03 D4
   ld     (sonic_vel_x_hi), a          ; 01:57BB - 32 05 D4

addr_057BE:
   ld     hl, var_D2B1                 ; 01:57BE - 21 B1 D2
   ld     (hl), $04                    ; 01:57C1 - 36 04
   inc    hl                           ; 01:57C3 - 23
   ld     (hl), $0E                    ; 01:57C4 - 36 0E
   inc    hl                           ; 01:57C6 - 23
   ld     (hl), $3F                    ; 01:57C7 - 36 3F
   ld     a, $07                       ; 01:57C9 - 3E 07
   rst    $28                          ; 01:57CB - EF
   ret                                 ; 01:57CC - C9

addr_057CD:
   call   addr_05727                   ; 01:57CD - CD 27 57
   ld     de, $0001                    ; 01:57D0 - 11 01 00
   ld     hl, (sonic_vel_y_sub)        ; 01:57D3 - 2A 06 D4
   ld     a, l                         ; 01:57D6 - 7D
   cpl                                 ; 01:57D7 - 2F
   ld     l, a                         ; 01:57D8 - 6F
   ld     a, h                         ; 01:57D9 - 7C
   cpl                                 ; 01:57DA - 2F
   ld     h, a                         ; 01:57DB - 67
   ld     a, (sonic_vel_y_hi)          ; 01:57DC - 3A 08 D4
   cpl                                 ; 01:57DF - 2F
   add    hl, de                       ; 01:57E0 - 19
   adc    a, $00                       ; 01:57E1 - CE 00
   and    a                            ; 01:57E3 - A7
   jp     p, addr_057ED                ; 01:57E4 - F2 ED 57
   ld     de, $FFC8                    ; 01:57E7 - 11 C8 FF
   add    hl, de                       ; 01:57EA - 19
   adc    a, $FF                       ; 01:57EB - CE FF

addr_057ED:
   ld     (sonic_vel_y_sub), hl        ; 01:57ED - 22 06 D4
   ld     (sonic_vel_y_hi), a          ; 01:57F0 - 32 08 D4
   jp     addr_057BE                   ; 01:57F3 - C3 BE 57

addr_057F6:
   ld     hl, (var_D2E9)               ; 01:57F6 - 2A E9 D2
   ld     de, $0082                    ; 01:57F9 - 11 82 00
   and    a                            ; 01:57FC - A7
   sbc    hl, de                       ; 01:57FD - ED 52
   ret    c                            ; 01:57FF - D8
   bit    0, (iy+var_D205-IYBASE)      ; 01:5800 - FD CB 05 46
   jp     z, addr_035FD                ; 01:5804 - CA FD 35
   ret                                 ; 01:5807 - C9

addr_05808:
   ld     a, (var_D414)                ; 01:5808 - 3A 14 D4
   rlca                                ; 01:580B - 07
   ret    nc                           ; 01:580C - D0
   ld     hl, (sonic_x)                ; 01:580D - 2A FE D3
   ld     bc, $000C                    ; 01:5810 - 01 0C 00
   add    hl, bc                       ; 01:5813 - 09
   ld     a, l                         ; 01:5814 - 7D
   and    $1F                          ; 01:5815 - E6 1F
   cp     $10                          ; 01:5817 - FE 10
   jr     nc, addr_05858               ; 01:5819 - 30 3D

addr_0581B:
   ld     hl, (sonic_x)                ; 01:581B - 2A FE D3
   ld     bc, $000C                    ; 01:581E - 01 0C 00
   add    hl, bc                       ; 01:5821 - 09
   ld     a, l                         ; 01:5822 - 7D
   and    $E0                          ; 01:5823 - E6 E0
   ld     c, a                         ; 01:5825 - 4F
   ld     b, h                         ; 01:5826 - 44
   ld     hl, (sonic_y)                ; 01:5827 - 2A 01 D4
   ld     de, $0010                    ; 01:582A - 11 10 00
   add    hl, de                       ; 01:582D - 19
   ld     a, l                         ; 01:582E - 7D
   and    $E0                          ; 01:582F - E6 E0
   ld     e, a                         ; 01:5831 - 5F
   ld     d, h                         ; 01:5832 - 54
   call   addr_05893                   ; 01:5833 - CD 93 58
   ret    c                            ; 01:5836 - D8
   ld     bc, $000C                    ; 01:5837 - 01 0C 00
   ld     de, $0010                    ; 01:583A - 11 10 00
   call   addr_036F9                   ; 01:583D - CD F9 36
   ld     c, $00                       ; 01:5840 - 0E 00
   ld     a, (hl)                      ; 01:5842 - 7E
   cp     $8A                          ; 01:5843 - FE 8A
   jr     z, addr_05849                ; 01:5845 - 28 02
   ld     c, $89                       ; 01:5847 - 0E 89

addr_05849:
   ld     (hl), c                      ; 01:5849 - 71
   ret                                 ; 01:584A - C9

addr_0584B:
   ld     hl, (sonic_x)                ; 01:584B - 2A FE D3
   ld     bc, $000C                    ; 01:584E - 01 0C 00
   add    hl, bc                       ; 01:5851 - 09
   ld     a, l                         ; 01:5852 - 7D
   and    $1F                          ; 01:5853 - E6 1F
   cp     $10                          ; 01:5855 - FE 10
   ret    c                            ; 01:5857 - D8

addr_05858:
   ld     a, l                         ; 01:5858 - 7D
   and    $E0                          ; 01:5859 - E6 E0
   add    a, $10                       ; 01:585B - C6 10
   ld     c, a                         ; 01:585D - 4F
   ld     b, h                         ; 01:585E - 44
   ld     hl, (sonic_y)                ; 01:585F - 2A 01 D4
   ld     de, $0010                    ; 01:5862 - 11 10 00
   add    hl, de                       ; 01:5865 - 19
   ld     a, l                         ; 01:5866 - 7D
   and    $E0                          ; 01:5867 - E6 E0
   ld     e, a                         ; 01:5869 - 5F
   ld     d, h                         ; 01:586A - 54
   call   addr_05893                   ; 01:586B - CD 93 58
   ret    c                            ; 01:586E - D8
   ld     bc, $000C                    ; 01:586F - 01 0C 00
   ld     de, $0010                    ; 01:5872 - 11 10 00
   call   addr_036F9                   ; 01:5875 - CD F9 36
   ld     c, $00                       ; 01:5878 - 0E 00
   ld     a, (hl)                      ; 01:587A - 7E
   cp     $89                          ; 01:587B - FE 89
   jr     z, addr_05849                ; 01:587D - 28 CA
   ld     c, $8A                       ; 01:587F - 0E 8A
   ld     (hl), c                      ; 01:5881 - 71
   ret                                 ; 01:5882 - C9

addr_05883:
   ld     hl, (sonic_x)                ; 01:5883 - 2A FE D3
   ld     bc, $000C                    ; 01:5886 - 01 0C 00
   add    hl, bc                       ; 01:5889 - 09
   ld     a, l                         ; 01:588A - 7D
   and    $1F                          ; 01:588B - E6 1F
   cp     $10                          ; 01:588D - FE 10
   ret    nc                           ; 01:588F - D0
   jp     addr_0581B                   ; 01:5890 - C3 1B 58

addr_05893:
   push   bc                           ; 01:5893 - C5
   push   de                           ; 01:5894 - D5
   call   spawn_object                 ; 01:5895 - CD 7B 7C
   pop    de                           ; 01:5898 - D1
   pop    bc                           ; 01:5899 - C1
   ret    c                            ; 01:589A - D8
   push   ix                           ; 01:589B - DD E5
   push   hl                           ; 01:589D - E5
   pop    ix                           ; 01:589E - DD E1
   xor    a                            ; 01:58A0 - AF
   ld     (ix+0), $2E                  ; 01:58A1 - DD 36 00 2E
   ld     (ix+1), a                    ; 01:58A5 - DD 77 01
   ld     (ix+2), c                    ; 01:58A8 - DD 71 02
   ld     (ix+3), b                    ; 01:58AB - DD 70 03
   ld     (ix+4), a                    ; 01:58AE - DD 77 04
   ld     (ix+5), e                    ; 01:58B1 - DD 73 05
   ld     (ix+6), d                    ; 01:58B4 - DD 72 06
   ld     (ix+7), a                    ; 01:58B7 - DD 77 07
   ld     (ix+8), a                    ; 01:58BA - DD 77 08
   ld     (ix+9), a                    ; 01:58BD - DD 77 09
   ld     (ix+10), a                   ; 01:58C0 - DD 77 0A
   ld     (ix+11), a                   ; 01:58C3 - DD 77 0B
   ld     (ix+12), a                   ; 01:58C6 - DD 77 0C
   ld     (ix+24), a                   ; 01:58C9 - DD 77 18
   pop    ix                           ; 01:58CC - DD E1
   and    a                            ; 01:58CE - A7
   ret                                 ; 01:58CF - C9

addr_058D0:
   bit    7, (ix+24)                   ; 01:58D0 - DD CB 18 7E
   ret    z                            ; 01:58D4 - C8
   ld     hl, (sonic_y)                ; 01:58D5 - 2A 01 D4
   ld     de, (var_D25D)               ; 01:58D8 - ED 5B 5D D2
   and    a                            ; 01:58DC - A7
   sbc    hl, de                       ; 01:58DD - ED 52
   ret    nc                           ; 01:58DF - D0
   ld     (iy+g_inputs_player_1-IYBASE), $FF  ; 01:58E0 - FD 36 03 FF
   ret                                 ; 01:58E4 - C9

LUT_058E5:
.dw addr_054BC, addr_054C6, addr_054CE, addr_0550F, addr_0552D, addr_05556, addr_05578, addr_05590  ; 01:58E5
.dw addr_055A8, addr_055B6, addr_055E2, addr_055EB, addr_0565C, addr_0567C, addr_056A6, addr_056B6  ; 01:58F5
.dw addr_056C6, addr_056D6, addr_05761, addr_05771, addr_05781, addr_05791, addr_057CD, addr_057F6  ; 01:5905
.dw addr_05808, addr_0584B, addr_05883, addr_058D0                                  ; 01:5915

UNK_0591D:
.db $B4, $B6, $B8, $FF, $FF, $FF, $BA, $BC, $BE, $FF, $FF, $FF, $FF, $FF            ; 01:591D

UNK_0592B:
.db $B8, $B6, $B4, $FF, $FF, $FF, $BE, $BC, $BA, $FF, $FF, $FF, $FF, $FF            ; 01:592B

UNK_05939:
.db $B4, $B6, $B8, $FF, $FF, $FF, $BA, $BC, $BE, $FF, $FF, $FF, $98, $9A, $FF, $FF  ; 01:5939
.db $FF, $FF                                                                        ; 01:5949

.IF shrink_sonicuncart_interleave
UNK_0594B:
.db $B8, $B6, $B4, $FF, $FF, $FF, $BE, $BC, $BA, $FF, $FF, $FF, $FE, $9C, $9E, $FF
.db $FF, $FF
.ELSE
UNK_0594B:
.db $B4, $B6, $B8, $FF, $FF, $FF, $BA, $BC, $BE, $FF, $FF, $FF, $FE, $9C, $9E, $FF  ; 01:594B
.db $FF, $FF                                                                        ; 01:595B
.ENDIF

UNK_0595D:
.db $00, $00, $00, $00, $00, $00, $00, $00                                          ; 01:595D

LUT_UNK_05965:
.dw addr_05999, addr_05999, addr_059CB, addr_059DD, addr_059DF, addr_059E2, addr_059E5, addr_059FB  ; 01:5965
.dw addr_059FE, addr_05A01, addr_05A53, addr_05A65, addr_05A68, addr_05A6B, addr_05AAF, addr_05AC5  ; 01:5975
.dw addr_05ACC, addr_05AD0, addr_05ADE, addr_05AE1, addr_05AE4, addr_05AE7, addr_05AEA, addr_05B00  ; 01:5985
.dw addr_05B03, addr_05B06                                                          ; 01:5995

addr_05999:
.db $00, $00, $00, $00, $00, $00, $00, $00, $01, $01, $01, $01, $01, $01, $01, $01  ; 01:5999
.db $02, $02, $02, $02, $02, $02, $02, $02, $03, $03, $03, $03, $03, $03, $03, $03  ; 01:59A9
.db $04, $04, $04, $04, $04, $04, $04, $04, $05, $05, $05, $05, $05, $05, $05, $05  ; 01:59B9
.db $FF, $00                                                                        ; 01:59C9

addr_059CB:
.db $0D, $0D, $0D, $0D, $0E, $0E, $0E, $0E, $0F, $0F, $0F, $0F, $10, $10, $10, $10  ; 01:59CB
.db $FF, $00                                                                        ; 01:59DB

addr_059DD:
.db $FF, $00                                                                        ; 01:59DD

addr_059DF:
.db $13, $FF, $00                                                                   ; 01:59DF

addr_059E2:
.db $06, $FF, $00                                                                   ; 01:59E2

addr_059E5:
.db $08, $08, $08, $08, $09, $09, $09, $09, $0A, $0A, $0A, $0A, $0B, $0B, $0B, $0B  ; 01:59E5
.db $0C, $0C, $0C, $0C, $FF, $00                                                    ; 01:59F5

addr_059FB:
.db $07, $FF, $00                                                                   ; 01:59FB

addr_059FE:
.db $00, $FF, $00                                                                   ; 01:59FE

addr_05A01:
.db $0C, $0C, $0C, $0C, $0C, $0C, $0C, $0C, $0C, $0C, $0C, $0C, $0C, $0C, $0C, $0C  ; 01:5A01
.db $08, $08, $08, $08, $08, $08, $08, $08, $08, $08, $08, $08, $08, $08, $08, $08  ; 01:5A11
.db $09, $09, $09, $09, $09, $09, $09, $09, $09, $09, $09, $09, $09, $09, $09, $09  ; 01:5A21
.db $0A, $0A, $0A, $0A, $0A, $0A, $0A, $0A, $0A, $0A, $0A, $0A, $0A, $0A, $0A, $0A  ; 01:5A31
.db $0B, $0B, $0B, $0B, $0B, $0B, $0B, $0B, $0B, $0B, $0B, $0B, $0B, $0B, $0B, $0B  ; 01:5A41
.db $FF, $00                                                                        ; 01:5A51

addr_05A53:
.db $13, $13, $13, $13, $13, $13, $13, $13, $25, $25, $25, $25, $25, $25, $25, $25  ; 01:5A53
.db $FF, $00                                                                        ; 01:5A63

addr_05A65:
.db $11, $FF, $00                                                                   ; 01:5A65

addr_05A68:
.db $14, $FF, $00                                                                   ; 01:5A68

addr_05A6B:
.db $16, $16, $16, $16, $16, $16, $16, $16, $16, $16, $16, $16, $16, $16, $16, $16  ; 01:5A6B
.db $15, $15, $15, $15, $15, $15, $15, $15, $15, $15, $15, $15, $15, $15, $15, $15  ; 01:5A7B
.db $15, $15, $16, $16, $16, $16, $16, $16, $16, $16, $16, $16, $16, $16, $16, $16  ; 01:5A8B
.db $16, $16, $17, $17, $17, $17, $17, $17, $17, $17, $17, $17, $17, $17, $17, $17  ; 01:5A9B
.db $17, $17, $FF, $22                                                              ; 01:5AAB

addr_05AAF:
.db $19, $19, $19, $19, $1A, $1A, $1B, $1B, $1C, $1C, $1D, $1D, $1E, $1E, $1F, $1F  ; 01:5AAF
.db $20, $20, $21, $21, $FF, $12                                                    ; 01:5ABF

addr_05AC5:
.db $0C, $08, $09, $0A, $0B, $FF, $00                                               ; 01:5AC5

addr_05ACC:
.db $12, $12, $FF, $00                                                              ; 01:5ACC

addr_05AD0:
.db $12, $12, $12, $12, $12, $12, $24, $24, $24, $24, $24, $24, $FF, $00            ; 01:5AD0

addr_05ADE:
.db $00, $FF, $00                                                                   ; 01:5ADE

addr_05AE1:
.db $26, $FF, $00                                                                   ; 01:5AE1

addr_05AE4:
.db $22, $FF, $00                                                                   ; 01:5AE4

addr_05AE7:
.db $23, $FF, $00                                                                   ; 01:5AE7

addr_05AEA:
.db $21, $21, $20, $20, $1F, $1F, $1E, $1E, $1D, $1D, $1C, $1C, $1B, $1B, $1A, $1A  ; 01:5AEA
.db $19, $19, $19, $19, $FF, $12                                                    ; 01:5AFA

.IF shrink_sonicuncart_interleave
addr_05B00:
.db $19+($27-$19), $FF, $00
addr_05B03:
.db $1A+($27-$19), $FF, $00
addr_05B06:
.db $1B+($27-$19), $FF, $00

.ELSE
addr_05B00:
.db $19, $FF, $00                                                                   ; 01:5B00

addr_05B03:
.db $1A, $FF, $00                                                                   ; 01:5B03

addr_05B06:
.db $1B, $FF, $00                                                                   ; 01:5B06
.ENDIF

objfunc_01_monitor_rings:
   ld     (ix+13), $14                 ; 01:5B09 - DD 36 0D 14
   ld     (ix+14), $18                 ; 01:5B0D - DD 36 0E 18
   call   addr_05DA8                   ; 01:5B11 - CD A8 5D
   ld     hl, $0003                    ; 01:5B14 - 21 03 00
   ld     (var_D214), hl               ; 01:5B17 - 22 14 D2
   call   UNK_03956                    ; 01:5B1A - CD 56 39
   jr     c, addr_05B31                ; 01:5B1D - 38 12
   call   addr_05DEB                   ; 01:5B1F - CD EB 5D
   jr     c, addr_05B31                ; 01:5B22 - 38 0D

addr_05B24:
   ld     a, $10                       ; 01:5B24 - 3E 10
   call   add_A_rings                  ; 01:5B26 - CD AC 39

addr_05B29:
   xor    a                            ; 01:5B29 - AF
   ld     (ix+15), a                   ; 01:5B2A - DD 77 0F
   ld     (ix+16), a                   ; 01:5B2D - DD 77 10
   ret                                 ; 01:5B30 - C9

addr_05B31:
   ld     hl, $5180                    ; 01:5B31 - 21 80 51

addr_05B34:
   call   UNK_00C1D                    ; 01:5B34 - CD 1D 0C
   ld     (ix+15), UNK_05BBF&$FF       ; 01:5B37 - DD 36 0F BF
   ld     (ix+16), UNK_05BBF>>8        ; 01:5B3B - DD 36 10 5B
   ld     a, (var_D223)                ; 01:5B3F - 3A 23 D2
   and    $07                          ; 01:5B42 - E6 07
   cp     $05                          ; 01:5B44 - FE 05
   ret    nc                           ; 01:5B46 - D0
   ld     (ix+15), UNK_05BCC&$FF       ; 01:5B47 - DD 36 0F CC
   ld     (ix+16), UNK_05BCC>>8        ; 01:5B4B - DD 36 10 5B
   ld     l, (ix+1)                    ; 01:5B4F - DD 6E 01
   ld     h, (ix+2)                    ; 01:5B52 - DD 66 02
   ld     a, (ix+3)                    ; 01:5B55 - DD 7E 03
   ld     e, (ix+7)                    ; 01:5B58 - DD 5E 07
   ld     d, (ix+8)                    ; 01:5B5B - DD 56 08
   add    hl, de                       ; 01:5B5E - 19
   adc    a, (ix+9)                    ; 01:5B5F - DD 8E 09
   ld     l, h                         ; 01:5B62 - 6C
   ld     h, a                         ; 01:5B63 - 67
   ld     (g_FF_string_high_byte), hl  ; 01:5B64 - 22 0E D2
   ld     l, (ix+4)                    ; 01:5B67 - DD 6E 04
   ld     h, (ix+5)                    ; 01:5B6A - DD 66 05
   ld     a, (ix+6)                    ; 01:5B6D - DD 7E 06
   bit    7, (ix+24)                   ; 01:5B70 - DD CB 18 7E
   jr     nz, addr_05B80               ; 01:5B74 - 20 0A
   ld     e, (ix+10)                   ; 01:5B76 - DD 5E 0A
   ld     d, (ix+11)                   ; 01:5B79 - DD 56 0B
   add    hl, de                       ; 01:5B7C - 19
   adc    a, (ix+12)                   ; 01:5B7D - DD 8E 0C

addr_05B80:
   ld     l, h                         ; 01:5B80 - 6C
   ld     h, a                         ; 01:5B81 - 67
   ld     (var_D210), hl               ; 01:5B82 - 22 10 D2
   ld     hl, $0004                    ; 01:5B85 - 21 04 00
   ld     (var_D212), hl               ; 01:5B88 - 22 12 D2
   ld     hl, $0000                    ; 01:5B8B - 21 00 00
   ld     (var_D214), hl               ; 01:5B8E - 22 14 D2
   ld     a, $5C                       ; 01:5B91 - 3E 5C
   call   UNK_03581                    ; 01:5B93 - CD 81 35
   ld     hl, $000C                    ; 01:5B96 - 21 0C 00
   ld     (var_D212), hl               ; 01:5B99 - 22 12 D2
   ld     a, $5E                       ; 01:5B9C - 3E 5E
   call   UNK_03581                    ; 01:5B9E - CD 81 35
   bit    1, (ix+24)                   ; 01:5BA1 - DD CB 18 4E
   ret    z                            ; 01:5BA5 - C8
   ld     l, (ix+10)                   ; 01:5BA6 - DD 6E 0A
   ld     h, (ix+11)                   ; 01:5BA9 - DD 66 0B
   ld     a, (ix+12)                   ; 01:5BAC - DD 7E 0C
   ld     de, $0040                    ; 01:5BAF - 11 40 00
   add    hl, de                       ; 01:5BB2 - 19
   adc    a, $00                       ; 01:5BB3 - CE 00
   ld     (ix+10), l                   ; 01:5BB5 - DD 75 0A
   ld     (ix+11), h                   ; 01:5BB8 - DD 74 0B
   ld     (ix+12), a                   ; 01:5BBB - DD 77 0C
   ret                                 ; 01:5BBE - C9

UNK_05BBF:
.db $54, $56, $58, $FF, $FF, $FF, $AA, $AC, $AE, $FF, $FF, $FF, $FF                 ; 01:5BBF

UNK_05BCC:
.db $54, $FE, $58, $FF, $FF, $FF, $AA, $AC, $AE, $FF, $FF, $FF, $FF                 ; 01:5BCC

objfunc_02_UNKNOWN:
   ld     (ix+13), $14                 ; 01:5BD9 - DD 36 0D 14
   ld     (ix+14), $18                 ; 01:5BDD - DD 36 0E 18
   call   addr_05DA8                   ; 01:5BE1 - CD A8 5D
   ld     hl, $0003                    ; 01:5BE4 - 21 03 00
   ld     (var_D214), hl               ; 01:5BE7 - 22 14 D2
   call   UNK_03956                    ; 01:5BEA - CD 56 39
   jr     c, addr_05BFF                ; 01:5BED - 38 10
   call   addr_05DEB                   ; 01:5BEF - CD EB 5D
   jr     c, addr_05BFF                ; 01:5BF2 - 38 0B
   ld     a, $F0                       ; 01:5BF4 - 3E F0
   ld     (var_D411), a                ; 01:5BF6 - 32 11 D4
   ld     a, $02                       ; 01:5BF9 - 3E 02
   rst    $28                          ; 01:5BFB - EF
   jp     addr_05B29                   ; 01:5BFC - C3 29 5B

addr_05BFF:
   ld     hl, $5200                    ; 01:5BFF - 21 00 52
   jp     addr_05B34                   ; 01:5C02 - C3 34 5B

objfunc_03_monitor_life:
   ld     (ix+13), $14                 ; 01:5C05 - DD 36 0D 14
   ld     (ix+14), $18                 ; 01:5C09 - DD 36 0E 18
   call   addr_05DA8                   ; 01:5C0D - CD A8 5D
   ld     hl, g_level_lives_collected_mask  ; 01:5C10 - 21 05 D3
   call   calc_level_offset_HL_and_mask_C  ; 01:5C13 - CD 02 0C
   ld     a, (hl)                      ; 01:5C16 - 7E
   and    c                            ; 01:5C17 - A1
   jr     z, addr_05C21                ; 01:5C18 - 28 07
   ld     (ix+0), $FF                  ; 01:5C1A - DD 36 00 FF
   jp     addr_05B29                   ; 01:5C1E - C3 29 5B

addr_05C21:
   ld     hl, $0003                    ; 01:5C21 - 21 03 00
   ld     (var_D214), hl               ; 01:5C24 - 22 14 D2
   call   UNK_03956                    ; 01:5C27 - CD 56 39
   jr     c, addr_05C5A                ; 01:5C2A - 38 2E
   call   addr_05DEB                   ; 01:5C2C - CD EB 5D
   jr     c, addr_05C5A                ; 01:5C2F - 38 29
   bit    2, (ix+24)                   ; 01:5C31 - DD CB 18 56
   jp     nz, addr_05B24               ; 01:5C35 - C2 24 5B
   ld     hl, g_lives                  ; 01:5C38 - 21 46 D2
   inc    (hl)                         ; 01:5C3B - 34
   ld     hl, g_level_lives_collected_mask  ; 01:5C3C - 21 05 D3
   call   calc_level_offset_HL_and_mask_C  ; 01:5C3F - CD 02 0C
   ld     a, (hl)                      ; 01:5C42 - 7E
   or     c                            ; 01:5C43 - B1
   ld     (hl), a                      ; 01:5C44 - 77
   xor    a                            ; 01:5C45 - AF
   ld     (ix+15), a                   ; 01:5C46 - DD 77 0F
   ld     (ix+16), a                   ; 01:5C49 - DD 77 10
   ld     a, $09                       ; 01:5C4C - 3E 09
   rst    $28                          ; 01:5C4E - EF
   ld     a, (g_level)                 ; 01:5C4F - 3A 3E D2
   cp     $1C                          ; 01:5C52 - FE 1C
   ret    nc                           ; 01:5C54 - D0
   ld     hl, g_level_lives_collected  ; 01:5C55 - 21 80 D2
   inc    (hl)                         ; 01:5C58 - 34
   ret                                 ; 01:5C59 - C9

addr_05C5A:
   ld     a, (g_level)                 ; 01:5C5A - 3A 3E D2
   cp     $04                          ; 01:5C5D - FE 04
   jr     z, addr_05C73                ; 01:5C5F - 28 12
   cp     $09                          ; 01:5C61 - FE 09
   jr     z, addr_05C9C                ; 01:5C63 - 28 37
   cp     $0C                          ; 01:5C65 - FE 0C
   jr     z, addr_05CB8                ; 01:5C67 - 28 4F
   cp     $11                          ; 01:5C69 - FE 11
   jr     z, addr_05CCA                ; 01:5C6B - 28 5D

addr_05C6D:
   ld     hl, $5280                    ; 01:5C6D - 21 80 52
   jp     addr_05B34                   ; 01:5C70 - C3 34 5B

addr_05C73:
   ld     c, $00                       ; 01:5C73 - 0E 00
   ld     de, $0040                    ; 01:5C75 - 11 40 00
   ld     a, (ix+19)                   ; 01:5C78 - DD 7E 13
   cp     $3C                          ; 01:5C7B - FE 3C
   jr     c, addr_05C83                ; 01:5C7D - 38 04
   dec    c                            ; 01:5C7F - 0D
   ld     de, $FFC0                    ; 01:5C80 - 11 C0 FF

addr_05C83:
   ld     (ix+10), e                   ; 01:5C83 - DD 73 0A
   ld     (ix+11), d                   ; 01:5C86 - DD 72 0B
   ld     (ix+12), c                   ; 01:5C89 - DD 71 0C
   inc    (ix+19)                      ; 01:5C8C - DD 34 13
   ld     a, (ix+19)                   ; 01:5C8F - DD 7E 13
   cp     $50                          ; 01:5C92 - FE 50
   jr     c, addr_05C6D                ; 01:5C94 - 38 D7
   ld     (ix+19), $28                 ; 01:5C96 - DD 36 13 28
   jr     addr_05C6D                   ; 01:5C9A - 18 D1

addr_05C9C:
   set    2, (ix+24)                   ; 01:5C9C - DD CB 18 D6
   ld     hl, var_D317                 ; 01:5CA0 - 21 17 D3
   call   calc_level_offset_HL_and_mask_C  ; 01:5CA3 - CD 02 0C
   ld     a, (hl)                      ; 01:5CA6 - 7E
   ld     hl, $5180                    ; 01:5CA7 - 21 80 51
   and    c                            ; 01:5CAA - A1
   jp     z, addr_05B34                ; 01:5CAB - CA 34 5B
   res    2, (ix+24)                   ; 01:5CAE - DD CB 18 96
   ld     hl, $5280                    ; 01:5CB2 - 21 80 52
   jp     addr_05B34                   ; 01:5CB5 - C3 34 5B

addr_05CB8:
   set    1, (ix+24)                   ; 01:5CB8 - DD CB 18 CE
   ld     (ix+7), $80                  ; 01:5CBC - DD 36 07 80
   ld     (ix+8), $00                  ; 01:5CC0 - DD 36 08 00
   ld     (ix+9), $00                  ; 01:5CC4 - DD 36 09 00
   jr     addr_05C6D                   ; 01:5CC8 - 18 A3

addr_05CCA:
   ld     a, (g_level_lives_collected)  ; 01:5CCA - 3A 80 D2
   cp     $11                          ; 01:5CCD - FE 11
   jr     nc, addr_05C6D               ; 01:5CCF - 30 9C
   ld     (ix+0), $FF                  ; 01:5CD1 - DD 36 00 FF
   jr     addr_05C6D                   ; 01:5CD5 - 18 96

objfunc_04_UNKNOWN:
   ld     (ix+13), $14                 ; 01:5CD7 - DD 36 0D 14
   ld     (ix+14), $18                 ; 01:5CDB - DD 36 0E 18
   call   addr_05DA8                   ; 01:5CDF - CD A8 5D
   ld     hl, $0003                    ; 01:5CE2 - 21 03 00
   ld     (var_D214), hl               ; 01:5CE5 - 22 14 D2
   call   UNK_03956                    ; 01:5CE8 - CD 56 39
   jr     c, addr_05CF9                ; 01:5CEB - 38 0C
   call   addr_05DEB                   ; 01:5CED - CD EB 5D
   jr     c, addr_05CF9                ; 01:5CF0 - 38 07
   set    5, (iy+var_D206-IYBASE)      ; 01:5CF2 - FD CB 06 EE
   jp     addr_05B29                   ; 01:5CF6 - C3 29 5B

addr_05CF9:
   ld     hl, $5300                    ; 01:5CF9 - 21 00 53
   jp     addr_05B34                   ; 01:5CFC - C3 34 5B

objfunc_05_UNKNOWN:
   ld     (ix+13), $14                 ; 01:5CFF - DD 36 0D 14
   ld     (ix+14), $18                 ; 01:5D03 - DD 36 0E 18
   call   addr_05DA8                   ; 01:5D07 - CD A8 5D
   ld     hl, $0003                    ; 01:5D0A - 21 03 00
   ld     (var_D214), hl               ; 01:5D0D - 22 14 D2
   call   UNK_03956                    ; 01:5D10 - CD 56 39
   jr     c, addr_05D29                ; 01:5D13 - 38 14
   call   addr_05DEB                   ; 01:5D15 - CD EB 5D
   jr     c, addr_05D29                ; 01:5D18 - 38 0F
   set    0, (iy+var_D208-IYBASE)      ; 01:5D1A - FD CB 08 C6
   ld     a, $F0                       ; 01:5D1E - 3E F0
   ld     (var_D28D), a                ; 01:5D20 - 32 8D D2
   ld     a, $08                       ; 01:5D23 - 3E 08
   rst    $18                          ; 01:5D25 - DF
   jp     addr_05B29                   ; 01:5D26 - C3 29 5B

addr_05D29:
   ld     hl, $5380                    ; 01:5D29 - 21 80 53
   jp     addr_05B34                   ; 01:5D2C - C3 34 5B

objfunc_51_UNKNOWN:
   ld     (ix+13), $14                 ; 01:5D2F - DD 36 0D 14
   ld     (ix+14), $18                 ; 01:5D33 - DD 36 0E 18
   call   addr_05DA8                   ; 01:5D37 - CD A8 5D
   ld     hl, $0003                    ; 01:5D3A - 21 03 00
   ld     (var_D214), hl               ; 01:5D3D - 22 14 D2
   call   UNK_03956                    ; 01:5D40 - CD 56 39
   jr     c, addr_05D7A                ; 01:5D43 - 38 35
   call   addr_05DEB                   ; 01:5D45 - CD EB 5D
   jr     c, addr_05D7A                ; 01:5D48 - 38 30
   ld     hl, g_level_has_checkpoint_mask  ; 01:5D4A - 21 11 D3
   call   calc_level_offset_HL_and_mask_C  ; 01:5D4D - CD 02 0C
   ld     a, (hl)                      ; 01:5D50 - 7E
   or     c                            ; 01:5D51 - B1
   ld     (hl), a                      ; 01:5D52 - 77
   ld     a, (g_level)                 ; 01:5D53 - 3A 3E D2
   add    a, a                         ; 01:5D56 - 87
   ld     e, a                         ; 01:5D57 - 5F
   ld     d, $00                       ; 01:5D58 - 16 00
   ld     hl, var_D32E                 ; 01:5D5A - 21 2E D3
   add    hl, de                       ; 01:5D5D - 19
   ex     de, hl                       ; 01:5D5E - EB
   ld     l, (ix+2)                    ; 01:5D5F - DD 6E 02
   ld     h, (ix+3)                    ; 01:5D62 - DD 66 03
   add    hl, hl                       ; 01:5D65 - 29
   add    hl, hl                       ; 01:5D66 - 29
   add    hl, hl                       ; 01:5D67 - 29
   ld     a, h                         ; 01:5D68 - 7C
   ld     (de), a                      ; 01:5D69 - 12
   inc    de                           ; 01:5D6A - 13
   ld     l, (ix+5)                    ; 01:5D6B - DD 6E 05
   ld     h, (ix+6)                    ; 01:5D6E - DD 66 06
   add    hl, hl                       ; 01:5D71 - 29
   add    hl, hl                       ; 01:5D72 - 29
   add    hl, hl                       ; 01:5D73 - 29
   ld     a, h                         ; 01:5D74 - 7C
   dec    a                            ; 01:5D75 - 3D
   ld     (de), a                      ; 01:5D76 - 12
   jp     addr_05B29                   ; 01:5D77 - C3 29 5B

addr_05D7A:
   ld     hl, $5480                    ; 01:5D7A - 21 80 54
   jp     addr_05B34                   ; 01:5D7D - C3 34 5B

objfunc_52_UNKNOWN:
   ld     (ix+13), $14                 ; 01:5D80 - DD 36 0D 14
   ld     (ix+14), $18                 ; 01:5D84 - DD 36 0E 18
   call   addr_05DA8                   ; 01:5D88 - CD A8 5D
   ld     hl, $0003                    ; 01:5D8B - 21 03 00
   ld     (var_D214), hl               ; 01:5D8E - 22 14 D2
   call   UNK_03956                    ; 01:5D91 - CD 56 39
   jr     c, addr_05DA2                ; 01:5D94 - 38 0C
   call   addr_05DEB                   ; 01:5D96 - CD EB 5D
   jr     c, addr_05DA2                ; 01:5D99 - 38 07
   set    3, (iy+var_D209-IYBASE)      ; 01:5D9B - FD CB 09 DE
   jp     addr_05B29                   ; 01:5D9F - C3 29 5B

addr_05DA2:
   ld     hl, $5500                    ; 01:5DA2 - 21 00 55
   jp     addr_05B34                   ; 01:5DA5 - C3 34 5B

addr_05DA8:
   bit    0, (ix+24)                   ; 01:5DA8 - DD CB 18 46
   ret    nz                           ; 01:5DAC - C0
   ld     a, (var_D2D4)                ; 01:5DAD - 3A D4 D2
   and    a                            ; 01:5DB0 - A7
   jr     nz, addr_05DC6               ; 01:5DB1 - 20 13
   ld     bc, $0000                    ; 01:5DB3 - 01 00 00
   ld     e, c                         ; 01:5DB6 - 59
   ld     d, b                         ; 01:5DB7 - 50
   call   addr_036F9                   ; 01:5DB8 - CD F9 36
   ld     de, $0016                    ; 01:5DBB - 11 16 00
   ld     bc, $0012                    ; 01:5DBE - 01 12 00
   ld     a, (hl)                      ; 01:5DC1 - 7E
   cp     $AB                          ; 01:5DC2 - FE AB
   jr     z, addr_05DCC                ; 01:5DC4 - 28 06

addr_05DC6:
   ld     de, $0004                    ; 01:5DC6 - 11 04 00
   ld     bc, $0000                    ; 01:5DC9 - 01 00 00

addr_05DCC:
   ld     l, (ix+2)                    ; 01:5DCC - DD 6E 02
   ld     h, (ix+3)                    ; 01:5DCF - DD 66 03
   add    hl, de                       ; 01:5DD2 - 19
   ld     (ix+2), l                    ; 01:5DD3 - DD 75 02
   ld     (ix+3), h                    ; 01:5DD6 - DD 74 03
   ld     l, (ix+5)                    ; 01:5DD9 - DD 6E 05
   ld     h, (ix+6)                    ; 01:5DDC - DD 66 06
   add    hl, bc                       ; 01:5DDF - 09
   ld     (ix+5), l                    ; 01:5DE0 - DD 75 05
   ld     (ix+6), h                    ; 01:5DE3 - DD 74 06
   set    0, (ix+24)                   ; 01:5DE6 - DD CB 18 C6
   ret                                 ; 01:5DEA - C9

addr_05DEB:
   ld     hl, $0804                    ; 01:5DEB - 21 04 08
   ld     (g_FF_string_high_byte), hl  ; 01:5DEE - 22 0E D2
   ld     a, (var_D414)                ; 01:5DF1 - 3A 14 D4
   and    $01                          ; 01:5DF4 - E6 01
   jr     nz, addr_05E49               ; 01:5DF6 - 20 51
   ld     de, (sonic_x)                ; 01:5DF8 - ED 5B FE D3
   ld     c, (ix+2)                    ; 01:5DFC - DD 4E 02
   ld     b, (ix+3)                    ; 01:5DFF - DD 46 03
   ld     hl, $FFEE                    ; 01:5E02 - 21 EE FF
   add    hl, bc                       ; 01:5E05 - 09
   and    a                            ; 01:5E06 - A7
   sbc    hl, de                       ; 01:5E07 - ED 52
   jr     nc, addr_05E6D               ; 01:5E09 - 30 62
   ld     hl, $0010                    ; 01:5E0B - 21 10 00
   add    hl, bc                       ; 01:5E0E - 09
   and    a                            ; 01:5E0F - A7
   sbc    hl, de                       ; 01:5E10 - ED 52
   jr     c, addr_05E6D                ; 01:5E12 - 38 59
   ld     a, (var_D414)                ; 01:5E14 - 3A 14 D4
   and    $04                          ; 01:5E17 - E6 04
   jr     nz, addr_05E42               ; 01:5E19 - 20 27
   ld     l, (ix+5)                    ; 01:5E1B - DD 6E 05
   ld     h, (ix+6)                    ; 01:5E1E - DD 66 06
   ld     a, (var_D40A)                ; 01:5E21 - 3A 0A D4
   ld     c, a                         ; 01:5E24 - 4F
   xor    a                            ; 01:5E25 - AF
   ld     b, a                         ; 01:5E26 - 47
   sbc    hl, bc                       ; 01:5E27 - ED 42
   ld     (sonic_y), hl                ; 01:5E29 - 22 01 D4
   ld     (var_D28E), a                ; 01:5E2C - 32 8E D2
   ld     a, (var_D2E8)                ; 01:5E2F - 3A E8 D2
   ld     hl, (var_D2E6)               ; 01:5E32 - 2A E6 D2
   ld     (sonic_vel_y_sub), hl        ; 01:5E35 - 22 06 D4
   ld     (sonic_vel_y_hi), a          ; 01:5E38 - 32 08 D4
   ld     hl, var_D414                 ; 01:5E3B - 21 14 D4
   set    7, (hl)                      ; 01:5E3E - CB FE
   scf                                 ; 01:5E40 - 37
   ret                                 ; 01:5E41 - C9

addr_05E42:
   ld     a, (sonic_vel_y_hi)          ; 01:5E42 - 3A 08 D4
   and    a                            ; 01:5E45 - A7
   jp     m, addr_05E4E                ; 01:5E46 - FA 4E 5E

addr_05E49:
   call   addr_036BE                   ; 01:5E49 - CD BE 36
   and    a                            ; 01:5E4C - A7
   ret                                 ; 01:5E4D - C9

addr_05E4E:
   ld     (ix+10), $80                 ; 01:5E4E - DD 36 0A 80
   ld     (ix+11), $FE                 ; 01:5E52 - DD 36 0B FE
   ld     (ix+12), $FF                 ; 01:5E56 - DD 36 0C FF
   ld     hl, $0400                    ; 01:5E5A - 21 00 04
   xor    a                            ; 01:5E5D - AF
   ld     (sonic_vel_y_sub), hl        ; 01:5E5E - 22 06 D4
   ld     (sonic_vel_y_hi), a          ; 01:5E61 - 32 08 D4
   ld     (var_D28E), a                ; 01:5E64 - 32 8E D2
   set    1, (ix+24)                   ; 01:5E67 - DD CB 18 CE
   scf                                 ; 01:5E6B - 37
   ret                                 ; 01:5E6C - C9

addr_05E6D:
   ld     hl, (sonic_x)                ; 01:5E6D - 2A FE D3
   ld     de, $000C                    ; 01:5E70 - 11 0C 00
   add    hl, de                       ; 01:5E73 - 19
   ex     de, hl                       ; 01:5E74 - EB
   ld     l, (ix+2)                    ; 01:5E75 - DD 6E 02
   ld     h, (ix+3)                    ; 01:5E78 - DD 66 03
   ld     bc, $000A                    ; 01:5E7B - 01 0A 00
   add    hl, bc                       ; 01:5E7E - 09
   ld     bc, $FFEB                    ; 01:5E7F - 01 EB FF
   and    a                            ; 01:5E82 - A7
   sbc    hl, de                       ; 01:5E83 - ED 52
   jr     nc, addr_05E8A               ; 01:5E85 - 30 03
   ld     bc, $0015                    ; 01:5E87 - 01 15 00

addr_05E8A:
   ld     l, (ix+2)                    ; 01:5E8A - DD 6E 02
   ld     h, (ix+3)                    ; 01:5E8D - DD 66 03
   add    hl, bc                       ; 01:5E90 - 09
   ld     (sonic_x), hl                ; 01:5E91 - 22 FE D3
   xor    a                            ; 01:5E94 - AF
   ld     (sonic_x_sub), a             ; 01:5E95 - 32 FD D3
   ld     l, a                         ; 01:5E98 - 6F
   ld     h, a                         ; 01:5E99 - 67
   ld     (sonic_vel_x_sub), a         ; 01:5E9A - 32 03 D4
   ld     (sonic_vel_x), hl            ; 01:5E9D - 22 04 D4
   scf                                 ; 01:5EA0 - 37
   ret                                 ; 01:5EA1 - C9

objfunc_06_UNKNOWN:
   ld     hl, var_D30B                 ; 01:5EA2 - 21 0B D3
   call   calc_level_offset_HL_and_mask_C  ; 01:5EA5 - CD 02 0C
   ld     a, (hl)                      ; 01:5EA8 - 7E
   and    c                            ; 01:5EA9 - A1
   jr     nz, addr_05EDE               ; 01:5EAA - 20 32
   ld     (ix+13), $0C                 ; 01:5EAC - DD 36 0D 0C
   ld     (ix+14), $11                 ; 01:5EB0 - DD 36 0E 11
   call   addr_05DA8                   ; 01:5EB4 - CD A8 5D
   xor    a                            ; 01:5EB7 - AF
   ld     (ix+15), a                   ; 01:5EB8 - DD 77 0F
   ld     (ix+16), a                   ; 01:5EBB - DD 77 10
   ld     hl, $0202                    ; 01:5EBE - 21 02 02
   ld     (var_D214), hl               ; 01:5EC1 - 22 14 D2
   call   UNK_03956                    ; 01:5EC4 - CD 56 39
   jr     c, addr_05EE3                ; 01:5EC7 - 38 1A
   ld     hl, var_D30B                 ; 01:5EC9 - 21 0B D3
   call   calc_level_offset_HL_and_mask_C  ; 01:5ECC - CD 02 0C
   ld     a, (hl)                      ; 01:5ECF - 7E
   or     c                            ; 01:5ED0 - B1
   ld     (hl), a                      ; 01:5ED1 - 77
   ld     hl, var_D27F                 ; 01:5ED2 - 21 7F D2
   inc    (hl)                         ; 01:5ED5 - 34
   ld     a, $FE                       ; 01:5ED6 - 3E FE
   ld     (var_D28B), a                ; 01:5ED8 - 32 8B D2
   ld     a, $14                       ; 01:5EDB - 3E 14
   rst    $18                          ; 01:5EDD - DF

addr_05EDE:
   ld     (ix+0), $FF                  ; 01:5EDE - DD 36 00 FF
   ret                                 ; 01:5EE2 - C9

addr_05EE3:
   ld     a, (var_D223)                ; 01:5EE3 - 3A 23 D2
   rrca                                ; 01:5EE6 - 0F
   jr     c, addr_05EF1                ; 01:5EE7 - 38 08
   ld     (ix+15), UNK_05F10&$FF       ; 01:5EE9 - DD 36 0F 10
   ld     (ix+16), UNK_05F10>>8        ; 01:5EED - DD 36 10 5F

addr_05EF1:
   ld     l, (ix+10)                   ; 01:5EF1 - DD 6E 0A
   ld     h, (ix+11)                   ; 01:5EF4 - DD 66 0B
   ld     a, (ix+12)                   ; 01:5EF7 - DD 7E 0C
   ld     de, $0020                    ; 01:5EFA - 11 20 00
   add    hl, de                       ; 01:5EFD - 19
   adc    a, $00                       ; 01:5EFE - CE 00
   ld     (ix+10), l                   ; 01:5F00 - DD 75 0A
   ld     (ix+11), h                   ; 01:5F03 - DD 74 0B
   ld     (ix+12), a                   ; 01:5F06 - DD 77 0C
   ld     hl, $5400                    ; 01:5F09 - 21 00 54
   call   UNK_00C1D                    ; 01:5F0C - CD 1D 0C
   ret                                 ; 01:5F0F - C9

UNK_05F10:
.db $5C, $5E, $FF, $FF, $FF, $FF, $FF                                               ; 01:5F10

objfunc_07_signpost:
   ld     (ix+13), $18                 ; 01:5F17 - DD 36 0D 18
   ld     (ix+14), $30                 ; 01:5F1B - DD 36 0E 30
   bit    0, (ix+17)                   ; 01:5F1F - DD CB 11 46
   jr     nz, addr_05F44               ; 01:5F23 - 20 1F
   res    7, (iy+var_D206-IYBASE)      ; 01:5F25 - FD CB 06 BE
   res    3, (iy+var_D205-IYBASE)      ; 01:5F29 - FD CB 05 9E
   ld     hl, ART_09_4294              ; 01:5F2D - 21 94 42
   ld     de, $2000                    ; 01:5F30 - 11 00 20
   ld     a, $09                       ; 01:5F33 - 3E 09
   call   load_art                     ; 01:5F35 - CD 05 04
   ld     hl, PAL2_signpost            ; 01:5F38 - 21 6C 62
   ld     a, $02                       ; 01:5F3B - 3E 02
   call   signal_load_palettes         ; 01:5F3D - CD 33 03
   set    0, (ix+17)                   ; 01:5F40 - DD CB 11 C6

addr_05F44:
   ld     hl, (var_D25A)               ; 01:5F44 - 2A 5A D2
   ld     (var_D273), hl               ; 01:5F47 - 22 73 D2
   ld     l, (ix+2)                    ; 01:5F4A - DD 6E 02
   ld     h, (ix+3)                    ; 01:5F4D - DD 66 03
   ld     de, $FF90                    ; 01:5F50 - 11 90 FF
   add    hl, de                       ; 01:5F53 - 19
   ld     (var_D275), hl               ; 01:5F54 - 22 75 D2
   ld     hl, $0080                    ; 01:5F57 - 21 80 00
   ld     (var_D26B), hl               ; 01:5F5A - 22 6B D2
   ld     hl, $0088                    ; 01:5F5D - 21 88 00
   ld     (var_D26D), hl               ; 01:5F60 - 22 6D D2
   ld     c, (ix+19)                   ; 01:5F63 - DD 4E 13
   ld     a, (var_D414)                ; 01:5F66 - 3A 14 D4
   and    $80                          ; 01:5F69 - E6 80
   ld     (ix+19), a                   ; 01:5F6B - DD 77 13
   jr     z, addr_05FA4                ; 01:5F6E - 28 34
   cp     c                            ; 01:5F70 - B9
   jr     z, addr_05FA4                ; 01:5F71 - 28 31
   bit    7, (ix+24)                   ; 01:5F73 - DD CB 18 7E
   jr     z, addr_05FA4                ; 01:5F77 - 28 2B
   ld     e, (ix+2)                    ; 01:5F79 - DD 5E 02
   ld     d, (ix+3)                    ; 01:5F7C - DD 56 03
   ld     hl, (sonic_x)                ; 01:5F7F - 2A FE D3
   and    a                            ; 01:5F82 - A7
   sbc    hl, de                       ; 01:5F83 - ED 52
   bit    7, h                         ; 01:5F85 - CB 7C
   jr     z, addr_05F90                ; 01:5F87 - 28 07
   ld     a, l                         ; 01:5F89 - 7D
   cpl                                 ; 01:5F8A - 2F
   ld     l, a                         ; 01:5F8B - 6F
   ld     a, h                         ; 01:5F8C - 7C
   cpl                                 ; 01:5F8D - 2F
   ld     h, a                         ; 01:5F8E - 67
   inc    hl                           ; 01:5F8F - 23

addr_05F90:
   ld     de, $0064                    ; 01:5F90 - 11 64 00
   and    a                            ; 01:5F93 - A7
   sbc    hl, de                       ; 01:5F94 - ED 52
   jr     nc, addr_05FA4               ; 01:5F96 - 30 0C
   ld     (ix+10), $00                 ; 01:5F98 - DD 36 0A 00
   ld     (ix+11), $FE                 ; 01:5F9C - DD 36 0B FE
   ld     (ix+12), $FF                 ; 01:5FA0 - DD 36 0C FF

addr_05FA4:
   ld     l, (ix+10)                   ; 01:5FA4 - DD 6E 0A
   ld     h, (ix+11)                   ; 01:5FA7 - DD 66 0B
   ld     a, (ix+12)                   ; 01:5FAA - DD 7E 0C
   ld     de, $001A                    ; 01:5FAD - 11 1A 00
   add    hl, de                       ; 01:5FB0 - 19
   adc    a, $00                       ; 01:5FB1 - CE 00
   ld     (ix+10), l                   ; 01:5FB3 - DD 75 0A
   ld     (ix+11), h                   ; 01:5FB6 - DD 74 0B
   ld     (ix+12), a                   ; 01:5FB9 - DD 77 0C
   bit    3, (ix+17)                   ; 01:5FBC - DD CB 11 5E
   jr     nz, addr_06030               ; 01:5FC0 - 20 6E
   bit    2, (ix+17)                   ; 01:5FC2 - DD CB 11 56
   jr     z, addr_05FE8                ; 01:5FC6 - 28 20
   bit    7, (ix+24)                   ; 01:5FC8 - DD CB 18 7E
   jr     z, addr_06030                ; 01:5FCC - 28 62
   ld     a, $09                       ; 01:5FCE - 3E 09
   rst    $18                          ; 01:5FD0 - DF
   ld     a, $0C                       ; 01:5FD1 - 3E 0C
   rst    $28                          ; 01:5FD3 - EF
   res    2, (ix+17)                   ; 01:5FD4 - DD CB 11 96
   set    3, (ix+17)                   ; 01:5FD8 - DD CB 11 DE
   ld     a, $A0                       ; 01:5FDC - 3E A0
   ld     (g_signpost_tickdown_counter), a  ; 01:5FDE - 32 89 D2
   set    1, (iy+var_D206-IYBASE)      ; 01:5FE1 - FD CB 06 CE
   jp     addr_06030                   ; 01:5FE5 - C3 30 60

addr_05FE8:
   ld     hl, $0A0A                    ; 01:5FE8 - 21 0A 0A
   ld     (var_D214), hl               ; 01:5FEB - 22 14 D2
   call   UNK_03956                    ; 01:5FEE - CD 56 39
   jr     c, addr_06030                ; 01:5FF1 - 38 3D
   bit    7, (ix+12)                   ; 01:5FF3 - DD CB 0C 7E
   jr     nz, addr_06030               ; 01:5FF7 - 20 37
   bit    1, (ix+17)                   ; 01:5FF9 - DD CB 11 4E
   jr     nz, addr_06030               ; 01:5FFD - 20 31
   ld     de, (sonic_vel_x_sub)        ; 01:5FFF - ED 5B 03 D4
   bit    7, d                         ; 01:6003 - CB 7A
   jr     z, addr_0600E                ; 01:6005 - 28 07
   ld     a, e                         ; 01:6007 - 7B
   cpl                                 ; 01:6008 - 2F
   ld     e, a                         ; 01:6009 - 5F
   ld     a, d                         ; 01:600A - 7A
   cpl                                 ; 01:600B - 2F
   ld     d, a                         ; 01:600C - 57
   inc    de                           ; 01:600D - 13

addr_0600E:
   ld     hl, $0300                    ; 01:600E - 21 00 03
   and    a                            ; 01:6011 - A7
   sbc    hl, de                       ; 01:6012 - ED 52
   jr     nc, addr_06019               ; 01:6014 - 30 03
   ld     de, $0300                    ; 01:6016 - 11 00 03

addr_06019:
   ex     de, hl                       ; 01:6019 - EB
   add    hl, hl                       ; 01:601A - 29
   ld     (ix+20), l                   ; 01:601B - DD 75 14
   ld     (ix+21), h                   ; 01:601E - DD 74 15
   ld     (ix+18), $00                 ; 01:6021 - DD 36 12 00
   set    1, (ix+17)                   ; 01:6025 - DD CB 11 CE
   res    3, (iy+var_D206-IYBASE)      ; 01:6029 - FD CB 06 9E
   ld     a, $0B                       ; 01:602D - 3E 0B
   rst    $28                          ; 01:602F - EF

addr_06030:
   ld     de, UNK_6157                 ; 01:6030 - 11 57 61
   bit    1, (ix+17)                   ; 01:6033 - DD CB 11 4E
   jr     nz, _signpost_post_decide_loop  ; 01:6037 - 20 5D
   bit    2, (ix+17)                   ; 01:6039 - DD CB 11 56
   jr     nz, _signpost_post_decide_loop  ; 01:603D - 20 57
   ld     de, UNK_6171                 ; 01:603F - 11 71 61
   bit    3, (ix+17)                   ; 01:6042 - DD CB 11 5E
   jr     z, _signpost_post_decide_loop  ; 01:6046 - 28 4E
   ld     a, (g_level)                 ; 01:6048 - 3A 3E D2
   cp     $0C                          ; 01:604B - FE 0C
   jr     c, _signpost_decide_maybe_bonus  ; 01:604D - 38 0B
   cp     $1C                          ; 01:604F - FE 1C
   jr     c, _signpost_decide_not_bonus  ; 01:6051 - 38 13
   ld     de, UNK_618E                 ; 01:6053 - 11 8E 61
   ld     c, $01                       ; 01:6056 - 0E 01
   jr     _signpost_decide_C           ; 01:6058 - 18 38


_signpost_decide_maybe_bonus:
   ld     de, UNK_61A8                 ; 01:605A - 11 A8 61
   ld     c, $04                       ; 01:605D - 0E 04
   ld     a, (g_rings_BCD)             ; 01:605F - 3A AA D2
   cp     $50                          ; 01:6062 - FE 50
   jr     nc, _signpost_decide_C       ; 01:6064 - 30 2C

_signpost_decide_not_bonus:
   cp     $40                          ; 01:6066 - FE 40
   jr     z, _signpost_decide_maybe_life  ; 01:6068 - 28 09
   ld     de, UNK_61C2                 ; 01:606A - 11 C2 61
   ld     c, $03                       ; 01:606D - 0E 03
   and    $0F                          ; 01:606F - E6 0F
   jr     z, _signpost_decide_C        ; 01:6071 - 28 1F

_signpost_decide_maybe_life:
   ld     a, (g_rings_BCD)             ; 01:6073 - 3A AA D2
   srl    a                            ; 01:6076 - CB 3F
   srl    a                            ; 01:6078 - CB 3F
   srl    a                            ; 01:607A - CB 3F
   srl    a                            ; 01:607C - CB 3F
   ld     b, a                         ; 01:607E - 47
   ld     a, (g_level)                 ; 01:607F - 3A 3E D2
   and    $03                          ; 01:6082 - E6 03
   inc    a                            ; 01:6084 - 3C
   ld     de, UNK_6174                 ; 01:6085 - 11 74 61
   ld     c, $02                       ; 01:6088 - 0E 02
   cp     b                            ; 01:608A - B8
   jr     z, _signpost_decide_C        ; 01:608B - 28 05
   ld     de, UNK_618E                 ; 01:608D - 11 8E 61
   ld     c, $01                       ; 01:6090 - 0E 01

_signpost_decide_C:
   ld     a, c                         ; 01:6092 - 79
   ld     (g_current_signpost), a      ; 01:6093 - 32 88 D2

_signpost_post_decide_loop:
   ld     l, (ix+18)                   ; 01:6096 - DD 6E 12
   ld     h, $00                       ; 01:6099 - 26 00
   add    hl, de                       ; 01:609B - 19
   ld     a, (hl)                      ; 01:609C - 7E
   cp     $FF                          ; 01:609D - FE FF
   jr     nz, +                        ; 01:609F - 20 08
   inc    hl                           ; 01:60A1 - 23
   ld     a, (hl)                      ; 01:60A2 - 7E
   ld     (ix+18), a                   ; 01:60A3 - DD 77 12
   jp     _signpost_post_decide_loop   ; 01:60A6 - C3 96 60

+:
   ld     l, a                         ; 01:60A9 - 6F
   ld     h, $00                       ; 01:60AA - 26 00
   add    hl, hl                       ; 01:60AC - 29
   ld     e, l                         ; 01:60AD - 5D
   ld     d, h                         ; 01:60AE - 54
   add    hl, hl                       ; 01:60AF - 29
   add    hl, hl                       ; 01:60B0 - 29
   add    hl, hl                       ; 01:60B1 - 29
   add    hl, de                       ; 01:60B2 - 19
   ld     de, UNK_061DC                ; 01:60B3 - 11 DC 61
   add    hl, de                       ; 01:60B6 - 19
   ld     (ix+15), l                   ; 01:60B7 - DD 75 0F
   ld     (ix+16), h                   ; 01:60BA - DD 74 10
   bit    1, (ix+17)                   ; 01:60BD - DD CB 11 4E
   jr     nz, addr_060C7               ; 01:60C1 - 20 04
   inc    (ix+18)                      ; 01:60C3 - DD 34 12
   ret                                 ; 01:60C6 - C9

addr_060C7:
   ld     a, (ix+20)                   ; 01:60C7 - DD 7E 14
   add    a, (ix+22)                   ; 01:60CA - DD 86 16
   ld     (ix+22), a                   ; 01:60CD - DD 77 16
   ld     a, (ix+21)                   ; 01:60D0 - DD 7E 15
   push   af                           ; 01:60D3 - F5
   adc    a, (ix+23)                   ; 01:60D4 - DD 8E 17
   ld     (ix+23), a                   ; 01:60D7 - DD 77 17
   pop    af                           ; 01:60DA - F1
   adc    a, (ix+18)                   ; 01:60DB - DD 8E 12
   cp     $18                          ; 01:60DE - FE 18
   jr     c, addr_060E3                ; 01:60E0 - 38 01
   xor    a                            ; 01:60E2 - AF

addr_060E3:
   ld     (ix+18), a                   ; 01:60E3 - DD 77 12
   ld     e, (ix+10)                   ; 01:60E6 - DD 5E 0A
   ld     d, (ix+11)                   ; 01:60E9 - DD 56 0B
   ld     a, (ix+12)                   ; 01:60EC - DD 7E 0C
   and    a                            ; 01:60EF - A7
   jp     p, addr_060F9                ; 01:60F0 - F2 F9 60
   ld     hl, $FC00                    ; 01:60F3 - 21 00 FC
   sbc    hl, de                       ; 01:60F6 - ED 52
   ret    nc                           ; 01:60F8 - D0

addr_060F9:
   ex     de, hl                       ; 01:60F9 - EB
   ld     e, (ix+20)                   ; 01:60FA - DD 5E 14
   ld     d, (ix+21)                   ; 01:60FD - DD 56 15
   ld     c, e                         ; 01:6100 - 4B
   ld     b, d                         ; 01:6101 - 42
   srl    d                            ; 01:6102 - CB 3A
   rr     e                            ; 01:6104 - CB 1B
   srl    d                            ; 01:6106 - CB 3A
   rr     e                            ; 01:6108 - CB 1B
   srl    d                            ; 01:610A - CB 3A
   rr     e                            ; 01:610C - CB 1B
   srl    d                            ; 01:610E - CB 3A
   rr     e                            ; 01:6110 - CB 1B
   srl    d                            ; 01:6112 - CB 3A
   rr     e                            ; 01:6114 - CB 1B
   and    a                            ; 01:6116 - A7
   sbc    hl, de                       ; 01:6117 - ED 52
   sbc    a, $00                       ; 01:6119 - DE 00
   ld     (ix+10), l                   ; 01:611B - DD 75 0A
   ld     (ix+11), h                   ; 01:611E - DD 74 0B
   ld     (ix+12), a                   ; 01:6121 - DD 77 0C
   ld     l, (ix+5)                    ; 01:6124 - DD 6E 05
   ld     h, (ix+6)                    ; 01:6127 - DD 66 06
   xor    a                            ; 01:612A - AF
   ld     de, $0008                    ; 01:612B - 11 08 00
   sbc    hl, de                       ; 01:612E - ED 52
   jr     c, addr_06141                ; 01:6130 - 38 0F
   ld     l, c                         ; 01:6132 - 69
   ld     h, b                         ; 01:6133 - 60
   ld     de, $0010                    ; 01:6134 - 11 10 00
   xor    a                            ; 01:6137 - AF
   sbc    hl, de                       ; 01:6138 - ED 52
   ld     (ix+20), l                   ; 01:613A - DD 75 14
   ld     (ix+21), h                   ; 01:613D - DD 74 15
   ret    nc                           ; 01:6140 - D0

addr_06141:
   ld     (ix+10), a                   ; 01:6141 - DD 77 0A
   ld     (ix+11), a                   ; 01:6144 - DD 77 0B
   ld     (ix+12), a                   ; 01:6147 - DD 77 0C
   res    1, (ix+17)                   ; 01:614A - DD CB 11 8E
   set    2, (ix+17)                   ; 01:614E - DD CB 11 D6
   ld     (ix+18), $00                 ; 01:6152 - DD 36 12 00
   ret                                 ; 01:6156 - C9

UNK_6157:
.db $00, $00, $00, $00, $00, $00, $03, $03, $03, $03, $03, $03, $02, $02, $02, $02  ; 01:6157
.db $02, $02, $04, $04, $04, $04, $04, $04, $FF, $00                                ; 01:6167

UNK_6171:
.db $00, $FF, $00                                                                   ; 01:6171

UNK_6174:
.db $00, $00, $00, $00, $00, $00, $03, $03, $03, $03, $03, $03, $02, $02, $02, $02  ; 01:6174
.db $02, $02, $01, $01, $01, $01, $01, $01, $FF, $12                                ; 01:6184

UNK_618E:
.db $00, $00, $00, $00, $00, $00, $03, $03, $03, $03, $03, $03, $02, $02, $02, $02  ; 01:618E
.db $02, $02, $05, $05, $05, $05, $05, $05, $FF, $12                                ; 01:619E

UNK_61A8:
.db $00, $00, $00, $00, $00, $00, $03, $03, $03, $03, $03, $03, $02, $02, $02, $02  ; 01:61A8
.db $02, $02, $06, $06, $06, $06, $06, $06, $FF, $12                                ; 01:61B8

UNK_61C2:
.db $00, $00, $00, $00, $00, $00, $03, $03, $03, $03, $03, $03, $02, $02, $02, $02  ; 01:61C2
.db $02, $02, $07, $07, $07, $07, $07, $07, $FF, $12                                ; 01:61D2

UNK_061DC:
.db $4E, $50, $52, $54, $FF, $FF, $6E, $70, $72, $74, $FF, $FF, $FE, $42, $44, $FF  ; 01:61DC
.db $FF, $FF, $08, $0A, $0C, $0E, $FF, $FF, $28, $2A, $2C, $2E, $FF, $FF, $FE, $42  ; 01:61EC
.db $44, $FF, $FF, $FF, $FE, $12, $14, $FF, $FF, $FF, $FE, $32, $34, $FF, $FF, $FF  ; 01:61FC
.db $FE, $42, $44, $FF, $FF, $FF, $16, $18, $1A, $1C, $FF, $FF, $36, $38, $3A, $3C  ; 01:620C
.db $FF, $FF, $FE, $42, $44, $FF, $FF, $FF, $56, $58, $5A, $5C, $FF, $FF, $76, $78  ; 01:621C
.db $7A, $7C, $FF, $FF, $FE, $42, $44, $FF, $FF, $FF, $00, $02, $04, $06, $FF, $FF  ; 01:622C
.db $20, $22, $24, $26, $FF, $FF, $FE, $42, $44, $FF, $FF, $FF, $4E, $4A, $4C, $54  ; 01:623C
.db $FF, $FF, $6E, $6A, $6C, $74, $FF, $FF, $FE, $42, $44, $FF, $FF, $FF, $4E, $46  ; 01:624C
.db $48, $54, $FF, $FF, $6E, $66, $68, $74, $FF, $FF, $FE, $42, $44, $FF, $FF, $FF  ; 01:625C

PAL2_signpost:
.INCBIN "src/data/signpost.pal2"

LUT_base_PAL3s:
.dw LVPAL3_GHZ, LVPAL3_BRI, LVPAL3_JUN, LVPAL3_LAB, LVPAL3_SCR, LVPAL3_SKY, LVPAL3_SKY_3, LVPAL3_special  ; 01:627C

LUT_PAL1_cycles:
.dw LVCYCPAL1_GHZ, LVCYCPAL1_BRI, LVCYCPAL1_JUN, LVCYCPAL1_LAB, LVCYCPAL1_SCR, LVCYCPAL1_SKY_1A, LVCYCPAL1_SKY_3, LVCYCPAL1_special  ; 01:628C
.dw LVCYCPAL1_SKY_2                                                                 ; 01:629C

LVPAL3_GHZ:
.INCBIN "src/data/lv_ghz.pal3"

LVCYCPAL1_GHZ:
.INCBIN "src/data/lv_ghz.pal1c"

LVPAL3_BRI:
.INCBIN "src/data/lv_bri.pal3"

LVCYCPAL1_BRI:
.INCBIN "src/data/lv_bri.pal1c"

LVPAL3_JUN:
.INCBIN "src/data/lv_jun.pal3"

LVCYCPAL1_JUN:
.INCBIN "src/data/lv_jun.pal1c"

LVPAL3_LAB:
.INCBIN "src/data/lv_lab.pal1"

PAL2_lv_lab_above_water:
.INCBIN "src/data/lv_lab_above_water.pal2"

LVCYCPAL1_LAB:
.INCBIN "src/data/lv_lab.pal1c"

LVPAL3_SCR:
.INCBIN "src/data/lv_scr.pal3"

LVCYCPAL1_SCR:
.INCBIN "src/data/lv_scr.pal1c"

LVPAL3_SKY:
.INCBIN "src/data/lv_sky.pal3"

LVCYCPAL1_SKY_1A:
.INCBIN "src/data/lv_sky_1a.pal1c"

LVCYCPAL1_SKY_1B:
.INCBIN "src/data/lv_sky_1b.pal1c"

LVCYCPAL1_SKY_1C:
.INCBIN "src/data/lv_sky_1c.pal1c"

LVCYCPAL1_SKY_2:
.INCBIN "src/data/lv_sky_2.pal1c"

LVPAL3_special:
.INCBIN "src/data/lv_special.pal3"

LVCYCPAL1_special:
.INCBIN "src/data/lv_special.pal1c"

LVPAL3_SKY_3:
.INCBIN "src/data/lv_sky_3.pal3"

LVCYCPAL1_SKY_3:
.INCBIN "src/data/lv_sky_3.pal1c"

objfunc_08_badnik_crabmeat:
   ld     (ix+13), $10                 ; 01:65EE - DD 36 0D 10
   ld     (ix+14), $1F                 ; 01:65F2 - DD 36 0E 1F
   ld     e, (ix+18)                   ; 01:65F6 - DD 5E 12
   ld     d, $00                       ; 01:65F9 - 16 00

addr_065FB:
   ld     hl, UNK_066C5                ; 01:65FB - 21 C5 66
   add    hl, de                       ; 01:65FE - 19
   ld     (var_D214), hl               ; 01:65FF - 22 14 D2
   ld     a, (hl)                      ; 01:6602 - 7E
   and    a                            ; 01:6603 - A7
   jr     nz, addr_0660D               ; 01:6604 - 20 07
   ld     (ix+18), a                   ; 01:6606 - DD 77 12
   ld     e, a                         ; 01:6609 - 5F
   jp     addr_065FB                   ; 01:660A - C3 FB 65

addr_0660D:
   dec    a                            ; 01:660D - 3D
   jr     nz, addr_06618               ; 01:660E - 20 08
   ld     c, $00                       ; 01:6610 - 0E 00
   ld     h, c                         ; 01:6612 - 61
   ld     l, $28                       ; 01:6613 - 2E 28
   jp     addr_0666F                   ; 01:6615 - C3 6F 66

addr_06618:
   dec    a                            ; 01:6618 - 3D
   jr     nz, addr_06623               ; 01:6619 - 20 08
   ld     c, $FF                       ; 01:661B - 0E FF
   ld     hl, $FFD8                    ; 01:661D - 21 D8 FF
   jp     addr_0666F                   ; 01:6620 - C3 6F 66

addr_06623:
   dec    a                            ; 01:6623 - 3D
   jr     nz, addr_0662D               ; 01:6624 - 20 07
   ld     c, $00                       ; 01:6626 - 0E 00
   ld     l, c                         ; 01:6628 - 69
   ld     h, c                         ; 01:6629 - 61
   jp     addr_0666F                   ; 01:662A - C3 6F 66

addr_0662D:
   ld     a, (ix+17)                   ; 01:662D - DD 7E 11
   cp     $20                          ; 01:6630 - FE 20
   jp     nz, addr_06678               ; 01:6632 - C2 78 66
   ld     hl, $FFFF                    ; 01:6635 - 21 FF FF
   ld     (var_D212), hl               ; 01:6638 - 22 12 D2
   ld     hl, $FFFC                    ; 01:663B - 21 FC FF
   ld     (var_D214), hl               ; 01:663E - 22 14 D2
   call   spawn_object                 ; 01:6641 - CD 7B 7C
   jp     c, addr_06678                ; 01:6644 - DA 78 66
   ld     de, $0000                    ; 01:6647 - 11 00 00
   ld     c, e                         ; 01:664A - 4B
   ld     b, d                         ; 01:664B - 42
   call   UNK_0AC96                    ; 01:664C - CD 96 AC
   ld     hl, $0001                    ; 01:664F - 21 01 00
   ld     (var_D212), hl               ; 01:6652 - 22 12 D2
   ld     hl, $FFFC                    ; 01:6655 - 21 FC FF
   ld     (var_D214), hl               ; 01:6658 - 22 14 D2
   call   spawn_object                 ; 01:665B - CD 7B 7C
   jr     c, addr_06678                ; 01:665E - 38 18
   ld     de, $000E                    ; 01:6660 - 11 0E 00
   ld     bc, $0000                    ; 01:6663 - 01 00 00
   call   UNK_0AC96                    ; 01:6666 - CD 96 AC
   ld     a, $0A                       ; 01:6669 - 3E 0A
   rst    $28                          ; 01:666B - EF
   jp     addr_06678                   ; 01:666C - C3 78 66

addr_0666F:
   ld     (ix+7), l                    ; 01:666F - DD 75 07
   ld     (ix+8), h                    ; 01:6672 - DD 74 08
   ld     (ix+9), c                    ; 01:6675 - DD 71 09

addr_06678:
   ld     l, (ix+17)                   ; 01:6678 - DD 6E 11
   ld     h, (ix+18)                   ; 01:667B - DD 66 12
   ld     de, $0008                    ; 01:667E - 11 08 00
   add    hl, de                       ; 01:6681 - 19
   ld     (ix+17), l                   ; 01:6682 - DD 75 11
   ld     (ix+18), h                   ; 01:6685 - DD 74 12
   ld     l, (ix+10)                   ; 01:6688 - DD 6E 0A
   ld     h, (ix+11)                   ; 01:668B - DD 66 0B
   ld     a, (ix+12)                   ; 01:668E - DD 7E 0C
   ld     de, $0020                    ; 01:6691 - 11 20 00
   add    hl, de                       ; 01:6694 - 19
   adc    a, d                         ; 01:6695 - 8A
   ld     (ix+10), l                   ; 01:6696 - DD 75 0A
   ld     (ix+11), h                   ; 01:6699 - DD 74 0B
   ld     (ix+12), a                   ; 01:669C - DD 77 0C
   ld     hl, (var_D214)               ; 01:669F - 2A 14 D2
   ld     a, (hl)                      ; 01:66A2 - 7E
   add    a, a                         ; 01:66A3 - 87
   ld     e, a                         ; 01:66A4 - 5F
   ld     hl, UNK_066E0                ; 01:66A5 - 21 E0 66
   add    hl, de                       ; 01:66A8 - 19
   ld     c, (hl)                      ; 01:66A9 - 4E
   inc    hl                           ; 01:66AA - 23
   ld     b, (hl)                      ; 01:66AB - 46
   ld     de, UNK_066F9                ; 01:66AC - 11 F9 66
   call   addr_07C41                   ; 01:66AF - CD 41 7C
   ld     hl, $0A04                    ; 01:66B2 - 21 04 0A
   ld     (var_D214), hl               ; 01:66B5 - 22 14 D2
   call   UNK_03956                    ; 01:66B8 - CD 56 39
   ld     hl, $0804                    ; 01:66BB - 21 04 08
   ld     (g_FF_string_high_byte), hl  ; 01:66BE - 22 0E D2
   call   nc, UNK_035E5                ; 01:66C1 - D4 E5 35
   ret                                 ; 01:66C4 - C9

UNK_066C5:
.db $01, $01, $01, $01, $01, $01, $01, $01, $01, $01, $03, $03, $04, $02, $02, $02  ; 01:66C5
.db $02, $02, $02, $02, $02, $02, $02, $03, $03, $04, $00                           ; 01:66D5

UNK_066E0:
.dw addr_066EA, addr_066EA, addr_066EA, addr_066F3, addr_066F6                      ; 01:66E0

addr_066EA:
.db $00, $0C, $01, $0C, $02, $0C, $01, $0C, $FF                                     ; 01:66EA

addr_066F3:
.db $01, $01, $FF                                                                   ; 01:66F3

addr_066F6:
.db $03, $01, $FF                                                                   ; 01:66F6

UNK_066F9:
.db $00, $02, $04, $FF, $FF, $FF, $20, $22, $24, $FF, $FF, $FF, $FF, $FF, $FF, $FF  ; 01:66F9
.db $FF, $FF, $00, $02, $44, $FF, $FF, $FF, $46, $22, $4A, $FF, $FF, $FF, $FF, $FF  ; 01:6709
.db $FF, $FF, $FF, $FF, $40, $02, $44, $FF, $FF, $FF, $26, $22, $2A, $FF, $FF, $FF  ; 01:6719
.db $FF, $FF, $FF, $FF, $FF, $FF, $40, $02, $04, $FF, $FF, $FF, $46, $22, $4A, $FF  ; 01:6729
.db $FF, $FF, $FF                                                                   ; 01:6739

objfunc_09_UNKNOWN:
   set    5, (ix+24)                   ; 01:673C - DD CB 18 EE
   ld     hl, $0020                    ; 01:6740 - 21 20 00
   ld     (var_D267), hl               ; 01:6743 - 22 67 D2
   ld     hl, $0048                    ; 01:6746 - 21 48 00
   ld     (var_D269), hl               ; 01:6749 - 22 69 D2
   ld     hl, $0030                    ; 01:674C - 21 30 00
   ld     (var_D26B), hl               ; 01:674F - 22 6B D2
   ld     hl, $0030                    ; 01:6752 - 21 30 00
   ld     (var_D26D), hl               ; 01:6755 - 22 6D D2
   bit    0, (ix+24)                   ; 01:6758 - DD CB 18 46
   jr     nz, addr_06782               ; 01:675C - 20 24
   ld     l, (ix+2)                    ; 01:675E - DD 6E 02
   ld     h, (ix+3)                    ; 01:6761 - DD 66 03
   ld     (ix+18), l                   ; 01:6764 - DD 75 12
   ld     (ix+19), h                   ; 01:6767 - DD 74 13
   ld     l, (ix+5)                    ; 01:676A - DD 6E 05
   ld     h, (ix+6)                    ; 01:676D - DD 66 06
   ld     (ix+20), l                   ; 01:6770 - DD 75 14
   ld     (ix+21), h                   ; 01:6773 - DD 74 15
   ld     (ix+17), $E0                 ; 01:6776 - DD 36 11 E0
   set    0, (ix+24)                   ; 01:677A - DD CB 18 C6
   set    1, (ix+24)                   ; 01:677E - DD CB 18 CE

addr_06782:
   ld     (ix+13), $1A                 ; 01:6782 - DD 36 0D 1A
   ld     (ix+14), $10                 ; 01:6786 - DD 36 0E 10
   ld     l, (ix+2)                    ; 01:678A - DD 6E 02
   ld     h, (ix+3)                    ; 01:678D - DD 66 03
   ld     (g_FF_string_high_byte), hl  ; 01:6790 - 22 0E D2
   ld     hl, LUT_0682F                ; 01:6793 - 21 2F 68
   ld     e, (ix+17)                   ; 01:6796 - DD 5E 11
   ld     d, $00                       ; 01:6799 - 16 00
   add    hl, de                       ; 01:679B - 19
   ld     c, l                         ; 01:679C - 4D
   ld     b, h                         ; 01:679D - 44
   ld     a, (bc)                      ; 01:679E - 0A
   and    a                            ; 01:679F - A7
   jp     p, addr_067A4                ; 01:67A0 - F2 A4 67
   dec    d                            ; 01:67A3 - 15

addr_067A4:
   ld     e, a                         ; 01:67A4 - 5F
   ld     l, (ix+18)                   ; 01:67A5 - DD 6E 12
   ld     h, (ix+19)                   ; 01:67A8 - DD 66 13
   add    hl, de                       ; 01:67AB - 19
   ld     (ix+2), l                    ; 01:67AC - DD 75 02
   ld     (ix+3), h                    ; 01:67AF - DD 74 03
   ld     de, (g_FF_string_high_byte)  ; 01:67B2 - ED 5B 0E D2
   and    a                            ; 01:67B6 - A7
   sbc    hl, de                       ; 01:67B7 - ED 52
   ld     (g_FF_string_high_byte), hl  ; 01:67B9 - 22 0E D2
   inc    bc                           ; 01:67BC - 03
   ld     d, $00                       ; 01:67BD - 16 00
   ld     a, (bc)                      ; 01:67BF - 0A
   and    a                            ; 01:67C0 - A7
   jp     p, addr_067C5                ; 01:67C1 - F2 C5 67
   dec    d                            ; 01:67C4 - 15

addr_067C5:
   ld     e, a                         ; 01:67C5 - 5F
   ld     l, (ix+20)                   ; 01:67C6 - DD 6E 14
   ld     h, (ix+21)                   ; 01:67C9 - DD 66 15
   add    hl, de                       ; 01:67CC - 19
   ld     (ix+5), l                    ; 01:67CD - DD 75 05
   ld     (ix+6), h                    ; 01:67D0 - DD 74 06
   ld     a, (sonic_vel_y_hi)          ; 01:67D3 - 3A 08 D4
   and    a                            ; 01:67D6 - A7
   jp     m, addr_067F9                ; 01:67D7 - FA F9 67
   ld     hl, $0806                    ; 01:67DA - 21 06 08
   ld     (var_D214), hl               ; 01:67DD - 22 14 D2
   call   UNK_03956                    ; 01:67E0 - CD 56 39
   jr     c, addr_067F9                ; 01:67E3 - 38 14
   ld     hl, (sonic_x)                ; 01:67E5 - 2A FE D3
   ld     de, (g_FF_string_high_byte)  ; 01:67E8 - ED 5B 0E D2
   add    hl, de                       ; 01:67EC - 19
   ld     (sonic_x), hl                ; 01:67ED - 22 FE D3
   ld     bc, $0010                    ; 01:67F0 - 01 10 00
   ld     de, $0000                    ; 01:67F3 - 11 00 00
   call   addr_07CC1                   ; 01:67F6 - CD C1 7C

addr_067F9:
   ld     hl, UNK_06911                ; 01:67F9 - 21 11 69
   ld     a, (var_D2D4)                ; 01:67FC - 3A D4 D2
   and    a                            ; 01:67FF - A7
   jr     z, addr_06805                ; 01:6800 - 28 03
   ld     hl, UNK_06923                ; 01:6802 - 21 23 69

addr_06805:
   ld     (ix+15), l                   ; 01:6805 - DD 75 0F
   ld     (ix+16), h                   ; 01:6808 - DD 74 10
   bit    1, (ix+24)                   ; 01:680B - DD CB 18 4E
   jr     nz, addr_06821               ; 01:680F - 20 10
   ld     a, (ix+17)                   ; 01:6811 - DD 7E 11
   inc    a                            ; 01:6814 - 3C
   inc    a                            ; 01:6815 - 3C
   ld     (ix+17), a                   ; 01:6816 - DD 77 11
   cp     $E0                          ; 01:6819 - FE E0
   ret    c                            ; 01:681B - D8
   set    1, (ix+24)                   ; 01:681C - DD CB 18 CE
   ret                                 ; 01:6820 - C9

addr_06821:
   ld     a, (ix+17)                   ; 01:6821 - DD 7E 11
   dec    a                            ; 01:6824 - 3D
   dec    a                            ; 01:6825 - 3D
   ld     (ix+17), a                   ; 01:6826 - DD 77 11
   ret    nz                           ; 01:6829 - C0
   res    1, (ix+24)                   ; 01:682A - DD CB 18 8E
   ret                                 ; 01:682E - C9

LUT_0682F:
.db $B3, $00, $B3, $01, $B3, $02, $B3, $02, $B3, $03, $B3, $04, $B3, $05, $B3, $06  ; 01:682F
.db $B4, $07, $B4, $08, $B4, $09, $B4, $0B, $B4, $0C, $B4, $0D, $B5, $0E, $B5, $0F  ; 01:683F
.db $B5, $11, $B5, $12, $B6, $13, $B6, $15, $B7, $16, $B7, $18, $B8, $19, $B8, $1B  ; 01:684F
.db $B9, $1D, $B9, $1E, $BA, $20, $BB, $22, $BC, $23, $BD, $25, $BE, $27, $BF, $29  ; 01:685F
.db $C0, $2B, $C2, $2D, $C3, $2F, $C4, $31, $C6, $32, $C8, $34, $CA, $36, $CC, $38  ; 01:686F
.db $CE, $3A, $D0, $3C, $D2, $3E, $D4, $3F, $D7, $41, $DA, $43, $DC, $44, $DF, $45  ; 01:687F
.db $E2, $47, $E5, $48, $E8, $49, $EC, $4A, $EF, $4B, $F2, $4C, $F6, $4C, $F9, $4C  ; 01:688F
.db $FC, $4D, $00, $4D, $03, $4D, $07, $4C, $0A, $4C, $0E, $4C, $11, $4B, $14, $4A  ; 01:689F
.db $18, $49, $1B, $48, $1E, $47, $21, $45, $24, $44, $27, $42, $29, $41, $2C, $3F  ; 01:68AF
.db $2E, $3D, $31, $3B, $33, $3A, $35, $38, $37, $36, $39, $34, $3A, $32, $3C, $30  ; 01:68BF
.db $3E, $2E, $3F, $2C, $40, $2A, $41, $28, $43, $26, $44, $24, $45, $23, $45, $21  ; 01:68CF
.db $46, $1F, $47, $1D, $48, $1C, $48, $1A, $49, $18, $49, $17, $4A, $15, $4A, $14  ; 01:68DF
.db $4B, $12, $4B, $11, $4B, $0F, $4B, $0E, $4C, $0D, $4C, $0C, $4C, $0A, $4C, $09  ; 01:68EF
.db $4C, $08, $4C, $07, $4D, $06, $4D, $05, $4D, $04, $4D, $03, $4D, $02, $4D, $01  ; 01:68FF
.db $4D, $00                                                                        ; 01:690F

UNK_06911:
.db $FE, $FF, $FF, $FF, $FF, $FF, $18, $1A, $18, $1A, $FF, $FF, $FF, $FF, $FF, $FF  ; 01:6911
.db $FF, $FF                                                                        ; 01:6921

UNK_06923:
.db $FE, $FF, $FF, $FF, $FF, $FF, $6C, $6E, $6E, $48, $FF, $FF, $FF, $FF            ; 01:6923

UNK_06931:
.db $FE, $FF, $FF, $FF, $FF, $FF, $6C, $6E, $6C, $6E, $FF, $FF, $FF, $FF            ; 01:6931

objfunc_0A_UNKNOWN:
   set    5, (ix+24)                   ; 01:693F - DD CB 18 EE
   ld     a, (ix+21)                   ; 01:6943 - DD 7E 15
   cp     $AA                          ; 01:6946 - FE AA
   jr     z, addr_0698D                ; 01:6948 - 28 43
   xor    a                            ; 01:694A - AF
   ld     (ix+17), a                   ; 01:694B - DD 77 11
   ld     (ix+21), $AA                 ; 01:694E - DD 36 15 AA
   ld     (ix+22), a                   ; 01:6952 - DD 77 16
   ld     (ix+23), a                   ; 01:6955 - DD 77 17
   bit    5, (iy+var_D200-IYBASE)      ; 01:6958 - FD CB 00 6E
   jr     z, addr_0698D                ; 01:695C - 28 2F
   ld     a, (g_level)                 ; 01:695E - 3A 3E D2
   cp     $12                          ; 01:6961 - FE 12
   jr     z, addr_0698D                ; 01:6963 - 28 28
   ld     a, (var_D414)                ; 01:6965 - 3A 14 D4
   rlca                                ; 01:6968 - 07
   jr     c, addr_0698D                ; 01:6969 - 38 22
   ld     a, (var_D2E8)                ; 01:696B - 3A E8 D2
   ld     de, (var_D2E6)               ; 01:696E - ED 5B E6 D2
   inc    de                           ; 01:6972 - 13
   ld     c, a                         ; 01:6973 - 4F
   ld     hl, (sonic_vel_y_sub)        ; 01:6974 - 2A 06 D4
   ld     a, l                         ; 01:6977 - 7D
   cpl                                 ; 01:6978 - 2F
   ld     l, a                         ; 01:6979 - 6F
   ld     a, h                         ; 01:697A - 7C
   cpl                                 ; 01:697B - 2F
   ld     h, a                         ; 01:697C - 67
   ld     a, (sonic_vel_y_hi)          ; 01:697D - 3A 08 D4
   and    a                            ; 01:6980 - A7
   jp     m, addr_0698D                ; 01:6981 - FA 8D 69
   cpl                                 ; 01:6984 - 2F
   add    hl, de                       ; 01:6985 - 19
   adc    a, c                         ; 01:6986 - 89
   ld     (sonic_vel_y_sub), hl        ; 01:6987 - 22 06 D4
   ld     (sonic_vel_y_hi), a          ; 01:698A - 32 08 D4

addr_0698D:
   xor    a                            ; 01:698D - AF
   ld     (ix+7), a                    ; 01:698E - DD 77 07
   ld     (ix+8), a                    ; 01:6991 - DD 77 08
   ld     (ix+9), a                    ; 01:6994 - DD 77 09
   ld     (ix+10), a                   ; 01:6997 - DD 77 0A
   ld     (ix+11), a                   ; 01:699A - DD 77 0B
   ld     (ix+12), a                   ; 01:699D - DD 77 0C
   ld     de, UNK_069BE                ; 01:69A0 - 11 BE 69
   ld     bc, UNK_069B7                ; 01:69A3 - 01 B7 69
   call   addr_07C41                   ; 01:69A6 - CD 41 7C
   inc    (ix+17)                      ; 01:69A9 - DD 34 11
   ld     a, (ix+17)                   ; 01:69AC - DD 7E 11
   cp     $18                          ; 01:69AF - FE 18
   ret    c                            ; 01:69B1 - D8
   ld     (ix+0), $FF                  ; 01:69B2 - DD 36 00 FF
   ret                                 ; 01:69B6 - C9

UNK_069B7:
.db $00, $08, $01, $08, $02, $08, $FF                                               ; 01:69B7

UNK_069BE:
.db $74, $76, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF  ; 01:69BE
.db $FF, $FF, $78, $7A, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF  ; 01:69CE
.db $FF, $FF, $FF, $FF, $7C, $7E, $FF, $FF, $FF, $FF, $FF                           ; 01:69DE

objfunc_0B_UNKNOWN:
   set    5, (ix+24)                   ; 01:69E9 - DD CB 18 EE
   ld     (ix+13), $1A                 ; 01:69ED - DD 36 0D 1A
   ld     (ix+14), $10                 ; 01:69F1 - DD 36 0E 10
   ld     (ix+15), UNK_06911&$FF       ; 01:69F5 - DD 36 0F 11
   ld     (ix+16), UNK_06911>>8        ; 01:69F9 - DD 36 10 69
   ld     a, (sonic_vel_y_hi)          ; 01:69FD - 3A 08 D4
   and    a                            ; 01:6A00 - A7
   jp     m, addr_06A2E                ; 01:6A01 - FA 2E 6A
   ld     hl, $0806                    ; 01:6A04 - 21 06 08
   ld     (var_D214), hl               ; 01:6A07 - 22 14 D2
   call   UNK_03956                    ; 01:6A0A - CD 56 39
   jr     c, addr_06A2E                ; 01:6A0D - 38 1F
   ld     de, $0000                    ; 01:6A0F - 11 00 00
   ld     a, (ix+5)                    ; 01:6A12 - DD 7E 05
   and    $1F                          ; 01:6A15 - E6 1F
   cp     $10                          ; 01:6A17 - FE 10
   jr     nc, addr_06A1D               ; 01:6A19 - 30 02
   ld     e, $80                       ; 01:6A1B - 1E 80

addr_06A1D:
   ld     (ix+10), e                   ; 01:6A1D - DD 73 0A
   ld     (ix+11), d                   ; 01:6A20 - DD 72 0B
   ld     (ix+12), $00                 ; 01:6A23 - DD 36 0C 00
   ld     bc, $0010                    ; 01:6A27 - 01 10 00
   call   addr_07CC1                   ; 01:6A2A - CD C1 7C
   ret                                 ; 01:6A2D - C9

addr_06A2E:
   ld     c, $00                       ; 01:6A2E - 0E 00
   ld     l, c                         ; 01:6A30 - 69
   ld     h, c                         ; 01:6A31 - 61
   ld     a, (ix+5)                    ; 01:6A32 - DD 7E 05
   and    $1F                          ; 01:6A35 - E6 1F
   jr     z, addr_06A3D                ; 01:6A37 - 28 04
   ld     hl, $FFC0                    ; 01:6A39 - 21 C0 FF
   dec    c                            ; 01:6A3C - 0D

addr_06A3D:
   ld     (ix+10), l                   ; 01:6A3D - DD 75 0A
   ld     (ix+11), h                   ; 01:6A40 - DD 74 0B
   ld     (ix+12), c                   ; 01:6A43 - DD 71 0C
   ret                                 ; 01:6A46 - C9

objfunc_0C_UNKNOWN:
   set    5, (ix+24)                   ; 01:6A47 - DD CB 18 EE
   ld     a, (ix+22)                   ; 01:6A4B - DD 7E 16
   add    a, (ix+23)                   ; 01:6A4E - DD 86 17
   ld     (ix+23), a                   ; 01:6A51 - DD 77 17
   cp     $18                          ; 01:6A54 - FE 18
   jr     c, addr_06A6F                ; 01:6A56 - 38 17
   ld     l, (ix+10)                   ; 01:6A58 - DD 6E 0A
   ld     h, (ix+11)                   ; 01:6A5B - DD 66 0B
   ld     a, (ix+12)                   ; 01:6A5E - DD 7E 0C
   ld     de, $0040                    ; 01:6A61 - 11 40 00
   add    hl, de                       ; 01:6A64 - 19
   adc    a, d                         ; 01:6A65 - 8A
   ld     (ix+10), l                   ; 01:6A66 - DD 75 0A
   ld     (ix+11), h                   ; 01:6A69 - DD 74 0B
   ld     (ix+12), a                   ; 01:6A6C - DD 77 0C

addr_06A6F:
   ld     (ix+13), $1A                 ; 01:6A6F - DD 36 0D 1A
   ld     (ix+14), $10                 ; 01:6A73 - DD 36 0E 10
   ld     a, (sonic_vel_y_hi)          ; 01:6A77 - 3A 08 D4
   and    a                            ; 01:6A7A - A7
   jp     m, addr_06A99                ; 01:6A7B - FA 99 6A
   ld     hl, $0806                    ; 01:6A7E - 21 06 08
   ld     (var_D214), hl               ; 01:6A81 - 22 14 D2
   call   UNK_03956                    ; 01:6A84 - CD 56 39
   jr     c, addr_06A99                ; 01:6A87 - 38 10
   ld     (ix+22), $01                 ; 01:6A89 - DD 36 16 01
   ld     bc, $0010                    ; 01:6A8D - 01 10 00
   ld     e, (ix+10)                   ; 01:6A90 - DD 5E 0A
   ld     d, (ix+11)                   ; 01:6A93 - DD 56 0B
   call   addr_07CC1                   ; 01:6A96 - CD C1 7C

addr_06A99:
   ld     hl, UNK_06911                ; 01:6A99 - 21 11 69
   ld     a, (var_D2D4)                ; 01:6A9C - 3A D4 D2
   and    a                            ; 01:6A9F - A7
   jr     z, addr_06AA5                ; 01:6AA0 - 28 03
   ld     hl, UNK_06923                ; 01:6AA2 - 21 23 69

addr_06AA5:
   ld     (ix+15), l                   ; 01:6AA5 - DD 75 0F
   ld     (ix+16), h                   ; 01:6AA8 - DD 74 10
   ld     hl, (var_D25D)               ; 01:6AAB - 2A 5D D2
   ld     de, $00C0                    ; 01:6AAE - 11 C0 00
   add    hl, de                       ; 01:6AB1 - 19
   ld     e, (ix+5)                    ; 01:6AB2 - DD 5E 05
   ld     d, (ix+6)                    ; 01:6AB5 - DD 56 06
   and    a                            ; 01:6AB8 - A7
   sbc    hl, de                       ; 01:6AB9 - ED 52
   ret    nc                           ; 01:6ABB - D0
   ld     (ix+0), $FF                  ; 01:6ABC - DD 36 00 FF
   ret                                 ; 01:6AC0 - C9

objfunc_0D_UNKNOWN:
   set    5, (ix+24)                   ; 01:6AC1 - DD CB 18 EE
   ld     (ix+13), $02                 ; 01:6AC5 - DD 36 0D 02
   ld     (ix+14), $02                 ; 01:6AC9 - DD 36 0E 02
   ld     hl, $0303                    ; 01:6ACD - 21 03 03
   ld     (var_D214), hl               ; 01:6AD0 - 22 14 D2
   call   UNK_03956                    ; 01:6AD3 - CD 56 39
   call   nc, addr_035FD               ; 01:6AD6 - D4 FD 35
   ld     l, (ix+10)                   ; 01:6AD9 - DD 6E 0A
   ld     h, (ix+11)                   ; 01:6ADC - DD 66 0B
   ld     a, (ix+12)                   ; 01:6ADF - DD 7E 0C
   ld     e, (ix+19)                   ; 01:6AE2 - DD 5E 13
   ld     d, (ix+20)                   ; 01:6AE5 - DD 56 14
   add    hl, de                       ; 01:6AE8 - 19
   adc    a, $00                       ; 01:6AE9 - CE 00
   ld     (ix+10), l                   ; 01:6AEB - DD 75 0A
   ld     (ix+11), h                   ; 01:6AEE - DD 74 0B
   ld     (ix+12), a                   ; 01:6AF1 - DD 77 0C
   ld     l, (ix+2)                    ; 01:6AF4 - DD 6E 02
   ld     h, (ix+3)                    ; 01:6AF7 - DD 66 03
   ld     (g_FF_string_high_byte), hl  ; 01:6AFA - 22 0E D2
   ld     l, (ix+5)                    ; 01:6AFD - DD 6E 05
   ld     h, (ix+6)                    ; 01:6B00 - DD 66 06
   ld     (var_D210), hl               ; 01:6B03 - 22 10 D2
   ld     hl, $0000                    ; 01:6B06 - 21 00 00
   ld     (var_D212), hl               ; 01:6B09 - 22 12 D2
   ld     (var_D214), hl               ; 01:6B0C - 22 14 D2
   ld     (ix+15), l                   ; 01:6B0F - DD 75 0F
   ld     (ix+16), h                   ; 01:6B12 - DD 74 10
   ld     hl, UNK_06B72                ; 01:6B15 - 21 72 6B
   ld     a, (g_level)                 ; 01:6B18 - 3A 3E D2
   cp     $05                          ; 01:6B1B - FE 05
   jr     z, addr_06B26                ; 01:6B1D - 28 07
   cp     $0B                          ; 01:6B1F - FE 0B
   jr     z, addr_06B26                ; 01:6B21 - 28 03
   ld     hl, UNK_06B70                ; 01:6B23 - 21 70 6B

addr_06B26:
   ld     a, (var_D223)                ; 01:6B26 - 3A 23 D2
   and    $01                          ; 01:6B29 - E6 01
   ld     e, a                         ; 01:6B2B - 5F
   ld     d, $00                       ; 01:6B2C - 16 00
   add    hl, de                       ; 01:6B2E - 19
   ld     a, (hl)                      ; 01:6B2F - 7E
   call   UNK_03581                    ; 01:6B30 - CD 81 35
   ld     c, (ix+2)                    ; 01:6B33 - DD 4E 02
   ld     b, (ix+3)                    ; 01:6B36 - DD 46 03
   ld     l, c                         ; 01:6B39 - 69
   ld     h, b                         ; 01:6B3A - 60
   ld     de, $FFF8                    ; 01:6B3B - 11 F8 FF
   add    hl, de                       ; 01:6B3E - 19
   ld     de, (var_D25A)               ; 01:6B3F - ED 5B 5A D2
   and    a                            ; 01:6B43 - A7
   sbc    hl, de                       ; 01:6B44 - ED 52
   jr     c, addr_06B6B                ; 01:6B46 - 38 23
   inc    d                            ; 01:6B48 - 14
   ex     de, hl                       ; 01:6B49 - EB
   sbc    hl, bc                       ; 01:6B4A - ED 42
   jr     c, addr_06B6B                ; 01:6B4C - 38 1D
   ld     c, (ix+5)                    ; 01:6B4E - DD 4E 05
   ld     b, (ix+6)                    ; 01:6B51 - DD 46 06
   ld     l, c                         ; 01:6B54 - 69
   ld     h, b                         ; 01:6B55 - 60
   ld     de, $0010                    ; 01:6B56 - 11 10 00
   add    hl, de                       ; 01:6B59 - 19
   ld     de, (var_D25D)               ; 01:6B5A - ED 5B 5D D2
   and    a                            ; 01:6B5E - A7
   sbc    hl, de                       ; 01:6B5F - ED 52
   jr     c, addr_06B6B                ; 01:6B61 - 38 08
   ld     hl, $00C0                    ; 01:6B63 - 21 C0 00
   add    hl, de                       ; 01:6B66 - 19
   and    a                            ; 01:6B67 - A7
   sbc    hl, bc                       ; 01:6B68 - ED 42
   ret    nc                           ; 01:6B6A - D0

addr_06B6B:
   ld     (ix+0), $FF                  ; 01:6B6B - DD 36 00 FF
   ret                                 ; 01:6B6F - C9

UNK_06B70:
.db $06, $08                                                                        ; 01:6B70

UNK_06B72:
.db $34, $36                                                                        ; 01:6B72

objfunc_0E_UNKNOWN:
   set    5, (ix+24)                   ; 01:6B74 - DD CB 18 EE
   bit    0, (ix+24)                   ; 01:6B78 - DD CB 18 46
   jr     nz, addr_06BAB               ; 01:6B7C - 20 2D
   ld     e, (ix+2)                    ; 01:6B7E - DD 5E 02
   ld     d, (ix+3)                    ; 01:6B81 - DD 56 03
   ld     (ix+20), e                   ; 01:6B84 - DD 73 14
   ld     (ix+21), d                   ; 01:6B87 - DD 72 15
   xor    a                            ; 01:6B8A - AF
   ld     (ix+15), a                   ; 01:6B8B - DD 77 0F
   ld     (ix+16), a                   ; 01:6B8E - DD 77 10
   ld     (ix+18), a                   ; 01:6B91 - DD 77 12
   ld     (ix+7), a                    ; 01:6B94 - DD 77 07
   ld     (ix+8), a                    ; 01:6B97 - DD 77 08
   ld     (ix+9), a                    ; 01:6B9A - DD 77 09
   ld     hl, (var_D25A)               ; 01:6B9D - 2A 5A D2
   ld     bc, $0100                    ; 01:6BA0 - 01 00 01
   add    hl, bc                       ; 01:6BA3 - 09
   sbc    hl, de                       ; 01:6BA4 - ED 52
   ret    nc                           ; 01:6BA6 - D0
   set    0, (ix+24)                   ; 01:6BA7 - DD CB 18 C6

addr_06BAB:
   ld     (ix+13), $14                 ; 01:6BAB - DD 36 0D 14
   ld     (ix+14), $20                 ; 01:6BAF - DD 36 0E 20
   ld     l, (ix+2)                    ; 01:6BB3 - DD 6E 02
   ld     h, (ix+3)                    ; 01:6BB6 - DD 66 03
   ld     de, (sonic_x)                ; 01:6BB9 - ED 5B FE D3
   and    a                            ; 01:6BBD - A7
   sbc    hl, de                       ; 01:6BBE - ED 52
   jr     c, addr_06BD4                ; 01:6BC0 - 38 12
   ld     de, $0040                    ; 01:6BC2 - 11 40 00
   sbc    hl, de                       ; 01:6BC5 - ED 52
   jr     nc, addr_06BD4               ; 01:6BC7 - 30 0B
   ld     a, (ix+18)                   ; 01:6BC9 - DD 7E 12
   cp     $05                          ; 01:6BCC - FE 05
   jr     nc, addr_06BD4               ; 01:6BCE - 30 04
   ld     (ix+18), $05                 ; 01:6BD0 - DD 36 12 05

addr_06BD4:
   ld     e, (ix+18)                   ; 01:6BD4 - DD 5E 12
   ld     d, $00                       ; 01:6BD7 - 16 00

addr_06BD9:
   ld     hl, UNK_06CD7                ; 01:6BD9 - 21 D7 6C
   add    hl, de                       ; 01:6BDC - 19
   ld     (var_D214), hl               ; 01:6BDD - 22 14 D2
   ld     a, (hl)                      ; 01:6BE0 - 7E
   and    a                            ; 01:6BE1 - A7
   jr     nz, addr_06BEB               ; 01:6BE2 - 20 07
   ld     (ix+18), a                   ; 01:6BE4 - DD 77 12
   ld     e, a                         ; 01:6BE7 - 5F
   jp     addr_06BD9                   ; 01:6BE8 - C3 D9 6B

addr_06BEB:
   dec    a                            ; 01:6BEB - 3D
   jr     nz, addr_06C20               ; 01:6BEC - 20 32
   ld     l, (ix+2)                    ; 01:6BEE - DD 6E 02
   ld     h, (ix+3)                    ; 01:6BF1 - DD 66 03
   ld     de, $0030                    ; 01:6BF4 - 11 30 00
   add    hl, de                       ; 01:6BF7 - 19
   ld     de, (var_D25A)               ; 01:6BF8 - ED 5B 5A D2
   xor    a                            ; 01:6BFC - AF
   sbc    hl, de                       ; 01:6BFD - ED 52
   jr     nc, addr_06C18               ; 01:6BFF - 30 17
   ld     (ix+15), a                   ; 01:6C01 - DD 77 0F
   ld     (ix+16), a                   ; 01:6C04 - DD 77 10
   ld     a, (ix+20)                   ; 01:6C07 - DD 7E 14
   ld     (ix+2), a                    ; 01:6C0A - DD 77 02
   ld     a, (ix+21)                   ; 01:6C0D - DD 7E 15
   ld     (ix+3), a                    ; 01:6C10 - DD 77 03
   res    0, (ix+24)                   ; 01:6C13 - DD CB 18 86
   ret                                 ; 01:6C17 - C9

addr_06C18:
   ld     c, $FF                       ; 01:6C18 - 0E FF
   ld     hl, $FE00                    ; 01:6C1A - 21 00 FE
   jp     addr_06C98                   ; 01:6C1D - C3 98 6C

addr_06C20:
   dec    a                            ; 01:6C20 - 3D
   jr     nz, addr_06C2A               ; 01:6C21 - 20 07
   ld     c, $00                       ; 01:6C23 - 0E 00
   ld     l, c                         ; 01:6C25 - 69
   ld     h, c                         ; 01:6C26 - 61
   jp     addr_06C98                   ; 01:6C27 - C3 98 6C

addr_06C2A:
   ld     a, (ix+17)                   ; 01:6C2A - DD 7E 11
   cp     $20                          ; 01:6C2D - FE 20
   jp     nz, addr_06CA1               ; 01:6C2F - C2 A1 6C
   call   spawn_object                 ; 01:6C32 - CD 7B 7C
   jp     c, addr_06CA1                ; 01:6C35 - DA A1 6C
   push   bc                           ; 01:6C38 - C5
   ld     e, (ix+2)                    ; 01:6C39 - DD 5E 02
   ld     d, (ix+3)                    ; 01:6C3C - DD 56 03
   ld     c, (ix+5)                    ; 01:6C3F - DD 4E 05
   ld     b, (ix+6)                    ; 01:6C42 - DD 46 06
   push   ix                           ; 01:6C45 - DD E5
   push   hl                           ; 01:6C47 - E5
   pop    ix                           ; 01:6C48 - DD E1
   xor    a                            ; 01:6C4A - AF
   ld     (ix+0), $0D                  ; 01:6C4B - DD 36 00 0D
   ld     (ix+1), a                    ; 01:6C4F - DD 77 01
   ld     (ix+2), e                    ; 01:6C52 - DD 73 02
   ld     (ix+3), d                    ; 01:6C55 - DD 72 03
   ld     (ix+4), a                    ; 01:6C58 - DD 77 04
   ld     hl, $0020                    ; 01:6C5B - 21 20 00
   add    hl, bc                       ; 01:6C5E - 09
   ld     (ix+5), l                    ; 01:6C5F - DD 75 05
   ld     (ix+6), h                    ; 01:6C62 - DD 74 06
   ld     (ix+17), a                   ; 01:6C65 - DD 77 11
   ld     (ix+19), a                   ; 01:6C68 - DD 77 13
   ld     (ix+20), a                   ; 01:6C6B - DD 77 14
   ld     (ix+21), a                   ; 01:6C6E - DD 77 15
   ld     (ix+22), a                   ; 01:6C71 - DD 77 16
   ld     (ix+23), a                   ; 01:6C74 - DD 77 17
   ld     (ix+7), $00                  ; 01:6C77 - DD 36 07 00
   ld     (ix+8), $FF                  ; 01:6C7B - DD 36 08 FF
   ld     (ix+9), $FF                  ; 01:6C7F - DD 36 09 FF
   ld     (ix+10), $80                 ; 01:6C83 - DD 36 0A 80
   ld     (ix+11), $01                 ; 01:6C87 - DD 36 0B 01
   ld     (ix+12), a                   ; 01:6C8B - DD 77 0C
   pop    ix                           ; 01:6C8E - DD E1
   pop    bc                           ; 01:6C90 - C1
   ld     a, $0A                       ; 01:6C91 - 3E 0A
   rst    $28                          ; 01:6C93 - EF
   ld     c, $00                       ; 01:6C94 - 0E 00
   ld     l, c                         ; 01:6C96 - 69
   ld     h, c                         ; 01:6C97 - 61

addr_06C98:
   ld     (ix+7), l                    ; 01:6C98 - DD 75 07
   ld     (ix+8), h                    ; 01:6C9B - DD 74 08
   ld     (ix+9), c                    ; 01:6C9E - DD 71 09

addr_06CA1:
   ld     l, (ix+17)                   ; 01:6CA1 - DD 6E 11
   ld     h, (ix+18)                   ; 01:6CA4 - DD 66 12
   ld     de, $0008                    ; 01:6CA7 - 11 08 00
   add    hl, de                       ; 01:6CAA - 19
   ld     (ix+17), l                   ; 01:6CAB - DD 75 11
   ld     (ix+18), h                   ; 01:6CAE - DD 74 12
   ld     hl, (var_D214)               ; 01:6CB1 - 2A 14 D2
   ld     a, (hl)                      ; 01:6CB4 - 7E
   add    a, a                         ; 01:6CB5 - 87
   ld     e, a                         ; 01:6CB6 - 5F
   ld     hl, UNK_06CE2                ; 01:6CB7 - 21 E2 6C
   add    hl, de                       ; 01:6CBA - 19
   ld     c, (hl)                      ; 01:6CBB - 4E
   inc    hl                           ; 01:6CBC - 23
   ld     b, (hl)                      ; 01:6CBD - 46
   ld     de, UNK_06CF9                ; 01:6CBE - 11 F9 6C
   call   addr_07C41                   ; 01:6CC1 - CD 41 7C
   ld     hl, $1000                    ; 01:6CC4 - 21 00 10
   ld     (var_D214), hl               ; 01:6CC7 - 22 14 D2
   call   UNK_03956                    ; 01:6CCA - CD 56 39
   ld     hl, $1004                    ; 01:6CCD - 21 04 10
   ld     (g_FF_string_high_byte), hl  ; 01:6CD0 - 22 0E D2
   call   nc, UNK_035E5                ; 01:6CD3 - D4 E5 35
   ret                                 ; 01:6CD6 - C9

UNK_06CD7:
.db $01, $01, $01, $01, $00, $02, $02, $03, $01, $01, $00                           ; 01:6CD7

UNK_06CE2:
.dw addr_06CEA, addr_06CEA, addr_06CEF, addr_06CF4                                  ; 01:6CE2

addr_06CEA:
.db $00, $02, $01, $02, $FF                                                         ; 01:6CEA

addr_06CEF:
.db $02, $02, $03, $02, $FF                                                         ; 01:6CEF

addr_06CF4:
.db $04, $02, $05, $02, $FF                                                         ; 01:6CF4

UNK_06CF9:
.db $FE, $0A, $FF, $FF, $FF, $FF, $0C, $0E, $10, $FF, $FF, $FF, $FF, $FF, $FF, $FF  ; 01:6CF9
.db $FF, $FF, $FE, $FF, $FF, $FF, $FF, $FF, $0C, $0E, $2C, $FF, $FF, $FF, $FF, $FF  ; 01:6D09
.db $FF, $FF, $FF, $FF, $FE, $0A, $FF, $FF, $FF, $FF, $12, $14, $16, $FF, $FF, $FF  ; 01:6D19
.db $32, $34, $FF, $FF, $FF, $FF, $FE, $FF, $FF, $FF, $FF, $FF, $12, $14, $16, $FF  ; 01:6D29
.db $FF, $FF, $32, $34, $FF, $FF, $FF, $FF, $FE, $0A, $FF, $FF, $FF, $FF, $12, $14  ; 01:6D39
.db $16, $FF, $FF, $FF, $30, $34, $FF, $FF, $FF, $FF, $FE, $FF, $FF, $FF, $FF, $FF  ; 01:6D49
.db $12, $14, $16, $FF, $FF, $FF, $30, $34, $FF, $FF, $FF, $FF                      ; 01:6D59

objfunc_0F_UNKNOWN:
   set    5, (ix+24)                   ; 01:6D65 - DD CB 18 EE
   ld     a, (g_level)                 ; 01:6D69 - 3A 3E D2
   cp     $07                          ; 01:6D6C - FE 07
   jr     z, addr_06D88                ; 01:6D6E - 28 18
   ld     hl, $0020                    ; 01:6D70 - 21 20 00
   ld     (var_D267), hl               ; 01:6D73 - 22 67 D2
   ld     hl, $0048                    ; 01:6D76 - 21 48 00
   ld     (var_D269), hl               ; 01:6D79 - 22 69 D2
   ld     hl, $0030                    ; 01:6D7C - 21 30 00
   ld     (var_D26B), hl               ; 01:6D7F - 22 6B D2
   ld     hl, $0030                    ; 01:6D82 - 21 30 00
   ld     (var_D26D), hl               ; 01:6D85 - 22 6D D2

addr_06D88:
   ld     (ix+13), $1A                 ; 01:6D88 - DD 36 0D 1A
   ld     (ix+14), $10                 ; 01:6D8C - DD 36 0E 10
   ld     c, $00                       ; 01:6D90 - 0E 00
   ld     a, (sonic_vel_y_hi)          ; 01:6D92 - 3A 08 D4
   and    a                            ; 01:6D95 - A7
   jp     m, addr_06DB1                ; 01:6D96 - FA B1 6D
   ld     hl, $0806                    ; 01:6D99 - 21 06 08
   ld     (var_D214), hl               ; 01:6D9C - 22 14 D2
   call   UNK_03956                    ; 01:6D9F - CD 56 39
   ld     c, $00                       ; 01:6DA2 - 0E 00
   jr     c, addr_06DB1                ; 01:6DA4 - 38 0B
   ld     bc, $0010                    ; 01:6DA6 - 01 10 00
   ld     de, $0000                    ; 01:6DA9 - 11 00 00
   call   addr_07CC1                   ; 01:6DAC - CD C1 7C
   ld     c, $01                       ; 01:6DAF - 0E 01

addr_06DB1:
   ld     l, (ix+18)                   ; 01:6DB1 - DD 6E 12
   ld     h, (ix+19)                   ; 01:6DB4 - DD 66 13
   inc    hl                           ; 01:6DB7 - 23
   ld     (ix+18), l                   ; 01:6DB8 - DD 75 12
   ld     (ix+19), h                   ; 01:6DBB - DD 74 13
   ld     de, $00A0                    ; 01:6DBE - 11 A0 00
   xor    a                            ; 01:6DC1 - AF
   sbc    hl, de                       ; 01:6DC2 - ED 52
   jr     c, addr_06DCF                ; 01:6DC4 - 38 09
   ld     (ix+18), a                   ; 01:6DC6 - DD 77 12
   ld     (ix+19), a                   ; 01:6DC9 - DD 77 13
   inc    (ix+20)                      ; 01:6DCC - DD 34 14

addr_06DCF:
   ld     de, $0001                    ; 01:6DCF - 11 01 00
   bit    0, (ix+20)                   ; 01:6DD2 - DD CB 14 46
   jr     z, addr_06DDB                ; 01:6DD6 - 28 03
   ld     de, $FFFF                    ; 01:6DD8 - 11 FF FF

addr_06DDB:
   ld     l, (ix+2)                    ; 01:6DDB - DD 6E 02
   ld     h, (ix+3)                    ; 01:6DDE - DD 66 03
   add    hl, de                       ; 01:6DE1 - 19
   ld     (ix+2), l                    ; 01:6DE2 - DD 75 02
   ld     (ix+3), h                    ; 01:6DE5 - DD 74 03
   ld     a, c                         ; 01:6DE8 - 79
   and    a                            ; 01:6DE9 - A7
   jr     z, addr_06DF3                ; 01:6DEA - 28 07
   ld     hl, (sonic_x)                ; 01:6DEC - 2A FE D3
   add    hl, de                       ; 01:6DEF - 19
   ld     (sonic_x), hl                ; 01:6DF0 - 22 FE D3

addr_06DF3:
   ld     hl, UNK_06911                ; 01:6DF3 - 21 11 69
   ld     a, (var_D2D4)                ; 01:6DF6 - 3A D4 D2
   and    a                            ; 01:6DF9 - A7
   jr     z, addr_06E05                ; 01:6DFA - 28 09
   ld     hl, UNK_06931                ; 01:6DFC - 21 31 69
   dec    a                            ; 01:6DFF - 3D
   jr     z, addr_06E05                ; 01:6E00 - 28 03
   ld     hl, UNK_06923                ; 01:6E02 - 21 23 69

addr_06E05:
   ld     (ix+15), l                   ; 01:6E05 - DD 75 0F
   ld     (ix+16), h                   ; 01:6E08 - DD 74 10
   ret                                 ; 01:6E0B - C9

objfunc_10_motobug:
   res    5, (ix+24)                   ; 01:6E0C - DD CB 18 AE
   ld     (ix+13), $0A                 ; 01:6E10 - DD 36 0D 0A
   ld     (ix+14), $10                 ; 01:6E14 - DD 36 0E 10
   ld     e, (ix+18)                   ; 01:6E18 - DD 5E 12
   ld     d, $00                       ; 01:6E1B - 16 00

addr_06E1D:
   ld     hl, UNK_06E96                ; 01:6E1D - 21 96 6E
   add    hl, de                       ; 01:6E20 - 19
   ld     (var_D214), hl               ; 01:6E21 - 22 14 D2
   ld     a, (hl)                      ; 01:6E24 - 7E
   and    a                            ; 01:6E25 - A7
   jr     nz, addr_06E2F               ; 01:6E26 - 20 07
   ld     (ix+18), a                   ; 01:6E28 - DD 77 12
   ld     e, a                         ; 01:6E2B - 5F
   jp     addr_06E1D                   ; 01:6E2C - C3 1D 6E

addr_06E2F:
   dec    a                            ; 01:6E2F - 3D
   jr     nz, addr_06E3A               ; 01:6E30 - 20 08
   ld     c, $FF                       ; 01:6E32 - 0E FF
   ld     hl, $FF00                    ; 01:6E34 - 21 00 FF
   jp     addr_06E49                   ; 01:6E37 - C3 49 6E

addr_06E3A:
   dec    a                            ; 01:6E3A - 3D
   jr     nz, addr_06E45               ; 01:6E3B - 20 08
   ld     c, $00                       ; 01:6E3D - 0E 00
   ld     hl, $0100                    ; 01:6E3F - 21 00 01
   jp     addr_06E49                   ; 01:6E42 - C3 49 6E

addr_06E45:
   ld     c, $00                       ; 01:6E45 - 0E 00
   ld     l, c                         ; 01:6E47 - 69
   ld     h, c                         ; 01:6E48 - 61

addr_06E49:
   ld     (ix+7), l                    ; 01:6E49 - DD 75 07
   ld     (ix+8), h                    ; 01:6E4C - DD 74 08
   ld     (ix+9), c                    ; 01:6E4F - DD 71 09
   ld     l, (ix+17)                   ; 01:6E52 - DD 6E 11
   ld     h, (ix+18)                   ; 01:6E55 - DD 66 12
   ld     de, $0008                    ; 01:6E58 - 11 08 00
   add    hl, de                       ; 01:6E5B - 19
   ld     (ix+17), l                   ; 01:6E5C - DD 75 11
   ld     (ix+18), h                   ; 01:6E5F - DD 74 12
   ld     (ix+10), $00                 ; 01:6E62 - DD 36 0A 00
   ld     (ix+11), $02                 ; 01:6E66 - DD 36 0B 02
   ld     (ix+12), $00                 ; 01:6E6A - DD 36 0C 00
   ld     hl, (var_D214)               ; 01:6E6E - 2A 14 D2
   ld     a, (hl)                      ; 01:6E71 - 7E
   add    a, a                         ; 01:6E72 - 87
   ld     e, a                         ; 01:6E73 - 5F
   ld     d, $00                       ; 01:6E74 - 16 00
   ld     hl, UNK_06EB1                ; 01:6E76 - 21 B1 6E
   add    hl, de                       ; 01:6E79 - 19
   ld     c, (hl)                      ; 01:6E7A - 4E
   inc    hl                           ; 01:6E7B - 23
   ld     b, (hl)                      ; 01:6E7C - 46
   ld     de, UNK_06ECB                ; 01:6E7D - 11 CB 6E
   call   addr_07C41                   ; 01:6E80 - CD 41 7C
   ld     hl, $0203                    ; 01:6E83 - 21 03 02
   ld     (var_D214), hl               ; 01:6E86 - 22 14 D2
   call   UNK_03956                    ; 01:6E89 - CD 56 39
   ld     hl, $0000                    ; 01:6E8C - 21 00 00
   ld     (g_FF_string_high_byte), hl  ; 01:6E8F - 22 0E D2
   call   nc, UNK_035E5                ; 01:6E92 - D4 E5 35
   ret                                 ; 01:6E95 - C9

UNK_06E96:
.db $01, $01, $01, $01, $01, $01, $01, $01, $01, $03, $03, $03, $03, $02, $02, $02  ; 01:6E96
.db $02, $02, $02, $02, $02, $02, $04, $04, $04, $04, $00                           ; 01:6EA6

UNK_06EB1:
.dw addr_06EBB, addr_06EBB, addr_06EC0, addr_06EC5, addr_06EC8                      ; 01:6EB1

addr_06EBB:
.db $00, $08, $01, $08, $FF                                                         ; 01:6EBB

addr_06EC0:
.db $02, $08, $03, $08, $FF                                                         ; 01:6EC0

addr_06EC5:
.db $00, $FF, $FF                                                                   ; 01:6EC5

addr_06EC8:
.db $02, $FF, $FF                                                                   ; 01:6EC8

UNK_06ECB:
.db $60, $62, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF  ; 01:6ECB
.db $FF, $FF, $64, $66, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF  ; 01:6EDB
.db $FF, $FF, $FF, $FF, $68, $6A, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF  ; 01:6EEB
.db $FF, $FF, $FF, $FF, $FF, $FF, $6C, $6E, $FF, $FF, $FF, $FF, $FF                 ; 01:6EFB

objfunc_11_UNKNOWN:
   set    5, (ix+24)                   ; 01:6F08 - DD CB 18 EE
   ld     (ix+13), $0C                 ; 01:6F0C - DD 36 0D 0C
   ld     (ix+14), $14                 ; 01:6F10 - DD 36 0E 14
   ld     a, (ix+17)                   ; 01:6F14 - DD 7E 11
   cp     $02                          ; 01:6F17 - FE 02
   jr     z, addr_06F1E                ; 01:6F19 - 28 03
   and    a                            ; 01:6F1B - A7
   jr     nz, addr_06F42               ; 01:6F1C - 20 24

addr_06F1E:
   ld     a, (var_D223)                ; 01:6F1E - 3A 23 D2
   and    $01                          ; 01:6F21 - E6 01
   jr     z, addr_06F2A                ; 01:6F23 - 28 05
   ld     bc, $0000                    ; 01:6F25 - 01 00 00
   jr     addr_06F2D                   ; 01:6F28 - 18 03

addr_06F2A:
   ld     bc, UNK_06FED                ; 01:6F2A - 01 ED 6F

addr_06F2D:
   inc    (ix+23)                      ; 01:6F2D - DD 34 17
   ld     a, (ix+23)                   ; 01:6F30 - DD 7E 17
   cp     $3C                          ; 01:6F33 - FE 3C
   jp     c, addr_06FD4                ; 01:6F35 - DA D4 6F
   ld     (ix+23), $00                 ; 01:6F38 - DD 36 17 00
   inc    (ix+17)                      ; 01:6F3C - DD 34 11
   jp     addr_06FD4                   ; 01:6F3F - C3 D4 6F

addr_06F42:
   cp     $01                          ; 01:6F42 - FE 01
   jp     nz, addr_06FC1               ; 01:6F44 - C2 C1 6F
   inc    (ix+23)                      ; 01:6F47 - DD 34 17
   ld     a, (ix+23)                   ; 01:6F4A - DD 7E 17
   cp     $64                          ; 01:6F4D - FE 64
   jr     nz, addr_06FB1               ; 01:6F4F - 20 60
   call   spawn_object                 ; 01:6F51 - CD 7B 7C
   jp     c, addr_06FB1                ; 01:6F54 - DA B1 6F
   push   bc                           ; 01:6F57 - C5
   ld     e, (ix+2)                    ; 01:6F58 - DD 5E 02
   ld     d, (ix+3)                    ; 01:6F5B - DD 56 03
   ld     c, (ix+5)                    ; 01:6F5E - DD 4E 05
   ld     b, (ix+6)                    ; 01:6F61 - DD 46 06
   push   ix                           ; 01:6F64 - DD E5
   push   hl                           ; 01:6F66 - E5
   pop    ix                           ; 01:6F67 - DD E1
   xor    a                            ; 01:6F69 - AF
   ld     (ix+0), $0D                  ; 01:6F6A - DD 36 00 0D
   ld     (ix+1), a                    ; 01:6F6E - DD 77 01
   ld     (ix+2), e                    ; 01:6F71 - DD 73 02
   ld     (ix+3), d                    ; 01:6F74 - DD 72 03
   ld     (ix+4), a                    ; 01:6F77 - DD 77 04
   ld     hl, $0006                    ; 01:6F7A - 21 06 00
   add    hl, bc                       ; 01:6F7D - 09
   ld     (ix+5), l                    ; 01:6F7E - DD 75 05
   ld     (ix+6), h                    ; 01:6F81 - DD 74 06
   ld     (ix+17), a                   ; 01:6F84 - DD 77 11
   ld     (ix+19), a                   ; 01:6F87 - DD 77 13
   ld     (ix+20), a                   ; 01:6F8A - DD 77 14
   ld     (ix+21), a                   ; 01:6F8D - DD 77 15
   ld     (ix+22), a                   ; 01:6F90 - DD 77 16
   ld     (ix+23), a                   ; 01:6F93 - DD 77 17
   ld     (ix+7), $00                  ; 01:6F96 - DD 36 07 00
   ld     (ix+8), $FE                  ; 01:6F9A - DD 36 08 FE
   ld     (ix+9), $FF                  ; 01:6F9E - DD 36 09 FF
   ld     (ix+10), a                   ; 01:6FA2 - DD 77 0A
   ld     (ix+11), a                   ; 01:6FA5 - DD 77 0B
   ld     (ix+12), a                   ; 01:6FA8 - DD 77 0C
   pop    ix                           ; 01:6FAB - DD E1
   pop    bc                           ; 01:6FAD - C1
   ld     a, $0A                       ; 01:6FAE - 3E 0A
   rst    $28                          ; 01:6FB0 - EF

addr_06FB1:
   ld     bc, UNK_06FED                ; 01:6FB1 - 01 ED 6F
   cp     $78                          ; 01:6FB4 - FE 78
   jr     c, addr_06FD4                ; 01:6FB6 - 38 1C
   ld     (ix+23), $00                 ; 01:6FB8 - DD 36 17 00
   inc    (ix+17)                      ; 01:6FBC - DD 34 11
   jr     addr_06FD4                   ; 01:6FBF - 18 13

addr_06FC1:
   cp     $03                          ; 01:6FC1 - FE 03
   jr     nz, addr_06FD4               ; 01:6FC3 - 20 0F
   ld     bc, $0000                    ; 01:6FC5 - 01 00 00
   inc    (ix+23)                      ; 01:6FC8 - DD 34 17
   ld     a, (ix+23)                   ; 01:6FCB - DD 7E 17
   and    a                            ; 01:6FCE - A7
   jr     nz, addr_06FD4               ; 01:6FCF - 20 03
   ld     (ix+17), c                   ; 01:6FD1 - DD 71 11

addr_06FD4:
   ld     (ix+15), c                   ; 01:6FD4 - DD 71 0F
   ld     (ix+16), b                   ; 01:6FD7 - DD 70 10
   ld     hl, $0202                    ; 01:6FDA - 21 02 02
   ld     (var_D214), hl               ; 01:6FDD - 22 14 D2
   call   UNK_03956                    ; 01:6FE0 - CD 56 39
   ld     hl, $0000                    ; 01:6FE3 - 21 00 00
   ld     (g_FF_string_high_byte), hl  ; 01:6FE6 - 22 0E D2
   call   nc, UNK_035E5                ; 01:6FE9 - D4 E5 35
   ret                                 ; 01:6FEC - C9

UNK_06FED:
.db $1C, $1E, $FF, $FF, $FF, $FF, $FE, $3E, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF  ; 01:6FED
.db $FF, $FF, $40, $42, $FF, $FF, $FF, $FF, $FE, $62, $FF, $FF, $FF, $FF, $FF       ; 01:6FFD

objfunc_12_GHZ_boss:
   set    5, (ix+24)                   ; 01:700C - DD CB 18 EE
   ld     (ix+13), $20                 ; 01:7010 - DD 36 0D 20
   ld     (ix+14), $1C                 ; 01:7014 - DD 36 0E 1C
   call   addr_07CA6                   ; 01:7018 - CD A6 7C
   bit    0, (ix+17)                   ; 01:701B - DD CB 11 46
   jr     nz, addr_07063               ; 01:701F - 20 42
   ld     l, (ix+5)                    ; 01:7021 - DD 6E 05
   ld     h, (ix+6)                    ; 01:7024 - DD 66 06
   ld     de, $FFF8                    ; 01:7027 - 11 F8 FF
   add    hl, de                       ; 01:702A - 19
   ld     (ix+5), l                    ; 01:702B - DD 75 05
   ld     (ix+6), h                    ; 01:702E - DD 74 06
   ld     hl, ART_09_AEB1              ; 01:7031 - 21 B1 AE
   ld     de, $2000                    ; 01:7034 - 11 00 20
   ld     a, $09                       ; 01:7037 - 3E 09
   call   load_art                     ; 01:7039 - CD 05 04
   ld     hl, PAL2_boss                ; 01:703C - 21 1C 73
   ld     a, $02                       ; 01:703F - 3E 02
   call   signal_load_palettes         ; 01:7041 - CD 33 03
   ld     a, $0B                       ; 01:7044 - 3E 0B
   rst    $18                          ; 01:7046 - DF
   xor    a                            ; 01:7047 - AF
   ld     (var_D2EC), a                ; 01:7048 - 32 EC D2
   ld     (ix+18), a                   ; 01:704B - DD 77 12
   ld     (ix+20), UNK_072A1&$FF       ; 01:704E - DD 36 14 A1
   ld     (ix+21), UNK_072A1>>8        ; 01:7052 - DD 36 15 72
   ld     hl, $0760                    ; 01:7056 - 21 60 07
   ld     de, $00E8                    ; 01:7059 - 11 E8 00
   call   addr_07C8C                   ; 01:705C - CD 8C 7C
   set    0, (ix+17)                   ; 01:705F - DD CB 11 C6

addr_07063:
   ld     a, (ix+19)                   ; 01:7063 - DD 7E 13
   and    $3F                          ; 01:7066 - E6 3F
   ld     e, a                         ; 01:7068 - 5F
   ld     d, $00                       ; 01:7069 - 16 00
   ld     hl, UNK_07261                ; 01:706B - 21 61 72
   add    hl, de                       ; 01:706E - 19
   ld     a, (hl)                      ; 01:706F - 7E
   and    a                            ; 01:7070 - A7
   jp     p, addr_07078                ; 01:7071 - F2 78 70
   ld     c, $FF                       ; 01:7074 - 0E FF
   jr     addr_0707A                   ; 01:7076 - 18 02

addr_07078:
   ld     c, $00                       ; 01:7078 - 0E 00

addr_0707A:
   ld     (ix+10), a                   ; 01:707A - DD 77 0A
   ld     (ix+11), c                   ; 01:707D - DD 71 0B
   ld     (ix+12), c                   ; 01:7080 - DD 71 0C

addr_07083:
   ld     e, (ix+18)                   ; 01:7083 - DD 5E 12
   ld     d, $00                       ; 01:7086 - 16 00
   ld     l, (ix+20)                   ; 01:7088 - DD 6E 14
   ld     h, (ix+21)                   ; 01:708B - DD 66 15
   add    hl, de                       ; 01:708E - 19
   ld     (var_D214), hl               ; 01:708F - 22 14 D2
   ld     a, (hl)                      ; 01:7092 - 7E
   and    a                            ; 01:7093 - A7
   jr     nz, addr_0709E               ; 01:7094 - 20 08
   inc    hl                           ; 01:7096 - 23
   ld     a, (hl)                      ; 01:7097 - 7E
   ld     (ix+18), a                   ; 01:7098 - DD 77 12
   jp     addr_07083                   ; 01:709B - C3 83 70

addr_0709E:
   dec    a                            ; 01:709E - 3D
   add    a, a                         ; 01:709F - 87
   ld     e, a                         ; 01:70A0 - 5F
   ld     d, $00                       ; 01:70A1 - 16 00
   ld     hl, CODEPTRTAB_0724B         ; 01:70A3 - 21 4B 72
   add    hl, de                       ; 01:70A6 - 19
   ld     a, (hl)                      ; 01:70A7 - 7E
   inc    hl                           ; 01:70A8 - 23
   ld     h, (hl)                      ; 01:70A9 - 66
   ld     l, a                         ; 01:70AA - 6F
   jp     (hl)                         ; 01:70AB - E9

addr_070AC:
   ld     hl, (var_D273)               ; 01:70AC - 2A 73 D2
   ld     de, $0006                    ; 01:70AF - 11 06 00
   add    hl, de                       ; 01:70B2 - 19
   ld     e, (ix+2)                    ; 01:70B3 - DD 5E 02
   ld     d, (ix+3)                    ; 01:70B6 - DD 56 03
   and    a                            ; 01:70B9 - A7
   sbc    hl, de                       ; 01:70BA - ED 52
   ld     c, $FF                       ; 01:70BC - 0E FF
   ld     hl, $FF00                    ; 01:70BE - 21 00 FF
   jp     c, addr_07205                ; 01:70C1 - DA 05 72
   ld     (ix+18), $00                 ; 01:70C4 - DD 36 12 00
   bit    1, (ix+17)                   ; 01:70C8 - DD CB 11 4E
   jr     nz, addr_070DD               ; 01:70CC - 20 0F
   ld     (ix+20), UNK_072A4&$FF       ; 01:70CE - DD 36 14 A4
   ld     (ix+21), UNK_072A4>>8        ; 01:70D2 - DD 36 15 72
   set    1, (ix+17)                   ; 01:70D6 - DD CB 11 CE
   jp     addr_07205                   ; 01:70DA - C3 05 72

addr_070DD:
   ld     (ix+20), UNK_072A7&$FF       ; 01:70DD - DD 36 14 A7
   ld     (ix+21), UNK_072A7>>8        ; 01:70E1 - DD 36 15 72
   res    1, (ix+17)                   ; 01:70E5 - DD CB 11 8E
   jp     addr_07205                   ; 01:70E9 - C3 05 72

addr_070EC:
   ld     hl, (var_D273)               ; 01:70EC - 2A 73 D2
   ld     de, $00E0                    ; 01:70EF - 11 E0 00
   add    hl, de                       ; 01:70F2 - 19
   ld     e, (ix+2)                    ; 01:70F3 - DD 5E 02
   ld     d, (ix+3)                    ; 01:70F6 - DD 56 03
   and    a                            ; 01:70F9 - A7
   sbc    hl, de                       ; 01:70FA - ED 52
   ld     c, $00                       ; 01:70FC - 0E 00
   ld     hl, $0100                    ; 01:70FE - 21 00 01
   jp     nc, addr_07205               ; 01:7101 - D2 05 72
   ld     (ix+18), $00                 ; 01:7104 - DD 36 12 00
   bit    2, (ix+17)                   ; 01:7108 - DD CB 11 56
   jr     nz, addr_0711D               ; 01:710C - 20 0F
   ld     (ix+20), UNK_072A1&$FF       ; 01:710E - DD 36 14 A1
   ld     (ix+21), UNK_072A1>>8        ; 01:7112 - DD 36 15 72
   set    2, (ix+17)                   ; 01:7116 - DD CB 11 D6
   jp     addr_07205                   ; 01:711A - C3 05 72

addr_0711D:
   ld     (ix+20), UNK_072AA&$FF       ; 01:711D - DD 36 14 AA
   ld     (ix+21), UNK_072AA>>8        ; 01:7121 - DD 36 15 72
   res    2, (ix+17)                   ; 01:7125 - DD CB 11 96
   jp     addr_07205                   ; 01:7129 - C3 05 72

addr_0712C:
   ld     (ix+10), $60                 ; 01:712C - DD 36 0A 60
   ld     (ix+11), $00                 ; 01:7130 - DD 36 0B 00
   ld     (ix+12), $00                 ; 01:7134 - DD 36 0C 00
   ld     hl, (var_D25D)               ; 01:7138 - 2A 5D D2
   ld     de, $0074                    ; 01:713B - 11 74 00
   add    hl, de                       ; 01:713E - 19
   ld     e, (ix+5)                    ; 01:713F - DD 5E 05
   ld     d, (ix+6)                    ; 01:7142 - DD 56 06
   xor    a                            ; 01:7145 - AF
   sbc    hl, de                       ; 01:7146 - ED 52
   ld     c, a                         ; 01:7148 - 4F
   ld     l, c                         ; 01:7149 - 69
   ld     h, c                         ; 01:714A - 61
   jp     nc, addr_07205               ; 01:714B - D2 05 72
   ld     (ix+18), $00                 ; 01:714E - DD 36 12 00
   ld     (ix+20), UNK_072B0&$FF       ; 01:7152 - DD 36 14 B0
   ld     (ix+21), UNK_072B0>>8        ; 01:7156 - DD 36 15 72
   jp     addr_07205                   ; 01:715A - C3 05 72

addr_0715D:
   ld     c, $00                       ; 01:715D - 0E 00
   ld     hl, $0400                    ; 01:715F - 21 00 04
   jp     addr_07205                   ; 01:7162 - C3 05 72

addr_07165:
   ld     (ix+10), $60                 ; 01:7165 - DD 36 0A 60
   ld     (ix+11), $00                 ; 01:7169 - DD 36 0B 00
   ld     (ix+12), $00                 ; 01:716D - DD 36 0C 00
   ld     hl, (var_D25D)               ; 01:7171 - 2A 5D D2
   ld     de, $0074                    ; 01:7174 - 11 74 00
   add    hl, de                       ; 01:7177 - 19
   ld     e, (ix+5)                    ; 01:7178 - DD 5E 05
   ld     d, (ix+6)                    ; 01:717B - DD 56 06
   xor    a                            ; 01:717E - AF
   sbc    hl, de                       ; 01:717F - ED 52
   ld     c, a                         ; 01:7181 - 4F
   ld     l, c                         ; 01:7182 - 69
   ld     h, c                         ; 01:7183 - 61
   jp     nc, addr_07205               ; 01:7184 - D2 05 72
   ld     (ix+18), $00                 ; 01:7187 - DD 36 12 00
   ld     (ix+20), UNK_072BC&$FF       ; 01:718B - DD 36 14 BC
   ld     (ix+21), UNK_072BC>>8        ; 01:718F - DD 36 15 72
   jp     addr_07205                   ; 01:7193 - C3 05 72

addr_07196:
   ld     c, $FF                       ; 01:7196 - 0E FF
   ld     hl, $FC00                    ; 01:7198 - 21 00 FC
   jr     addr_07205                   ; 01:719B - 18 68

addr_0719D:
   ld     c, $00                       ; 01:719D - 0E 00
   ld     l, c                         ; 01:719F - 69
   ld     h, c                         ; 01:71A0 - 61
   jr     addr_07205                   ; 01:71A1 - 18 62

addr_071A3:
   ld     c, $00                       ; 01:71A3 - 0E 00
   ld     l, c                         ; 01:71A5 - 69
   ld     h, c                         ; 01:71A6 - 61
   ld     (ix+20), UNK_072AD&$FF       ; 01:71A7 - DD 36 14 AD
   ld     (ix+21), UNK_072AD>>8        ; 01:71AB - DD 36 15 72
   ld     (ix+18), c                   ; 01:71AF - DD 71 12
   ld     (ix+19), c                   ; 01:71B2 - DD 71 13
   jr     addr_07205                   ; 01:71B5 - 18 4E

addr_071B7:
   ld     (ix+10), $00                 ; 01:71B7 - DD 36 0A 00
   ld     (ix+11), $FF                 ; 01:71BB - DD 36 0B FF
   ld     (ix+12), $FF                 ; 01:71BF - DD 36 0C FF
   ld     hl, (var_D25D)               ; 01:71C3 - 2A 5D D2
   ld     de, $001A                    ; 01:71C6 - 11 1A 00
   add    hl, de                       ; 01:71C9 - 19
   ld     e, (ix+5)                    ; 01:71CA - DD 5E 05
   ld     d, (ix+6)                    ; 01:71CD - DD 56 06
   xor    a                            ; 01:71D0 - AF
   sbc    hl, de                       ; 01:71D1 - ED 52
   ld     c, a                         ; 01:71D3 - 4F
   ld     l, c                         ; 01:71D4 - 69
   ld     h, c                         ; 01:71D5 - 61
   jp     c, addr_07205                ; 01:71D6 - DA 05 72
   ld     l, (ix+2)                    ; 01:71D9 - DD 6E 02
   ld     h, (ix+3)                    ; 01:71DC - DD 66 03
   ld     de, (var_D273)               ; 01:71DF - ED 5B 73 D2
   xor    a                            ; 01:71E3 - AF
   sbc    hl, de                       ; 01:71E4 - ED 52
   ld     c, a                         ; 01:71E6 - 4F
   ld     l, c                         ; 01:71E7 - 69
   ld     h, c                         ; 01:71E8 - 61
   jr     c, addr_071F8                ; 01:71E9 - 38 0D
   ld     (ix+20), UNK_072A1&$FF       ; 01:71EB - DD 36 14 A1
   ld     (ix+21), UNK_072A1>>8        ; 01:71EF - DD 36 15 72
   ld     (ix+18), a                   ; 01:71F3 - DD 77 12
   jr     addr_07205                   ; 01:71F6 - 18 0D

addr_071F8:
   ld     (ix+20), UNK_072A4&$FF       ; 01:71F8 - DD 36 14 A4
   ld     (ix+21), UNK_072A4>>8        ; 01:71FC - DD 36 15 72
   ld     (ix+18), a                   ; 01:7200 - DD 77 12
   jr     addr_07205                   ; 01:7203 - 18 00

addr_07205:
   ld     (ix+7), l                    ; 01:7205 - DD 75 07
   ld     (ix+8), h                    ; 01:7208 - DD 74 08
   ld     (ix+9), c                    ; 01:720B - DD 71 09
   ld     hl, (var_D214)               ; 01:720E - 2A 14 D2
   ld     e, (hl)                      ; 01:7211 - 5E
   ld     d, $00                       ; 01:7212 - 16 00
   ld     hl, UNK_072C8                ; 01:7214 - 21 C8 72
   add    hl, de                       ; 01:7217 - 19
   ld     a, (hl)                      ; 01:7218 - 7E
   ld     hl, UNK_072F8                ; 01:7219 - 21 F8 72
   and    a                            ; 01:721C - A7
   jr     z, addr_07222                ; 01:721D - 28 03
   ld     hl, UNK_0730A                ; 01:721F - 21 0A 73

addr_07222:
   ld     e, a                         ; 01:7222 - 5F
   ld     a, (ix+24)                   ; 01:7223 - DD 7E 18
   and    $FD                          ; 01:7226 - E6 FD
   or     e                            ; 01:7228 - B3
   ld     (ix+24), a                   ; 01:7229 - DD 77 18
   ld     (ix+15), l                   ; 01:722C - DD 75 0F
   ld     (ix+16), h                   ; 01:722F - DD 74 10
   ld     hl, $0012                    ; 01:7232 - 21 12 00
   ld     (var_D216), hl               ; 01:7235 - 22 16 D2
   call   addr_077BE                   ; 01:7238 - CD BE 77
   call   addr_079FA                   ; 01:723B - CD FA 79
   inc    (ix+19)                      ; 01:723E - DD 34 13
   ld     a, (ix+19)                   ; 01:7241 - DD 7E 13
   and    $0F                          ; 01:7244 - E6 0F
   ret    nz                           ; 01:7246 - C0
   inc    (ix+18)                      ; 01:7247 - DD 34 12
   ret                                 ; 01:724A - C9

CODEPTRTAB_0724B:
.dw addr_070AC, addr_070EC, addr_0712C, addr_0715D, addr_07165, addr_07196, addr_0719D, addr_071A3  ; 01:724B
.dw addr_071B7, ENTRY_RESET, addr_0719D                                             ; 01:725B

UNK_07261:
.db $00, $14, $28, $28, $3C, $3C, $3C, $50, $50, $50, $50, $64, $64, $64, $64, $64  ; 01:7261
.db $64, $64, $64, $64, $64, $50, $50, $50, $50, $3C, $3C, $3C, $28, $28, $14, $00  ; 01:7271
.db $00, $EC, $D8, $D8, $C4, $C4, $C4, $B0, $B0, $B0, $B0, $9C, $9C, $9C, $9C, $9C  ; 01:7281
.db $9C, $9C, $9C, $9C, $9C, $B0, $B0, $B0, $B0, $C4, $C4, $C4, $D8, $D8, $EC, $00  ; 01:7291

UNK_072A1:
.db $01, $00, $00                                                                   ; 01:72A1

UNK_072A4:
.db $02, $00, $00                                                                   ; 01:72A4

UNK_072A7:
.db $03, $00, $00                                                                   ; 01:72A7

UNK_072AA:
.db $05, $00, $00                                                                   ; 01:72AA

UNK_072AD:
.db $09, $00, $00                                                                   ; 01:72AD

UNK_072B0:
.db $07, $07, $07, $07, $04, $04, $04, $04, $04, $08, $00, $00                      ; 01:72B0

UNK_072BC:
.db $0B, $0B, $0B, $0B, $06, $06, $06, $06, $06, $08, $00, $00                      ; 01:72BC

UNK_072C8:
.db $00, $00, $02, $02, $02, $00, $00, $02, $02, $00, $02, $00, $00, $00, $01, $04  ; 01:72C8
.db $01, $00, $01, $04, $01, $01, $01, $04, $01, $01, $01, $04, $01, $FF, $02, $02  ; 01:72D8
.db $01, $05, $01, $02, $01, $05, $01, $03, $01, $05, $01, $03, $01, $05, $01, $FF  ; 01:72E8

UNK_072F8:
.db $20, $22, $24, $26, $28, $FF, $40, $42, $44, $46, $48, $FF, $60, $62, $64, $66  ; 01:72F8
.db $68, $FF                                                                        ; 01:7308

UNK_0730A:
.db $2A, $2C, $2E, $30, $32, $FF, $4A, $4C, $4E, $50, $52, $FF, $6A, $6C, $6E, $70  ; 01:730A
.db $72, $FF                                                                        ; 01:731A

PAL2_boss:
.INCBIN "src/data/boss.pal2"

objfunc_25_UNKNOWN:
   set    5, (ix+24)                   ; 01:732C - DD CB 18 EE
   bit    0, (ix+24)                   ; 01:7330 - DD CB 18 46
   jr     nz, addr_0734A               ; 01:7334 - 20 14
   ld     l, (ix+5)                    ; 01:7336 - DD 6E 05
   ld     h, (ix+6)                    ; 01:7339 - DD 66 06
   ld     de, $0010                    ; 01:733C - 11 10 00
   add    hl, de                       ; 01:733F - 19
   ld     (ix+5), l                    ; 01:7340 - DD 75 05
   ld     (ix+6), h                    ; 01:7343 - DD 74 06
   set    0, (ix+24)                   ; 01:7346 - DD CB 18 C6

addr_0734A:
   ld     (ix+13), $1C                 ; 01:734A - DD 36 0D 1C
   ld     (ix+14), $40                 ; 01:734E - DD 36 0E 40
   ld     hl, UNK_07564                ; 01:7352 - 21 64 75
   bit    1, (ix+24)                   ; 01:7355 - DD CB 18 4E
   jr     z, addr_0735E                ; 01:7359 - 28 03
   ld     hl, UNK_0757C                ; 01:735B - 21 7C 75

addr_0735E:
   ld     a, (var_D223)                ; 01:735E - 3A 23 D2
   rrca                                ; 01:7361 - 0F
   jr     nc, addr_07368               ; 01:7362 - 30 04
   ld     de, $000C                    ; 01:7364 - 11 0C 00
   add    hl, de                       ; 01:7367 - 19

addr_07368:
   ld     c, (hl)                      ; 01:7368 - 4E
   inc    hl                           ; 01:7369 - 23
   ld     b, (hl)                      ; 01:736A - 46
   inc    hl                           ; 01:736B - 23
   ex     de, hl                       ; 01:736C - EB
   ld     l, (ix+2)                    ; 01:736D - DD 6E 02
   ld     h, (ix+3)                    ; 01:7370 - DD 66 03
   add    hl, bc                       ; 01:7373 - 09
   ld     (var_D2AB), hl               ; 01:7374 - 22 AB D2
   ex     de, hl                       ; 01:7377 - EB
   ld     c, (hl)                      ; 01:7378 - 4E
   inc    hl                           ; 01:7379 - 23
   ld     b, (hl)                      ; 01:737A - 46
   inc    hl                           ; 01:737B - 23
   ld     (var_D2AF), hl               ; 01:737C - 22 AF D2
   ld     l, (ix+5)                    ; 01:737F - DD 6E 05
   ld     h, (ix+6)                    ; 01:7382 - DD 66 06
   add    hl, bc                       ; 01:7385 - 09
   ld     (var_D2AD), hl               ; 01:7386 - 22 AD D2
   ld     hl, UNK_0752E                ; 01:7389 - 21 2E 75
   ld     a, (var_D223)                ; 01:738C - 3A 23 D2
   and    $10                          ; 01:738F - E6 10
   jr     z, addr_07396                ; 01:7391 - 28 03
   ld     hl, UNK_07552                ; 01:7393 - 21 52 75

addr_07396:
   ld     (ix+15), l                   ; 01:7396 - DD 75 0F
   ld     (ix+16), h                   ; 01:7399 - DD 74 10
   ld     hl, (var_D25A)               ; 01:739C - 2A 5A D2
   ld     (var_D273), hl               ; 01:739F - 22 73 D2
   ld     l, (ix+2)                    ; 01:73A2 - DD 6E 02
   ld     h, (ix+3)                    ; 01:73A5 - DD 66 03
   ld     de, $FF90                    ; 01:73A8 - 11 90 FF
   add    hl, de                       ; 01:73AB - 19
   ld     (var_D275), hl               ; 01:73AC - 22 75 D2
   ld     hl, $0002                    ; 01:73AF - 21 02 00
   ld     (var_D214), hl               ; 01:73B2 - 22 14 D2
   call   UNK_03956                    ; 01:73B5 - CD 56 39
   jp     c, addr_0745B                ; 01:73B8 - DA 5B 74
   ld     a, (sonic_vel_y_hi)          ; 01:73BB - 3A 08 D4
   and    a                            ; 01:73BE - A7
   jp     m, addr_0745B                ; 01:73BF - FA 5B 74
   ld     e, (ix+5)                    ; 01:73C2 - DD 5E 05
   ld     d, (ix+6)                    ; 01:73C5 - DD 56 06
   ld     hl, (sonic_y)                ; 01:73C8 - 2A 01 D4
   and    a                            ; 01:73CB - A7
   sbc    hl, de                       ; 01:73CC - ED 52
   jr     c, addr_073F6                ; 01:73CE - 38 26
   ld     l, (ix+2)                    ; 01:73D0 - DD 6E 02
   ld     h, (ix+3)                    ; 01:73D3 - DD 66 03
   ld     de, $0010                    ; 01:73D6 - 11 10 00
   add    hl, de                       ; 01:73D9 - 19
   ld     de, $FFEA                    ; 01:73DA - 11 EA FF
   ld     bc, (sonic_x)                ; 01:73DD - ED 4B FE D3
   and    a                            ; 01:73E1 - A7
   sbc    hl, bc                       ; 01:73E2 - ED 42
   jr     nc, addr_073E9               ; 01:73E4 - 30 03
   ld     de, $001D                    ; 01:73E6 - 11 1D 00

addr_073E9:
   ld     l, (ix+2)                    ; 01:73E9 - DD 6E 02
   ld     h, (ix+3)                    ; 01:73EC - DD 66 03
   add    hl, de                       ; 01:73EF - 19
   ld     (sonic_x), hl                ; 01:73F0 - 22 FE D3
   jp     addr_07452                   ; 01:73F3 - C3 52 74

addr_073F6:
   ld     hl, (sonic_x)                ; 01:73F6 - 2A FE D3
   ld     bc, $000C                    ; 01:73F9 - 01 0C 00
   add    hl, bc                       ; 01:73FC - 09
   ld     c, l                         ; 01:73FD - 4D
   ld     b, h                         ; 01:73FE - 44
   ld     e, (ix+2)                    ; 01:73FF - DD 5E 02
   ld     d, (ix+3)                    ; 01:7402 - DD 56 03
   and    a                            ; 01:7405 - A7
   sbc    hl, de                       ; 01:7406 - ED 52
   ret    c                            ; 01:7408 - D8
   ex     de, hl                       ; 01:7409 - EB
   ld     de, $0020                    ; 01:740A - 11 20 00
   add    hl, de                       ; 01:740D - 19
   and    a                            ; 01:740E - A7
   sbc    hl, bc                       ; 01:740F - ED 42
   ret    c                            ; 01:7411 - D8
   ld     a, c                         ; 01:7412 - 79
   and    $1F                          ; 01:7413 - E6 1F
   ld     c, a                         ; 01:7415 - 4F
   ld     b, $00                       ; 01:7416 - 06 00
   ld     hl, UNK_0750E                ; 01:7418 - 21 0E 75
   add    hl, bc                       ; 01:741B - 09
   ld     c, (hl)                      ; 01:741C - 4E
   ld     l, (ix+5)                    ; 01:741D - DD 6E 05
   ld     h, (ix+6)                    ; 01:7420 - DD 66 06
   ld     de, $FFE0                    ; 01:7423 - 11 E0 FF
   add    hl, de                       ; 01:7426 - 19
   add    hl, bc                       ; 01:7427 - 09
   ld     (sonic_y), hl                ; 01:7428 - 22 01 D4
   ld     a, (var_D2E8)                ; 01:742B - 3A E8 D2
   ld     hl, (var_D2E6)               ; 01:742E - 2A E6 D2
   ld     (sonic_vel_y_sub), hl        ; 01:7431 - 22 06 D4
   ld     (sonic_vel_y_hi), a          ; 01:7434 - 32 08 D4
   ld     hl, var_D414                 ; 01:7437 - 21 14 D4
   set    7, (hl)                      ; 01:743A - CB FE
   ld     a, c                         ; 01:743C - 79
   cp     $03                          ; 01:743D - FE 03
   ret    nz                           ; 01:743F - C0
   ld     (ix+15), UNK_07540&$FF       ; 01:7440 - DD 36 0F 40
   ld     (ix+16), UNK_07540>>8        ; 01:7444 - DD 36 10 75
   bit    1, (iy+var_D206-IYBASE)      ; 01:7448 - FD CB 06 4E
   jr     nz, addr_07460               ; 01:744C - 20 12
   set    1, (iy+var_D206-IYBASE)      ; 01:744E - FD CB 06 CE

addr_07452:
   xor    a                            ; 01:7452 - AF
   ld     l, a                         ; 01:7453 - 6F
   ld     h, a                         ; 01:7454 - 67
   ld     (sonic_vel_x_sub), hl        ; 01:7455 - 22 03 D4
   ld     (sonic_vel_x_hi), a          ; 01:7458 - 32 05 D4

addr_0745B:
   bit    1, (iy+var_D206-IYBASE)      ; 01:745B - FD CB 06 4E
   ret    z                            ; 01:745F - C8

addr_07460:
   ld     a, (ix+18)                   ; 01:7460 - DD 7E 12
   cp     $08                          ; 01:7463 - FE 08
   jr     nc, addr_0747B               ; 01:7465 - 30 14
   inc    (ix+17)                      ; 01:7467 - DD 34 11
   ld     a, (ix+17)                   ; 01:746A - DD 7E 11
   cp     $14                          ; 01:746D - FE 14
   ret    c                            ; 01:746F - D8
   ld     (ix+17), $00                 ; 01:7470 - DD 36 11 00
   call   addr_07A3A                   ; 01:7474 - CD 3A 7A
   inc    (ix+18)                      ; 01:7477 - DD 34 12
   ret                                 ; 01:747A - C9

addr_0747B:
   bit    1, (ix+24)                   ; 01:747B - DD CB 18 4E
   jr     nz, addr_0748D               ; 01:747F - 20 0C
   ld     a, $A0                       ; 01:7481 - 3E A0
   ld     (g_signpost_tickdown_counter), a  ; 01:7483 - 32 89 D2
   ld     a, $09                       ; 01:7486 - 3E 09
   rst    $18                          ; 01:7488 - DF
   set    1, (ix+24)                   ; 01:7489 - DD CB 18 CE

addr_0748D:
   xor    a                            ; 01:748D - AF
   ld     (ix+15), a                   ; 01:748E - DD 77 0F
   ld     (ix+16), a                   ; 01:7491 - DD 77 10
   res    5, (iy+var_D200-IYBASE)      ; 01:7494 - FD CB 00 AE
   ld     a, (var_D223)                ; 01:7498 - 3A 23 D2
   and    $0F                          ; 01:749B - E6 0F
   ret    nz                           ; 01:749D - C0
   call   random_A                     ; 01:749E - CD 25 06
   and    $01                          ; 01:74A1 - E6 01
   add    a, $23                       ; 01:74A3 - C6 23
   call   addr_074B6                   ; 01:74A5 - CD B6 74
   inc    (ix+22)                      ; 01:74A8 - DD 34 16
   ld     a, (ix+22)                   ; 01:74AB - DD 7E 16
   cp     $0C                          ; 01:74AE - FE 0C
   ret    c                            ; 01:74B0 - D8
   ld     (ix+0), $FF                  ; 01:74B1 - DD 36 00 FF
   ret                                 ; 01:74B5 - C9

addr_074B6:
   ld     (var_D216), a                ; 01:74B6 - 32 16 D2
   call   spawn_object                 ; 01:74B9 - CD 7B 7C
   ret    c                            ; 01:74BC - D8
   ld     e, (ix+2)                    ; 01:74BD - DD 5E 02
   ld     d, (ix+3)                    ; 01:74C0 - DD 56 03
   ld     c, (ix+5)                    ; 01:74C3 - DD 4E 05
   ld     b, (ix+6)                    ; 01:74C6 - DD 46 06
   push   ix                           ; 01:74C9 - DD E5
   push   hl                           ; 01:74CB - E5
   pop    ix                           ; 01:74CC - DD E1
   ld     a, (var_D216)                ; 01:74CE - 3A 16 D2
   ld     (ix+0), a                    ; 01:74D1 - DD 77 00
   xor    a                            ; 01:74D4 - AF
   ld     (ix+22), a                   ; 01:74D5 - DD 77 16
   ld     (ix+23), a                   ; 01:74D8 - DD 77 17
   ld     (ix+1), a                    ; 01:74DB - DD 77 01
   ld     hl, $0008                    ; 01:74DE - 21 08 00
   add    hl, de                       ; 01:74E1 - 19
   ld     (ix+2), l                    ; 01:74E2 - DD 75 02
   ld     (ix+3), h                    ; 01:74E5 - DD 74 03
   ld     (ix+4), a                    ; 01:74E8 - DD 77 04
   ld     hl, $001A                    ; 01:74EB - 21 1A 00
   add    hl, bc                       ; 01:74EE - 09
   ld     (ix+5), l                    ; 01:74EF - DD 75 05
   ld     (ix+6), h                    ; 01:74F2 - DD 74 06
   call   random_A                     ; 01:74F5 - CD 25 06
   ld     (ix+10), a                   ; 01:74F8 - DD 77 0A
   call   random_A                     ; 01:74FB - CD 25 06
   and    $01                          ; 01:74FE - E6 01
   inc    a                            ; 01:7500 - 3C
   inc    a                            ; 01:7501 - 3C
   neg                                 ; 01:7502 - ED 44
   ld     (ix+11), a                   ; 01:7504 - DD 77 0B
   ld     (ix+12), $FF                 ; 01:7507 - DD 36 0C FF
   pop    ix                           ; 01:750B - DD E1
   ret                                 ; 01:750D - C9

UNK_0750E:
.db $15, $12, $11, $10, $10, $0F, $0E, $0D, $03, $03, $03, $03, $03, $03, $03, $03  ; 01:750E
.db $03, $03, $03, $03, $03, $03, $03, $03, $0D, $0E, $0F, $10, $10, $11, $12, $15  ; 01:751E

UNK_0752E:
.db $00, $02, $04, $06, $FF, $FF, $20, $22, $24, $26, $FF, $FF, $40, $42, $44, $46  ; 01:752E
.db $FF, $FF                                                                        ; 01:753E

UNK_07540:
.db $00, $08, $0A, $06, $FF, $FF, $20, $22, $24, $26, $FF, $FF, $40, $42, $44, $46  ; 01:7540
.db $FF, $FF                                                                        ; 01:7550

UNK_07552:
.db $00, $68, $6A, $06, $FF, $FF, $20, $22, $24, $26, $FF, $FF, $40, $42, $44, $46  ; 01:7552
.db $FF, $FF                                                                        ; 01:7562

UNK_07564:
.db $00, $00, $30, $00                                                              ; 01:7564

UNK_07568:
.db $60, $19, $62, $19, $61, $19, $63, $19, $10, $00, $30, $00, $64, $19, $66, $19  ; 01:7568
.db $65, $19, $67, $19                                                              ; 01:7578

UNK_0757C:
.db $00, $00, $20, $00, $00, $00, $00, $00, $49, $19, $4B, $19, $10, $00, $20, $00  ; 01:757C
.db $00, $00, $00, $00, $4D, $19, $4F, $19                                          ; 01:758C

objfunc_24_UNKNOWN:
   res    5, (ix+24)                   ; 01:7594 - DD CB 18 AE
   ld     (ix+13), $0C                 ; 01:7598 - DD 36 0D 0C
   ld     (ix+14), $10                 ; 01:759C - DD 36 0E 10
   bit    7, (ix+24)                   ; 01:75A0 - DD CB 18 7E
   jr     z, addr_075B2                ; 01:75A4 - 28 0C
   ld     (ix+10), $00                 ; 01:75A6 - DD 36 0A 00
   ld     (ix+11), $FD                 ; 01:75AA - DD 36 0B FD
   ld     (ix+12), $FF                 ; 01:75AE - DD 36 0C FF

addr_075B2:
   ld     de, $0012                    ; 01:75B2 - 11 12 00
   ld     a, (var_D2D4)                ; 01:75B5 - 3A D4 D2
   cp     $03                          ; 01:75B8 - FE 03
   jr     nz, addr_075BF               ; 01:75BA - 20 03
   ld     de, $0038                    ; 01:75BC - 11 38 00

addr_075BF:
   ld     l, (ix+10)                   ; 01:75BF - DD 6E 0A
   ld     h, (ix+11)                   ; 01:75C2 - DD 66 0B
   ld     a, (ix+12)                   ; 01:75C5 - DD 7E 0C
   add    hl, de                       ; 01:75C8 - 19
   adc    a, $00                       ; 01:75C9 - CE 00
   ld     c, a                         ; 01:75CB - 4F
   jp     m, addr_075D9                ; 01:75CC - FA D9 75
   ld     a, h                         ; 01:75CF - 7C
   cp     $02                          ; 01:75D0 - FE 02
   jr     c, addr_075D9                ; 01:75D2 - 38 05
   ld     hl, $0200                    ; 01:75D4 - 21 00 02
   ld     c, $00                       ; 01:75D7 - 0E 00

addr_075D9:
   ld     (ix+10), l                   ; 01:75D9 - DD 75 0A
   ld     (ix+11), h                   ; 01:75DC - DD 74 0B
   ld     (ix+12), c                   ; 01:75DF - DD 71 0C
   ld     hl, $FE00                    ; 01:75E2 - 21 00 FE
   ld     a, (var_D2D4)                ; 01:75E5 - 3A D4 D2
   cp     $03                          ; 01:75E8 - FE 03
   jr     nz, addr_075EF               ; 01:75EA - 20 03
   ld     hl, $FE80                    ; 01:75EC - 21 80 FE

addr_075EF:
   ld     (ix+7), l                    ; 01:75EF - DD 75 07
   ld     (ix+8), h                    ; 01:75F2 - DD 74 08
   ld     (ix+9), $FF                  ; 01:75F5 - DD 36 09 FF
   ld     bc, UNK_07629                ; 01:75F9 - 01 29 76
   ld     a, (var_D2D4)                ; 01:75FC - 3A D4 D2
   and    a                            ; 01:75FF - A7
   jr     z, addr_0760C                ; 01:7600 - 28 0A
   ld     bc, UNK_0762E                ; 01:7602 - 01 2E 76
   cp     $03                          ; 01:7605 - FE 03
   jr     nz, addr_0760C               ; 01:7607 - 20 03
   ld     bc, UNK_07633                ; 01:7609 - 01 33 76

addr_0760C:
   ld     de, UNK_07638                ; 01:760C - 11 38 76
   call   addr_07C41                   ; 01:760F - CD 41 7C

addr_07612:
   ld     l, (ix+2)                    ; 01:7612 - DD 6E 02
   ld     h, (ix+3)                    ; 01:7615 - DD 66 03
   ld     de, $0010                    ; 01:7618 - 11 10 00
   add    hl, de                       ; 01:761B - 19
   ld     de, (var_D25A)               ; 01:761C - ED 5B 5A D2
   and    a                            ; 01:7620 - A7
   sbc    hl, de                       ; 01:7621 - ED 52
   ret    nc                           ; 01:7623 - D0
   ld     (ix+0), $FF                  ; 01:7624 - DD 36 00 FF
   ret                                 ; 01:7628 - C9

UNK_07629:
.db $00, $02, $01, $02, $FF                                                         ; 01:7629

UNK_0762E:
.db $02, $04, $03, $04, $FF                                                         ; 01:762E

UNK_07633:
.db $04, $03, $05, $03, $FF                                                         ; 01:7633

UNK_07638:
.db $10, $12, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF  ; 01:7638
.db $FF, $FF, $6E, $0E, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF  ; 01:7648
.db $FF, $FF, $FF, $FF, $28, $2A, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF  ; 01:7658
.db $FF, $FF, $FF, $FF, $FF, $FF, $2C, $2E, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF  ; 01:7668
.db $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $30, $32, $FF, $FF, $FF, $FF, $FF, $FF  ; 01:7678
.db $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $50, $52, $FF, $FF, $FF, $FF  ; 01:7688
.db $FF                                                                             ; 01:7698

objfunc_23_UNKNOWN:
   res    5, (ix+24)                   ; 01:7699 - DD CB 18 AE
   ld     (ix+13), $0C                 ; 01:769D - DD 36 0D 0C
   ld     (ix+14), $20                 ; 01:76A1 - DD 36 0E 20
   ld     hl, UNK_07760                ; 01:76A5 - 21 60 77
   ld     a, (var_D2D4)                ; 01:76A8 - 3A D4 D2
   and    a                            ; 01:76AB - A7
   jr     z, addr_076BD                ; 01:76AC - 28 0F
   ld     hl, UNK_0777B                ; 01:76AE - 21 7B 77
   dec    a                            ; 01:76B1 - 3D
   jr     z, addr_076BD                ; 01:76B2 - 28 09
   ld     hl, UNK_07796                ; 01:76B4 - 21 96 77
   dec    a                            ; 01:76B7 - 3D
   jr     z, addr_076BD                ; 01:76B8 - 28 03
   ld     hl, UNK_077B1                ; 01:76BA - 21 B1 77

addr_076BD:
   ld     (ix+15), l                   ; 01:76BD - DD 75 0F
   ld     (ix+16), h                   ; 01:76C0 - DD 74 10
   bit    7, (ix+24)                   ; 01:76C3 - DD CB 18 7E
   jr     z, addr_07719                ; 01:76C7 - 28 50
   xor    a                            ; 01:76C9 - AF
   ld     (ix+10), a                   ; 01:76CA - DD 77 0A
   ld     (ix+11), $01                 ; 01:76CD - DD 36 0B 01
   ld     (ix+12), a                   ; 01:76D1 - DD 77 0C
   ld     (ix+7), a                    ; 01:76D4 - DD 77 07
   ld     (ix+8), a                    ; 01:76D7 - DD 77 08
   ld     (ix+9), a                    ; 01:76DA - DD 77 09
   ld     hl, UNK_07752                ; 01:76DD - 21 52 77
   ld     a, (var_D2D4)                ; 01:76E0 - 3A D4 D2
   ld     c, a                         ; 01:76E3 - 4F
   and    a                            ; 01:76E4 - A7
   jr     z, addr_076F6                ; 01:76E5 - 28 0F
   ld     hl, UNK_0776D                ; 01:76E7 - 21 6D 77
   dec    a                            ; 01:76EA - 3D
   jr     z, addr_076F6                ; 01:76EB - 28 09
   ld     hl, UNK_07788                ; 01:76ED - 21 88 77
   dec    a                            ; 01:76F0 - 3D
   jr     z, addr_076F6                ; 01:76F1 - 28 03
   ld     hl, UNK_077A3                ; 01:76F3 - 21 A3 77

addr_076F6:
   ld     (ix+15), l                   ; 01:76F6 - DD 75 0F
   ld     (ix+16), h                   ; 01:76F9 - DD 74 10
   inc    (ix+17)                      ; 01:76FC - DD 34 11
   ld     a, (ix+17)                   ; 01:76FF - DD 7E 11
   cp     $08                          ; 01:7702 - FE 08
   ret    c                            ; 01:7704 - D8
   ld     hl, $FFFC                    ; 01:7705 - 21 FC FF
   ld     a, c                         ; 01:7708 - 79
   and    a                            ; 01:7709 - A7
   jr     z, addr_0770F                ; 01:770A - 28 03
   ld     hl, $FFFE                    ; 01:770C - 21 FE FF

addr_0770F:
   ld     (ix+10), $00                 ; 01:770F - DD 36 0A 00
   ld     (ix+11), l                   ; 01:7713 - DD 75 0B
   ld     (ix+12), h                   ; 01:7716 - DD 74 0C

addr_07719:
   ld     l, (ix+10)                   ; 01:7719 - DD 6E 0A
   ld     h, (ix+11)                   ; 01:771C - DD 66 0B
   ld     a, (ix+12)                   ; 01:771F - DD 7E 0C
   ld     de, $0028                    ; 01:7722 - 11 28 00
   add    hl, de                       ; 01:7725 - 19
   adc    a, $00                       ; 01:7726 - CE 00
   ld     c, a                         ; 01:7728 - 4F
   jp     m, addr_07736                ; 01:7729 - FA 36 77
   ld     a, h                         ; 01:772C - 7C
   cp     $02                          ; 01:772D - FE 02
   jr     c, addr_07736                ; 01:772F - 38 05
   ld     hl, $0200                    ; 01:7731 - 21 00 02
   ld     c, $00                       ; 01:7734 - 0E 00

addr_07736:
   ld     (ix+10), l                   ; 01:7736 - DD 75 0A
   ld     (ix+11), h                   ; 01:7739 - DD 74 0B
   ld     (ix+12), c                   ; 01:773C - DD 71 0C
   ld     (ix+7), $80                  ; 01:773F - DD 36 07 80
   ld     (ix+8), $FE                  ; 01:7743 - DD 36 08 FE
   ld     (ix+9), $FF                  ; 01:7747 - DD 36 09 FF
   ld     (ix+17), $00                 ; 01:774B - DD 36 11 00
   jp     addr_07612                   ; 01:774F - C3 12 76

UNK_07752:
.db $70, $72, $FF, $FF, $FF, $FF, $54, $56, $FF, $FF, $FF, $FF, $FF, $FF            ; 01:7752

UNK_07760:
.db $5C, $5E, $FF, $FF, $FF, $FF, $58, $5A, $FF, $FF, $FF, $FF, $FF                 ; 01:7760

UNK_0776D:
.db $FE, $FF, $FF, $FF, $FF, $FF, $34, $36, $FF, $FF, $FF, $FF, $FF, $FF            ; 01:776D

UNK_0777B:
.db $FE, $FF, $FF, $FF, $FF, $FF, $38, $3A, $FF, $FF, $FF, $FF, $FF                 ; 01:777B

UNK_07788:
.db $FE, $FF, $FF, $FF, $FF, $FF, $3C, $3E, $FF, $FF, $FF, $FF, $FF, $FF            ; 01:7788

UNK_07796:
.db $FE, $FF, $FF, $FF, $FF, $FF, $1C, $1E, $FF, $FF, $FF, $FF, $FF                 ; 01:7796

UNK_077A3:
.db $FE, $FF, $FF, $FF, $FF, $FF, $14, $16, $FF, $FF, $FF, $FF, $FF, $FF            ; 01:77A3

UNK_077B1:
.db $FE, $FF, $FF, $FF, $FF, $FF, $18, $1A, $FF, $FF, $FF, $FF, $FF                 ; 01:77B1

addr_077BE:
   ld     a, (var_D2EC)                ; 01:77BE - 3A EC D2
   cp     $08                          ; 01:77C1 - FE 08
   jr     nc, addr_07841               ; 01:77C3 - 30 7C
   ld     a, (var_D2B1)                ; 01:77C5 - 3A B1 D2
   and    a                            ; 01:77C8 - A7
   jp     nz, addr_07821               ; 01:77C9 - C2 21 78
   ld     hl, $0C08                    ; 01:77CC - 21 08 0C
   ld     (var_D214), hl               ; 01:77CF - 22 14 D2
   call   UNK_03956                    ; 01:77D2 - CD 56 39
   ret    c                            ; 01:77D5 - D8
   bit    0, (iy+var_D205-IYBASE)      ; 01:77D6 - FD CB 05 46
   ret    nz                           ; 01:77DA - C0
   ld     a, (var_D414)                ; 01:77DB - 3A 14 D4
   rrca                                ; 01:77DE - 0F
   jr     c, addr_077E6                ; 01:77DF - 38 05
   and    $02                          ; 01:77E1 - E6 02
   jp     z, addr_035FD                ; 01:77E3 - CA FD 35

addr_077E6:
   ld     de, $0001                    ; 01:77E6 - 11 01 00
   ld     hl, (sonic_vel_y_sub)        ; 01:77E9 - 2A 06 D4
   ld     a, l                         ; 01:77EC - 7D
   cpl                                 ; 01:77ED - 2F
   ld     l, a                         ; 01:77EE - 6F
   ld     a, h                         ; 01:77EF - 7C
   cpl                                 ; 01:77F0 - 2F
   ld     h, a                         ; 01:77F1 - 67
   ld     a, (sonic_vel_y_hi)          ; 01:77F2 - 3A 08 D4
   cpl                                 ; 01:77F5 - 2F
   add    hl, de                       ; 01:77F6 - 19
   adc    a, $00                       ; 01:77F7 - CE 00
   ld     (sonic_vel_y_sub), hl        ; 01:77F9 - 22 06 D4
   ld     (sonic_vel_y_hi), a          ; 01:77FC - 32 08 D4
   xor    a                            ; 01:77FF - AF
   ld     l, a                         ; 01:7800 - 6F
   ld     h, a                         ; 01:7801 - 67
   ld     (sonic_vel_x_sub), hl        ; 01:7802 - 22 03 D4
   ld     (sonic_vel_x_hi), a          ; 01:7805 - 32 05 D4
   ld     a, $18                       ; 01:7808 - 3E 18
   ld     (var_D2B1), a                ; 01:780A - 32 B1 D2
   ld     a, $8F                       ; 01:780D - 3E 8F
   ld     (var_D2B2), a                ; 01:780F - 32 B2 D2
   ld     a, $3F                       ; 01:7812 - 3E 3F
   ld     (var_D2B3), a                ; 01:7814 - 32 B3 D2
   ld     a, $01                       ; 01:7817 - 3E 01
   rst    $28                          ; 01:7819 - EF
   ld     a, (var_D2EC)                ; 01:781A - 3A EC D2
   inc    a                            ; 01:781D - 3C
   ld     (var_D2EC), a                ; 01:781E - 32 EC D2

addr_07821:
   ld     hl, (var_D216)               ; 01:7821 - 2A 16 D2
   ld     de, UNK_07922                ; 01:7824 - 11 22 79
   add    hl, de                       ; 01:7827 - 19
   bit    1, (ix+24)                   ; 01:7828 - DD CB 18 4E
   jr     z, addr_07832                ; 01:782C - 28 04
   ld     de, $0012                    ; 01:782E - 11 12 00
   add    hl, de                       ; 01:7831 - 19

addr_07832:
   ld     (ix+15), l                   ; 01:7832 - DD 75 0F
   ld     (ix+16), h                   ; 01:7835 - DD 74 10
   ld     hl, var_D2ED                 ; 01:7838 - 21 ED D2
   ld     (hl), $18                    ; 01:783B - 36 18
   inc    hl                           ; 01:783D - 23
   ld     (hl), $00                    ; 01:783E - 36 00
   ret                                 ; 01:7840 - C9

addr_07841:
   xor    a                            ; 01:7841 - AF
   ld     (ix+7), a                    ; 01:7842 - DD 77 07
   ld     (ix+8), a                    ; 01:7845 - DD 77 08
   ld     (ix+9), a                    ; 01:7848 - DD 77 09
   ld     (ix+10), a                   ; 01:784B - DD 77 0A
   ld     (ix+11), a                   ; 01:784E - DD 77 0B
   ld     (ix+12), a                   ; 01:7851 - DD 77 0C
   ld     de, $0024                    ; 01:7854 - 11 24 00
   ld     hl, (var_D216)               ; 01:7857 - 2A 16 D2
   bit    1, (ix+24)                   ; 01:785A - DD CB 18 4E
   jr     z, addr_07863                ; 01:785E - 28 03
   ld     de, $0036                    ; 01:7860 - 11 36 00

addr_07863:
   add    hl, de                       ; 01:7863 - 19
   ld     de, UNK_07922                ; 01:7864 - 11 22 79
   add    hl, de                       ; 01:7867 - 19
   ld     (ix+15), l                   ; 01:7868 - DD 75 0F
   ld     (ix+16), h                   ; 01:786B - DD 74 10
   ld     hl, var_D2EE                 ; 01:786E - 21 EE D2
   ld     a, (hl)                      ; 01:7871 - 7E
   cp     $0A                          ; 01:7872 - FE 0A
   jp     nc, addr_07882               ; 01:7874 - D2 82 78
   dec    hl                           ; 01:7877 - 2B
   dec    (hl)                         ; 01:7878 - 35
   ret    nz                           ; 01:7879 - C0
   ld     (hl), $18                    ; 01:787A - 36 18
   inc    hl                           ; 01:787C - 23
   inc    (hl)                         ; 01:787D - 34
   call   addr_07A3A                   ; 01:787E - CD 3A 7A
   ret                                 ; 01:7881 - C9

addr_07882:
   ld     a, (var_D2EE)                ; 01:7882 - 3A EE D2
   cp     $3A                          ; 01:7885 - FE 3A
   jr     nc, addr_078A1               ; 01:7887 - 30 18
   ld     l, (ix+4)                    ; 01:7889 - DD 6E 04
   ld     h, (ix+5)                    ; 01:788C - DD 66 05
   ld     a, (ix+6)                    ; 01:788F - DD 7E 06
   ld     de, $0020                    ; 01:7892 - 11 20 00
   add    hl, de                       ; 01:7895 - 19
   adc    a, $00                       ; 01:7896 - CE 00
   ld     (ix+4), l                    ; 01:7898 - DD 75 04
   ld     (ix+5), h                    ; 01:789B - DD 74 05
   ld     (ix+6), a                    ; 01:789E - DD 77 06

addr_078A1:
   ld     hl, var_D2EE                 ; 01:78A1 - 21 EE D2
   ld     a, (hl)                      ; 01:78A4 - 7E
   cp     $5A                          ; 01:78A5 - FE 5A
   jr     nc, addr_078AB               ; 01:78A7 - 30 02
   inc    (hl)                         ; 01:78A9 - 34
   ret                                 ; 01:78AA - C9

addr_078AB:
   jr     nz, addr_078C0               ; 01:78AB - 20 13
   ld     (hl), $5B                    ; 01:78AD - 36 5B
   ld     a, (var_D2FC)                ; 01:78AF - 3A FC D2
   rst    $18                          ; 01:78B2 - DF
   ld     a, (iy+g_sprite_count-IYBASE)  ; 01:78B3 - FD 7E 0A
   res    0, (iy+var_D200-IYBASE)      ; 01:78B6 - FD CB 00 86
   call   wait_until_irq_ticked        ; 01:78BA - CD 1C 03
   ld     (iy+g_sprite_count-IYBASE), a  ; 01:78BD - FD 77 0A

addr_078C0:
   ld     (ix+7), $00                  ; 01:78C0 - DD 36 07 00
   ld     (ix+8), $03                  ; 01:78C4 - DD 36 08 03
   ld     (ix+9), $00                  ; 01:78C8 - DD 36 09 00
   ld     (ix+10), $60                 ; 01:78CC - DD 36 0A 60
   ld     (ix+11), $FF                 ; 01:78D0 - DD 36 0B FF
   ld     (ix+12), $FF                 ; 01:78D4 - DD 36 0C FF
   ld     (ix+15), UNK_07922&$FF       ; 01:78D8 - DD 36 0F 22
   ld     (ix+16), UNK_07922>>8        ; 01:78DC - DD 36 10 79
   ld     l, (ix+2)                    ; 01:78E0 - DD 6E 02
   ld     h, (ix+3)                    ; 01:78E3 - DD 66 03
   ld     de, (var_D25A)               ; 01:78E6 - ED 5B 5A D2
   inc    d                            ; 01:78EA - 14
   and    a                            ; 01:78EB - A7
   sbc    hl, de                       ; 01:78EC - ED 52
   ret    c                            ; 01:78EE - D8
   ld     (ix+0), $FF                  ; 01:78EF - DD 36 00 FF
   ld     hl, $2000                    ; 01:78F3 - 21 00 20
   ld     (var_D275), hl               ; 01:78F6 - 22 75 D2
   ld     hl, $0000                    ; 01:78F9 - 21 00 00
   ld     (var_D27B), hl               ; 01:78FC - 22 7B D2
   set    5, (iy+var_D200-IYBASE)      ; 01:78FF - FD CB 00 EE
   set    0, (iy+var_D202-IYBASE)      ; 01:7903 - FD CB 02 C6
   res    1, (iy+var_D202-IYBASE)      ; 01:7907 - FD CB 02 8E
   ld     a, (g_level)                 ; 01:790B - 3A 3E D2
   cp     $0B                          ; 01:790E - FE 0B
   jr     nz, addr_07916               ; 01:7910 - 20 04
   set    1, (iy+var_D209-IYBASE)      ; 01:7912 - FD CB 09 CE

addr_07916:
   ld     hl, ART_0C_DA28              ; 01:7916 - 21 28 DA
   ld     de, $2000                    ; 01:7919 - 11 00 20
   ld     a, $0C                       ; 01:791C - 3E 0C
   call   load_art                     ; 01:791E - CD 05 04
   ret                                 ; 01:7921 - C9

UNK_07922:
.db $2A, $2C, $2E, $30, $32, $FF, $4A, $4C, $4E, $50, $52, $FF, $6A, $6C, $6E, $70  ; 01:7922
.db $72, $FF, $20, $10, $12, $14, $28, $FF, $40, $42, $44, $46, $48, $FF, $60, $62  ; 01:7932
.db $64, $66, $68, $FF, $2A, $16, $18, $1A, $32, $FF, $4A, $4C, $4E, $50, $52, $FF  ; 01:7942
.db $6A, $6C, $6E, $70, $72, $FF, $20, $3A, $3C, $3E, $28, $FF, $40, $42, $44, $46  ; 01:7952
.db $48, $FF, $60, $62, $64, $66, $68, $FF, $2A, $34, $36, $38, $32, $FF, $4A, $4C  ; 01:7962
.db $4E, $50, $52, $FF, $6A, $6C, $6E, $70, $72, $FF, $20, $10, $12, $14, $28, $FF  ; 01:7972
.db $40, $42, $44, $46, $48, $FF, $60, $54, $56, $66, $68, $FF, $2A, $16, $18, $1A  ; 01:7982
.db $32, $FF, $4A, $4C, $4E, $50, $52, $FF, $6A, $5A, $5C, $70, $72, $FF, $20, $3A  ; 01:7992
.db $3C, $3E, $28, $FF, $40, $42, $44, $46, $48, $FF, $60, $54, $56, $66, $68, $FF  ; 01:79A2
.db $2A, $34, $36, $38, $32, $FF, $4A, $4C, $4E, $50, $52, $FF, $6A, $5A, $5C, $70  ; 01:79B2
.db $72, $FF, $20, $06, $08, $0A, $28, $FF, $40, $42, $44, $46, $48, $FF, $60, $62  ; 01:79C2
.db $64, $66, $68, $FF, $20, $06, $08, $0A, $28, $FF, $40, $42, $44, $46, $48, $FF  ; 01:79D2
.db $60, $62, $64, $66, $68, $FF, $0E, $10, $12, $14, $16, $FF, $40, $42, $44, $46  ; 01:79E2
.db $48, $FF, $60, $62, $64, $66, $68, $FF                                          ; 01:79F2

addr_079FA:
   ld     a, (ix+7)                    ; 01:79FA - DD 7E 07
   or     (ix+8)                       ; 01:79FD - DD B6 08
   ret    z                            ; 01:7A00 - C8
   ld     a, (var_D223)                ; 01:7A01 - 3A 23 D2
   bit    0, a                         ; 01:7A04 - CB 47
   ret    nz                           ; 01:7A06 - C0
   and    $02                          ; 01:7A07 - E6 02
   ld     l, (ix+2)                    ; 01:7A09 - DD 6E 02
   ld     h, (ix+3)                    ; 01:7A0C - DD 66 03
   ld     (g_FF_string_high_byte), hl  ; 01:7A0F - 22 0E D2
   ld     l, (ix+5)                    ; 01:7A12 - DD 6E 05
   ld     h, (ix+6)                    ; 01:7A15 - DD 66 06
   ld     (var_D210), hl               ; 01:7A18 - 22 10 D2
   ld     hl, $FFF8                    ; 01:7A1B - 21 F8 FF
   ld     de, $0010                    ; 01:7A1E - 11 10 00
   ld     c, $04                       ; 01:7A21 - 0E 04
   bit    7, (ix+9)                    ; 01:7A23 - DD CB 09 7E
   jr     z, addr_07A2E                ; 01:7A27 - 28 05
   ld     hl, $0028                    ; 01:7A29 - 21 28 00
   ld     c, $00                       ; 01:7A2C - 0E 00

addr_07A2E:
   ld     (var_D212), hl               ; 01:7A2E - 22 12 D2
   ld     (var_D214), de               ; 01:7A31 - ED 53 14 D2
   add    a, c                         ; 01:7A35 - 81
   call   UNK_03581                    ; 01:7A36 - CD 81 35
   ret                                 ; 01:7A39 - C9

addr_07A3A:
   call   spawn_object                 ; 01:7A3A - CD 7B 7C
   ret    c                            ; 01:7A3D - D8
   push   hl                           ; 01:7A3E - E5
   call   random_A                     ; 01:7A3F - CD 25 06
   and    $1F                          ; 01:7A42 - E6 1F
   ld     l, a                         ; 01:7A44 - 6F
   ld     h, $00                       ; 01:7A45 - 26 00
   ld     (g_FF_string_high_byte), hl  ; 01:7A47 - 22 0E D2
   call   random_A                     ; 01:7A4A - CD 25 06
   and    $1F                          ; 01:7A4D - E6 1F
   ld     l, a                         ; 01:7A4F - 6F
   ld     h, $00                       ; 01:7A50 - 26 00
   ld     (var_D210), hl               ; 01:7A52 - 22 10 D2
   pop    hl                           ; 01:7A55 - E1
   ld     e, (ix+2)                    ; 01:7A56 - DD 5E 02
   ld     d, (ix+3)                    ; 01:7A59 - DD 56 03
   ld     c, (ix+5)                    ; 01:7A5C - DD 4E 05
   ld     b, (ix+6)                    ; 01:7A5F - DD 46 06
   push   ix                           ; 01:7A62 - DD E5
   push   hl                           ; 01:7A64 - E5
   pop    ix                           ; 01:7A65 - DD E1
   xor    a                            ; 01:7A67 - AF
   ld     (ix+0), $0A                  ; 01:7A68 - DD 36 00 0A
   ld     (ix+1), a                    ; 01:7A6C - DD 77 01
   ld     hl, (g_FF_string_high_byte)  ; 01:7A6F - 2A 0E D2
   add    hl, de                       ; 01:7A72 - 19
   ld     (ix+2), l                    ; 01:7A73 - DD 75 02
   ld     (ix+3), h                    ; 01:7A76 - DD 74 03
   ld     (ix+4), a                    ; 01:7A79 - DD 77 04
   ld     hl, (var_D210)               ; 01:7A7C - 2A 10 D2
   add    hl, bc                       ; 01:7A7F - 09
   ld     (ix+5), l                    ; 01:7A80 - DD 75 05
   ld     (ix+6), h                    ; 01:7A83 - DD 74 06
   ld     (ix+17), a                   ; 01:7A86 - DD 77 11
   ld     (ix+22), a                   ; 01:7A89 - DD 77 16
   ld     (ix+23), a                   ; 01:7A8C - DD 77 17
   ld     (ix+7), a                    ; 01:7A8F - DD 77 07
   ld     (ix+8), a                    ; 01:7A92 - DD 77 08
   ld     (ix+9), a                    ; 01:7A95 - DD 77 09
   ld     (ix+10), a                   ; 01:7A98 - DD 77 0A
   ld     (ix+11), a                   ; 01:7A9B - DD 77 0B
   ld     (ix+12), a                   ; 01:7A9E - DD 77 0C
   pop    ix                           ; 01:7AA1 - DD E1
   ld     a, $01                       ; 01:7AA3 - 3E 01
   rst    $28                          ; 01:7AA5 - EF
   ret                                 ; 01:7AA6 - C9

objfunc_4B_UNKNOWN:
   set    5, (ix+24)                   ; 01:7AA7 - DD CB 18 EE
   ld     (ix+13), $40                 ; 01:7AAB - DD 36 0D 40
   ld     (ix+14), $40                 ; 01:7AAF - DD 36 0E 40
   ld     hl, $0000                    ; 01:7AB3 - 21 00 00
   ld     (var_D214), hl               ; 01:7AB6 - 22 14 D2
   call   UNK_03956                    ; 01:7AB9 - CD 56 39
   ret    c                            ; 01:7ABC - D8
   bit    6, (iy+var_D206-IYBASE)      ; 01:7ABD - FD CB 06 76
   ret    nz                           ; 01:7AC1 - C0
   ld     a, (var_D414)                ; 01:7AC2 - 3A 14 D4
   and    $80                          ; 01:7AC5 - E6 80
   ret    z                            ; 01:7AC7 - C8
   ld     hl, $FFFB                    ; 01:7AC8 - 21 FB FF
   xor    a                            ; 01:7ACB - AF
   ld     (sonic_vel_y_sub), a         ; 01:7ACC - 32 06 D4
   ld     (sonic_vel_y), hl            ; 01:7ACF - 22 07 D4
   ld     hl, $0003                    ; 01:7AD2 - 21 03 00
   xor    a                            ; 01:7AD5 - AF
   ld     (sonic_vel_x_sub), a         ; 01:7AD6 - 32 03 D4
   ld     (sonic_vel_x), hl            ; 01:7AD9 - 22 04 D4
   ld     hl, var_D414                 ; 01:7ADC - 21 14 D4
   res    1, (hl)                      ; 01:7ADF - CB 8E
   set    6, (iy+var_D206-IYBASE)      ; 01:7AE1 - FD CB 06 F6
   ld     (iy+g_inputs_player_1-IYBASE), $FF  ; 01:7AE5 - FD 36 03 FF
   ld     a, $11                       ; 01:7AE9 - 3E 11
   rst    $28                          ; 01:7AEB - EF
   ret                                 ; 01:7AEC - C9

objfunc_50_UNKNOWN:
   set    5, (ix+24)                   ; 01:7AED - DD CB 18 EE
   bit    0, (ix+24)                   ; 01:7AF1 - DD CB 18 46
   jr     nz, addr_07B03               ; 01:7AF5 - 20 0C
   ld     (ix+17), $32                 ; 01:7AF7 - DD 36 11 32
   ld     (ix+18), $00                 ; 01:7AFB - DD 36 12 00
   set    0, (ix+24)                   ; 01:7AFF - DD CB 18 C6

addr_07B03:
   ld     bc, $0000                    ; 01:7B03 - 01 00 00
   ld     l, (ix+2)                    ; 01:7B06 - DD 6E 02
   ld     h, (ix+3)                    ; 01:7B09 - DD 66 03
   ld     (var_D2AB), hl               ; 01:7B0C - 22 AB D2
   ld     l, (ix+5)                    ; 01:7B0F - DD 6E 05
   ld     h, (ix+6)                    ; 01:7B12 - DD 66 06
   ld     a, (var_D223)                ; 01:7B15 - 3A 23 D2
   rrca                                ; 01:7B18 - 0F
   jr     nc, addr_07B20               ; 01:7B19 - 30 05
   ld     de, $0010                    ; 01:7B1B - 11 10 00
   add    hl, de                       ; 01:7B1E - 19
   inc    bc                           ; 01:7B1F - 03

addr_07B20:
   ld     (var_D2AD), hl               ; 01:7B20 - 22 AD D2
   ld     a, (ix+18)                   ; 01:7B23 - DD 7E 12
   add    a, a                         ; 01:7B26 - 87
   add    a, a                         ; 01:7B27 - 87
   ld     e, a                         ; 01:7B28 - 5F
   ld     d, $00                       ; 01:7B29 - 16 00
   ld     hl, UNK_07B85                ; 01:7B2B - 21 85 7B
   add    hl, de                       ; 01:7B2E - 19
   push   hl                           ; 01:7B2F - E5
   add    hl, bc                       ; 01:7B30 - 09
   ld     a, (hl)                      ; 01:7B31 - 7E
   add    a, a                         ; 01:7B32 - 87
   add    a, a                         ; 01:7B33 - 87
   add    a, a                         ; 01:7B34 - 87
   ld     e, a                         ; 01:7B35 - 5F
   ld     d, $00                       ; 01:7B36 - 16 00
   ld     hl, UNK_07B5D                ; 01:7B38 - 21 5D 7B
   add    hl, de                       ; 01:7B3B - 19
   ld     (var_D2AF), hl               ; 01:7B3C - 22 AF D2
   pop    hl                           ; 01:7B3F - E1
   inc    hl                           ; 01:7B40 - 23
   inc    hl                           ; 01:7B41 - 23
   ld     a, (var_D223)                ; 01:7B42 - 3A 23 D2
   rrca                                ; 01:7B45 - 0F
   ret    c                            ; 01:7B46 - D8
   dec    (ix+17)                      ; 01:7B47 - DD 35 11
   ret    nz                           ; 01:7B4A - C0
   ld     a, (hl)                      ; 01:7B4B - 7E
   ld     (ix+17), a                   ; 01:7B4C - DD 77 11
   inc    (ix+18)                      ; 01:7B4F - DD 34 12
   ld     a, (ix+18)                   ; 01:7B52 - DD 7E 12
   cp     $04                          ; 01:7B55 - FE 04
   ret    c                            ; 01:7B57 - D8
   ld     (ix+18), $00                 ; 01:7B58 - DD 36 12 00
   ret                                 ; 01:7B5C - C9

UNK_07B5D:
.db $00, $00, $00, $00, $00, $00, $00, $00, $F0, $00, $F1, $00, $E2, $00, $F2, $00  ; 01:7B5D
.db $00, $00, $00, $00, $F0, $00, $F1, $00, $E2, $00, $F2, $00, $2E, $00, $2F, $00  ; 01:7B6D
.db $2E, $00, $2F, $00, $2E, $00, $2F, $00                                          ; 01:7B7D

UNK_07B85:
.db $00, $01, $08, $00, $02, $03, $78, $00, $01, $04, $08, $00, $02, $03, $78, $00  ; 01:7B85

objfunc_55_UNKNOWN:
   set    5, (ix+24)                   ; 01:7B95 - DD CB 18 EE
   set    0, (iy+var_D209-IYBASE)      ; 01:7B99 - FD CB 09 C6
   ld     a, (var_D223)                ; 01:7B9D - 3A 23 D2
   and    $01                          ; 01:7BA0 - E6 01
   jp     z, addr_07BC2                ; 01:7BA2 - CA C2 7B
   ld     a, (ix+18)                   ; 01:7BA5 - DD 7E 12
   ld     c, a                         ; 01:7BA8 - 4F
   add    a, a                         ; 01:7BA9 - 87
   add    a, c                         ; 01:7BAA - 81
   ld     c, a                         ; 01:7BAB - 4F
   ld     b, $00                       ; 01:7BAC - 06 00
   ld     hl, PTRTAB_UNK_07C17         ; 01:7BAE - 21 17 7C
   add    hl, bc                       ; 01:7BB1 - 09
   ld     e, (hl)                      ; 01:7BB2 - 5E
   inc    hl                           ; 01:7BB3 - 23
   ld     d, (hl)                      ; 01:7BB4 - 56
   inc    hl                           ; 01:7BB5 - 23
   ld     a, (hl)                      ; 01:7BB6 - 7E
   ld     (ix+15), e                   ; 01:7BB7 - DD 73 0F
   ld     (ix+16), d                   ; 01:7BBA - DD 72 10
   ld     (var_D302), a                ; 01:7BBD - 32 02 D3
   jr     addr_07BC8                   ; 01:7BC0 - 18 06

addr_07BC2:
   ld     (ix+15), a                   ; 01:7BC2 - DD 77 0F
   ld     (ix+16), a                   ; 01:7BC5 - DD 77 10

addr_07BC8:
   ld     l, (ix+10)                   ; 01:7BC8 - DD 6E 0A
   ld     h, (ix+11)                   ; 01:7BCB - DD 66 0B
   ld     a, (ix+12)                   ; 01:7BCE - DD 7E 0C
   ld     de, $0020                    ; 01:7BD1 - 11 20 00
   add    hl, de                       ; 01:7BD4 - 19
   adc    a, $00                       ; 01:7BD5 - CE 00
   ld     (ix+10), l                   ; 01:7BD7 - DD 75 0A
   ld     (ix+11), h                   ; 01:7BDA - DD 74 0B
   ld     (ix+12), a                   ; 01:7BDD - DD 77 0C
   ld     e, (ix+5)                    ; 01:7BE0 - DD 5E 05
   ld     d, (ix+6)                    ; 01:7BE3 - DD 56 06
   ld     hl, (var_D25D)               ; 01:7BE6 - 2A 5D D2
   inc    h                            ; 01:7BE9 - 24
   xor    a                            ; 01:7BEA - AF
   sbc    hl, de                       ; 01:7BEB - ED 52
   jr     nc, addr_07BF8               ; 01:7BED - 30 09
   ld     (ix+0), $FF                  ; 01:7BEF - DD 36 00 FF
   res    0, (iy+var_D209-IYBASE)      ; 01:7BF3 - FD CB 09 86
   ret                                 ; 01:7BF7 - C9

addr_07BF8:
   ld     (ix+7), a                    ; 01:7BF8 - DD 77 07
   ld     (ix+8), a                    ; 01:7BFB - DD 77 08
   ld     (ix+9), a                    ; 01:7BFE - DD 77 09
   dec    (ix+17)                      ; 01:7C01 - DD 35 11
   ret    nz                           ; 01:7C04 - C0
   ld     (ix+17), $06                 ; 01:7C05 - DD 36 11 06
   inc    (ix+18)                      ; 01:7C09 - DD 34 12
   ld     a, (ix+18)                   ; 01:7C0C - DD 7E 12
   cp     $06                          ; 01:7C0F - FE 06
   ret    c                            ; 01:7C11 - D8
   ld     (ix+18), $00                 ; 01:7C12 - DD 36 12 00
   ret                                 ; 01:7C16 - C9

PTRTAB_UNK_07C17:
.IF shrink_sonicuncart_interleave
.dw addr_07C29
.db $1C+($27-$19)
.dw addr_07C31
.db $1C+($27-$19)
.dw addr_07C39
.db $1C+($27-$19)
.dw addr_07C29
.db $1D+($27-$19)
.dw addr_07C31
.db $1D+($27-$19)
.dw addr_07C39
.db $1D+($27-$19)
.ELSE
.dw addr_07C29                                                                      ; 01:7C17
.db $1C                                                                             ; 01:7C19
.dw addr_07C31                                                                      ; 01:7C1A
.db $1C                                                                             ; 01:7C1C
.dw addr_07C39                                                                      ; 01:7C1D
.db $1C                                                                             ; 01:7C1F
.dw addr_07C29                                                                      ; 01:7C20
.db $1D                                                                             ; 01:7C22
.dw addr_07C31                                                                      ; 01:7C23
.db $1D                                                                             ; 01:7C25
.dw addr_07C39                                                                      ; 01:7C26
.db $1D                                                                             ; 01:7C28
.ENDIF

addr_07C29:
.db $B4, $B6, $FF, $FF, $FF, $FF, $FF, $FF                                          ; 01:7C29

addr_07C31:
.db $B8, $BA, $FF, $FF, $FF, $FF, $FF, $FF                                          ; 01:7C31

addr_07C39:
.db $BC, $BE, $FF, $FF, $FF, $FF, $FF, $FF                                          ; 01:7C39

addr_07C41:
   ld     l, (ix+23)                   ; 01:7C41 - DD 6E 17

addr_07C44:
   ld     h, $00                       ; 01:7C44 - 26 00
   add    hl, bc                       ; 01:7C46 - 09
   ld     a, (hl)                      ; 01:7C47 - 7E
   cp     $FF                          ; 01:7C48 - FE FF
   jr     nz, addr_07C54               ; 01:7C4A - 20 08
   ld     l, $00                       ; 01:7C4C - 2E 00
   ld     (ix+23), l                   ; 01:7C4E - DD 75 17
   jp     addr_07C44                   ; 01:7C51 - C3 44 7C

addr_07C54:
   inc    hl                           ; 01:7C54 - 23
   push   hl                           ; 01:7C55 - E5
   ld     l, a                         ; 01:7C56 - 6F
   ld     h, $00                       ; 01:7C57 - 26 00
   add    hl, hl                       ; 01:7C59 - 29
   ld     c, l                         ; 01:7C5A - 4D
   ld     b, h                         ; 01:7C5B - 44
   add    hl, hl                       ; 01:7C5C - 29
   add    hl, hl                       ; 01:7C5D - 29
   add    hl, hl                       ; 01:7C5E - 29
   add    hl, bc                       ; 01:7C5F - 09
   add    hl, de                       ; 01:7C60 - 19
   ld     (ix+15), l                   ; 01:7C61 - DD 75 0F
   ld     (ix+16), h                   ; 01:7C64 - DD 74 10
   pop    hl                           ; 01:7C67 - E1
   inc    (ix+22)                      ; 01:7C68 - DD 34 16
   ld     a, (hl)                      ; 01:7C6B - 7E
   cp     (ix+22)                      ; 01:7C6C - DD BE 16
   ret    nc                           ; 01:7C6F - D0
   ld     (ix+22), $00                 ; 01:7C70 - DD 36 16 00
   inc    (ix+23)                      ; 01:7C74 - DD 34 17
   inc    (ix+23)                      ; 01:7C77 - DD 34 17
   ret                                 ; 01:7C7A - C9

spawn_object:
   ld     hl, object_list_past_sonic   ; 01:7C7B - 21 16 D4
   ld     de, $001A                    ; 01:7C7E - 11 1A 00
   ld     b, $1F                       ; 01:7C81 - 06 1F

addr_07C83:
   ld     a, (hl)                      ; 01:7C83 - 7E
   cp     $FF                          ; 01:7C84 - FE FF
   ret    z                            ; 01:7C86 - C8
   add    hl, de                       ; 01:7C87 - 19
   djnz   addr_07C83                   ; 01:7C88 - 10 F9
   scf                                 ; 01:7C8A - 37
   ret                                 ; 01:7C8B - C9

addr_07C8C:
   ld     (var_D27B), hl               ; 01:7C8C - 22 7B D2
   ld     (var_D27D), de               ; 01:7C8F - ED 53 7D D2
   ld     hl, (var_D25A)               ; 01:7C93 - 2A 5A D2
   ld     (var_D273), hl               ; 01:7C96 - 22 73 D2
   ld     (var_D275), hl               ; 01:7C99 - 22 75 D2
   ld     hl, (var_D25D)               ; 01:7C9C - 2A 5D D2
   ld     (var_D277), hl               ; 01:7C9F - 22 77 D2
   ld     (var_D279), hl               ; 01:7CA2 - 22 79 D2
   ret                                 ; 01:7CA5 - C9

addr_07CA6:
   ld     hl, (var_D27B)               ; 01:7CA6 - 2A 7B D2
   ld     de, (var_D25A)               ; 01:7CA9 - ED 5B 5A D2
   and    a                            ; 01:7CAD - A7
   sbc    hl, de                       ; 01:7CAE - ED 52
   ret    nz                           ; 01:7CB0 - C0
   ld     hl, (var_D27D)               ; 01:7CB1 - 2A 7D D2
   ld     de, (var_D25D)               ; 01:7CB4 - ED 5B 5D D2
   and    a                            ; 01:7CB8 - A7
   sbc    hl, de                       ; 01:7CB9 - ED 52
   ret    nz                           ; 01:7CBB - C0
   res    5, (iy+var_D200-IYBASE)      ; 01:7CBC - FD CB 00 AE
   ret                                 ; 01:7CC0 - C9

addr_07CC1:
   bit    6, (iy+var_D206-IYBASE)      ; 01:7CC1 - FD CB 06 76
   ret    nz                           ; 01:7CC5 - C0
   ld     l, (ix+4)                    ; 01:7CC6 - DD 6E 04
   ld     h, (ix+5)                    ; 01:7CC9 - DD 66 05
   xor    a                            ; 01:7CCC - AF
   bit    7, d                         ; 01:7CCD - CB 7A
   jr     z, addr_07CD2                ; 01:7CCF - 28 01
   dec    a                            ; 01:7CD1 - 3D

addr_07CD2:
   add    hl, de                       ; 01:7CD2 - 19
   adc    a, (ix+6)                    ; 01:7CD3 - DD 8E 06
   ld     l, h                         ; 01:7CD6 - 6C
   ld     h, a                         ; 01:7CD7 - 67
   add    hl, bc                       ; 01:7CD8 - 09
   ld     a, (var_D40A)                ; 01:7CD9 - 3A 0A D4
   ld     c, a                         ; 01:7CDC - 4F
   xor    a                            ; 01:7CDD - AF
   ld     b, a                         ; 01:7CDE - 47
   sbc    hl, bc                       ; 01:7CDF - ED 42
   ld     (sonic_y), hl                ; 01:7CE1 - 22 01 D4
   ld     a, (var_D2E8)                ; 01:7CE4 - 3A E8 D2
   ld     hl, (var_D2E6)               ; 01:7CE7 - 2A E6 D2
   ld     (sonic_vel_y_sub), hl        ; 01:7CEA - 22 06 D4
   ld     (sonic_vel_y_hi), a          ; 01:7CED - 32 08 D4
   ld     hl, var_D414                 ; 01:7CF0 - 21 14 D4
   set    7, (hl)                      ; 01:7CF3 - CB FE
   ret                                 ; 01:7CF5 - C9

objfunc_26_UNKNOWN:
   set    5, (ix+24)                   ; 01:7CF6 - DD CB 18 EE
   ld     (ix+13), $08                 ; 01:7CFA - DD 36 0D 08
   ld     (ix+14), $0C                 ; 01:7CFE - DD 36 0E 0C
   ld     a, (ix+20)                   ; 01:7D02 - DD 7E 14
   and    a                            ; 01:7D05 - A7
   jr     z, addr_07D13                ; 01:7D06 - 28 0B
   dec    (ix+20)                      ; 01:7D08 - DD 35 14
   xor    a                            ; 01:7D0B - AF
   ld     (ix+15), a                   ; 01:7D0C - DD 77 0F
   ld     (ix+16), a                   ; 01:7D0F - DD 77 10
   ret                                 ; 01:7D12 - C9

addr_07D13:
   bit    0, (ix+24)                   ; 01:7D13 - DD CB 18 46
   jr     nz, addr_07D5C               ; 01:7D17 - 20 43
   bit    1, (ix+24)                   ; 01:7D19 - DD CB 18 4E
   jr     nz, addr_07D43               ; 01:7D1D - 20 24
   ld     l, (ix+5)                    ; 01:7D1F - DD 6E 05
   ld     h, (ix+6)                    ; 01:7D22 - DD 66 06
   ld     de, $FFF4                    ; 01:7D25 - 11 F4 FF
   add    hl, de                       ; 01:7D28 - 19
   ld     (ix+18), l                   ; 01:7D29 - DD 75 12
   ld     (ix+19), h                   ; 01:7D2C - DD 74 13
   ld     l, (ix+2)                    ; 01:7D2F - DD 6E 02
   ld     h, (ix+3)                    ; 01:7D32 - DD 66 03
   ld     de, $0008                    ; 01:7D35 - 11 08 00
   add    hl, de                       ; 01:7D38 - 19
   ld     (ix+2), l                    ; 01:7D39 - DD 75 02
   ld     (ix+3), h                    ; 01:7D3C - DD 74 03
   set    1, (ix+24)                   ; 01:7D3F - DD CB 18 CE

addr_07D43:
   ld     (ix+10), $00                 ; 01:7D43 - DD 36 0A 00
   ld     (ix+11), $FC                 ; 01:7D47 - DD 36 0B FC
   ld     (ix+12), $FF                 ; 01:7D4B - DD 36 0C FF
   set    0, (ix+24)                   ; 01:7D4F - DD CB 18 C6
   ld     a, $12                       ; 01:7D53 - 3E 12
   rst    $28                          ; 01:7D55 - EF
   ld     (ix+17), $03                 ; 01:7D56 - DD 36 11 03
   jr     addr_07DAF                   ; 01:7D5A - 18 53

addr_07D5C:
   ld     l, (ix+10)                   ; 01:7D5C - DD 6E 0A
   ld     h, (ix+11)                   ; 01:7D5F - DD 66 0B
   ld     a, (ix+12)                   ; 01:7D62 - DD 7E 0C
   ld     de, $0010                    ; 01:7D65 - 11 10 00
   add    hl, de                       ; 01:7D68 - 19
   adc    a, $00                       ; 01:7D69 - CE 00
   ex     de, hl                       ; 01:7D6B - EB
   and    a                            ; 01:7D6C - A7
   jp     m, addr_07D7B                ; 01:7D6D - FA 7B 7D
   ld     hl, $0400                    ; 01:7D70 - 21 00 04
   and    a                            ; 01:7D73 - A7
   sbc    hl, de                       ; 01:7D74 - ED 52
   jr     nc, addr_07D7B               ; 01:7D76 - 30 03
   ld     de, $0400                    ; 01:7D78 - 11 00 04

addr_07D7B:
   ld     (ix+10), e                   ; 01:7D7B - DD 73 0A
   ld     (ix+11), d                   ; 01:7D7E - DD 72 0B
   ld     (ix+12), a                   ; 01:7D81 - DD 77 0C
   ld     e, (ix+18)                   ; 01:7D84 - DD 5E 12
   ld     d, (ix+19)                   ; 01:7D87 - DD 56 13
   ld     l, (ix+5)                    ; 01:7D8A - DD 6E 05
   ld     h, (ix+6)                    ; 01:7D8D - DD 66 06
   xor    a                            ; 01:7D90 - AF
   sbc    hl, de                       ; 01:7D91 - ED 52
   jr     c, addr_07DAF                ; 01:7D93 - 38 1A
   ld     (ix+4), a                    ; 01:7D95 - DD 77 04
   ld     (ix+5), e                    ; 01:7D98 - DD 73 05
   ld     (ix+6), d                    ; 01:7D9B - DD 72 06
   ld     (ix+10), a                   ; 01:7D9E - DD 77 0A
   ld     (ix+11), a                   ; 01:7DA1 - DD 77 0B
   ld     (ix+12), a                   ; 01:7DA4 - DD 77 0C
   ld     (ix+20), $1E                 ; 01:7DA7 - DD 36 14 1E
   res    0, (ix+24)                   ; 01:7DAB - DD CB 18 86

addr_07DAF:
   ld     de, UNK_07DE1                ; 01:7DAF - 11 E1 7D
   ld     bc, UNK_07DDC                ; 01:7DB2 - 01 DC 7D
   call   addr_07C41                   ; 01:7DB5 - CD 41 7C
   ld     a, (ix+17)                   ; 01:7DB8 - DD 7E 11
   and    a                            ; 01:7DBB - A7
   jr     z, addr_07DC9                ; 01:7DBC - 28 0B
   dec    (ix+17)                      ; 01:7DBE - DD 35 11
   ld     (ix+15), UNK_07DF7&$FF       ; 01:7DC1 - DD 36 0F F7
   ld     (ix+16), UNK_07DF7>>8        ; 01:7DC5 - DD 36 10 7D

addr_07DC9:
   ld     hl, $0204                    ; 01:7DC9 - 21 04 02
   ld     (var_D214), hl               ; 01:7DCC - 22 14 D2
   call   UNK_03956                    ; 01:7DCF - CD 56 39
   ld     hl, $0000                    ; 01:7DD2 - 21 00 00
   ld     (g_FF_string_high_byte), hl  ; 01:7DD5 - 22 0E D2
   call   nc, UNK_035E5                ; 01:7DD8 - D4 E5 35
   ret                                 ; 01:7DDB - C9

UNK_07DDC:
.db $00, $04, $01, $04, $FF                                                         ; 01:7DDC

UNK_07DE1:
.db $60, $62, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF  ; 01:7DE1
.db $FF, $FF, $64, $66, $FF, $FF                                                    ; 01:7DF1

UNK_07DF7:
.db $FF, $FF, $FF, $FF, $68, $6A, $FF, $FF, $FF, $FF, $FF                           ; 01:7DF7

objfunc_27_UNKNOWN:
   set    5, (ix+24)                   ; 01:7E02 - DD CB 18 EE
   ld     hl, $0030                    ; 01:7E06 - 21 30 00
   ld     (var_D267), hl               ; 01:7E09 - 22 67 D2
   ld     hl, $0058                    ; 01:7E0C - 21 58 00
   ld     (var_D269), hl               ; 01:7E0F - 22 69 D2
   ld     (ix+13), $0C                 ; 01:7E12 - DD 36 0D 0C
   ld     (ix+14), $10                 ; 01:7E16 - DD 36 0E 10
   ld     (ix+15), UNK_07E89&$FF       ; 01:7E1A - DD 36 0F 89
   ld     (ix+16), UNK_07E89>>8        ; 01:7E1E - DD 36 10 7E
   bit    0, (ix+24)                   ; 01:7E22 - DD CB 18 46
   jr     nz, addr_07E3C               ; 01:7E26 - 20 14
   ld     a, (ix+5)                    ; 01:7E28 - DD 7E 05
   ld     (ix+18), a                   ; 01:7E2B - DD 77 12
   ld     a, (ix+6)                    ; 01:7E2E - DD 7E 06
   ld     (ix+19), a                   ; 01:7E31 - DD 77 13
   ld     (ix+20), $C0                 ; 01:7E34 - DD 36 14 C0
   set    0, (ix+24)                   ; 01:7E38 - DD CB 18 C6

addr_07E3C:
   ld     (ix+10), $80                 ; 01:7E3C - DD 36 0A 80
   xor    a                            ; 01:7E40 - AF
   ld     (ix+11), a                   ; 01:7E41 - DD 77 0B
   ld     (ix+12), a                   ; 01:7E44 - DD 77 0C
   ld     a, (sonic_vel_y_hi)          ; 01:7E47 - 3A 08 D4
   and    a                            ; 01:7E4A - A7
   jp     m, addr_07E65                ; 01:7E4B - FA 65 7E
   ld     hl, $0806                    ; 01:7E4E - 21 06 08
   ld     (var_D214), hl               ; 01:7E51 - 22 14 D2
   call   UNK_03956                    ; 01:7E54 - CD 56 39
   jr     c, addr_07E65                ; 01:7E57 - 38 0C
   ld     bc, $0010                    ; 01:7E59 - 01 10 00
   ld     e, (ix+10)                   ; 01:7E5C - DD 5E 0A
   ld     d, (ix+11)                   ; 01:7E5F - DD 56 0B
   call   addr_07CC1                   ; 01:7E62 - CD C1 7C

addr_07E65:
   ld     a, (var_D223)                ; 01:7E65 - 3A 23 D2
   and    $03                          ; 01:7E68 - E6 03
   ret    nz                           ; 01:7E6A - C0
   inc    (ix+17)                      ; 01:7E6B - DD 34 11
   ld     a, (ix+17)                   ; 01:7E6E - DD 7E 11
   cp     (ix+20)                      ; 01:7E71 - DD BE 14
   ret    c                            ; 01:7E74 - D8
   xor    a                            ; 01:7E75 - AF
   ld     (ix+17), a                   ; 01:7E76 - DD 77 11
   ld     (ix+4), a                    ; 01:7E79 - DD 77 04
   ld     a, (ix+18)                   ; 01:7E7C - DD 7E 12
   ld     (ix+5), a                    ; 01:7E7F - DD 77 05
   ld     a, (ix+19)                   ; 01:7E82 - DD 7E 13
   ld     (ix+6), a                    ; 01:7E85 - DD 77 06
   ret                                 ; 01:7E88 - C9

UNK_07E89:
.db $FE, $FF, $FF, $FF, $FF, $FF, $18, $1A, $FF, $FF, $FF, $FF, $28, $2E, $FF, $FF  ; 01:7E89
.db $FF, $FF                                                                        ; 01:7E99

objfunc_28_UNKNOWN:
   set    5, (ix+24)                   ; 01:7E9B - DD CB 18 EE
   ld     hl, $0030                    ; 01:7E9F - 21 30 00
   ld     (var_D267), hl               ; 01:7EA2 - 22 67 D2
   ld     hl, $0058                    ; 01:7EA5 - 21 58 00
   ld     (var_D269), hl               ; 01:7EA8 - 22 69 D2
   ld     (ix+13), $1A                 ; 01:7EAB - DD 36 0D 1A
   ld     (ix+14), $10                 ; 01:7EAF - DD 36 0E 10
   ld     (ix+15), UNK_07ED9&$FF       ; 01:7EB3 - DD 36 0F D9
   ld     (ix+16), UNK_07ED9>>8        ; 01:7EB7 - DD 36 10 7E
   bit    0, (ix+24)                   ; 01:7EBB - DD CB 18 46
   jp     nz, addr_07E3C               ; 01:7EBF - C2 3C 7E
   ld     a, (ix+5)                    ; 01:7EC2 - DD 7E 05
   ld     (ix+18), a                   ; 01:7EC5 - DD 77 12
   ld     a, (ix+6)                    ; 01:7EC8 - DD 7E 06
   ld     (ix+19), a                   ; 01:7ECB - DD 77 13
   ld     (ix+20), $C6                 ; 01:7ECE - DD 36 14 C6
   set    0, (ix+24)                   ; 01:7ED2 - DD CB 18 C6
   jp     addr_07E3C                   ; 01:7ED6 - C3 3C 7E

UNK_07ED9:
.db $FE, $FF, $FF, $FF, $FF, $FF, $6C, $6E, $6E, $48, $FF, $FF, $FF                 ; 01:7ED9

objfunc_29_UNKNOWN:
   set    5, (ix+24)                   ; 01:7EE6 - DD CB 18 EE
   ld     (ix+13), $0A                 ; 01:7EEA - DD 36 0D 0A
   ld     (ix+14), $10                 ; 01:7EEE - DD 36 0E 10
   bit    0, (ix+24)                   ; 01:7EF2 - DD CB 18 46
   jr     nz, addr_07F0C               ; 01:7EF6 - 20 14
   ld     l, (ix+5)                    ; 01:7EF8 - DD 6E 05
   ld     h, (ix+6)                    ; 01:7EFB - DD 66 06
   ld     de, $FFE8                    ; 01:7EFE - 11 E8 FF
   add    hl, de                       ; 01:7F01 - 19
   ld     (ix+5), l                    ; 01:7F02 - DD 75 05
   ld     (ix+6), h                    ; 01:7F05 - DD 74 06
   set    0, (ix+24)                   ; 01:7F08 - DD CB 18 C6

addr_07F0C:
   ld     (ix+10), $40                 ; 01:7F0C - DD 36 0A 40
   xor    a                            ; 01:7F10 - AF
   ld     (ix+11), a                   ; 01:7F11 - DD 77 0B
   ld     (ix+12), a                   ; 01:7F14 - DD 77 0C
   ld     a, (ix+17)                   ; 01:7F17 - DD 7E 11
   cp     $14                          ; 01:7F1A - FE 14
   jr     c, addr_07F2A                ; 01:7F1C - 38 0C
   ld     (ix+10), $C0                 ; 01:7F1E - DD 36 0A C0
   ld     (ix+11), $FF                 ; 01:7F22 - DD 36 0B FF
   ld     (ix+12), $FF                 ; 01:7F26 - DD 36 0C FF

addr_07F2A:
   ld     a, (sonic_vel_y_hi)          ; 01:7F2A - 3A 08 D4
   and    a                            ; 01:7F2D - A7
   jp     m, UNK_08003                 ; 01:7F2E - FA 03 80
   ld     hl, $0806                    ; 01:7F31 - 21 06 08
   ld     (var_D214), hl               ; 01:7F34 - 22 14 D2
   call   UNK_03956                    ; 01:7F37 - CD 56 39
   jp     c, UNK_08003                 ; 01:7F3A - DA 03 80
   ld     bc, $0010                    ; 01:7F3D - 01 10 00
   ld     e, (ix+10)                   ; 01:7F40 - DD 5E 0A
   ld     d, (ix+11)                   ; 01:7F43 - DD 56 0B
   call   addr_07CC1                   ; 01:7F46 - CD C1 7C
   ld     hl, (sonic_vel_x_sub)        ; 01:7F49 - 2A 03 D4
   ld     a, l                         ; 01:7F4C - 7D
   or     h                            ; 01:7F4D - B4
   jr     z, addr_07F79                ; 01:7F4E - 28 29
   ld     bc, $0012                    ; 01:7F50 - 01 12 00
   bit    7, h                         ; 01:7F53 - CB 7C
   jr     z, addr_07F5A                ; 01:7F55 - 28 03
   ld     bc, $FFFE                    ; 01:7F57 - 01 FE FF

addr_07F5A:
   ld     de, $0000                    ; 01:7F5A - 11 00 00
   call   addr_036F9                   ; 01:7F5D - CD F9 36
   ld     e, (hl)                      ; 01:7F60 - 5E
   ld     d, $00                       ; 01:7F61 - 16 00
   .IF 0
   ld     a, (var_D2D4)                ; 01:7F63 - 3A D4 D2
   add    a, a                         ; 01:7F66 - 87
   ld     c, a                         ; 01:7F67 - 4F
   ld     b, d                         ; 01:7F68 - 42
   ld     hl, PTRLUT_level_tile_flags  ; 01:7F69 - 21 65 3A
   add    hl, bc                       ; 01:7F6C - 09
   ld     a, (hl)                      ; 01:7F6D - 7E
   inc    hl                           ; 01:7F6E - 23
   ld     h, (hl)                      ; 01:7F6F - 66
   ld     l, a                         ; 01:7F70 - 6F
   .ELSE
   call fetch_PTRLUT_level_tile_flags
   .ENDIF
   add    hl, de                       ; 01:7F71 - 19
   ld     a, (hl)                      ; 01:7F72 - 7E
   and    $3F                          ; 01:7F73 - E6 3F
   ld     a, d                         ; 01:7F75 - 7A
   ld     e, d                         ; 01:7F76 - 5A
   jr     nz, addr_07F85               ; 01:7F77 - 20 0C

addr_07F79:
   ld     a, (sonic_vel_x_sub)         ; 01:7F79 - 3A 03 D4
   ld     de, (sonic_vel_x)            ; 01:7F7C - ED 5B 04 D4
   sra    d                            ; 01:7F80 - CB 2A
   rr     e                            ; 01:7F82 - CB 1B
   rra                                 ; 01:7F84 - 1F

addr_07F85:
   ld     l, (ix+2)                    ; 01:7F85 - DD 6E 02
   ld     h, (ix+3)                    ; 01:7F88 - DD 66 03
   add    a, (ix+1)                    ; 01:7F8B - DD 86 01
   adc    hl, de                       ; 01:7F8E - ED 5A
   ld     (ix+1), a                    ; 01:7F90 - DD 77 01
   ld     (ix+2), l                    ; 01:7F93 - DD 75 02
   ld     (ix+3), h                    ; 01:7F96 - DD 74 03
   ld     (sonic_x_sub), a             ; 01:7F99 - 32 FD D3
   ld     de, $FFFC                    ; 01:7F9C - 11 FC FF
   add    hl, de                       ; 01:7F9F - 19
   ld     (sonic_x), hl                ; 01:7FA0 - 22 FE D3
   ld     de, (sonic_vel_x_sub)        ; 01:7FA3 - ED 5B 03 D4
   bit    7, d                         ; 01:7FA7 - CB 7A
   jr     z, addr_07FB2                ; 01:7FA9 - 28 07
   ld     a, e                         ; 01:7FAB - 7B
   cpl                                 ; 01:7FAC - 2F
   ld     e, a                         ; 01:7FAD - 5F
   ld     a, d                         ; 01:7FAE - 7A
   cpl                                 ; 01:7FAF - 2F
   ld     d, a                         ; 01:7FB0 - 57
   inc    de                           ; 01:7FB1 - 13

addr_07FB2:
   ld     l, (ix+18)                   ; 01:7FB2 - DD 6E 12
   ld     h, (ix+19)                   ; 01:7FB5 - DD 66 13
   add    hl, de                       ; 01:7FB8 - 19
   ld     a, h                         ; 01:7FB9 - 7C
   cp     $09                          ; 01:7FBA - FE 09
   jr     c, addr_07FC1                ; 01:7FBC - 38 03
   sub    $09                          ; 01:7FBE - D6 09
   ld     h, a                         ; 01:7FC0 - 67

addr_07FC1:
   ld     (ix+18), l                   ; 01:7FC1 - DD 75 12
   ld     (ix+19), h                   ; 01:7FC4 - DD 74 13
   ld     e, a                         ; 01:7FC7 - 5F
   ld     d, $00                       ; 01:7FC8 - 16 00
   ld     hl, OFFSTAB_UNK_08019        ; 01:7FCA - 21 19 80
   add    hl, de                       ; 01:7FCD - 19
   ld     e, (hl)                      ; 01:7FCE - 5E
   ld     hl, UNK_08022                ; 01:7FCF - 21 22 80
   add    hl, de                       ; 01:7FD2 - 19
   ld     (ix+15), l                   ; 01:7FD3 - DD 75 0F
   ld     (ix+16), h                   ; 01:7FD6 - DD 74 10
   jr     addr_0800B                   ; 01:7FD9 - 18 30
.IF 0
.db $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00  ; 01:7FDB
.db $00, $00, $00, $00, $00                                                         ; 01:7FEB
.ENDIF
.ENDS

.IF 0
.COMPUTESMSCHECKSUM
.SECTION "Bank01_TMR_SEGA_presum" SLOT 1 BANK $01 FORCE ORG $3FF0
.db $54, $4D, $52, $20, $53, $45, $47, $41, $59, $59, ; 01:7FF0
.ENDS
;; Checksum is at 7FFA, 2 bytes.
.SECTION "Bank01_TMR_SEGA_postsum" SLOT 1 BANK $01 FORCE ORG $3FFC
.db $76, $70, $00  ; 01:7FFC
; The real thing claims to be a 256 KB ROM.
; WLA-DX defaults to pretending to be a 32 KB ROM to speed up the boot a bit.
.ENDS

.ELSE
;; Custom tag.
.SMSTAG
.SDSCTAG 0.0, "Diet Sonic 1", "Sonic The Hedgehog but with a lot more free space... and some bugfixes and optimisations.", "modified by GreaseMonkey"

.SECTION "Bank01_TMR_SEGA_presum" SLOT 1 BANK $01 FORCE ORG $3FF8
.db $59, $59 ; 01:7FF8
.ENDS
;; Checksum is at 7FFA, 2 bytes.
.SECTION "Bank01_TMR_SEGA_postsum" SLOT 1 BANK $01 FORCE ORG $3FFC
.db $76, $70, $00  ; 01:7FFC
.ENDS

.ENDIF

.SECTION "Bank02" SLOT 2 BANK $02 FORCE ORG $0000
.db $00, $00, $00                                                                   ; 02:8000

;.dsb 7, 0 ; TEST: Force non-PI code to break. --GM

UNK_08003:
   ld     (ix+15), UNK_08022&$FF       ; 02:8003 - DD 36 0F 22
   ld     (ix+16), UNK_08022>>8        ; 02:8007 - DD 36 10 80

addr_0800B:
   inc    (ix+17)                      ; 02:800B - DD 34 11
   ld     a, (ix+17)                   ; 02:800E - DD 7E 11
   cp     $28                          ; 02:8011 - FE 28
   ret    c                            ; 02:8013 - D8
   ld     (ix+17), $00                 ; 02:8014 - DD 36 11 00
   ret                                 ; 02:8018 - C9

OFFSTAB_UNK_08019:
.db $00, $00, $00, $12, $12, $12, $24, $24, $24                                     ; 02:8019

UNK_08022:
.db $FE, $FF, $FF, $FF, $FF, $FF, $3A, $3C, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF  ; 02:8022
.db $FF, $FF, $FE, $FF, $FF, $FF, $FF, $FF, $36, $38, $FF, $FF, $FF, $FF, $FF, $FF  ; 02:8032
.db $FF, $FF, $FF, $FF, $FE, $FF, $FF, $FF, $FF, $FF, $4C, $4E, $FF, $FF, $FF, $FF  ; 02:8042
.db $FF                                                                             ; 02:8052

objfunc_2C_UNKNOWN:
   set    5, (ix+24)                   ; 02:8053 - DD CB 18 EE
   ld     (ix+13), $20                 ; 02:8057 - DD 36 0D 20
   ld     (ix+14), $1C                 ; 02:805B - DD 36 0E 1C
   bit    0, (ix+24)                   ; 02:805F - DD CB 18 46
   jr     nz, addr_080B0               ; 02:8063 - 20 4B
   ld     hl, (sonic_y)                ; 02:8065 - 2A 01 D4
   ld     de, $00E0                    ; 02:8068 - 11 E0 00
   and    a                            ; 02:806B - A7
   sbc    hl, de                       ; 02:806C - ED 52
   ret    nc                           ; 02:806E - D0
   ld     a, (var_D414)                ; 02:806F - 3A 14 D4
   rlca                                ; 02:8072 - 07
   ret    nc                           ; 02:8073 - D0
   ld     hl, ART_09_AEB1              ; 02:8074 - 21 B1 AE
   ld     de, $2000                    ; 02:8077 - 11 00 20
   ld     a, $09                       ; 02:807A - 3E 09
   call   load_art                     ; 02:807C - CD 05 04
   ld     hl, PAL2_boss                ; 02:807F - 21 1C 73
   ld     a, $02                       ; 02:8082 - 3E 02
   call   signal_load_palettes         ; 02:8084 - CD 33 03
   ld     a, $0B                       ; 02:8087 - 3E 0B
   rst    $18                          ; 02:8089 - DF
   xor    a                            ; 02:808A - AF
   ld     (var_D2EC), a                ; 02:808B - 32 EC D2
   ld     hl, (var_D25A)               ; 02:808E - 2A 5A D2
   ld     (var_D273), hl               ; 02:8091 - 22 73 D2
   ld     (var_D275), hl               ; 02:8094 - 22 75 D2
   ld     hl, (var_D25D)               ; 02:8097 - 2A 5D D2
   ld     (var_D277), hl               ; 02:809A - 22 77 D2
   ld     (var_D279), hl               ; 02:809D - 22 79 D2
   ld     hl, $01F0                    ; 02:80A0 - 21 F0 01
   ld     (var_D27B), hl               ; 02:80A3 - 22 7B D2
   ld     hl, $0048                    ; 02:80A6 - 21 48 00
   ld     (var_D27D), hl               ; 02:80A9 - 22 7D D2
   set    0, (ix+24)                   ; 02:80AC - DD CB 18 C6

addr_080B0:
   call   addr_07CA6                   ; 02:80B0 - CD A6 7C
   bit    0, (ix+17)                   ; 02:80B3 - DD CB 11 46
   jr     nz, addr_080E7               ; 02:80B7 - 20 2E
   ld     (ix+15), UNK_081F4&$FF       ; 02:80B9 - DD 36 0F F4
   ld     (ix+16), UNK_081F4>>8        ; 02:80BD - DD 36 10 81
   ld     (ix+10), $80                 ; 02:80C1 - DD 36 0A 80
   ld     (ix+11), $00                 ; 02:80C5 - DD 36 0B 00
   ld     (ix+12), $00                 ; 02:80C9 - DD 36 0C 00
   ld     l, (ix+5)                    ; 02:80CD - DD 6E 05
   ld     h, (ix+6)                    ; 02:80D0 - DD 66 06
   ld     de, $0058                    ; 02:80D3 - 11 58 00
   xor    a                            ; 02:80D6 - AF
   sbc    hl, de                       ; 02:80D7 - ED 52
   ret    c                            ; 02:80D9 - D8
   ld     (ix+10), a                   ; 02:80DA - DD 77 0A
   ld     (ix+11), a                   ; 02:80DD - DD 77 0B
   ld     (ix+12), a                   ; 02:80E0 - DD 77 0C
   set    0, (ix+17)                   ; 02:80E3 - DD CB 11 C6

addr_080E7:
   ld     a, (ix+18)                   ; 02:80E7 - DD 7E 12
   and    a                            ; 02:80EA - A7
   jp     nz, addr_0814A               ; 02:80EB - C2 4A 81
   ld     l, (ix+2)                    ; 02:80EE - DD 6E 02
   ld     h, (ix+3)                    ; 02:80F1 - DD 66 03
   bit    1, (ix+17)                   ; 02:80F4 - DD CB 11 4E
   jr     nz, addr_08122               ; 02:80F8 - 20 28
   ld     (ix+15), UNK_081F4&$FF       ; 02:80FA - DD 36 0F F4
   ld     (ix+16), UNK_081F4>>8        ; 02:80FE - DD 36 10 81
   res    1, (ix+24)                   ; 02:8102 - DD CB 18 8E
   ld     (ix+7), $00                  ; 02:8106 - DD 36 07 00
   ld     (ix+8), $FF                  ; 02:810A - DD 36 08 FF
   ld     (ix+9), $FF                  ; 02:810E - DD 36 09 FF
   ld     de, $021C                    ; 02:8112 - 11 1C 02
   and    a                            ; 02:8115 - A7
   sbc    hl, de                       ; 02:8116 - ED 52
   jp     nc, addr_081E7               ; 02:8118 - D2 E7 81
   ld     (ix+18), $67                 ; 02:811B - DD 36 12 67
   jp     addr_081E7                   ; 02:811F - C3 E7 81

addr_08122:
   ld     (ix+15), UNK_08206&$FF       ; 02:8122 - DD 36 0F 06
   ld     (ix+16), UNK_08206>>8        ; 02:8126 - DD 36 10 82
   set    1, (ix+24)                   ; 02:812A - DD CB 18 CE
   ld     (ix+7), $00                  ; 02:812E - DD 36 07 00
   ld     (ix+8), $01                  ; 02:8132 - DD 36 08 01
   ld     (ix+9), $00                  ; 02:8136 - DD 36 09 00
   ld     de, $02AA                    ; 02:813A - 11 AA 02
   and    a                            ; 02:813D - A7
   sbc    hl, de                       ; 02:813E - ED 52
   jp     c, addr_081E7                ; 02:8140 - DA E7 81
   ld     (ix+18), $67                 ; 02:8143 - DD 36 12 67
   jp     addr_081E7                   ; 02:8147 - C3 E7 81

addr_0814A:
   xor    a                            ; 02:814A - AF
   ld     (ix+7), a                    ; 02:814B - DD 77 07
   ld     (ix+8), a                    ; 02:814E - DD 77 08
   ld     (ix+9), a                    ; 02:8151 - DD 77 09
   ld     hl, $0001                    ; 02:8154 - 21 01 00
   dec    (ix+18)                      ; 02:8157 - DD 35 12
   jr     z, addr_0816E                ; 02:815A - 28 12
   ld     a, (ix+18)                   ; 02:815C - DD 7E 12
   cp     $40                          ; 02:815F - FE 40
   jr     nc, addr_08171               ; 02:8161 - 30 0E
   ld     hl, $FFFF                    ; 02:8163 - 21 FF FF
   cp     $28                          ; 02:8166 - FE 28
   jr     c, addr_08171                ; 02:8168 - 38 07
   cp     $34                          ; 02:816A - FE 34
   jr     z, addr_0817D                ; 02:816C - 28 0F

addr_0816E:
   ld     hl, $0000                    ; 02:816E - 21 00 00

addr_08171:
   ld     (ix+10), $00                 ; 02:8171 - DD 36 0A 00
   ld     (ix+11), l                   ; 02:8175 - DD 75 0B
   ld     (ix+12), h                   ; 02:8178 - DD 74 0C
   jr     addr_081E7                   ; 02:817B - 18 6A

addr_0817D:
   ld     a, (ix+17)                   ; 02:817D - DD 7E 11
   xor    $02                          ; 02:8180 - EE 02
   ld     (ix+17), a                   ; 02:8182 - DD 77 11
   ld     a, (var_D2EC)                ; 02:8185 - 3A EC D2
   cp     $08                          ; 02:8188 - FE 08
   jr     nc, addr_081E7               ; 02:818A - 30 5B
   call   spawn_object                 ; 02:818C - CD 7B 7C
   ret    c                            ; 02:818F - D8
   ld     e, (ix+2)                    ; 02:8190 - DD 5E 02
   ld     d, (ix+3)                    ; 02:8193 - DD 56 03
   ld     c, (ix+5)                    ; 02:8196 - DD 4E 05
   ld     b, (ix+6)                    ; 02:8199 - DD 46 06
   push   ix                           ; 02:819C - DD E5
   push   hl                           ; 02:819E - E5
   pop    ix                           ; 02:819F - DD E1
   ld     (ix+0), $2B                  ; 02:81A1 - DD 36 00 2B
   xor    a                            ; 02:81A5 - AF
   ld     (ix+1), a                    ; 02:81A6 - DD 77 01
   ld     hl, $000B                    ; 02:81A9 - 21 0B 00
   add    hl, de                       ; 02:81AC - 19
   ld     (ix+2), l                    ; 02:81AD - DD 75 02
   ld     (ix+3), h                    ; 02:81B0 - DD 74 03
   ld     (ix+4), a                    ; 02:81B3 - DD 77 04
   ld     hl, $0030                    ; 02:81B6 - 21 30 00
   add    hl, bc                       ; 02:81B9 - 09
   ld     (ix+5), l                    ; 02:81BA - DD 75 05
   ld     (ix+6), h                    ; 02:81BD - DD 74 06
   ld     (ix+7), a                    ; 02:81C0 - DD 77 07
   ld     (ix+8), a                    ; 02:81C3 - DD 77 08
   ld     (ix+9), a                    ; 02:81C6 - DD 77 09
   ld     (ix+10), a                   ; 02:81C9 - DD 77 0A
   ld     (ix+11), a                   ; 02:81CC - DD 77 0B
   ld     (ix+12), a                   ; 02:81CF - DD 77 0C
   ld     (ix+17), a                   ; 02:81D2 - DD 77 11
   ld     (ix+22), a                   ; 02:81D5 - DD 77 16
   ld     (ix+23), a                   ; 02:81D8 - DD 77 17
   call   random_A                     ; 02:81DB - CD 25 06
   and    $3F                          ; 02:81DE - E6 3F
   add    a, $64                       ; 02:81E0 - C6 64
   ld     (ix+18), a                   ; 02:81E2 - DD 77 12
   pop    ix                           ; 02:81E5 - DD E1

addr_081E7:
   ld     hl, $005A                    ; 02:81E7 - 21 5A 00
   ld     (var_D216), hl               ; 02:81EA - 22 16 D2
   call   addr_077BE                   ; 02:81ED - CD BE 77
   call   addr_079FA                   ; 02:81F0 - CD FA 79
   ret                                 ; 02:81F3 - C9

UNK_081F4:
.db $20, $22, $24, $26, $28, $FF, $40, $42, $44, $46, $48, $FF, $60, $54, $56, $58  ; 02:81F4
.db $68, $FF                                                                        ; 02:8204

UNK_08206:
.db $2A, $2C, $2E, $30, $32, $FF, $4A, $4C, $4E, $50, $52, $FF, $6A, $5A, $5C, $5E  ; 02:8206
.db $72, $FF                                                                        ; 02:8216

objfunc_2B_UNKNOWN:
   res    5, (ix+24)                   ; 02:8218 - DD CB 18 AE
   ld     (ix+13), $0C                 ; 02:821C - DD 36 0D 0C
   ld     (ix+14), $10                 ; 02:8220 - DD 36 0E 10
   ld     hl, $0202                    ; 02:8224 - 21 02 02
   ld     (var_D214), hl               ; 02:8227 - 22 14 D2
   call   UNK_03956                    ; 02:822A - CD 56 39
   call   nc, addr_035FD               ; 02:822D - D4 FD 35
   ld     l, (ix+7)                    ; 02:8230 - DD 6E 07
   ld     h, (ix+8)                    ; 02:8233 - DD 66 08
   ld     a, (ix+9)                    ; 02:8236 - DD 7E 09
   ld     de, $0002                    ; 02:8239 - 11 02 00
   ld     c, $00                       ; 02:823C - 0E 00
   and    a                            ; 02:823E - A7
   jp     m, addr_08246                ; 02:823F - FA 46 82
   dec    c                            ; 02:8242 - 0D
   ld     de, $FFFE                    ; 02:8243 - 11 FE FF

addr_08246:
   add    hl, de                       ; 02:8246 - 19
   adc    a, c                         ; 02:8247 - 89
   ld     (ix+7), l                    ; 02:8248 - DD 75 07
   ld     (ix+8), h                    ; 02:824B - DD 74 08
   ld     (ix+9), a                    ; 02:824E - DD 77 09
   ld     l, (ix+10)                   ; 02:8251 - DD 6E 0A
   ld     h, (ix+11)                   ; 02:8254 - DD 66 0B
   ld     a, (ix+12)                   ; 02:8257 - DD 7E 0C
   ld     de, $0020                    ; 02:825A - 11 20 00
   add    hl, de                       ; 02:825D - 19
   adc    a, $00                       ; 02:825E - CE 00
   ld     c, a                         ; 02:8260 - 4F
   ld     a, h                         ; 02:8261 - 7C
   cp     $03                          ; 02:8262 - FE 03
   jr     c, addr_0826B                ; 02:8264 - 38 05
   ld     hl, $0300                    ; 02:8266 - 21 00 03
   ld     c, $00                       ; 02:8269 - 0E 00

addr_0826B:
   ld     (ix+10), l                   ; 02:826B - DD 75 0A
   ld     (ix+11), h                   ; 02:826E - DD 74 0B
   ld     (ix+12), c                   ; 02:8271 - DD 71 0C
   ld     a, (var_D223)                ; 02:8274 - 3A 23 D2
   and    $01                          ; 02:8277 - E6 01
   add    a, (ix+17)                   ; 02:8279 - DD 86 11
   ld     (ix+17), a                   ; 02:827C - DD 77 11
   ld     a, (ix+17)                   ; 02:827F - DD 7E 11
   cp     (ix+18)                      ; 02:8282 - DD BE 12
   jr     nc, addr_08291               ; 02:8285 - 30 0A
   ld     bc, UNK_082C1                ; 02:8287 - 01 C1 82
   ld     de, UNK_082CD                ; 02:828A - 11 CD 82
   call   addr_07C41                   ; 02:828D - CD 41 7C
   ret                                 ; 02:8290 - C9

addr_08291:
   jr     nz, addr_082A0               ; 02:8291 - 20 0D
   ld     a, (var_D223)                ; 02:8293 - 3A 23 D2
   and    $01                          ; 02:8296 - E6 01
   ret    z                            ; 02:8298 - C8
   ld     (ix+22), $00                 ; 02:8299 - DD 36 16 00
   ld     a, $01                       ; 02:829D - 3E 01
   rst    $28                          ; 02:829F - EF

addr_082A0:
   xor    a                            ; 02:82A0 - AF
   ld     (ix+7), a                    ; 02:82A1 - DD 77 07
   ld     (ix+8), a                    ; 02:82A4 - DD 77 08
   ld     (ix+9), a                    ; 02:82A7 - DD 77 09
   ld     bc, UNK_082C6                ; 02:82AA - 01 C6 82
   ld     de, UNK_0A3BB                ; 02:82AD - 11 BB A3
   call   addr_07C41                   ; 02:82B0 - CD 41 7C
   ld     a, (ix+18)                   ; 02:82B3 - DD 7E 12
   add    a, $12                       ; 02:82B6 - C6 12
   cp     (ix+17)                      ; 02:82B8 - DD BE 11
   ret    nc                           ; 02:82BB - D0
   ld     (ix+0), $FF                  ; 02:82BC - DD 36 00 FF
   ret                                 ; 02:82C0 - C9

UNK_082C1:
.db $00, $04, $01, $04, $FF                                                         ; 02:82C1

UNK_082C6:
.db $01, $0C, $02, $0C, $03, $0C, $FF                                               ; 02:82C6

UNK_082CD:
.db $08, $0A, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF  ; 02:82CD
.db $FF, $FF, $0C, $0E, $FF, $FF, $FF, $FF, $FF                                     ; 02:82DD

objfunc_2D_UNKNOWN:
   ld     (ix+13), $10                 ; 02:82E6 - DD 36 0D 10
   ld     (ix+14), $0F                 ; 02:82EA - DD 36 0E 0F
   ld     hl, $0408                    ; 02:82EE - 21 08 04
   ld     (var_D214), hl               ; 02:82F1 - 22 14 D2
   call   UNK_03956                    ; 02:82F4 - CD 56 39
   call   nc, addr_035FD               ; 02:82F7 - D4 FD 35
   ld     (ix+13), $14                 ; 02:82FA - DD 36 0D 14
   ld     (ix+14), $20                 ; 02:82FE - DD 36 0E 20
   ld     hl, $1006                    ; 02:8302 - 21 06 10
   ld     (var_D214), hl               ; 02:8305 - 22 14 D2
   call   UNK_03956                    ; 02:8308 - CD 56 39
   ld     hl, $0404                    ; 02:830B - 21 04 04
   ld     (g_FF_string_high_byte), hl  ; 02:830E - 22 0E D2
   call   nc, UNK_035E5                ; 02:8311 - D4 E5 35
   ld     l, (ix+10)                   ; 02:8314 - DD 6E 0A
   ld     h, (ix+11)                   ; 02:8317 - DD 66 0B
   ld     a, (ix+12)                   ; 02:831A - DD 7E 0C
   ld     de, $0020                    ; 02:831D - 11 20 00
   add    hl, de                       ; 02:8320 - 19
   adc    a, $00                       ; 02:8321 - CE 00
   ld     (ix+10), l                   ; 02:8323 - DD 75 0A
   ld     (ix+11), h                   ; 02:8326 - DD 74 0B
   ld     (ix+12), a                   ; 02:8329 - DD 77 0C
   ld     a, (ix+17)                   ; 02:832C - DD 7E 11
   cp     $50                          ; 02:832F - FE 50
   jr     c, addr_0834B                ; 02:8331 - 38 18
   ld     (ix+7), $40                  ; 02:8333 - DD 36 07 40
   ld     (ix+8), $00                  ; 02:8337 - DD 36 08 00
   ld     (ix+9), $00                  ; 02:833B - DD 36 09 00
   ld     de, UNK_0837E                ; 02:833F - 11 7E 83
   ld     bc, UNK_08379                ; 02:8342 - 01 79 83
   call   addr_07C41                   ; 02:8345 - CD 41 7C
   jp     addr_08360                   ; 02:8348 - C3 60 83

addr_0834B:
   ld     (ix+7), $C0                  ; 02:834B - DD 36 07 C0
   ld     (ix+8), $FF                  ; 02:834F - DD 36 08 FF
   ld     (ix+9), $FF                  ; 02:8353 - DD 36 09 FF
   ld     de, UNK_0837E                ; 02:8357 - 11 7E 83
   ld     bc, UNK_08374                ; 02:835A - 01 74 83
   call   addr_07C41                   ; 02:835D - CD 41 7C

addr_08360:
   ld     a, (var_D223)                ; 02:8360 - 3A 23 D2
   and    $07                          ; 02:8363 - E6 07
   ret    nz                           ; 02:8365 - C0
   inc    (ix+17)                      ; 02:8366 - DD 34 11
   ld     a, (ix+17)                   ; 02:8369 - DD 7E 11
   cp     $A0                          ; 02:836C - FE A0
   ret    c                            ; 02:836E - D8
   ld     (ix+17), $00                 ; 02:836F - DD 36 11 00
   ret                                 ; 02:8373 - C9

UNK_08374:
.db $00, $06, $01, $06, $FF                                                         ; 02:8374

UNK_08379:
.db $02, $06, $03, $06, $FF                                                         ; 02:8379

UNK_0837E:
.db $FE, $00, $02, $FF, $FF, $FF, $20, $22, $24, $FF, $FF, $FF, $FF, $FF, $FF, $FF  ; 02:837E
.db $FF, $FF, $FE, $00, $02, $FF, $FF, $FF, $26, $28, $2A, $FF, $FF, $FF, $FF, $FF  ; 02:838E
.db $FF, $FF, $FF, $FF, $40, $42, $FF, $FF, $FF, $FF, $4A, $4C, $4E, $FF, $FF, $FF  ; 02:839E
.db $FF, $FF, $FF, $FF, $FF, $FF, $40, $42, $FF, $FF, $FF, $FF, $44, $46, $48, $FF  ; 02:83AE
.db $FF, $FF, $FF                                                                   ; 02:83BE

objfunc_2E_UNKNOWN:
   set    5, (ix+24)                   ; 02:83C1 - DD CB 18 EE
   ld     (ix+13), $0E                 ; 02:83C5 - DD 36 0D 0E
   ld     (ix+14), $08                 ; 02:83C9 - DD 36 0E 08
   bit    0, (ix+24)                   ; 02:83CD - DD CB 18 46
   jr     nz, addr_08427               ; 02:83D1 - 20 54
   xor    a                            ; 02:83D3 - AF
   ld     (ix+15), a                   ; 02:83D4 - DD 77 0F
   ld     (ix+16), a                   ; 02:83D7 - DD 77 10
   ld     l, a                         ; 02:83DA - 6F
   ld     h, a                         ; 02:83DB - 67
   ld     (g_FF_string_high_byte), hl  ; 02:83DC - 22 0E D2
   bit    1, (ix+24)                   ; 02:83DF - DD CB 18 4E
   jr     nz, addr_083F2               ; 02:83E3 - 20 0D
   call   random_A                     ; 02:83E5 - CD 25 06
   and    $1F                          ; 02:83E8 - E6 1F
   inc    a                            ; 02:83EA - 3C
   ld     (ix+17), a                   ; 02:83EB - DD 77 11
   set    1, (ix+24)                   ; 02:83EE - DD CB 18 CE

addr_083F2:
   dec    (ix+17)                      ; 02:83F2 - DD 35 11
   jp     nz, addr_08467               ; 02:83F5 - C2 67 84
   ld     (ix+17), $01                 ; 02:83F8 - DD 36 11 01
   ld     a, (var_D2AC)                ; 02:83FC - 3A AC D2
   and    $80                          ; 02:83FF - E6 80
   jp     z, addr_08467                ; 02:8401 - CA 67 84
   ld     l, (ix+2)                    ; 02:8404 - DD 6E 02
   ld     h, (ix+3)                    ; 02:8407 - DD 66 03
   ld     (var_D2AB), hl               ; 02:840A - 22 AB D2
   ld     l, (ix+5)                    ; 02:840D - DD 6E 05
   ld     h, (ix+6)                    ; 02:8410 - DD 66 06
   ld     de, $000E                    ; 02:8413 - 11 0E 00
   add    hl, de                       ; 02:8416 - 19
   ld     (var_D2AD), hl               ; 02:8417 - 22 AD D2
   ld     hl, UNK_0848E                ; 02:841A - 21 8E 84
   ld     (var_D2AF), hl               ; 02:841D - 22 AF D2
   set    0, (ix+24)                   ; 02:8420 - DD CB 18 C6
   ld     a, $20                       ; 02:8424 - 3E 20
   rst    $28                          ; 02:8426 - EF

addr_08427:
   ld     (ix+15), UNK_08481&$FF       ; 02:8427 - DD 36 0F 81
   ld     (ix+16), UNK_08481>>8        ; 02:842B - DD 36 10 84
   ld     l, (ix+10)                   ; 02:842F - DD 6E 0A
   ld     h, (ix+11)                   ; 02:8432 - DD 66 0B
   ld     a, (ix+12)                   ; 02:8435 - DD 7E 0C
   ld     de, $0020                    ; 02:8438 - 11 20 00
   add    hl, de                       ; 02:843B - 19
   adc    a, $00                       ; 02:843C - CE 00
   ld     c, a                         ; 02:843E - 4F
   ld     a, h                         ; 02:843F - 7C
   cp     $04                          ; 02:8440 - FE 04
   jr     c, addr_08446                ; 02:8442 - 38 02
   ld     h, $04                       ; 02:8444 - 26 04

addr_08446:
   ld     (ix+10), l                   ; 02:8446 - DD 75 0A
   ld     (ix+11), h                   ; 02:8449 - DD 74 0B
   ld     (ix+12), c                   ; 02:844C - DD 71 0C
   ld     (g_FF_string_high_byte), hl  ; 02:844F - 22 0E D2
   ld     de, (var_D25D)               ; 02:8452 - ED 5B 5D D2
   inc    d                            ; 02:8456 - 14
   ld     l, (ix+5)                    ; 02:8457 - DD 6E 05
   ld     h, (ix+6)                    ; 02:845A - DD 66 06
   and    a                            ; 02:845D - A7
   sbc    hl, de                       ; 02:845E - ED 52
   jr     c, addr_08467                ; 02:8460 - 38 05
   ld     (ix+0), $FF                  ; 02:8462 - DD 36 00 FF
   ret                                 ; 02:8466 - C9

addr_08467:
   ld     hl, $0402                    ; 02:8467 - 21 02 04
   ld     (var_D214), hl               ; 02:846A - 22 14 D2
   call   UNK_03956                    ; 02:846D - CD 56 39
   ret    c                            ; 02:8470 - D8
   ld     a, (sonic_vel_y_hi)          ; 02:8471 - 3A 08 D4
   and    a                            ; 02:8474 - A7
   ret    m                            ; 02:8475 - F8
   ld     de, (g_FF_string_high_byte)  ; 02:8476 - ED 5B 0E D2
   ld     bc, $0010                    ; 02:847A - 01 10 00
   call   addr_07CC1                   ; 02:847D - CD C1 7C
   ret                                 ; 02:8480 - C9

UNK_08481:
.db $FE, $FF, $FF, $FF, $FF, $FF, $70, $72, $FF, $FF, $FF, $FF, $FF                 ; 02:8481

UNK_0848E:
.db $00, $00, $00, $00, $00, $00, $00, $00                                          ; 02:848E

objfunc_48_UNKNOWN:
   set    5, (ix+24)                   ; 02:8496 - DD CB 18 EE
   ld     (ix+13), $1E                 ; 02:849A - DD 36 0D 1E
   ld     (ix+14), $1C                 ; 02:849E - DD 36 0E 1C
   call   addr_07CA6                   ; 02:84A2 - CD A6 7C
   ld     (ix+15), UNK_0865A&$FF       ; 02:84A5 - DD 36 0F 5A
   ld     (ix+16), UNK_0865A>>8        ; 02:84A9 - DD 36 10 86
   bit    0, (ix+24)                   ; 02:84AD - DD CB 18 46
   jr     nz, addr_084DA               ; 02:84B1 - 20 27
   ld     hl, $03A0                    ; 02:84B3 - 21 A0 03
   ld     de, $0300                    ; 02:84B6 - 11 00 03
   call   addr_07C8C                   ; 02:84B9 - CD 8C 7C
   ld     hl, ART_0C_E508              ; 02:84BC - 21 08 E5
   ld     de, $2000                    ; 02:84BF - 11 00 20
   ld     a, $0C                       ; 02:84C2 - 3E 0C
   call   load_art                     ; 02:84C4 - CD 05 04
   ld     hl, PAL2_boss                ; 02:84C7 - 21 1C 73
   ld     a, $02                       ; 02:84CA - 3E 02
   call   signal_load_palettes         ; 02:84CC - CD 33 03
   xor    a                            ; 02:84CF - AF
   ld     (var_D2EC), a                ; 02:84D0 - 32 EC D2
   ld     a, $0B                       ; 02:84D3 - 3E 0B
   rst    $18                          ; 02:84D5 - DF
   set    0, (ix+24)                   ; 02:84D6 - DD CB 18 C6

addr_084DA:
   ld     a, (ix+17)                   ; 02:84DA - DD 7E 11
   and    a                            ; 02:84DD - A7
   jr     nz, addr_08508               ; 02:84DE - 20 28
   call   random_A                     ; 02:84E0 - CD 25 06
   and    $01                          ; 02:84E3 - E6 01
   add    a, a                         ; 02:84E5 - 87
   add    a, a                         ; 02:84E6 - 87
   ld     e, a                         ; 02:84E7 - 5F
   ld     d, $00                       ; 02:84E8 - 16 00
   ld     hl, UNK_08632                ; 02:84EA - 21 32 86
   add    hl, de                       ; 02:84ED - 19
   ld     a, (hl)                      ; 02:84EE - 7E
   ld     (ix+2), a                    ; 02:84EF - DD 77 02
   inc    hl                           ; 02:84F2 - 23
   ld     a, (hl)                      ; 02:84F3 - 7E
   inc    hl                           ; 02:84F4 - 23
   ld     (ix+3), a                    ; 02:84F5 - DD 77 03
   ld     a, (hl)                      ; 02:84F8 - 7E
   inc    hl                           ; 02:84F9 - 23
   ld     (ix+5), a                    ; 02:84FA - DD 77 05
   ld     a, (hl)                      ; 02:84FD - 7E
   inc    hl                           ; 02:84FE - 23
   ld     (ix+6), a                    ; 02:84FF - DD 77 06
   inc    (ix+17)                      ; 02:8502 - DD 34 11
   jp     addr_085C7                   ; 02:8505 - C3 C7 85

addr_08508:
   dec    a                            ; 02:8508 - 3D
   jr     nz, addr_0852F               ; 02:8509 - 20 24
   ld     (ix+10), $80                 ; 02:850B - DD 36 0A 80
   ld     (ix+11), $FF                 ; 02:850F - DD 36 0B FF
   ld     (ix+12), $FF                 ; 02:8513 - DD 36 0C FF
   ld     hl, $0380                    ; 02:8517 - 21 80 03
   ld     e, (ix+5)                    ; 02:851A - DD 5E 05
   ld     d, (ix+6)                    ; 02:851D - DD 56 06
   xor    a                            ; 02:8520 - AF
   sbc    hl, de                       ; 02:8521 - ED 52
   jp     c, addr_085C7                ; 02:8523 - DA C7 85
   inc    (ix+17)                      ; 02:8526 - DD 34 11
   ld     (ix+18), a                   ; 02:8529 - DD 77 12
   jp     addr_085C7                   ; 02:852C - C3 C7 85

addr_0852F:
   dec    a                            ; 02:852F - 3D
   jr     nz, addr_085AA               ; 02:8530 - 20 78
   xor    a                            ; 02:8532 - AF
   ld     (ix+10), a                   ; 02:8533 - DD 77 0A
   ld     (ix+11), a                   ; 02:8536 - DD 77 0B
   ld     (ix+12), a                   ; 02:8539 - DD 77 0C
   inc    (ix+18)                      ; 02:853C - DD 34 12
   ld     a, (ix+18)                   ; 02:853F - DD 7E 12
   cp     $64                          ; 02:8542 - FE 64
   jp     nz, addr_085C7               ; 02:8544 - C2 C7 85
   inc    (ix+17)                      ; 02:8547 - DD 34 11
   ld     a, (var_D2EC)                ; 02:854A - 3A EC D2
   cp     $08                          ; 02:854D - FE 08
   jr     nc, addr_085C7               ; 02:854F - 30 76
   ld     hl, (sonic_x)                ; 02:8551 - 2A FE D3
   ld     e, (ix+2)                    ; 02:8554 - DD 5E 02
   ld     d, (ix+3)                    ; 02:8557 - DD 56 03
   and    a                            ; 02:855A - A7
   sbc    hl, de                       ; 02:855B - ED 52
   ld     hl, $863A                    ; 02:855D - 21 3A 86
   jr     c, addr_08565                ; 02:8560 - 38 03
   ld     hl, $864A                    ; 02:8562 - 21 4A 86

addr_08565:
   ld     e, (hl)                      ; 02:8565 - 5E
   inc    hl                           ; 02:8566 - 23
   ld     d, (hl)                      ; 02:8567 - 56
   inc    hl                           ; 02:8568 - 23
   ld     c, (hl)                      ; 02:8569 - 4E
   inc    hl                           ; 02:856A - 23
   ld     b, (hl)                      ; 02:856B - 46
   inc    hl                           ; 02:856C - 23
   push   hl                           ; 02:856D - E5
   ld     l, (ix+2)                    ; 02:856E - DD 6E 02
   ld     h, (ix+3)                    ; 02:8571 - DD 66 03
   add    hl, de                       ; 02:8574 - 19
   ld     (g_FF_string_high_byte), hl  ; 02:8575 - 22 0E D2
   ld     l, (ix+5)                    ; 02:8578 - DD 6E 05
   ld     h, (ix+6)                    ; 02:857B - DD 66 06
   add    hl, bc                       ; 02:857E - 09
   ld     (var_D210), hl               ; 02:857F - 22 10 D2
   pop    hl                           ; 02:8582 - E1
   ld     b, $03                       ; 02:8583 - 06 03

addr_08585:
   push   bc                           ; 02:8585 - C5
   ld     a, (hl)                      ; 02:8586 - 7E
   ld     (var_D212), a                ; 02:8587 - 32 12 D2
   inc    hl                           ; 02:858A - 23
   ld     a, (hl)                      ; 02:858B - 7E
   ld     (var_D213), a                ; 02:858C - 32 13 D2
   inc    hl                           ; 02:858F - 23
   ld     a, (hl)                      ; 02:8590 - 7E
   ld     (var_D214), a                ; 02:8591 - 32 14 D2
   inc    hl                           ; 02:8594 - 23
   ld     a, (hl)                      ; 02:8595 - 7E
   ld     (var_D215), a                ; 02:8596 - 32 15 D2
   inc    hl                           ; 02:8599 - 23
   push   hl                           ; 02:859A - E5
   ld     c, $10                       ; 02:859B - 0E 10
   call   addr_085D1                   ; 02:859D - CD D1 85
   pop    hl                           ; 02:85A0 - E1
   pop    bc                           ; 02:85A1 - C1
   djnz   addr_08585                   ; 02:85A2 - 10 E1
   ld     a, $01                       ; 02:85A4 - 3E 01
   rst    $28                          ; 02:85A6 - EF
   jp     addr_085C7                   ; 02:85A7 - C3 C7 85

addr_085AA:
   ld     (ix+10), $80                 ; 02:85AA - DD 36 0A 80
   ld     (ix+11), $00                 ; 02:85AE - DD 36 0B 00
   ld     (ix+12), $00                 ; 02:85B2 - DD 36 0C 00
   ld     hl, $03C0                    ; 02:85B6 - 21 C0 03
   ld     e, (ix+5)                    ; 02:85B9 - DD 5E 05
   ld     d, (ix+6)                    ; 02:85BC - DD 56 06
   xor    a                            ; 02:85BF - AF
   sbc    hl, de                       ; 02:85C0 - ED 52
   jr     nc, addr_085C7               ; 02:85C2 - 30 03
   ld     (ix+17), a                   ; 02:85C4 - DD 77 11

addr_085C7:
   ld     hl, $00A2                    ; 02:85C7 - 21 A2 00
   ld     (var_D216), hl               ; 02:85CA - 22 16 D2
   call   addr_077BE                   ; 02:85CD - CD BE 77
   ret                                 ; 02:85D0 - C9

addr_085D1:
   push   bc                           ; 02:85D1 - C5
   call   spawn_object                 ; 02:85D2 - CD 7B 7C
   pop    bc                           ; 02:85D5 - C1
   ret    c                            ; 02:85D6 - D8
   push   ix                           ; 02:85D7 - DD E5
   push   hl                           ; 02:85D9 - E5
   pop    ix                           ; 02:85DA - DD E1
   xor    a                            ; 02:85DC - AF
   ld     (ix+0), $0D                  ; 02:85DD - DD 36 00 0D
   ld     hl, (g_FF_string_high_byte)  ; 02:85E1 - 2A 0E D2
   ld     (ix+1), a                    ; 02:85E4 - DD 77 01
   ld     (ix+2), l                    ; 02:85E7 - DD 75 02
   ld     (ix+3), h                    ; 02:85EA - DD 74 03
   ld     hl, (var_D210)               ; 02:85ED - 2A 10 D2
   ld     (ix+4), a                    ; 02:85F0 - DD 77 04
   ld     (ix+5), l                    ; 02:85F3 - DD 75 05
   ld     (ix+6), h                    ; 02:85F6 - DD 74 06
   ld     (ix+17), a                   ; 02:85F9 - DD 77 11
   ld     (ix+19), c                   ; 02:85FC - DD 71 13
   ld     (ix+20), a                   ; 02:85FF - DD 77 14
   ld     (ix+21), a                   ; 02:8602 - DD 77 15
   ld     (ix+22), a                   ; 02:8605 - DD 77 16
   ld     (ix+23), a                   ; 02:8608 - DD 77 17
   ld     hl, (var_D212)               ; 02:860B - 2A 12 D2
   xor    a                            ; 02:860E - AF
   bit    7, h                         ; 02:860F - CB 7C
   jr     z, addr_08614                ; 02:8611 - 28 01
   dec    a                            ; 02:8613 - 3D

addr_08614:
   ld     (ix+7), l                    ; 02:8614 - DD 75 07
   ld     (ix+8), h                    ; 02:8617 - DD 74 08
   ld     (ix+9), a                    ; 02:861A - DD 77 09
   ld     hl, (var_D214)               ; 02:861D - 2A 14 D2
   xor    a                            ; 02:8620 - AF
   bit    7, h                         ; 02:8621 - CB 7C
   jr     z, addr_08626                ; 02:8623 - 28 01
   dec    a                            ; 02:8625 - 3D

addr_08626:
   ld     (ix+10), l                   ; 02:8626 - DD 75 0A
   ld     (ix+11), h                   ; 02:8629 - DD 74 0B
   ld     (ix+12), a                   ; 02:862C - DD 77 0C
   pop    ix                           ; 02:862F - DD E1
   ret                                 ; 02:8631 - C9

UNK_08632:
.db $D4, $03, $C0, $03, $44, $04, $C0, $03, $00, $00, $F6, $FF, $C0, $FE, $00, $FC  ; 02:8632
.db $60, $FE, $80, $FD, $C0, $FD, $00, $FF, $20, $00, $F6, $FF, $40, $01, $00, $FC  ; 02:8642
.db $A0, $01, $80, $FD, $40, $02, $00, $FF                                          ; 02:8652

UNK_0865A:
.db $20, $22, $24, $26, $28, $FF, $40, $42, $44, $46, $48, $FF, $60, $62, $64, $66  ; 02:865A
.db $68, $FF                                                                        ; 02:866A

objfunc_4E_UNKNOWN:
   set    5, (ix+24)                   ; 02:866C - DD CB 18 EE
   bit    0, (ix+24)                   ; 02:8670 - DD CB 18 46
   jr     nz, addr_0868E               ; 02:8674 - 20 18
   ld     (ix+17), $1C                 ; 02:8676 - DD 36 11 1C
   ld     l, (ix+2)                    ; 02:867A - DD 6E 02
   ld     h, (ix+3)                    ; 02:867D - DD 66 03
   ld     de, $FFF0                    ; 02:8680 - 11 F0 FF
   add    hl, de                       ; 02:8683 - 19
   ld     (ix+2), l                    ; 02:8684 - DD 75 02
   ld     (ix+3), h                    ; 02:8687 - DD 74 03
   set    0, (ix+24)                   ; 02:868A - DD CB 18 C6

addr_0868E:
   ld     l, (ix+20)                   ; 02:868E - DD 6E 14
   ld     h, (ix+21)                   ; 02:8691 - DD 66 15
   ld     a, (ix+22)                   ; 02:8694 - DD 7E 16
   ld     e, (ix+18)                   ; 02:8697 - DD 5E 12
   ld     d, (ix+19)                   ; 02:869A - DD 56 13
   ld     c, $00                       ; 02:869D - 0E 00
   bit    7, d                         ; 02:869F - CB 7A
   jr     z, addr_086A4                ; 02:86A1 - 28 01
   dec    c                            ; 02:86A3 - 0D

addr_086A4:
   add    hl, de                       ; 02:86A4 - 19
   adc    a, c                         ; 02:86A5 - 89
   ld     (ix+20), l                   ; 02:86A6 - DD 75 14
   ld     (ix+21), h                   ; 02:86A9 - DD 74 15
   ld     (ix+22), a                   ; 02:86AC - DD 77 16
   ld     c, h                         ; 02:86AF - 4C
   ld     b, a                         ; 02:86B0 - 47
   ld     hl, $0038                    ; 02:86B1 - 21 38 00
   add    hl, de                       ; 02:86B4 - 19
   ld     (ix+18), l                   ; 02:86B5 - DD 75 12
   ld     (ix+19), h                   ; 02:86B8 - DD 74 13
   bit    7, h                         ; 02:86BB - CB 7C
   jr     nz, addr_0871B               ; 02:86BD - 20 5C
   rlca                                ; 02:86BF - 07
   jr     c, addr_0871B                ; 02:86C0 - 38 59
   ld     a, (ix+17)                   ; 02:86C2 - DD 7E 11
   and    a                            ; 02:86C5 - A7
   jr     z, addr_08707                ; 02:86C6 - 28 3F
   bit    1, (ix+24)                   ; 02:86C8 - DD CB 18 4E
   jr     z, addr_086F4                ; 02:86CC - 28 26
   ld     a, l                         ; 02:86CE - 7D
   or     h                            ; 02:86CF - B4
   jr     nz, addr_086E0               ; 02:86D0 - 20 0E
   ld     a, (var_D2E8)                ; 02:86D2 - 3A E8 D2
   ld     hl, (var_D2E6)               ; 02:86D5 - 2A E6 D2
   ld     (sonic_vel_y_sub), hl        ; 02:86D8 - 22 06 D4
   ld     (sonic_vel_y_hi), a          ; 02:86DB - 32 08 D4
   jr     addr_086F4                   ; 02:86DE - 18 14

addr_086E0:
   ld     a, l                         ; 02:86E0 - 7D
   cpl                                 ; 02:86E1 - 2F
   ld     l, a                         ; 02:86E2 - 6F
   ld     a, h                         ; 02:86E3 - 7C
   cpl                                 ; 02:86E4 - 2F
   ld     h, a                         ; 02:86E5 - 67
   inc    hl                           ; 02:86E6 - 23
   ld     de, (var_D2E6)               ; 02:86E7 - ED 5B E6 D2
   add    hl, de                       ; 02:86EB - 19
   ld     (sonic_vel_y_sub), hl        ; 02:86EC - 22 06 D4
   ld     a, $FF                       ; 02:86EF - 3E FF
   ld     (sonic_vel_y_hi), a          ; 02:86F1 - 32 08 D4

addr_086F4:
   ld     a, $1C                       ; 02:86F4 - 3E 1C
   sub    c                            ; 02:86F6 - 91
   ld     (ix+17), a                   ; 02:86F7 - DD 77 11
   jr     z, addr_086FE                ; 02:86FA - 28 02
   jr     nc, addr_0871B               ; 02:86FC - 30 1D

addr_086FE:
   bit    1, (ix+24)                   ; 02:86FE - DD CB 18 4E
   jr     z, addr_08707                ; 02:8702 - 28 03
   ld     a, $04                       ; 02:8704 - 3E 04
   rst    $28                          ; 02:8706 - EF

addr_08707:
   xor    a                            ; 02:8707 - AF
   ld     (ix+17), a                   ; 02:8708 - DD 77 11
   ld     (ix+18), a                   ; 02:870B - DD 77 12
   ld     (ix+19), a                   ; 02:870E - DD 77 13
   ld     (ix+20), a                   ; 02:8711 - DD 77 14
   ld     (ix+21), $1C                 ; 02:8714 - DD 36 15 1C
   ld     (ix+22), a                   ; 02:8718 - DD 77 16

addr_0871B:
   ld     l, (ix+2)                    ; 02:871B - DD 6E 02
   ld     h, (ix+3)                    ; 02:871E - DD 66 03
   ld     (g_FF_string_high_byte), hl  ; 02:8721 - 22 0E D2
   ld     l, (ix+5)                    ; 02:8724 - DD 6E 05
   ld     h, (ix+6)                    ; 02:8727 - DD 66 06
   ld     (var_D210), hl               ; 02:872A - 22 10 D2
   ld     hl, $0000                    ; 02:872D - 21 00 00
   ld     (var_D212), hl               ; 02:8730 - 22 12 D2
   ld     l, (ix+17)                   ; 02:8733 - DD 6E 11
   ld     de, $0010                    ; 02:8736 - 11 10 00
   add    hl, de                       ; 02:8739 - 19
   ld     (var_D214), hl               ; 02:873A - 22 14 D2
   ld     hl, UNK_08830                ; 02:873D - 21 30 88
   call   addr_0881A                   ; 02:8740 - CD 1A 88
   ld     hl, $0028                    ; 02:8743 - 21 28 00
   ld     (var_D212), hl               ; 02:8746 - 22 12 D2
   ld     a, $1C                       ; 02:8749 - 3E 1C
   sub    (ix+17)                      ; 02:874B - DD 96 11
   ld     l, a                         ; 02:874E - 6F
   ld     h, $00                       ; 02:874F - 26 00
   ld     de, $0010                    ; 02:8751 - 11 10 00
   add    hl, de                       ; 02:8754 - 19
   ld     (var_D214), hl               ; 02:8755 - 22 14 D2
   ld     hl, UNK_08830                ; 02:8758 - 21 30 88
   call   addr_0881A                   ; 02:875B - CD 1A 88
   ld     hl, $002C                    ; 02:875E - 21 2C 00
   ld     (var_D212), hl               ; 02:8761 - 22 12 D2
   ld     l, (ix+21)                   ; 02:8764 - DD 6E 15
   ld     h, (ix+22)                   ; 02:8767 - DD 66 16
   ld     (var_D214), hl               ; 02:876A - 22 14 D2
   ld     hl, $8834                    ; 02:876D - 21 34 88
   call   addr_0881A                   ; 02:8770 - CD 1A 88
   res    1, (ix+24)                   ; 02:8773 - DD CB 18 8E
   ld     (ix+13), $14                 ; 02:8777 - DD 36 0D 14
   ld     a, $02                       ; 02:877B - 3E 02
   ld     (var_D214), a                ; 02:877D - 32 14 D2
   ld     a, (ix+17)                   ; 02:8780 - DD 7E 11
   ld     c, a                         ; 02:8783 - 4F
   add    a, $08                       ; 02:8784 - C6 08
   ld     (ix+14), a                   ; 02:8786 - DD 77 0E
   ld     a, c                         ; 02:8789 - 79
   add    a, $04                       ; 02:878A - C6 04
   ld     (var_D215), a                ; 02:878C - 32 15 D2
   call   UNK_03956                    ; 02:878F - CD 56 39
   jr     nc, addr_087BC               ; 02:8792 - 30 28
   ld     a, (sonic_vel_y_hi)          ; 02:8794 - 3A 08 D4
   and    a                            ; 02:8797 - A7
   ret    m                            ; 02:8798 - F8
   ld     (ix+13), $3C                 ; 02:8799 - DD 36 0D 3C
   ld     a, $2A                       ; 02:879D - 3E 2A
   ld     (var_D214), a                ; 02:879F - 32 14 D2
   ld     a, $1C                       ; 02:87A2 - 3E 1C
   sub    (ix+17)                      ; 02:87A4 - DD 96 11
   add    a, $08                       ; 02:87A7 - C6 08
   ld     (ix+14), a                   ; 02:87A9 - DD 77 0E
   ld     a, $1C                       ; 02:87AC - 3E 1C
   sub    (ix+17)                      ; 02:87AE - DD 96 11
   add    a, $04                       ; 02:87B1 - C6 04
   ld     (var_D215), a                ; 02:87B3 - 32 15 D2
   call   UNK_03956                    ; 02:87B6 - CD 56 39
   jr     nc, addr_087ED               ; 02:87B9 - 30 32
   ret                                 ; 02:87BB - C9

addr_087BC:
   set    1, (ix+24)                   ; 02:87BC - DD CB 18 CE
   ld     a, (sonic_vel_y_hi)          ; 02:87C0 - 3A 08 D4
   and    a                            ; 02:87C3 - A7
   ret    m                            ; 02:87C4 - F8
   ld     a, (ix+17)                   ; 02:87C5 - DD 7E 11
   cp     $1C                          ; 02:87C8 - FE 1C
   jr     z, addr_087ED                ; 02:87CA - 28 21
   ld     hl, (sonic_vel_y_sub)        ; 02:87CC - 2A 06 D4
   ld     a, l                         ; 02:87CF - 7D
   cpl                                 ; 02:87D0 - 2F
   ld     l, a                         ; 02:87D1 - 6F
   ld     a, h                         ; 02:87D2 - 7C
   cpl                                 ; 02:87D3 - 2F
   ld     h, a                         ; 02:87D4 - 67
   inc    hl                           ; 02:87D5 - 23
   ld     (ix+18), l                   ; 02:87D6 - DD 75 12
   ld     (ix+19), h                   ; 02:87D9 - DD 74 13
   ld     a, (sonic_vel_y)             ; 02:87DC - 3A 07 D4
   add    a, (ix+17)                   ; 02:87DF - DD 86 11
   ld     (ix+17), a                   ; 02:87E2 - DD 77 11
   cp     $1C                          ; 02:87E5 - FE 1C
   jr     c, addr_087F9                ; 02:87E7 - 38 10
   ld     (ix+17), $1C                 ; 02:87E9 - DD 36 11 1C

addr_087ED:
   ld     a, (var_D2E8)                ; 02:87ED - 3A E8 D2
   ld     hl, (var_D2E6)               ; 02:87F0 - 2A E6 D2
   ld     (sonic_vel_y_sub), hl        ; 02:87F3 - 22 06 D4
   ld     (sonic_vel_y_hi), a          ; 02:87F6 - 32 08 D4

addr_087F9:
   ld     l, (ix+5)                    ; 02:87F9 - DD 6E 05
   ld     h, (ix+6)                    ; 02:87FC - DD 66 06
   ld     bc, $0010                    ; 02:87FF - 01 10 00
   add    hl, bc                       ; 02:8802 - 09
   ld     a, (var_D215)                ; 02:8803 - 3A 15 D2
   sub    $04                          ; 02:8806 - D6 04
   ld     c, a                         ; 02:8808 - 4F
   add    hl, bc                       ; 02:8809 - 09
   ld     a, (var_D40A)                ; 02:880A - 3A 0A D4
   ld     c, a                         ; 02:880D - 4F
   xor    a                            ; 02:880E - AF
   sbc    hl, bc                       ; 02:880F - ED 42
   ld     (sonic_y), hl                ; 02:8811 - 22 01 D4
   ld     hl, var_D414                 ; 02:8814 - 21 14 D4
   set    7, (hl)                      ; 02:8817 - CB FE
   ret                                 ; 02:8819 - C9

addr_0881A:
   ld     a, (hl)                      ; 02:881A - 7E
   and    a                            ; 02:881B - A7
   ret    m                            ; 02:881C - F8
   push   hl                           ; 02:881D - E5
   call   UNK_03581                    ; 02:881E - CD 81 35
   ld     hl, (var_D212)               ; 02:8821 - 2A 12 D2
   ld     de, $0008                    ; 02:8824 - 11 08 00
   add    hl, de                       ; 02:8827 - 19
   ld     (var_D212), hl               ; 02:8828 - 22 12 D2
   pop    hl                           ; 02:882B - E1
   inc    hl                           ; 02:882C - 23
   jp     addr_0881A                   ; 02:882D - C3 1A 88

UNK_08830:
.db $36, $38, $3A, $FF, $3C, $3E, $FF                                               ; 02:8830

objfunc_3C_UNKNOWN:
   set    5, (ix+24)                   ; 02:8837 - DD CB 18 EE
   ld     a, (ix+17)                   ; 02:883B - DD 7E 11
   cp     $80                          ; 02:883E - FE 80
   jr     nc, addr_08873               ; 02:8840 - 30 31
   ld     (ix+7), $20                  ; 02:8842 - DD 36 07 20
   ld     (ix+8), $00                  ; 02:8846 - DD 36 08 00
   ld     (ix+9), $00                  ; 02:884A - DD 36 09 00
   ld     (ix+13), $14                 ; 02:884E - DD 36 0D 14
   ld     (ix+14), $0C                 ; 02:8852 - DD 36 0E 0C
   ld     hl, $0A02                    ; 02:8856 - 21 02 0A
   ld     (var_D214), hl               ; 02:8859 - 22 14 D2
   call   UNK_03956                    ; 02:885C - CD 56 39
   ld     hl, $0008                    ; 02:885F - 21 08 00
   ld     (g_FF_string_high_byte), hl  ; 02:8862 - 22 0E D2
   call   nc, UNK_035E5                ; 02:8865 - D4 E5 35
   ld     de, UNK_088BE                ; 02:8868 - 11 BE 88
   ld     bc, UNK_088B4                ; 02:886B - 01 B4 88
   call   addr_07C41                   ; 02:886E - CD 41 7C
   jr     addr_088A2                   ; 02:8871 - 18 2F

addr_08873:
   ld     (ix+7), $E0                  ; 02:8873 - DD 36 07 E0
   ld     (ix+8), $FF                  ; 02:8877 - DD 36 08 FF
   ld     (ix+9), $FF                  ; 02:887B - DD 36 09 FF
   ld     (ix+13), $0C                 ; 02:887F - DD 36 0D 0C
   ld     (ix+14), $0C                 ; 02:8883 - DD 36 0E 0C
   ld     hl, $0202                    ; 02:8887 - 21 02 02
   ld     (var_D214), hl               ; 02:888A - 22 14 D2
   call   UNK_03956                    ; 02:888D - CD 56 39
   ld     hl, $0000                    ; 02:8890 - 21 00 00
   ld     (g_FF_string_high_byte), hl  ; 02:8893 - 22 0E D2
   call   nc, UNK_035E5                ; 02:8896 - D4 E5 35
   ld     de, UNK_088BE                ; 02:8899 - 11 BE 88
   ld     bc, UNK_088B9                ; 02:889C - 01 B9 88
   call   addr_07C41                   ; 02:889F - CD 41 7C

addr_088A2:
   ld     a, (var_D223)                ; 02:88A2 - 3A 23 D2
   and    $07                          ; 02:88A5 - E6 07
   ret    nz                           ; 02:88A7 - C0
   inc    (ix+17)                      ; 02:88A8 - DD 34 11
   call   random_A                     ; 02:88AB - CD 25 06
   and    $1E                          ; 02:88AE - E6 1E
   call   z, UNK_091EB                 ; 02:88B0 - CC EB 91
   ret                                 ; 02:88B3 - C9

UNK_088B4:
.db $00, $04, $01, $04, $FF                                                         ; 02:88B4

UNK_088B9:
.db $02, $04, $03, $04, $FF                                                         ; 02:88B9

UNK_088BE:
.db $04, $2A, $2C, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF  ; 02:88BE
.db $FF, $FF, $0C, $2A, $2C, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF  ; 02:88CE
.db $FF, $FF, $FF, $FF, $0E, $10, $0A, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF  ; 02:88DE
.db $FF, $FF, $FF, $FF, $FF, $FF, $0E, $10, $0C, $FF, $FF, $FF, $FF                 ; 02:88EE

objfunc_3D_UNKNOWN:
   set    5, (ix+24)                   ; 02:88FB - DD CB 18 EE
   ld     (ix+13), $08                 ; 02:88FF - DD 36 0D 08
   ld     (ix+14), $0C                 ; 02:8903 - DD 36 0E 0C
   bit    0, (ix+24)                   ; 02:8907 - DD CB 18 46
   jr     nz, addr_08931               ; 02:890B - 20 24
   ld     l, (ix+2)                    ; 02:890D - DD 6E 02
   ld     h, (ix+3)                    ; 02:8910 - DD 66 03
   ld     de, $0008                    ; 02:8913 - 11 08 00
   add    hl, de                       ; 02:8916 - 19
   ld     (ix+18), l                   ; 02:8917 - DD 75 12
   ld     (ix+19), h                   ; 02:891A - DD 74 13
   ld     l, (ix+5)                    ; 02:891D - DD 6E 05
   ld     h, (ix+6)                    ; 02:8920 - DD 66 06
   ld     de, $0008                    ; 02:8923 - 11 08 00
   add    hl, de                       ; 02:8926 - 19
   ld     (ix+20), l                   ; 02:8927 - DD 75 14
   ld     (ix+21), h                   ; 02:892A - DD 74 15
   set    0, (ix+24)                   ; 02:892D - DD CB 18 C6

addr_08931:
   ld     l, (ix+17)                   ; 02:8931 - DD 6E 11
   ld     h, $00                       ; 02:8934 - 26 00
   add    hl, hl                       ; 02:8936 - 29
   ld     de, $898E                    ; 02:8937 - 11 8E 89
   add    hl, de                       ; 02:893A - 19
   ld     e, (hl)                      ; 02:893B - 5E
   inc    hl                           ; 02:893C - 23
   ld     c, (hl)                      ; 02:893D - 4E
   ld     d, $00                       ; 02:893E - 16 00
   ld     b, d                         ; 02:8940 - 42
   bit    7, e                         ; 02:8941 - CB 7B
   jr     z, addr_08946                ; 02:8943 - 28 01
   dec    d                            ; 02:8945 - 15

addr_08946:
   bit    7, c                         ; 02:8946 - CB 79
   jr     z, addr_0894B                ; 02:8948 - 28 01
   dec    b                            ; 02:894A - 05

addr_0894B:
   ld     l, (ix+18)                   ; 02:894B - DD 6E 12
   ld     h, (ix+19)                   ; 02:894E - DD 66 13
   add    hl, de                       ; 02:8951 - 19
   ld     (ix+2), l                    ; 02:8952 - DD 75 02
   ld     (ix+3), h                    ; 02:8955 - DD 74 03
   ld     l, (ix+20)                   ; 02:8958 - DD 6E 14
   ld     h, (ix+21)                   ; 02:895B - DD 66 15
   add    hl, bc                       ; 02:895E - 09
   ld     (ix+5), l                    ; 02:895F - DD 75 05
   ld     (ix+6), h                    ; 02:8962 - DD 74 06
   ld     hl, $0204                    ; 02:8965 - 21 04 02
   ld     (var_D214), hl               ; 02:8968 - 22 14 D2
   call   UNK_03956                    ; 02:896B - CD 56 39
   call   nc, addr_035FD               ; 02:896E - D4 FD 35
   ld     (ix+15), UNK_08987&$FF       ; 02:8971 - DD 36 0F 87
   ld     (ix+16), UNK_08987>>8        ; 02:8975 - DD 36 10 89
   inc    (ix+17)                      ; 02:8979 - DD 34 11
   ld     a, (ix+17)                   ; 02:897C - DD 7E 11
   cp     $B4                          ; 02:897F - FE B4
   ret    c                            ; 02:8981 - D8
   ld     (ix+17), $00                 ; 02:8982 - DD 36 11 00
   ret                                 ; 02:8986 - C9

UNK_08987:
.db $60, $62, $FF, $FF, $FF, $FF, $FF, $40, $00, $40, $02, $40, $04, $40, $07, $3F  ; 02:8987
.db $09, $3F, $0B, $3F, $0D, $3E, $0F, $3E, $12, $3D, $14, $3C, $16, $3B, $18, $3A  ; 02:8997
.db $1A, $3A, $1C, $39, $1E, $37, $20, $36, $22, $35, $24, $34, $26, $32, $27, $31  ; 02:89A7
.db $29, $30, $2B, $2E, $2C, $2C, $2E, $2B, $30, $29, $31, $27, $32, $26, $34, $24  ; 02:89B7
.db $35, $22, $36, $20, $37, $1E, $39, $1C, $3A, $1A, $3A, $18, $3B, $16, $3C, $14  ; 02:89C7
.db $3D, $12, $3E, $0F, $3E, $0D, $3F, $0B, $3F, $09, $3F, $07, $40, $04, $40, $02  ; 02:89D7
.db $40, $00, $40, $FE, $40, $FC, $40, $F9, $40, $F7, $3F, $F5, $3F, $F3, $3F, $F1  ; 02:89E7
.db $3E, $EE, $3E, $EC, $3D, $EA, $3C, $E8, $3B, $E6, $3A, $E4, $3A, $E2, $39, $E0  ; 02:89F7
.db $37, $DE, $36, $DC, $35, $DA, $34, $D9, $32, $D7, $31, $D5, $30, $D4, $2E, $D2  ; 02:8A07
.db $2C, $D0, $2B, $CF, $29, $CE, $27, $CC, $26, $CB, $24, $CA, $22, $C9, $20, $C7  ; 02:8A17
.db $1E, $C6, $1C, $C6, $1A, $C5, $18, $C4, $16, $C3, $14, $C2, $12, $C2, $0F, $C1  ; 02:8A27
.db $0D, $C1, $0B, $C1, $09, $C0, $07, $C0, $04, $C0, $02, $C0, $00, $C0, $FE, $C0  ; 02:8A37
.db $FC, $C0, $F9, $C1, $F7, $C1, $F5, $C1, $F3, $C2, $F1, $C2, $EE, $C3, $EC, $C4  ; 02:8A47
.db $EA, $C5, $E8, $C6, $E6, $C6, $E4, $C7, $E2, $C9, $E0, $CA, $DE, $CB, $DC, $CC  ; 02:8A57
.db $DA, $CE, $D9, $CF, $D7, $D0, $D5, $D2, $D4, $D4, $D2, $D5, $D0, $D7, $CF, $D9  ; 02:8A67
.db $CE, $DA, $CC, $DC, $CB, $DE, $CA, $E0, $C9, $E2, $C7, $E4, $C6, $E6, $C6, $E8  ; 02:8A77
.db $C5, $EA, $C4, $EC, $C3, $EE, $C2, $F1, $C2, $F3, $C1, $F5, $C1, $F7, $C1, $F9  ; 02:8A87
.db $C0, $FC, $C0, $FE, $C0, $00, $C0, $02, $C0, $04, $C0, $07, $C0, $09, $C1, $0B  ; 02:8A97
.db $C1, $0D, $C1, $0F, $C2, $12, $C2, $14, $C3, $16, $C4, $18, $C5, $1A, $C6, $1C  ; 02:8AA7
.db $C6, $1E, $C7, $20, $C9, $22, $CA, $24, $CB, $26, $CC, $27, $CE, $29, $CF, $2B  ; 02:8AB7
.db $D0, $2C, $D2, $2E, $D4, $30, $D5, $31, $D7, $32, $D9, $34, $DA, $35, $DC, $36  ; 02:8AC7
.db $DE, $37, $E0, $39, $E2, $3A, $E4, $3A, $E6, $3B, $E8, $3C, $EA, $3D, $EC, $3E  ; 02:8AD7
.db $EE, $3E, $F1, $3F, $F3, $3F, $F5, $3F, $F7, $40, $F9, $40, $FC, $40, $FE       ; 02:8AE7

objfunc_3E_UNKNOWN:
   set    5, (ix+24)                   ; 02:8AF6 - DD CB 18 EE
   bit    0, (ix+24)                   ; 02:8AFA - DD CB 18 46
   jr     nz, addr_08B14               ; 02:8AFE - 20 14
   ld     l, (ix+2)                    ; 02:8B00 - DD 6E 02
   ld     h, (ix+3)                    ; 02:8B03 - DD 66 03
   ld     de, $000C                    ; 02:8B06 - 11 0C 00
   add    hl, de                       ; 02:8B09 - 19
   ld     (ix+2), l                    ; 02:8B0A - DD 75 02
   ld     (ix+3), h                    ; 02:8B0D - DD 74 03
   set    0, (ix+24)                   ; 02:8B10 - DD CB 18 C6

addr_08B14:
   ld     l, (ix+2)                    ; 02:8B14 - DD 6E 02
   ld     h, (ix+3)                    ; 02:8B17 - DD 66 03
   ld     (g_FF_string_high_byte), hl  ; 02:8B1A - 22 0E D2
   ld     l, (ix+5)                    ; 02:8B1D - DD 6E 05
   ld     h, (ix+6)                    ; 02:8B20 - DD 66 06
   ld     (var_D210), hl               ; 02:8B23 - 22 10 D2
   ld     hl, $0000                    ; 02:8B26 - 21 00 00
   ld     (var_D212), hl               ; 02:8B29 - 22 12 D2
   ld     a, (var_D223)                ; 02:8B2C - 3A 23 D2
   rlca                                ; 02:8B2F - 07
   rlca                                ; 02:8B30 - 07
   and    $03                          ; 02:8B31 - E6 03
   jr     nz, addr_08B49               ; 02:8B33 - 20 14
   ld     hl, UNK_08BBC                ; 02:8B35 - 21 BC 8B
   ld     a, (var_D223)                ; 02:8B38 - 3A 23 D2
   and    $3F                          ; 02:8B3B - E6 3F
   ld     e, a                         ; 02:8B3D - 5F
   cp     $08                          ; 02:8B3E - FE 08
   jr     c, addr_08B71                ; 02:8B40 - 38 2F
   ld     hl, $8BCD                    ; 02:8B42 - 21 CD 8B
   ld     e, $00                       ; 02:8B45 - 1E 00
   jr     addr_08B71                   ; 02:8B47 - 18 28

addr_08B49:
   cp     $01                          ; 02:8B49 - FE 01
   jr     nz, addr_08B54               ; 02:8B4B - 20 07
   ld     hl, $8BCD                    ; 02:8B4D - 21 CD 8B
   ld     e, $00                       ; 02:8B50 - 1E 00
   jr     addr_08B71                   ; 02:8B52 - 18 1D

addr_08B54:
   cp     $02                          ; 02:8B54 - FE 02
   jr     nz, addr_08B6C               ; 02:8B56 - 20 14
   ld     hl, $8BC4                    ; 02:8B58 - 21 C4 8B
   ld     a, (var_D223)                ; 02:8B5B - 3A 23 D2
   and    $3F                          ; 02:8B5E - E6 3F
   ld     e, a                         ; 02:8B60 - 5F
   cp     $08                          ; 02:8B61 - FE 08
   jr     c, addr_08B71                ; 02:8B63 - 38 0C
   ld     hl, $8BCC                    ; 02:8B65 - 21 CC 8B
   ld     e, $00                       ; 02:8B68 - 1E 00
   jr     addr_08B71                   ; 02:8B6A - 18 05

addr_08B6C:
   ld     hl, $8BCC                    ; 02:8B6C - 21 CC 8B
   ld     e, $00                       ; 02:8B6F - 1E 00

addr_08B71:
   ld     d, $00                       ; 02:8B71 - 16 00
   add    hl, de                       ; 02:8B73 - 19
   ld     a, (hl)                      ; 02:8B74 - 7E
   ld     hl, $8BCE                    ; 02:8B75 - 21 CE 8B
   add    a, a                         ; 02:8B78 - 87
   add    a, a                         ; 02:8B79 - 87
   add    a, a                         ; 02:8B7A - 87
   ld     e, a                         ; 02:8B7B - 5F
   add    hl, de                       ; 02:8B7C - 19
   ld     b, $03                       ; 02:8B7D - 06 03

addr_08B7F:
   push   bc                           ; 02:8B7F - C5
   ld     a, (hl)                      ; 02:8B80 - 7E
   inc    hl                           ; 02:8B81 - 23
   ld     e, (hl)                      ; 02:8B82 - 5E
   inc    hl                           ; 02:8B83 - 23
   and    a                            ; 02:8B84 - A7
   jp     m, addr_08B93                ; 02:8B85 - FA 93 8B
   push   hl                           ; 02:8B88 - E5
   ld     d, $00                       ; 02:8B89 - 16 00
   ld     (var_D214), de               ; 02:8B8B - ED 53 14 D2
   call   UNK_03581                    ; 02:8B8F - CD 81 35
   pop    hl                           ; 02:8B92 - E1

addr_08B93:
   pop    bc                           ; 02:8B93 - C1
   djnz   addr_08B7F                   ; 02:8B94 - 10 E9
   ld     (ix+15), b                   ; 02:8B96 - DD 70 0F
   ld     (ix+16), b                   ; 02:8B99 - DD 70 10
   ld     d, (hl)                      ; 02:8B9C - 56
   ld     e, $04                       ; 02:8B9D - 1E 04
   ld     (var_D214), de               ; 02:8B9F - ED 53 14 D2
   inc    hl                           ; 02:8BA3 - 23
   ld     a, (hl)                      ; 02:8BA4 - 7E
   ld     (ix+13), $01                 ; 02:8BA5 - DD 36 0D 01
   ld     (ix+14), a                   ; 02:8BA9 - DD 77 0E
   call   UNK_03956                    ; 02:8BAC - CD 56 39
   call   nc, addr_035FD               ; 02:8BAF - D4 FD 35
   ld     a, (var_D223)                ; 02:8BB2 - 3A 23 D2
   cp     $80                          ; 02:8BB5 - FE 80
   ret    nz                           ; 02:8BB7 - C0
   ld     a, $1D                       ; 02:8BB8 - 3E 1D
   rst    $28                          ; 02:8BBA - EF
   ret                                 ; 02:8BBB - C9

UNK_08BBC:
.db $00, $01, $02, $03, $04, $05, $06, $07, $07, $06, $05, $04, $03, $02, $01, $00  ; 02:8BBC
.db $00, $08, $12, $00, $32, $10, $32, $20, $01, $30, $12, $04, $32, $14, $32, $20  ; 02:8BCC
.db $02, $30, $12, $08, $32, $18, $32, $20, $06, $30, $12, $0C, $32, $1C, $32, $20  ; 02:8BDC
.db $0A, $30, $12, $10, $32, $20, $FF, $00, $0E, $30, $12, $14, $32, $20, $FF, $00  ; 02:8BEC
.db $12, $30, $12, $18, $32, $20, $FF, $00, $16, $30, $12, $1C, $32, $20, $FF, $00  ; 02:8BFC
.db $1A, $30, $12, $20, $FF, $00, $FF, $00, $1E, $30                                ; 02:8C0C

objfunc_3F_UNKNOWN:
   res    5, (ix+24)                   ; 02:8C16 - DD CB 18 AE
   ld     (ix+13), $04                 ; 02:8C1A - DD 36 0D 04
   ld     (ix+14), $0A                 ; 02:8C1E - DD 36 0E 0A
   bit    0, (ix+24)                   ; 02:8C22 - DD CB 18 46
   jr     nz, addr_08C6E               ; 02:8C26 - 20 46
   ld     l, (ix+2)                    ; 02:8C28 - DD 6E 02
   ld     h, (ix+3)                    ; 02:8C2B - DD 66 03
   ld     de, $000A                    ; 02:8C2E - 11 0A 00
   add    hl, de                       ; 02:8C31 - 19
   ld     (ix+2), l                    ; 02:8C32 - DD 75 02
   ld     (ix+3), h                    ; 02:8C35 - DD 74 03
   ld     (ix+18), l                   ; 02:8C38 - DD 75 12
   ld     (ix+19), h                   ; 02:8C3B - DD 74 13
   ld     l, (ix+5)                    ; 02:8C3E - DD 6E 05
   ld     h, (ix+6)                    ; 02:8C41 - DD 66 06
   ld     de, $0008                    ; 02:8C44 - 11 08 00
   add    hl, de                       ; 02:8C47 - 19
   ld     (ix+5), l                    ; 02:8C48 - DD 75 05
   ld     (ix+6), h                    ; 02:8C4B - DD 74 06
   ld     (ix+20), l                   ; 02:8C4E - DD 75 14
   ld     (ix+21), h                   ; 02:8C51 - DD 74 15
   ld     (ix+17), $96                 ; 02:8C54 - DD 36 11 96
   set    0, (ix+24)                   ; 02:8C58 - DD CB 18 C6
   ld     bc, $0000                    ; 02:8C5C - 01 00 00
   ld     de, $0000                    ; 02:8C5F - 11 00 00
   call   addr_036F9                   ; 02:8C62 - CD F9 36
   ld     a, (hl)                      ; 02:8C65 - 7E
   cp     $52                          ; 02:8C66 - FE 52
   jr     z, addr_08C6E                ; 02:8C68 - 28 04
   set    1, (ix+24)                   ; 02:8C6A - DD CB 18 CE

addr_08C6E:
   ld     a, (ix+17)                   ; 02:8C6E - DD 7E 11
   and    a                            ; 02:8C71 - A7
   jr     z, addr_08C8D                ; 02:8C72 - 28 19
   dec    (ix+17)                      ; 02:8C74 - DD 35 11
   jr     z, addr_08C8A                ; 02:8C77 - 28 11

addr_08C79:
   xor    a                            ; 02:8C79 - AF
   ld     (ix+15), a                   ; 02:8C7A - DD 77 0F
   ld     (ix+16), a                   ; 02:8C7D - DD 77 10
   ld     (ix+7), a                    ; 02:8C80 - DD 77 07
   ld     (ix+8), a                    ; 02:8C83 - DD 77 08
   ld     (ix+9), a                    ; 02:8C86 - DD 77 09
   ret                                 ; 02:8C89 - C9

addr_08C8A:
   ld     a, $18                       ; 02:8C8A - 3E 18
   rst    $28                          ; 02:8C8C - EF

addr_08C8D:
   xor    a                            ; 02:8C8D - AF
   bit    1, (ix+24)                   ; 02:8C8E - DD CB 18 4E
   jr     nz, addr_08CAA               ; 02:8C92 - 20 16
   ld     (ix+7), $00                  ; 02:8C94 - DD 36 07 00
   ld     (ix+8), $FF                  ; 02:8C98 - DD 36 08 FF
   ld     (ix+9), $FF                  ; 02:8C9C - DD 36 09 FF
   ld     (ix+15), UNK_08D39&$FF       ; 02:8CA0 - DD 36 0F 39
   ld     (ix+16), UNK_08D39>>8        ; 02:8CA4 - DD 36 10 8D
   jr     addr_08CBC                   ; 02:8CA8 - 18 12

addr_08CAA:
   ld     (ix+7), a                    ; 02:8CAA - DD 77 07
   ld     (ix+8), $01                  ; 02:8CAD - DD 36 08 01
   ld     (ix+9), a                    ; 02:8CB1 - DD 77 09
   ld     (ix+15), UNK_08D41&$FF       ; 02:8CB4 - DD 36 0F 41
   ld     (ix+16), UNK_08D41>>8        ; 02:8CB8 - DD 36 10 8D

addr_08CBC:
   ld     (ix+10), a                   ; 02:8CBC - DD 77 0A
   ld     (ix+11), a                   ; 02:8CBF - DD 77 0B
   ld     (ix+12), a                   ; 02:8CC2 - DD 77 0C
   bit    6, (ix+24)                   ; 02:8CC5 - DD CB 18 76
   jr     nz, addr_08D1A               ; 02:8CC9 - 20 4F
   bit    7, (ix+24)                   ; 02:8CCB - DD CB 18 7E
   jr     nz, addr_08D1A               ; 02:8CCF - 20 49
   ld     hl, $0402                    ; 02:8CD1 - 21 02 04
   ld     (var_D214), hl               ; 02:8CD4 - 22 14 D2
   call   UNK_03956                    ; 02:8CD7 - CD 56 39
   call   nc, addr_035FD               ; 02:8CDA - D4 FD 35
   ld     e, (ix+2)                    ; 02:8CDD - DD 5E 02
   ld     d, (ix+3)                    ; 02:8CE0 - DD 56 03
   ld     hl, (var_D25A)               ; 02:8CE3 - 2A 5A D2
   ld     bc, $FFF0                    ; 02:8CE6 - 01 F0 FF
   add    hl, bc                       ; 02:8CE9 - 09
   and    a                            ; 02:8CEA - A7
   sbc    hl, de                       ; 02:8CEB - ED 52
   jr     nc, addr_08D1A               ; 02:8CED - 30 2B
   ld     hl, (var_D25A)               ; 02:8CEF - 2A 5A D2
   ld     bc, $0110                    ; 02:8CF2 - 01 10 01
   add    hl, bc                       ; 02:8CF5 - 09
   and    a                            ; 02:8CF6 - A7
   sbc    hl, de                       ; 02:8CF7 - ED 52
   jr     c, addr_08D1A                ; 02:8CF9 - 38 1F
   ld     e, (ix+5)                    ; 02:8CFB - DD 5E 05
   ld     d, (ix+6)                    ; 02:8CFE - DD 56 06
   ld     hl, (var_D25D)               ; 02:8D01 - 2A 5D D2
   ld     bc, $FFF0                    ; 02:8D04 - 01 F0 FF
   add    hl, bc                       ; 02:8D07 - 09
   and    a                            ; 02:8D08 - A7
   sbc    hl, de                       ; 02:8D09 - ED 52
   jr     nc, addr_08D1A               ; 02:8D0B - 30 0D
   ld     hl, (var_D25D)               ; 02:8D0D - 2A 5D D2
   ld     bc, $00D0                    ; 02:8D10 - 01 D0 00
   add    hl, bc                       ; 02:8D13 - 09
   and    a                            ; 02:8D14 - A7
   sbc    hl, de                       ; 02:8D15 - ED 52
   jr     c, addr_08D1A                ; 02:8D17 - 38 01
   ret                                 ; 02:8D19 - C9

addr_08D1A:
   ld     l, (ix+18)                   ; 02:8D1A - DD 6E 12
   ld     h, (ix+19)                   ; 02:8D1D - DD 66 13
   ld     (ix+2), l                    ; 02:8D20 - DD 75 02
   ld     (ix+3), h                    ; 02:8D23 - DD 74 03
   ld     l, (ix+20)                   ; 02:8D26 - DD 6E 14
   ld     h, (ix+21)                   ; 02:8D29 - DD 66 15
   ld     (ix+5), l                    ; 02:8D2C - DD 75 05
   ld     (ix+6), h                    ; 02:8D2F - DD 74 06
   ld     (ix+17), $96                 ; 02:8D32 - DD 36 11 96
   jp     addr_08C79                   ; 02:8D36 - C3 79 8C

UNK_08D39:
.db $2E, $FF, $FF, $FF, $FF, $FF, $FF, $FF                                          ; 02:8D39

UNK_08D41:
.db $30, $FF, $FF, $FF, $FF, $FF, $FF                                               ; 02:8D41

objfunc_40_UNKNOWN:
   set    5, (ix+24)                   ; 02:8D48 - DD CB 18 EE
   ld     a, (ix+17)                   ; 02:8D4C - DD 7E 11
   ld     e, a                         ; 02:8D4F - 5F
   ld     d, $00                       ; 02:8D50 - 16 00
   ld     hl, $8E36                    ; 02:8D52 - 21 36 8E
   add    hl, de                       ; 02:8D55 - 19
   ld     e, (hl)                      ; 02:8D56 - 5E
   ld     a, d                         ; 02:8D57 - 7A
   bit    7, e                         ; 02:8D58 - CB 7B
   jr     z, addr_08D5E                ; 02:8D5A - 28 02
   dec    a                            ; 02:8D5C - 3D
   dec    d                            ; 02:8D5D - 15

addr_08D5E:
   ld     l, (ix+4)                    ; 02:8D5E - DD 6E 04
   ld     h, (ix+5)                    ; 02:8D61 - DD 66 05
   add    hl, de                       ; 02:8D64 - 19
   adc    a, (ix+6)                    ; 02:8D65 - DD 8E 06
   ld     (ix+4), l                    ; 02:8D68 - DD 75 04
   ld     (ix+5), h                    ; 02:8D6B - DD 74 05
   ld     (ix+6), a                    ; 02:8D6E - DD 77 06
   ld     l, h                         ; 02:8D71 - 6C
   ld     h, (ix+6)                    ; 02:8D72 - DD 66 06
   ld     a, (var_D223)                ; 02:8D75 - 3A 23 D2
   and    $0F                          ; 02:8D78 - E6 0F
   jr     nz, addr_08D8A               ; 02:8D7A - 20 0E
   inc    (ix+17)                      ; 02:8D7C - DD 34 11
   ld     a, (ix+17)                   ; 02:8D7F - DD 7E 11
   cp     $20                          ; 02:8D82 - FE 20
   jr     c, addr_08D8A                ; 02:8D84 - 38 04
   ld     (ix+17), $00                 ; 02:8D86 - DD 36 11 00

addr_08D8A:
   ld     (var_D2DC), hl               ; 02:8D8A - 22 DC D2
   ld     de, (var_D25D)               ; 02:8D8D - ED 5B 5D D2
   and    a                            ; 02:8D91 - A7
   ld     a, $FF                       ; 02:8D92 - 3E FF
   sbc    hl, de                       ; 02:8D94 - ED 52
   jr     c, addr_08DAB                ; 02:8D96 - 38 13
   ex     de, hl                       ; 02:8D98 - EB
   ld     hl, $000C                    ; 02:8D99 - 21 0C 00
   ld     a, $FF                       ; 02:8D9C - 3E FF
   sbc    hl, de                       ; 02:8D9E - ED 52
   jr     nc, addr_08DAB               ; 02:8DA0 - 30 09
   ld     hl, $00B4                    ; 02:8DA2 - 21 B4 00
   xor    a                            ; 02:8DA5 - AF
   sbc    hl, de                       ; 02:8DA6 - ED 52
   jr     c, addr_08DAB                ; 02:8DA8 - 38 01
   ld     a, e                         ; 02:8DAA - 7B

addr_08DAB:
   ld     (var_D2DB), a                ; 02:8DAB - 32 DB D2
   and    a                            ; 02:8DAE - A7
   ret    z                            ; 02:8DAF - C8
   cp     $FF                          ; 02:8DB0 - FE FF
   ret    z                            ; 02:8DB2 - C8
   add    a, $09                       ; 02:8DB3 - C6 09
   ld     l, a                         ; 02:8DB5 - 6F
   ld     h, $00                       ; 02:8DB6 - 26 00
   ld     (var_D214), hl               ; 02:8DB8 - 22 14 D2
   ld     hl, (var_D25A)               ; 02:8DBB - 2A 5A D2
   ld     (g_FF_string_high_byte), hl  ; 02:8DBE - 22 0E D2
   ld     hl, (var_D25D)               ; 02:8DC1 - 2A 5D D2
   ld     (var_D210), hl               ; 02:8DC4 - 22 10 D2
   ld     a, (iy+g_sprite_count-IYBASE)  ; 02:8DC7 - FD 7E 0A
   ld     hl, (var_D23C)               ; 02:8DCA - 2A 3C D2
   push   af                           ; 02:8DCD - F5
   push   hl                           ; 02:8DCE - E5
   ld     hl, var_D000                 ; 02:8DCF - 21 00 D0
   ld     (var_D23C), hl               ; 02:8DD2 - 22 3C D2
   ld     a, (var_D223)                ; 02:8DD5 - 3A 23 D2
   and    $03                          ; 02:8DD8 - E6 03
   add    a, a                         ; 02:8DDA - 87
   add    a, a                         ; 02:8DDB - 87
   ld     c, a                         ; 02:8DDC - 4F
   ld     b, $00                       ; 02:8DDD - 06 00
   ld     hl, UNK_08E16                ; 02:8DDF - 21 16 8E
   add    hl, bc                       ; 02:8DE2 - 09
   ld     b, $04                       ; 02:8DE3 - 06 04

addr_08DE5:
   push   bc                           ; 02:8DE5 - C5
   ld     c, (hl)                      ; 02:8DE6 - 4E
   inc    hl                           ; 02:8DE7 - 23
   push   hl                           ; 02:8DE8 - E5
   ld     a, (var_D223)                ; 02:8DE9 - 3A 23 D2
   and    $0F                          ; 02:8DEC - E6 0F
   add    a, c                         ; 02:8DEE - 81
   ld     l, a                         ; 02:8DEF - 6F
   ld     h, $00                       ; 02:8DF0 - 26 00
   ld     (var_D212), hl               ; 02:8DF2 - 22 12 D2
   ld     a, $00                       ; 02:8DF5 - 3E 00
   call   UNK_03581                    ; 02:8DF7 - CD 81 35
   ld     hl, (var_D212)               ; 02:8DFA - 2A 12 D2
   ld     de, $0008                    ; 02:8DFD - 11 08 00
   add    hl, de                       ; 02:8E00 - 19
   ld     (var_D212), hl               ; 02:8E01 - 22 12 D2
   ld     a, $02                       ; 02:8E04 - 3E 02
   call   UNK_03581                    ; 02:8E06 - CD 81 35
   pop    hl                           ; 02:8E09 - E1
   pop    bc                           ; 02:8E0A - C1
   djnz   addr_08DE5                   ; 02:8E0B - 10 D8
   pop    hl                           ; 02:8E0D - E1
   pop    af                           ; 02:8E0E - F1
   ld     (var_D23C), hl               ; 02:8E0F - 22 3C D2
   ld     (iy+g_sprite_count-IYBASE), a  ; 02:8E12 - FD 77 0A
   ret                                 ; 02:8E15 - C9

UNK_08E16:
.db $00, $40, $80, $C0, $10, $50, $90, $D0, $20, $60, $A0, $E0, $30, $70, $B0, $F0  ; 02:8E16
.db $08, $48, $88, $C8, $18, $58, $98, $D8, $28, $68, $A8, $E8, $38, $78, $B8, $F8  ; 02:8E26
.db $FE, $FC, $F8, $F0, $E8, $D8, $C8, $C8, $C8, $C8, $D8, $E8, $F0, $F8, $FC, $FE  ; 02:8E36
.db $02, $04, $08, $10, $18, $28, $38, $38, $38, $38, $28, $18, $10, $08, $04, $02  ; 02:8E46

objfunc_41_UNKNOWN:
   set    5, (ix+24)                   ; 02:8E56 - DD CB 18 EE
   ld     a, (ix+18)                   ; 02:8E5A - DD 7E 12
   and    $7F                          ; 02:8E5D - E6 7F
   jr     nz, addr_08E72               ; 02:8E5F - 20 11
   call   random_A                     ; 02:8E61 - CD 25 06
   and    $07                          ; 02:8E64 - E6 07
   ld     e, a                         ; 02:8E66 - 5F
   ld     d, $00                       ; 02:8E67 - 16 00
   ld     hl, $8EC2                    ; 02:8E69 - 21 C2 8E
   add    hl, de                       ; 02:8E6C - 19
   bit    0, (hl)                      ; 02:8E6D - CB 46
   call   nz, UNK_091EB                ; 02:8E6F - C4 EB 91

addr_08E72:
   ld     l, (ix+2)                    ; 02:8E72 - DD 6E 02
   ld     h, (ix+3)                    ; 02:8E75 - DD 66 03
   ld     (g_FF_string_high_byte), hl  ; 02:8E78 - 22 0E D2
   ld     l, (ix+5)                    ; 02:8E7B - DD 6E 05
   ld     h, (ix+6)                    ; 02:8E7E - DD 66 06
   ld     (var_D210), hl               ; 02:8E81 - 22 10 D2
   ld     a, (ix+17)                   ; 02:8E84 - DD 7E 11
   add    a, a                         ; 02:8E87 - 87
   ld     e, a                         ; 02:8E88 - 5F
   ld     d, $00                       ; 02:8E89 - 16 00
   ld     hl, UNK_08EB6                ; 02:8E8B - 21 B6 8E
   add    hl, de                       ; 02:8E8E - 19
   ld     e, (hl)                      ; 02:8E8F - 5E
   ld     (var_D212), de               ; 02:8E90 - ED 53 12 D2
   inc    hl                           ; 02:8E94 - 23
   ld     e, (hl)                      ; 02:8E95 - 5E
   ld     (var_D214), de               ; 02:8E96 - ED 53 14 D2
   ld     a, $0C                       ; 02:8E9A - 3E 0C
   call   UNK_03581                    ; 02:8E9C - CD 81 35
   inc    (ix+18)                      ; 02:8E9F - DD 34 12
   ld     a, (var_D223)                ; 02:8EA2 - 3A 23 D2
   and    $07                          ; 02:8EA5 - E6 07
   ret    nz                           ; 02:8EA7 - C0
   inc    (ix+17)                      ; 02:8EA8 - DD 34 11
   ld     a, (ix+17)                   ; 02:8EAB - DD 7E 11
   cp     $06                          ; 02:8EAE - FE 06
   ret    c                            ; 02:8EB0 - D8
   ld     (ix+17), $00                 ; 02:8EB1 - DD 36 11 00
   ret                                 ; 02:8EB5 - C9

UNK_08EB6:
.db $08, $05, $08, $04, $07, $03, $06, $02, $07, $01, $06, $00, $01, $00, $01, $01  ; 02:8EB6
.db $00, $01, $00, $01                                                              ; 02:8EC6

objfunc_42_UNKNOWN:
   set    5, (ix+24)                   ; 02:8ECA - DD CB 18 EE
   xor    a                            ; 02:8ECE - AF
   ld     (ix+15), a                   ; 02:8ECF - DD 77 0F
   ld     (ix+16), a                   ; 02:8ED2 - DD 77 10
   ld     a, (ix+17)                   ; 02:8ED5 - DD 7E 11
   and    $0F                          ; 02:8ED8 - E6 0F
   jr     nz, addr_08EF8               ; 02:8EDA - 20 1C
   call   random_A                     ; 02:8EDC - CD 25 06
   ld     bc, $0020                    ; 02:8EDF - 01 20 00
   ld     d, $00                       ; 02:8EE2 - 16 00
   and    $3F                          ; 02:8EE4 - E6 3F
   cp     $20                          ; 02:8EE6 - FE 20
   jr     c, addr_08EEF                ; 02:8EE8 - 38 05
   ld     bc, $FFE0                    ; 02:8EEA - 01 E0 FF
   ld     d, $FF                       ; 02:8EED - 16 FF

addr_08EEF:
   ld     (ix+7), c                    ; 02:8EEF - DD 71 07
   ld     (ix+8), b                    ; 02:8EF2 - DD 70 08
   ld     (ix+9), d                    ; 02:8EF5 - DD 72 09

addr_08EF8:
   ld     (ix+10), $A0                 ; 02:8EF8 - DD 36 0A A0
   ld     (ix+11), $FF                 ; 02:8EFC - DD 36 0B FF
   ld     (ix+12), $FF                 ; 02:8F00 - DD 36 0C FF
   ld     l, (ix+2)                    ; 02:8F04 - DD 6E 02
   ld     h, (ix+3)                    ; 02:8F07 - DD 66 03
   ld     (g_FF_string_high_byte), hl  ; 02:8F0A - 22 0E D2
   ex     de, hl                       ; 02:8F0D - EB
   ld     hl, (var_D25A)               ; 02:8F0E - 2A 5A D2
   ld     bc, $0008                    ; 02:8F11 - 01 08 00
   xor    a                            ; 02:8F14 - AF
   sbc    hl, bc                       ; 02:8F15 - ED 42
   jr     nc, addr_08F1B               ; 02:8F17 - 30 02
   ld     l, a                         ; 02:8F19 - 6F
   ld     h, a                         ; 02:8F1A - 67

addr_08F1B:
   and    a                            ; 02:8F1B - A7
   sbc    hl, de                       ; 02:8F1C - ED 52
   jr     nc, addr_08F56               ; 02:8F1E - 30 36
   ld     hl, (var_D25A)               ; 02:8F20 - 2A 5A D2
   ld     bc, $0100                    ; 02:8F23 - 01 00 01
   add    hl, bc                       ; 02:8F26 - 09
   and    a                            ; 02:8F27 - A7
   sbc    hl, de                       ; 02:8F28 - ED 52
   jr     c, addr_08F56                ; 02:8F2A - 38 2A
   ld     l, (ix+5)                    ; 02:8F2C - DD 6E 05
   ld     h, (ix+6)                    ; 02:8F2F - DD 66 06
   ld     (var_D210), hl               ; 02:8F32 - 22 10 D2
   ex     de, hl                       ; 02:8F35 - EB
   ld     hl, (var_D2DC)               ; 02:8F36 - 2A DC D2
   and    a                            ; 02:8F39 - A7
   sbc    hl, de                       ; 02:8F3A - ED 52
   jr     nc, addr_08F56               ; 02:8F3C - 30 18
   ld     hl, (var_D25D)               ; 02:8F3E - 2A 5D D2
   ld     bc, $FFF0                    ; 02:8F41 - 01 F0 FF
   add    hl, bc                       ; 02:8F44 - 09
   and    a                            ; 02:8F45 - A7
   sbc    hl, de                       ; 02:8F46 - ED 52
   jr     nc, addr_08F56               ; 02:8F48 - 30 0C
   ld     hl, (var_D25D)               ; 02:8F4A - 2A 5D D2
   ld     bc, $00C0                    ; 02:8F4D - 01 C0 00
   add    hl, bc                       ; 02:8F50 - 09
   and    a                            ; 02:8F51 - A7
   sbc    hl, de                       ; 02:8F52 - ED 52
   jr     nc, addr_08F5A               ; 02:8F54 - 30 04

addr_08F56:
   ld     (ix+0), $FF                  ; 02:8F56 - DD 36 00 FF

addr_08F5A:
   ld     hl, $0000                    ; 02:8F5A - 21 00 00
   ld     (var_D212), hl               ; 02:8F5D - 22 12 D2
   ld     (var_D214), hl               ; 02:8F60 - 22 14 D2
   ld     a, $0C                       ; 02:8F63 - 3E 0C
   call   UNK_03581                    ; 02:8F65 - CD 81 35
   inc    (ix+17)                      ; 02:8F68 - DD 34 11
   ret                                 ; 02:8F6B - C9

objfunc_43_UNKNOWN:
   ret                                 ; 02:8F6C - C9

objfunc_44_UNKNOWN:
   ld     (ix+13), $0C                 ; 02:8F6D - DD 36 0D 0C
   ld     (ix+14), $20                 ; 02:8F71 - DD 36 0E 20
   ld     hl, $0202                    ; 02:8F75 - 21 02 02
   ld     (var_D214), hl               ; 02:8F78 - 22 14 D2
   call   UNK_03956                    ; 02:8F7B - CD 56 39
   ld     hl, $0800                    ; 02:8F7E - 21 00 08
   ld     (g_FF_string_high_byte), hl  ; 02:8F81 - 22 0E D2
   call   nc, UNK_035E5                ; 02:8F84 - D4 E5 35
   ld     l, (ix+10)                   ; 02:8F87 - DD 6E 0A
   ld     h, (ix+11)                   ; 02:8F8A - DD 66 0B
   ld     a, (ix+12)                   ; 02:8F8D - DD 7E 0C
   ld     de, $0010                    ; 02:8F90 - 11 10 00
   add    hl, de                       ; 02:8F93 - 19
   adc    a, $00                       ; 02:8F94 - CE 00
   ld     c, a                         ; 02:8F96 - 4F
   jp     m, addr_08FA4                ; 02:8F97 - FA A4 8F
   ld     a, h                         ; 02:8F9A - 7C
   cp     $04                          ; 02:8F9B - FE 04
   jr     c, addr_08FA4                ; 02:8F9D - 38 05
   ld     hl, $0300                    ; 02:8F9F - 21 00 03
   ld     c, $00                       ; 02:8FA2 - 0E 00

addr_08FA4:
   ld     (ix+10), l                   ; 02:8FA4 - DD 75 0A
   ld     (ix+11), h                   ; 02:8FA7 - DD 74 0B
   ld     (ix+12), c                   ; 02:8FAA - DD 71 0C
   bit    0, (ix+24)                   ; 02:8FAD - DD CB 18 46
   jp     nz, addr_09029               ; 02:8FB1 - C2 29 90
   ld     de, $FFD0                    ; 02:8FB4 - 11 D0 FF
   ld     l, (ix+2)                    ; 02:8FB7 - DD 6E 02
   ld     h, (ix+3)                    ; 02:8FBA - DD 66 03
   add    hl, de                       ; 02:8FBD - 19
   ld     de, (sonic_x)                ; 02:8FBE - ED 5B FE D3
   and    a                            ; 02:8FC2 - A7
   sbc    hl, de                       ; 02:8FC3 - ED 52
   jr     nc, addr_08FE6               ; 02:8FC5 - 30 1F
   ld     bc, $0030                    ; 02:8FC7 - 01 30 00
   ld     l, (ix+2)                    ; 02:8FCA - DD 6E 02
   ld     h, (ix+3)                    ; 02:8FCD - DD 66 03
   add    hl, bc                       ; 02:8FD0 - 09
   and    a                            ; 02:8FD1 - A7
   sbc    hl, de                       ; 02:8FD2 - ED 52
   jr     c, addr_08FE6                ; 02:8FD4 - 38 10
   set    0, (ix+24)                   ; 02:8FD6 - DD CB 18 C6
   ld     (ix+10), $80                 ; 02:8FDA - DD 36 0A 80
   ld     (ix+11), $FD                 ; 02:8FDE - DD 36 0B FD
   ld     (ix+12), $FF                 ; 02:8FE2 - DD 36 0C FF

addr_08FE6:
   ld     l, (ix+2)                    ; 02:8FE6 - DD 6E 02
   ld     h, (ix+3)                    ; 02:8FE9 - DD 66 03
   ld     de, (sonic_x)                ; 02:8FEC - ED 5B FE D3
   and    a                            ; 02:8FF0 - A7
   sbc    hl, de                       ; 02:8FF1 - ED 52
   jr     c, addr_0900F                ; 02:8FF3 - 38 1A
   ld     (ix+7), $C0                  ; 02:8FF5 - DD 36 07 C0
   ld     (ix+8), $FF                  ; 02:8FF9 - DD 36 08 FF
   ld     (ix+9), $FF                  ; 02:8FFD - DD 36 09 FF
   ld     de, UNK_09059                ; 02:9001 - 11 59 90
   ld     bc, UNK_0904A                ; 02:9004 - 01 4A 90
   call   addr_07C41                   ; 02:9007 - CD 41 7C
   set    1, (ix+24)                   ; 02:900A - DD CB 18 CE
   ret                                 ; 02:900E - C9

addr_0900F:
   ld     (ix+7), $40                  ; 02:900F - DD 36 07 40
   ld     (ix+8), $00                  ; 02:9013 - DD 36 08 00
   ld     (ix+9), $00                  ; 02:9017 - DD 36 09 00
   ld     de, UNK_09059                ; 02:901B - 11 59 90
   ld     bc, UNK_09045                ; 02:901E - 01 45 90
   call   addr_07C41                   ; 02:9021 - CD 41 7C
   res    1, (ix+24)                   ; 02:9024 - DD CB 18 8E
   ret                                 ; 02:9028 - C9

addr_09029:
   ld     bc, UNK_09054                ; 02:9029 - 01 54 90
   bit    1, (ix+24)                   ; 02:902C - DD CB 18 4E
   jr     nz, addr_09035               ; 02:9030 - 20 03
   ld     bc, UNK_0904F                ; 02:9032 - 01 4F 90

addr_09035:
   ld     de, UNK_09059                ; 02:9035 - 11 59 90
   call   addr_07C41                   ; 02:9038 - CD 41 7C
   bit    7, (ix+24)                   ; 02:903B - DD CB 18 7E
   ret    z                            ; 02:903F - C8
   res    0, (ix+24)                   ; 02:9040 - DD CB 18 86
   ret                                 ; 02:9044 - C9

UNK_09045:
.db $00, $04, $01, $04, $FF                                                         ; 02:9045

UNK_0904A:
.db $02, $04, $03, $04, $FF                                                         ; 02:904A

UNK_0904F:
.db $04, $04, $04, $04, $FF                                                         ; 02:904F

UNK_09054:
.db $05, $04, $05, $04, $FF                                                         ; 02:9054

UNK_09059:
.db $44, $46, $FF, $FF, $FF, $FF, $64, $66, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF  ; 02:9059
.db $FF, $FF, $44, $46, $FF, $FF, $FF, $FF, $48, $4A, $FF, $FF, $FF, $FF, $FF, $FF  ; 02:9069
.db $FF, $FF, $FF, $FF, $50, $52, $FF, $FF, $FF, $FF, $70, $72, $FF, $FF, $FF, $FF  ; 02:9079
.db $FF, $FF, $FF, $FF, $FF, $FF, $50, $52, $FF, $FF, $FF, $FF, $4C, $4E, $FF, $FF  ; 02:9089
.db $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $44, $46, $FF, $FF, $FF, $FF, $68, $6A  ; 02:9099
.db $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $50, $52, $FF, $FF, $FF, $FF  ; 02:90A9
.db $6C, $6E, $FF, $FF, $FF, $FF, $FF                                               ; 02:90B9

objfunc_45_UNKNOWN:
   set    5, (ix+24)                   ; 02:90C0 - DD CB 18 EE
   ld     (ix+13), $1E                 ; 02:90C4 - DD 36 0D 1E
   ld     (ix+14), $1C                 ; 02:90C8 - DD 36 0E 1C
   ld     (ix+15), UNK_091DE&$FF       ; 02:90CC - DD 36 0F DE
   ld     (ix+16), UNK_091DE>>8        ; 02:90D0 - DD 36 10 91
   bit    1, (ix+24)                   ; 02:90D4 - DD CB 18 4E
   jr     nz, addr_09100               ; 02:90D8 - 20 26
   ld     l, (ix+2)                    ; 02:90DA - DD 6E 02
   ld     h, (ix+3)                    ; 02:90DD - DD 66 03
   ld     (ix+17), l                   ; 02:90E0 - DD 75 11
   ld     (ix+18), h                   ; 02:90E3 - DD 74 12
   ld     l, (ix+5)                    ; 02:90E6 - DD 6E 05
   ld     h, (ix+6)                    ; 02:90E9 - DD 66 06
   ld     de, $FFFF                    ; 02:90EC - 11 FF FF
   add    hl, de                       ; 02:90EF - 19
   ld     (ix+5), l                    ; 02:90F0 - DD 75 05
   ld     (ix+6), h                    ; 02:90F3 - DD 74 06
   ld     (ix+19), l                   ; 02:90F6 - DD 75 13
   ld     (ix+20), h                   ; 02:90F9 - DD 74 14
   set    1, (ix+24)                   ; 02:90FC - DD CB 18 CE

addr_09100:
   ld     bc, $0010                    ; 02:9100 - 01 10 00
   ld     de, $0020                    ; 02:9103 - 11 20 00
   call   addr_036F9                   ; 02:9106 - CD F9 36
   ld     e, (hl)                      ; 02:9109 - 5E
   ld     d, $00                       ; 02:910A - 16 00
   .IF 0
   ld     a, (var_D2D4)                ; 02:910C - 3A D4 D2
   add    a, a                         ; 02:910F - 87
   ld     c, a                         ; 02:9110 - 4F
   ld     b, d                         ; 02:9111 - 42
   ld     hl, PTRLUT_level_tile_flags  ; 02:9112 - 21 65 3A
   add    hl, bc                       ; 02:9115 - 09
   ld     a, (hl)                      ; 02:9116 - 7E
   inc    hl                           ; 02:9117 - 23
   ld     h, (hl)                      ; 02:9118 - 66
   ld     l, a                         ; 02:9119 - 6F
   .ELSE
   call fetch_PTRLUT_level_tile_flags
   .ENDIF
   add    hl, de                       ; 02:911A - 19
   ld     a, (hl)                      ; 02:911B - 7E
   and    $3F                          ; 02:911C - E6 3F
   ld     c, $00                       ; 02:911E - 0E 00
   ld     l, c                         ; 02:9120 - 69
   ld     h, c                         ; 02:9121 - 61
   cp     $1E                          ; 02:9122 - FE 1E
   jr     z, addr_09148                ; 02:9124 - 28 22
   bit    0, (ix+24)                   ; 02:9126 - DD CB 18 46
   jr     z, addr_09151                ; 02:912A - 28 25
   ld     l, (ix+10)                   ; 02:912C - DD 6E 0A
   ld     h, (ix+11)                   ; 02:912F - DD 66 0B
   ld     a, (ix+12)                   ; 02:9132 - DD 7E 0C
   ld     de, $FFF8                    ; 02:9135 - 11 F8 FF
   add    hl, de                       ; 02:9138 - 19
   adc    a, $FF                       ; 02:9139 - CE FF
   ld     c, a                         ; 02:913B - 4F
   ld     a, h                         ; 02:913C - 7C
   neg                                 ; 02:913D - ED 44
   cp     $02                          ; 02:913F - FE 02
   jr     c, addr_09148                ; 02:9141 - 38 05
   ld     hl, $FF00                    ; 02:9143 - 21 00 FF
   ld     c, $FF                       ; 02:9146 - 0E FF

addr_09148:
   ld     (ix+10), l                   ; 02:9148 - DD 75 0A
   ld     (ix+11), h                   ; 02:914B - DD 74 0B
   ld     (ix+12), c                   ; 02:914E - DD 71 0C

addr_09151:
   ld     e, (ix+2)                    ; 02:9151 - DD 5E 02
   ld     d, (ix+3)                    ; 02:9154 - DD 56 03
   ld     hl, (var_D25A)               ; 02:9157 - 2A 5A D2
   ld     bc, $FFE0                    ; 02:915A - 01 E0 FF
   add    hl, bc                       ; 02:915D - 09
   and    a                            ; 02:915E - A7
   sbc    hl, de                       ; 02:915F - ED 52
   jr     nc, addr_0918A               ; 02:9161 - 30 27
   ld     hl, (var_D25A)               ; 02:9163 - 2A 5A D2
   inc    h                            ; 02:9166 - 24
   and    a                            ; 02:9167 - A7
   sbc    hl, de                       ; 02:9168 - ED 52
   jr     c, addr_0918A                ; 02:916A - 38 1E
   ld     e, (ix+5)                    ; 02:916C - DD 5E 05
   ld     d, (ix+6)                    ; 02:916F - DD 56 06
   ld     hl, (var_D25D)               ; 02:9172 - 2A 5D D2
   ld     bc, $FFE0                    ; 02:9175 - 01 E0 FF
   add    hl, bc                       ; 02:9178 - 09
   and    a                            ; 02:9179 - A7
   sbc    hl, de                       ; 02:917A - ED 52
   jr     nc, addr_0918A               ; 02:917C - 30 0C
   ld     hl, (var_D25D)               ; 02:917E - 2A 5D D2
   ld     bc, $00E0                    ; 02:9181 - 01 E0 00
   add    hl, bc                       ; 02:9184 - 09
   and    a                            ; 02:9185 - A7
   sbc    hl, de                       ; 02:9186 - ED 52
   jr     nc, addr_091B7               ; 02:9188 - 30 2D

addr_0918A:
   ld     l, (ix+17)                   ; 02:918A - DD 6E 11
   ld     h, (ix+18)                   ; 02:918D - DD 66 12
   ld     (ix+2), l                    ; 02:9190 - DD 75 02
   ld     (ix+3), h                    ; 02:9193 - DD 74 03
   ld     l, (ix+19)                   ; 02:9196 - DD 6E 13
   ld     h, (ix+20)                   ; 02:9199 - DD 66 14
   ld     (ix+5), l                    ; 02:919C - DD 75 05
   ld     (ix+6), h                    ; 02:919F - DD 74 06
   xor    a                            ; 02:91A2 - AF
   ld     (ix+1), a                    ; 02:91A3 - DD 77 01
   ld     (ix+4), a                    ; 02:91A6 - DD 77 04
   ld     (ix+10), a                   ; 02:91A9 - DD 77 0A
   ld     (ix+11), a                   ; 02:91AC - DD 77 0B
   ld     (ix+12), a                   ; 02:91AF - DD 77 0C
   res    0, (ix+24)                   ; 02:91B2 - DD CB 18 86
   ret                                 ; 02:91B6 - C9

addr_091B7:
   ld     hl, $0E02                    ; 02:91B7 - 21 02 0E
   ld     (var_D214), hl               ; 02:91BA - 22 14 D2
   call   UNK_03956                    ; 02:91BD - CD 56 39
   ret    c                            ; 02:91C0 - D8
   set    0, (ix+24)                   ; 02:91C1 - DD CB 18 C6
   ld     a, (sonic_vel_y)             ; 02:91C5 - 3A 07 D4
   and    a                            ; 02:91C8 - A7
   jp     p, addr_091D1                ; 02:91C9 - F2 D1 91
   neg                                 ; 02:91CC - ED 44
   cp     $02                          ; 02:91CE - FE 02
   ret    nc                           ; 02:91D0 - D0

addr_091D1:
   ld     e, (ix+10)                   ; 02:91D1 - DD 5E 0A
   ld     d, (ix+11)                   ; 02:91D4 - DD 56 0B
   ld     bc, $0010                    ; 02:91D7 - 01 10 00
   call   addr_07CC1                   ; 02:91DA - CD C1 7C
   ret                                 ; 02:91DD - C9

UNK_091DE:
.db $FE, $FF, $FF, $FF, $FF, $FF, $16, $18, $1A, $1C, $FF, $FF, $FF                 ; 02:91DE

UNK_091EB:
   call   spawn_object                 ; 02:91EB - CD 7B 7C
   ret    c                            ; 02:91EE - D8
   ld     c, $42                       ; 02:91EF - 0E 42
   ld     a, (ix+0)                    ; 02:91F1 - DD 7E 00
   cp     $41                          ; 02:91F4 - FE 41
   jr     nz, addr_09207               ; 02:91F6 - 20 0F
   push   hl                           ; 02:91F8 - E5
   call   random_A                     ; 02:91F9 - CD 25 06
   and    $0F                          ; 02:91FC - E6 0F
   ld     e, a                         ; 02:91FE - 5F
   ld     d, $00                       ; 02:91FF - 16 00
   ld     hl, UNK_09257                ; 02:9201 - 21 57 92
   add    hl, de                       ; 02:9204 - 19
   ld     c, (hl)                      ; 02:9205 - 4E
   pop    hl                           ; 02:9206 - E1

addr_09207:
   ld     a, c                         ; 02:9207 - 79
   ld     e, (ix+2)                    ; 02:9208 - DD 5E 02
   ld     d, (ix+3)                    ; 02:920B - DD 56 03
   ld     c, (ix+5)                    ; 02:920E - DD 4E 05
   ld     b, (ix+6)                    ; 02:9211 - DD 46 06
   push   ix                           ; 02:9214 - DD E5
   push   hl                           ; 02:9216 - E5
   pop    ix                           ; 02:9217 - DD E1
   ld     (ix+0), a                    ; 02:9219 - DD 77 00
   xor    a                            ; 02:921C - AF
   ld     (ix+1), a                    ; 02:921D - DD 77 01
   call   random_A                     ; 02:9220 - CD 25 06
   and    $0F                          ; 02:9223 - E6 0F
   ld     l, a                         ; 02:9225 - 6F
   ld     h, $00                       ; 02:9226 - 26 00
   add    hl, de                       ; 02:9228 - 19
   ld     (ix+2), l                    ; 02:9229 - DD 75 02
   ld     (ix+3), h                    ; 02:922C - DD 74 03
   ld     (ix+4), $00                  ; 02:922F - DD 36 04 00
   call   random_A                     ; 02:9233 - CD 25 06
   and    $0F                          ; 02:9236 - E6 0F
   ld     l, a                         ; 02:9238 - 6F
   xor    a                            ; 02:9239 - AF
   ld     h, a                         ; 02:923A - 67
   add    hl, bc                       ; 02:923B - 09
   ld     (ix+5), l                    ; 02:923C - DD 75 05
   ld     (ix+6), h                    ; 02:923F - DD 74 06
   ld     (ix+17), a                   ; 02:9242 - DD 77 11
   ld     (ix+18), a                   ; 02:9245 - DD 77 12
   ld     (ix+24), a                   ; 02:9248 - DD 77 18
   ld     (ix+7), a                    ; 02:924B - DD 77 07
   ld     (ix+8), a                    ; 02:924E - DD 77 08
   ld     (ix+9), a                    ; 02:9251 - DD 77 09
   pop    ix                           ; 02:9254 - DD E1
   ret                                 ; 02:9256 - C9

UNK_09257:
.db $42, $20, $20, $20, $42, $20, $20, $20, $42, $20, $20, $20, $42, $20, $20, $20  ; 02:9257

objfunc_49_UNKNOWN:
   set    5, (ix+24)                   ; 02:9267 - DD CB 18 EE
   ld     (ix+13), $20                 ; 02:926B - DD 36 0D 20
   ld     (ix+14), $1C                 ; 02:926F - DD 36 0E 1C
   call   addr_07CA6                   ; 02:9273 - CD A6 7C
   ld     (ix+15), UNK_09493&$FF       ; 02:9276 - DD 36 0F 93
   ld     (ix+16), UNK_09493>>8        ; 02:927A - DD 36 10 94
   bit    0, (ix+24)                   ; 02:927E - DD CB 18 46
   jr     nz, addr_092AF               ; 02:9282 - 20 2B
   ld     hl, $02D0                    ; 02:9284 - 21 D0 02
   ld     de, $0290                    ; 02:9287 - 11 90 02
   call   addr_07C8C                   ; 02:928A - CD 8C 7C
   set    1, (iy+var_D209-IYBASE)      ; 02:928D - FD CB 09 CE
   ld     hl, ART_0C_E508              ; 02:9291 - 21 08 E5
   ld     de, $2000                    ; 02:9294 - 11 00 20
   ld     a, $0C                       ; 02:9297 - 3E 0C
   call   load_art                     ; 02:9299 - CD 05 04
   ld     hl, PAL2_boss                ; 02:929C - 21 1C 73
   ld     a, $02                       ; 02:929F - 3E 02
   call   signal_load_palettes         ; 02:92A1 - CD 33 03
   xor    a                            ; 02:92A4 - AF
   ld     (var_D2EC), a                ; 02:92A5 - 32 EC D2
   ld     a, $0B                       ; 02:92A8 - 3E 0B
   rst    $18                          ; 02:92AA - DF
   set    0, (ix+24)                   ; 02:92AB - DD CB 18 C6

addr_092AF:
   ld     a, (ix+17)                   ; 02:92AF - DD 7E 11
   and    a                            ; 02:92B2 - A7
   jr     nz, addr_092DB               ; 02:92B3 - 20 26
   ld     a, (ix+19)                   ; 02:92B5 - DD 7E 13
   add    a, a                         ; 02:92B8 - 87
   add    a, a                         ; 02:92B9 - 87
   ld     e, a                         ; 02:92BA - 5F
   ld     d, $00                       ; 02:92BB - 16 00
   ld     hl, UNK_0947B                ; 02:92BD - 21 7B 94
   add    hl, de                       ; 02:92C0 - 19
   ld     a, (hl)                      ; 02:92C1 - 7E
   ld     (ix+2), a                    ; 02:92C2 - DD 77 02
   inc    hl                           ; 02:92C5 - 23
   ld     a, (hl)                      ; 02:92C6 - 7E
   inc    hl                           ; 02:92C7 - 23
   ld     (ix+3), a                    ; 02:92C8 - DD 77 03
   ld     a, (hl)                      ; 02:92CB - 7E
   inc    hl                           ; 02:92CC - 23
   ld     (ix+5), a                    ; 02:92CD - DD 77 05
   ld     a, (hl)                      ; 02:92D0 - 7E
   inc    hl                           ; 02:92D1 - 23
   ld     (ix+6), a                    ; 02:92D2 - DD 77 06
   inc    (ix+17)                      ; 02:92D5 - DD 34 11
   jp     addr_093F7                   ; 02:92D8 - C3 F7 93

addr_092DB:
   dec    a                            ; 02:92DB - 3D
   jr     nz, addr_09324               ; 02:92DC - 20 46
   ld     a, (ix+19)                   ; 02:92DE - DD 7E 13
   and    a                            ; 02:92E1 - A7
   jr     nz, addr_092F3               ; 02:92E2 - 20 0F
   ld     (ix+10), $80                 ; 02:92E4 - DD 36 0A 80
   ld     (ix+11), $FF                 ; 02:92E8 - DD 36 0B FF
   ld     (ix+12), $FF                 ; 02:92EC - DD 36 0C FF
   jp     addr_092FF                   ; 02:92F0 - C3 FF 92

addr_092F3:
   ld     (ix+10), $80                 ; 02:92F3 - DD 36 0A 80
   ld     (ix+11), $00                 ; 02:92F7 - DD 36 0B 00
   ld     (ix+12), $00                 ; 02:92FB - DD 36 0C 00

addr_092FF:
   ld     hl, UNK_09487                ; 02:92FF - 21 87 94
   ld     a, (ix+19)                   ; 02:9302 - DD 7E 13
   add    a, a                         ; 02:9305 - 87
   ld     e, a                         ; 02:9306 - 5F
   ld     d, $00                       ; 02:9307 - 16 00
   add    hl, de                       ; 02:9309 - 19
   ld     a, (hl)                      ; 02:930A - 7E
   inc    hl                           ; 02:930B - 23
   ld     h, (hl)                      ; 02:930C - 66
   ld     l, a                         ; 02:930D - 6F
   ld     e, (ix+5)                    ; 02:930E - DD 5E 05
   ld     d, (ix+6)                    ; 02:9311 - DD 56 06
   and    a                            ; 02:9314 - A7
   sbc    hl, de                       ; 02:9315 - ED 52
   jp     nz, addr_093F7               ; 02:9317 - C2 F7 93
   inc    (ix+17)                      ; 02:931A - DD 34 11
   ld     (ix+18), $00                 ; 02:931D - DD 36 12 00
   jp     addr_093F7                   ; 02:9321 - C3 F7 93

addr_09324:
   dec    a                            ; 02:9324 - 3D
   jp     nz, addr_093AB               ; 02:9325 - C2 AB 93
   xor    a                            ; 02:9328 - AF
   ld     (ix+10), a                   ; 02:9329 - DD 77 0A
   ld     (ix+11), a                   ; 02:932C - DD 77 0B
   ld     (ix+12), a                   ; 02:932F - DD 77 0C
   inc    (ix+18)                      ; 02:9332 - DD 34 12
   ld     a, (ix+18)                   ; 02:9335 - DD 7E 12
   cp     $64                          ; 02:9338 - FE 64
   jp     nz, addr_093F7               ; 02:933A - C2 F7 93
   inc    (ix+17)                      ; 02:933D - DD 34 11
   ld     l, (ix+2)                    ; 02:9340 - DD 6E 02
   ld     h, (ix+3)                    ; 02:9343 - DD 66 03
   ld     de, $000F                    ; 02:9346 - 11 0F 00
   add    hl, de                       ; 02:9349 - 19
   ld     (g_FF_string_high_byte), hl  ; 02:934A - 22 0E D2
   ld     l, (ix+5)                    ; 02:934D - DD 6E 05
   ld     h, (ix+6)                    ; 02:9350 - DD 66 06
   ld     bc, $0022                    ; 02:9353 - 01 22 00
   add    hl, bc                       ; 02:9356 - 09
   ld     (var_D210), hl               ; 02:9357 - 22 10 D2
   ld     a, (ix+19)                   ; 02:935A - DD 7E 13
   and    a                            ; 02:935D - A7
   jp     z, addr_09432                ; 02:935E - CA 32 94
   ld     a, (var_D2EC)                ; 02:9361 - 3A EC D2
   cp     $08                          ; 02:9364 - FE 08
   jp     nc, addr_093F7               ; 02:9366 - D2 F7 93
   call   spawn_object                 ; 02:9369 - CD 7B 7C
   jp     c, addr_093F7                ; 02:936C - DA F7 93
   push   ix                           ; 02:936F - DD E5
   push   hl                           ; 02:9371 - E5
   pop    ix                           ; 02:9372 - DD E1
   xor    a                            ; 02:9374 - AF
   ld     (ix+0), $2F                  ; 02:9375 - DD 36 00 2F
   ld     hl, (g_FF_string_high_byte)  ; 02:9379 - 2A 0E D2
   ld     (ix+1), a                    ; 02:937C - DD 77 01
   ld     (ix+2), l                    ; 02:937F - DD 75 02
   ld     (ix+3), h                    ; 02:9382 - DD 74 03
   ld     hl, (var_D210)               ; 02:9385 - 2A 10 D2
   ld     (ix+4), a                    ; 02:9388 - DD 77 04
   ld     (ix+5), l                    ; 02:938B - DD 75 05
   ld     (ix+6), h                    ; 02:938E - DD 74 06
   ld     (ix+24), a                   ; 02:9391 - DD 77 18
   ld     (ix+7), a                    ; 02:9394 - DD 77 07
   ld     (ix+8), a                    ; 02:9397 - DD 77 08
   ld     (ix+9), a                    ; 02:939A - DD 77 09
   ld     (ix+10), a                   ; 02:939D - DD 77 0A
   ld     (ix+11), a                   ; 02:93A0 - DD 77 0B
   ld     (ix+12), a                   ; 02:93A3 - DD 77 0C
   pop    ix                           ; 02:93A6 - DD E1
   jp     addr_093F7                   ; 02:93A8 - C3 F7 93

addr_093AB:
   ld     a, (ix+19)                   ; 02:93AB - DD 7E 13
   and    a                            ; 02:93AE - A7
   jr     nz, addr_093C0               ; 02:93AF - 20 0F
   ld     (ix+10), $80                 ; 02:93B1 - DD 36 0A 80
   ld     (ix+11), $00                 ; 02:93B5 - DD 36 0B 00
   ld     (ix+12), $00                 ; 02:93B9 - DD 36 0C 00
   jp     addr_093CC                   ; 02:93BD - C3 CC 93

addr_093C0:
   ld     (ix+10), $80                 ; 02:93C0 - DD 36 0A 80
   ld     (ix+11), $FF                 ; 02:93C4 - DD 36 0B FF
   ld     (ix+12), $FF                 ; 02:93C8 - DD 36 0C FF

addr_093CC:
   ld     hl, UNK_0948D                ; 02:93CC - 21 8D 94
   ld     a, (ix+19)                   ; 02:93CF - DD 7E 13
   add    a, a                         ; 02:93D2 - 87
   ld     e, a                         ; 02:93D3 - 5F
   ld     d, $00                       ; 02:93D4 - 16 00
   add    hl, de                       ; 02:93D6 - 19
   ld     a, (hl)                      ; 02:93D7 - 7E
   inc    hl                           ; 02:93D8 - 23
   ld     h, (hl)                      ; 02:93D9 - 66
   ld     l, a                         ; 02:93DA - 6F
   ld     e, (ix+5)                    ; 02:93DB - DD 5E 05
   ld     d, (ix+6)                    ; 02:93DE - DD 56 06
   xor    a                            ; 02:93E1 - AF
   sbc    hl, de                       ; 02:93E2 - ED 52
   jr     nz, addr_093F7               ; 02:93E4 - 20 11
   ld     (ix+17), a                   ; 02:93E6 - DD 77 11
   inc    (ix+19)                      ; 02:93E9 - DD 34 13
   ld     a, (ix+19)                   ; 02:93EC - DD 7E 13
   cp     $03                          ; 02:93EF - FE 03
   jr     c, addr_093F7                ; 02:93F1 - 38 04
   ld     (ix+19), $00                 ; 02:93F3 - DD 36 13 00

addr_093F7:
   ld     hl, $00A2                    ; 02:93F7 - 21 A2 00
   ld     (var_D216), hl               ; 02:93FA - 22 16 D2
   call   addr_077BE                   ; 02:93FD - CD BE 77
   ld     a, (var_D2EC)                ; 02:9400 - 3A EC D2
   cp     $08                          ; 02:9403 - FE 08
   ret    nc                           ; 02:9405 - D0
   bit    7, (ix+12)                   ; 02:9406 - DD CB 0C 7E
   ret    z                            ; 02:940A - C8
   ld     l, (ix+2)                    ; 02:940B - DD 6E 02
   ld     h, (ix+3)                    ; 02:940E - DD 66 03
   ld     (g_FF_string_high_byte), hl  ; 02:9411 - 22 0E D2
   ld     l, (ix+5)                    ; 02:9414 - DD 6E 05
   ld     h, (ix+6)                    ; 02:9417 - DD 66 06
   ld     (var_D210), hl               ; 02:941A - 22 10 D2
   ld     hl, $0010                    ; 02:941D - 21 10 00
   ld     (var_D212), hl               ; 02:9420 - 22 12 D2
   ld     hl, $0030                    ; 02:9423 - 21 30 00
   ld     (var_D214), hl               ; 02:9426 - 22 14 D2
   ld     a, (var_D223)                ; 02:9429 - 3A 23 D2
   and    $02                          ; 02:942C - E6 02
   call   UNK_03581                    ; 02:942E - CD 81 35
   ret                                 ; 02:9431 - C9

addr_09432:
   ld     l, (ix+2)                    ; 02:9432 - DD 6E 02
   ld     h, (ix+3)                    ; 02:9435 - DD 66 03
   ld     de, $0004                    ; 02:9438 - 11 04 00
   add    hl, de                       ; 02:943B - 19
   ld     (g_FF_string_high_byte), hl  ; 02:943C - 22 0E D2
   ld     l, (ix+5)                    ; 02:943F - DD 6E 05
   ld     h, (ix+6)                    ; 02:9442 - DD 66 06
   ld     de, $FFFA                    ; 02:9445 - 11 FA FF
   add    hl, de                       ; 02:9448 - 19
   ld     (var_D210), hl               ; 02:9449 - 22 10 D2
   ld     hl, $FF00                    ; 02:944C - 21 00 FF
   ld     (var_D212), hl               ; 02:944F - 22 12 D2
   ld     hl, $FF00                    ; 02:9452 - 21 00 FF
   ld     (var_D214), hl               ; 02:9455 - 22 14 D2
   ld     c, $04                       ; 02:9458 - 0E 04
   call   addr_085D1                   ; 02:945A - CD D1 85
   ld     l, (ix+2)                    ; 02:945D - DD 6E 02
   ld     h, (ix+3)                    ; 02:9460 - DD 66 03
   ld     de, $0020                    ; 02:9463 - 11 20 00
   add    hl, de                       ; 02:9466 - 19
   ld     (g_FF_string_high_byte), hl  ; 02:9467 - 22 0E D2
   ld     hl, $0100                    ; 02:946A - 21 00 01
   ld     (var_D212), hl               ; 02:946D - 22 12 D2
   ld     c, $04                       ; 02:9470 - 0E 04
   call   addr_085D1                   ; 02:9472 - CD D1 85
   ld     a, $01                       ; 02:9475 - 3E 01
   rst    $28                          ; 02:9477 - EF
   jp     addr_093F7                   ; 02:9478 - C3 F7 93

UNK_0947B:
.db $3C, $03, $60, $03, $EC, $02, $60, $02, $8C, $03, $60, $02                      ; 02:947B

UNK_09487:
.db $28, $03, $B0, $02, $B0, $02                                                    ; 02:9487

UNK_0948D:
.db $60, $03, $60, $02, $60, $02                                                    ; 02:948D

UNK_09493:
.db $20, $22, $24, $26, $28, $FF, $40, $42, $44, $46, $48, $FF, $60, $62, $64, $66  ; 02:9493
.db $68, $FF                                                                        ; 02:94A3

objfunc_2F_UNKNOWN:
   set    5, (ix+24)                   ; 02:94A5 - DD CB 18 EE
   ld     (ix+13), $08                 ; 02:94A9 - DD 36 0D 08
   ld     (ix+14), $0A                 ; 02:94AD - DD 36 0E 0A
   ld     hl, $0404                    ; 02:94B1 - 21 04 04
   ld     (var_D214), hl               ; 02:94B4 - 22 14 D2
   call   UNK_03956                    ; 02:94B7 - CD 56 39
   call   nc, addr_035FD               ; 02:94BA - D4 FD 35
   bit    1, (ix+24)                   ; 02:94BD - DD CB 18 4E
   jr     nz, addr_094E2               ; 02:94C1 - 20 1F
   set    1, (ix+24)                   ; 02:94C3 - DD CB 18 CE
   ld     hl, (sonic_x)                ; 02:94C7 - 2A FE D3
   ld     de, $000C                    ; 02:94CA - 11 0C 00
   add    hl, de                       ; 02:94CD - 19
   ex     de, hl                       ; 02:94CE - EB
   ld     l, (ix+2)                    ; 02:94CF - DD 6E 02
   ld     h, (ix+3)                    ; 02:94D2 - DD 66 03
   ld     bc, $0008                    ; 02:94D5 - 01 08 00
   add    hl, bc                       ; 02:94D8 - 09
   and    a                            ; 02:94D9 - A7
   sbc    hl, de                       ; 02:94DA - ED 52
   jr     nc, addr_094E2               ; 02:94DC - 30 04
   set    2, (ix+24)                   ; 02:94DE - DD CB 18 D6

addr_094E2:
   bit    0, (ix+24)                   ; 02:94E2 - DD CB 18 46
   jr     nz, addr_09518               ; 02:94E6 - 20 30
   ld     (ix+10), $40                 ; 02:94E8 - DD 36 0A 40
   ld     (ix+11), $00                 ; 02:94EC - DD 36 0B 00
   ld     (ix+12), $00                 ; 02:94F0 - DD 36 0C 00
   ld     hl, UNK_09698                ; 02:94F4 - 21 98 96
   bit    2, (ix+24)                   ; 02:94F7 - DD CB 18 56
   jr     z, addr_09500                ; 02:94FB - 28 03
   ld     hl, UNK_09688                ; 02:94FD - 21 88 96

addr_09500:
   ld     (ix+15), l                   ; 02:9500 - DD 75 0F
   ld     (ix+16), h                   ; 02:9503 - DD 74 10
   ld     hl, (sonic_y)                ; 02:9506 - 2A 01 D4
   ld     e, (ix+5)                    ; 02:9509 - DD 5E 05
   ld     d, (ix+6)                    ; 02:950C - DD 56 06
   and    a                            ; 02:950F - A7
   sbc    hl, de                       ; 02:9510 - ED 52
   ret    nc                           ; 02:9512 - D0
   set    0, (ix+24)                   ; 02:9513 - DD CB 18 C6
   ret                                 ; 02:9517 - C9

addr_09518:
   ld     c, (ix+2)                    ; 02:9518 - DD 4E 02
   ld     b, (ix+3)                    ; 02:951B - DD 46 03
   ld     hl, $FFF0                    ; 02:951E - 21 F0 FF
   add    hl, bc                       ; 02:9521 - 09
   ld     de, (var_D25A)               ; 02:9522 - ED 5B 5A D2
   and    a                            ; 02:9526 - A7
   sbc    hl, de                       ; 02:9527 - ED 52
   jr     c, addr_0954F                ; 02:9529 - 38 24
   ld     l, c                         ; 02:952B - 69
   ld     h, b                         ; 02:952C - 60
   inc    d                            ; 02:952D - 14
   and    a                            ; 02:952E - A7
   sbc    hl, de                       ; 02:952F - ED 52
   jr     nc, addr_0954F               ; 02:9531 - 30 1C
   ld     c, (ix+5)                    ; 02:9533 - DD 4E 05
   ld     b, (ix+6)                    ; 02:9536 - DD 46 06
   ld     hl, $FFF0                    ; 02:9539 - 21 F0 FF
   add    hl, bc                       ; 02:953C - 09
   ld     de, (var_D25D)               ; 02:953D - ED 5B 5D D2
   and    a                            ; 02:9541 - A7
   sbc    hl, de                       ; 02:9542 - ED 52
   jr     c, addr_0954F                ; 02:9544 - 38 09
   ld     hl, $00C0                    ; 02:9546 - 21 C0 00
   add    hl, de                       ; 02:9549 - 19
   and    a                            ; 02:954A - A7
   sbc    hl, bc                       ; 02:954B - ED 42
   jr     nc, addr_09553               ; 02:954D - 30 04

addr_0954F:
   ld     (ix+0), $FF                  ; 02:954F - DD 36 00 FF

addr_09553:
   xor    a                            ; 02:9553 - AF
   ld     hl, $0002                    ; 02:9554 - 21 02 00
   bit    2, (ix+24)                   ; 02:9557 - DD CB 18 56
   jr     nz, addr_09561               ; 02:955B - 20 04
   dec    a                            ; 02:955D - 3D
   ld     hl, $FFFE                    ; 02:955E - 21 FE FF

addr_09561:
   ld     e, (ix+7)                    ; 02:9561 - DD 5E 07
   ld     d, (ix+8)                    ; 02:9564 - DD 56 08
   add    hl, de                       ; 02:9567 - 19
   adc    a, (ix+9)                    ; 02:9568 - DD 8E 09
   ld     c, a                         ; 02:956B - 4F
   ld     a, h                         ; 02:956C - 7C
   ld     de, $0100                    ; 02:956D - 11 00 01
   bit    7, c                         ; 02:9570 - CB 79
   jr     z, addr_0957F                ; 02:9572 - 28 0B
   ld     a, l                         ; 02:9574 - 7D
   cpl                                 ; 02:9575 - 2F
   ld     e, a                         ; 02:9576 - 5F
   ld     a, h                         ; 02:9577 - 7C
   cpl                                 ; 02:9578 - 2F
   ld     d, a                         ; 02:9579 - 57
   inc    de                           ; 02:957A - 13
   ld     a, d                         ; 02:957B - 7A
   ld     de, $FF00                    ; 02:957C - 11 00 FF

addr_0957F:
   and    a                            ; 02:957F - A7
   jr     z, addr_09583                ; 02:9580 - 28 01
   ex     de, hl                       ; 02:9582 - EB

addr_09583:
   ld     (ix+7), l                    ; 02:9583 - DD 75 07
   ld     (ix+8), h                    ; 02:9586 - DD 74 08
   ld     (ix+9), c                    ; 02:9589 - DD 71 09
   ld     hl, (sonic_y)                ; 02:958C - 2A 01 D4
   ld     de, $0010                    ; 02:958F - 11 10 00
   add    hl, de                       ; 02:9592 - 19
   ex     de, hl                       ; 02:9593 - EB
   ld     l, (ix+5)                    ; 02:9594 - DD 6E 05
   ld     h, (ix+6)                    ; 02:9597 - DD 66 06
   ld     bc, $0008                    ; 02:959A - 01 08 00
   add    hl, bc                       ; 02:959D - 09
   and    a                            ; 02:959E - A7
   sbc    hl, de                       ; 02:959F - ED 52
   ld     a, $FF                       ; 02:95A1 - 3E FF
   ld     hl, $FFFE                    ; 02:95A3 - 21 FE FF
   bit    7, (ix+12)                   ; 02:95A6 - DD CB 0C 7E
   jr     nz, addr_095AF               ; 02:95AA - 20 03
   ld     hl, $FFFC                    ; 02:95AC - 21 FC FF

addr_095AF:
   jr     nc, addr_095BE               ; 02:95AF - 30 0D
   inc    a                            ; 02:95B1 - 3C
   ld     hl, $0002                    ; 02:95B2 - 21 02 00
   bit    7, (ix+12)                   ; 02:95B5 - DD CB 0C 7E
   jr     z, addr_095BE                ; 02:95B9 - 28 03
   ld     hl, $0004                    ; 02:95BB - 21 04 00

addr_095BE:
   ld     e, (ix+10)                   ; 02:95BE - DD 5E 0A
   ld     d, (ix+11)                   ; 02:95C1 - DD 56 0B
   add    hl, de                       ; 02:95C4 - 19
   adc    a, (ix+12)                   ; 02:95C5 - DD 8E 0C
   ld     c, a                         ; 02:95C8 - 4F
   ld     a, h                         ; 02:95C9 - 7C
   ld     de, $0100                    ; 02:95CA - 11 00 01
   bit    7, c                         ; 02:95CD - CB 79
   jr     z, addr_095DC                ; 02:95CF - 28 0B
   ld     a, l                         ; 02:95D1 - 7D
   cpl                                 ; 02:95D2 - 2F
   ld     e, a                         ; 02:95D3 - 5F
   ld     a, h                         ; 02:95D4 - 7C
   cpl                                 ; 02:95D5 - 2F
   ld     d, a                         ; 02:95D6 - 57
   inc    de                           ; 02:95D7 - 13
   ld     a, d                         ; 02:95D8 - 7A
   ld     de, $FF00                    ; 02:95D9 - 11 00 FF

addr_095DC:
   and    a                            ; 02:95DC - A7
   jr     z, addr_095E0                ; 02:95DD - 28 01
   ex     de, hl                       ; 02:95DF - EB

addr_095E0:
   ld     (ix+10), l                   ; 02:95E0 - DD 75 0A
   ld     (ix+11), h                   ; 02:95E3 - DD 74 0B
   ld     (ix+12), c                   ; 02:95E6 - DD 71 0C
   ld     hl, UNK_09688                ; 02:95E9 - 21 88 96
   bit    7, (ix+9)                    ; 02:95EC - DD CB 09 7E
   jr     z, addr_095F5                ; 02:95F0 - 28 03
   ld     hl, UNK_09698                ; 02:95F2 - 21 98 96

addr_095F5:
   push   hl                           ; 02:95F5 - E5
   ld     l, (ix+7)                    ; 02:95F6 - DD 6E 07
   ld     h, (ix+8)                    ; 02:95F9 - DD 66 08
   bit    7, h                         ; 02:95FC - CB 7C
   jr     z, addr_09607                ; 02:95FE - 28 07
   ld     a, l                         ; 02:9600 - 7D
   cpl                                 ; 02:9601 - 2F
   ld     l, a                         ; 02:9602 - 6F
   ld     a, h                         ; 02:9603 - 7C
   cpl                                 ; 02:9604 - 2F
   ld     h, a                         ; 02:9605 - 67
   inc    hl                           ; 02:9606 - 23

addr_09607:
   ld     e, (ix+17)                   ; 02:9607 - DD 5E 11
   ld     d, (ix+18)                   ; 02:960A - DD 56 12
   add    hl, de                       ; 02:960D - 19
   ld     (ix+17), l                   ; 02:960E - DD 75 11
   ld     (ix+18), h                   ; 02:9611 - DD 74 12
   ld     a, h                         ; 02:9614 - 7C
   and    $08                          ; 02:9615 - E6 08
   ld     e, a                         ; 02:9617 - 5F
   ld     d, $00                       ; 02:9618 - 16 00
   pop    hl                           ; 02:961A - E1
   add    hl, de                       ; 02:961B - 19
   ld     (ix+15), l                   ; 02:961C - DD 75 0F
   ld     (ix+16), h                   ; 02:961F - DD 74 10
   ld     l, (ix+2)                    ; 02:9622 - DD 6E 02
   ld     h, (ix+3)                    ; 02:9625 - DD 66 03
   ld     de, $FFF9                    ; 02:9628 - 11 F9 FF
   bit    7, (ix+9)                    ; 02:962B - DD CB 09 7E
   jr     z, addr_09634                ; 02:962F - 28 03
   ld     de, $000F                    ; 02:9631 - 11 0F 00

addr_09634:
   add    hl, de                       ; 02:9634 - 19
   ld     (g_FF_string_high_byte), hl  ; 02:9635 - 22 0E D2
   ld     l, (ix+5)                    ; 02:9638 - DD 6E 05
   ld     h, (ix+6)                    ; 02:963B - DD 66 06
   ld     (var_D210), hl               ; 02:963E - 22 10 D2
   ld     a, (var_D223)                ; 02:9641 - 3A 23 D2
   and    $0F                          ; 02:9644 - E6 0F
   ret    nz                           ; 02:9646 - C0
   call   spawn_object                 ; 02:9647 - CD 7B 7C
   ret    c                            ; 02:964A - D8
   push   ix                           ; 02:964B - DD E5
   push   hl                           ; 02:964D - E5
   pop    ix                           ; 02:964E - DD E1
   xor    a                            ; 02:9650 - AF
   ld     (ix+0), $2A                  ; 02:9651 - DD 36 00 2A
   ld     hl, (g_FF_string_high_byte)  ; 02:9655 - 2A 0E D2
   ld     (ix+1), a                    ; 02:9658 - DD 77 01
   ld     (ix+2), l                    ; 02:965B - DD 75 02
   ld     (ix+3), h                    ; 02:965E - DD 74 03
   ld     hl, (var_D210)               ; 02:9661 - 2A 10 D2
   ld     (ix+4), a                    ; 02:9664 - DD 77 04
   ld     (ix+5), l                    ; 02:9667 - DD 75 05
   ld     (ix+6), h                    ; 02:966A - DD 74 06
   ld     (ix+17), a                   ; 02:966D - DD 77 11
   ld     (ix+18), a                   ; 02:9670 - DD 77 12
   ld     (ix+7), a                    ; 02:9673 - DD 77 07
   ld     (ix+8), a                    ; 02:9676 - DD 77 08
   ld     (ix+9), a                    ; 02:9679 - DD 77 09
   ld     (ix+10), a                   ; 02:967C - DD 77 0A
   ld     (ix+11), a                   ; 02:967F - DD 77 0B
   ld     (ix+12), a                   ; 02:9682 - DD 77 0C
   pop    ix                           ; 02:9685 - DD E1
   ret                                 ; 02:9687 - C9

UNK_09688:
.db $3C, $3E, $FF, $FF, $FF, $FF, $FF, $FF, $38, $3A, $FF, $FF, $FF, $FF, $FF, $FF  ; 02:9688

UNK_09698:
.db $56, $58, $FF, $FF, $FF, $FF, $FF, $FF, $5A, $5C, $FF, $FF, $FF, $FF, $FF, $FF  ; 02:9698

objfunc_2A_UNKNOWN:
   set    5, (ix+24)                   ; 02:96A8 - DD CB 18 EE
   xor    a                            ; 02:96AC - AF
   ld     (ix+15), a                   ; 02:96AD - DD 77 0F
   ld     (ix+16), a                   ; 02:96B0 - DD 77 10
   ld     l, (ix+2)                    ; 02:96B3 - DD 6E 02
   ld     h, (ix+3)                    ; 02:96B6 - DD 66 03
   ld     (g_FF_string_high_byte), hl  ; 02:96B9 - 22 0E D2
   ld     l, (ix+5)                    ; 02:96BC - DD 6E 05
   ld     h, (ix+6)                    ; 02:96BF - DD 66 06
   ld     (var_D210), hl               ; 02:96C2 - 22 10 D2
   ld     l, a                         ; 02:96C5 - 6F
   ld     h, a                         ; 02:96C6 - 67
   ld     (var_D212), hl               ; 02:96C7 - 22 12 D2
   ld     (var_D214), hl               ; 02:96CA - 22 14 D2
   ld     e, (ix+18)                   ; 02:96CD - DD 5E 12
   ld     d, $00                       ; 02:96D0 - 16 00
   ld     hl, UNK_096F5                ; 02:96D2 - 21 F5 96
   add    hl, de                       ; 02:96D5 - 19
   ld     a, (hl)                      ; 02:96D6 - 7E
   call   UNK_03581                    ; 02:96D7 - CD 81 35
   inc    (ix+17)                      ; 02:96DA - DD 34 11
   ld     a, (ix+17)                   ; 02:96DD - DD 7E 11
   cp     $0C                          ; 02:96E0 - FE 0C
   ret    c                            ; 02:96E2 - D8
   ld     (ix+17), $00                 ; 02:96E3 - DD 36 11 00
   inc    (ix+18)                      ; 02:96E7 - DD 34 12
   ld     a, (ix+18)                   ; 02:96EA - DD 7E 12
   cp     $03                          ; 02:96ED - FE 03
   ret    c                            ; 02:96EF - D8
   ld     (ix+0), $FF                  ; 02:96F0 - DD 36 00 FF
   ret                                 ; 02:96F4 - C9

UNK_096F5:
.db $1C, $1E, $5E                                                                   ; 02:96F5

objfunc_20_UNKNOWN:
   set    5, (ix+24)                   ; 02:96F8 - DD CB 18 EE
   xor    a                            ; 02:96FC - AF
   ld     (ix+15), a                   ; 02:96FD - DD 77 0F
   ld     (ix+16), a                   ; 02:9700 - DD 77 10
   ld     a, (iy+g_sprite_count-IYBASE)  ; 02:9703 - FD 7E 0A
   ld     hl, (var_D23C)               ; 02:9706 - 2A 3C D2
   push   af                           ; 02:9709 - F5
   push   hl                           ; 02:970A - E5
   ld     a, (var_D2DE)                ; 02:970B - 3A DE D2
   cp     $24                          ; 02:970E - FE 24
   jr     nc, addr_09767               ; 02:9710 - 30 55
   ld     e, a                         ; 02:9712 - 5F
   ld     d, $00                       ; 02:9713 - 16 00
   ld     hl, var_D000                 ; 02:9715 - 21 00 D0
   add    hl, de                       ; 02:9718 - 19
   ld     (var_D23C), hl               ; 02:9719 - 22 3C D2
   ld     l, (ix+2)                    ; 02:971C - DD 6E 02
   ld     h, (ix+3)                    ; 02:971F - DD 66 03
   ld     (g_FF_string_high_byte), hl  ; 02:9722 - 22 0E D2
   ld     l, (ix+5)                    ; 02:9725 - DD 6E 05
   ld     h, (ix+6)                    ; 02:9728 - DD 66 06
   ld     (var_D210), hl               ; 02:972B - 22 10 D2
   ld     hl, $0000                    ; 02:972E - 21 00 00
   ld     (var_D212), hl               ; 02:9731 - 22 12 D2
   ld     (var_D214), hl               ; 02:9734 - 22 14 D2
   ld     a, (ix+18)                   ; 02:9737 - DD 7E 12
   and    a                            ; 02:973A - A7
   jr     z, addr_0974B                ; 02:973B - 28 0E
   cp     $08                          ; 02:973D - FE 08
   jr     nc, addr_0974B               ; 02:973F - 30 0A
   ld     hl, $0004                    ; 02:9741 - 21 04 00
   ld     (var_D212), hl               ; 02:9744 - 22 12 D2
   ld     a, $0C                       ; 02:9747 - 3E 0C
   jr     addr_0975C                   ; 02:9749 - 18 11

addr_0974B:
   ld     a, $40                       ; 02:974B - 3E 40
   call   UNK_03581                    ; 02:974D - CD 81 35
   ld     hl, (var_D212)               ; 02:9750 - 2A 12 D2
   ld     de, $0008                    ; 02:9753 - 11 08 00
   add    hl, de                       ; 02:9756 - 19
   ld     (var_D212), hl               ; 02:9757 - 22 12 D2
   ld     a, $42                       ; 02:975A - 3E 42

addr_0975C:
   call   UNK_03581                    ; 02:975C - CD 81 35
   ld     a, (var_D2DE)                ; 02:975F - 3A DE D2
   add    a, $06                       ; 02:9762 - C6 06
   ld     (var_D2DE), a                ; 02:9764 - 32 DE D2

addr_09767:
   pop    hl                           ; 02:9767 - E1
   pop    af                           ; 02:9768 - F1
   ld     (var_D23C), hl               ; 02:9769 - 22 3C D2
   ld     (iy+g_sprite_count-IYBASE), a  ; 02:976C - FD 77 0A
   ld     (ix+13), $0A                 ; 02:976F - DD 36 0D 0A
   ld     (ix+14), $0C                 ; 02:9773 - DD 36 0E 0C
   ld     a, (ix+18)                   ; 02:9777 - DD 7E 12
   and    a                            ; 02:977A - A7
   jr     z, addr_09797                ; 02:977B - 28 1A
   ld     c, $00                       ; 02:977D - 0E 00
   ld     b, c                         ; 02:977F - 41
   ld     d, c                         ; 02:9780 - 51
   ld     (ix+10), c                   ; 02:9781 - DD 71 0A
   ld     (ix+11), c                   ; 02:9784 - DD 71 0B
   ld     (ix+12), c                   ; 02:9787 - DD 71 0C
   dec    (ix+18)                      ; 02:978A - DD 35 12
   jp     nz, addr_09809               ; 02:978D - C2 09 98
   ld     (ix+0), $FF                  ; 02:9790 - DD 36 00 FF
   jp     addr_09809                   ; 02:9794 - C3 09 98

addr_09797:
   ld     hl, $0206                    ; 02:9797 - 21 06 02
   ld     (var_D214), hl               ; 02:979A - 22 14 D2
   call   UNK_03956                    ; 02:979D - CD 56 39
   jr     c, addr_097E3                ; 02:97A0 - 38 41
   ld     bc, (sonic_y)                ; 02:97A2 - ED 4B 01 D4
   ld     e, (ix+5)                    ; 02:97A6 - DD 5E 05
   ld     d, (ix+6)                    ; 02:97A9 - DD 56 06
   ld     hl, $FFF8                    ; 02:97AC - 21 F8 FF
   add    hl, de                       ; 02:97AF - 19
   and    a                            ; 02:97B0 - A7
   sbc    hl, bc                       ; 02:97B1 - ED 42
   jr     nc, addr_097E3               ; 02:97B3 - 30 2E
   ld     hl, $0006                    ; 02:97B5 - 21 06 00
   add    hl, de                       ; 02:97B8 - 19
   and    a                            ; 02:97B9 - A7
   sbc    hl, bc                       ; 02:97BA - ED 42
   jr     c, addr_097E3                ; 02:97BC - 38 25
   ld     a, (ix+18)                   ; 02:97BE - DD 7E 12
   and    a                            ; 02:97C1 - A7
   jr     nz, addr_097E3               ; 02:97C2 - 20 1F
   xor    a                            ; 02:97C4 - AF
   ld     l, a                         ; 02:97C5 - 6F
   ld     h, a                         ; 02:97C6 - 67
   ld     (sonic_vel_y_sub), hl        ; 02:97C7 - 22 06 D4
   ld     (sonic_vel_y_hi), a          ; 02:97CA - 32 08 D4
   ld     (var_D28E), a                ; 02:97CD - 32 8E D2
   ld     (var_D29B), hl               ; 02:97D0 - 22 9B D2
   set    2, (iy+var_D208-IYBASE)      ; 02:97D3 - FD CB 08 D6
   ld     a, $20                       ; 02:97D7 - 3E 20
   ld     (var_D2FB), a                ; 02:97D9 - 32 FB D2
   ld     (ix+18), $10                 ; 02:97DC - DD 36 12 10
   ld     a, $22                       ; 02:97E0 - 3E 22
   rst    $28                          ; 02:97E2 - EF

addr_097E3:
   ld     (ix+10), $98                 ; 02:97E3 - DD 36 0A 98
   ld     (ix+11), $FF                 ; 02:97E7 - DD 36 0B FF
   ld     (ix+12), $FF                 ; 02:97EB - DD 36 0C FF
   ld     a, (ix+17)                   ; 02:97EF - DD 7E 11
   and    $0F                          ; 02:97F2 - E6 0F
   jr     nz, addr_09812               ; 02:97F4 - 20 1C
   call   random_A                     ; 02:97F6 - CD 25 06
   ld     bc, $0020                    ; 02:97F9 - 01 20 00
   ld     d, $00                       ; 02:97FC - 16 00
   and    $3F                          ; 02:97FE - E6 3F
   cp     $20                          ; 02:9800 - FE 20
   jr     c, addr_09809                ; 02:9802 - 38 05
   ld     bc, $FFE0                    ; 02:9804 - 01 E0 FF
   ld     d, $FF                       ; 02:9807 - 16 FF

addr_09809:
   ld     (ix+7), c                    ; 02:9809 - DD 71 07
   ld     (ix+8), b                    ; 02:980C - DD 70 08
   ld     (ix+9), d                    ; 02:980F - DD 72 09

addr_09812:
   ld     l, (ix+2)                    ; 02:9812 - DD 6E 02
   ld     h, (ix+3)                    ; 02:9815 - DD 66 03
   ex     de, hl                       ; 02:9818 - EB
   ld     hl, (var_D25A)               ; 02:9819 - 2A 5A D2
   ld     bc, $0008                    ; 02:981C - 01 08 00
   xor    a                            ; 02:981F - AF
   sbc    hl, bc                       ; 02:9820 - ED 42
   jr     nc, addr_09826               ; 02:9822 - 30 02
   ld     l, a                         ; 02:9824 - 6F
   ld     h, a                         ; 02:9825 - 67

addr_09826:
   and    a                            ; 02:9826 - A7
   sbc    hl, de                       ; 02:9827 - ED 52
   jr     nc, addr_0985E               ; 02:9829 - 30 33
   ld     hl, (var_D25A)               ; 02:982B - 2A 5A D2
   ld     bc, $0100                    ; 02:982E - 01 00 01
   add    hl, bc                       ; 02:9831 - 09
   and    a                            ; 02:9832 - A7
   sbc    hl, de                       ; 02:9833 - ED 52
   jr     c, addr_0985E                ; 02:9835 - 38 27
   ld     l, (ix+5)                    ; 02:9837 - DD 6E 05
   ld     h, (ix+6)                    ; 02:983A - DD 66 06
   ex     de, hl                       ; 02:983D - EB
   ld     hl, (var_D2DC)               ; 02:983E - 2A DC D2
   and    a                            ; 02:9841 - A7
   sbc    hl, de                       ; 02:9842 - ED 52
   jr     nc, addr_0985E               ; 02:9844 - 30 18
   ld     hl, (var_D25D)               ; 02:9846 - 2A 5D D2
   ld     bc, $FFF0                    ; 02:9849 - 01 F0 FF
   add    hl, bc                       ; 02:984C - 09
   and    a                            ; 02:984D - A7
   sbc    hl, de                       ; 02:984E - ED 52
   jr     nc, addr_0985E               ; 02:9850 - 30 0C
   ld     hl, (var_D25D)               ; 02:9852 - 2A 5D D2
   ld     bc, $00C0                    ; 02:9855 - 01 C0 00
   add    hl, bc                       ; 02:9858 - 09
   and    a                            ; 02:9859 - A7
   sbc    hl, de                       ; 02:985A - ED 52
   jr     nc, addr_09862               ; 02:985C - 30 04

addr_0985E:
   ld     (ix+0), $FF                  ; 02:985E - DD 36 00 FF

addr_09862:
   inc    (ix+17)                      ; 02:9862 - DD 34 11
   ret                                 ; 02:9865 - C9

objfunc_4C_UNKNOWN:
   set    5, (ix+24)                   ; 02:9866 - DD CB 18 EE
   ld     (ix+15), UNK_09A7E&$FF       ; 02:986A - DD 36 0F 7E
   ld     (ix+16), UNK_09A7E>>8        ; 02:986E - DD 36 10 9A
   bit    5, (iy+g_inputs_player_1-IYBASE)  ; 02:9872 - FD CB 03 6E
   jr     nz, addr_0988B               ; 02:9876 - 20 13
   ld     a, (ix+17)                   ; 02:9878 - DD 7E 11
   ld     (ix+18), a                   ; 02:987B - DD 77 12
   ld     a, (ix+17)                   ; 02:987E - DD 7E 11
   cp     $05                          ; 02:9881 - FE 05
   jr     nc, addr_09894               ; 02:9883 - 30 0F
   inc    (ix+17)                      ; 02:9885 - DD 34 11
   jp     addr_09894                   ; 02:9888 - C3 94 98

addr_0988B:
   ld     a, (ix+17)                   ; 02:988B - DD 7E 11
   and    a                            ; 02:988E - A7
   jr     z, addr_09894                ; 02:988F - 28 03
   dec    (ix+17)                      ; 02:9891 - DD 35 11

addr_09894:
   ld     a, (ix+17)                   ; 02:9894 - DD 7E 11
   cp     $01                          ; 02:9897 - FE 01
   jr     nc, addr_098D3               ; 02:9899 - 30 38
   ld     hl, $140C                    ; 02:989B - 21 0C 14
   ld     (var_D214), hl               ; 02:989E - 22 14 D2
   ld     (ix+13), $1E                 ; 02:98A1 - DD 36 0D 1E
   ld     (ix+14), $16                 ; 02:98A5 - DD 36 0E 16
   call   UNK_03956                    ; 02:98A9 - CD 56 39
   ret    c                            ; 02:98AC - D8
   ld     bc, UNK_0999E                ; 02:98AD - 01 9E 99
   call   addr_09AAF                   ; 02:98B0 - CD AF 9A
   ret    nc                           ; 02:98B3 - D0
   ld     a, (var_D2E8)                ; 02:98B4 - 3A E8 D2
   ld     hl, (var_D2E6)               ; 02:98B7 - 2A E6 D2
   ld     (sonic_vel_y_sub), hl        ; 02:98BA - 22 06 D4
   ld     (sonic_vel_y_hi), a          ; 02:98BD - 32 08 D4
   ld     de, $FFFC                    ; 02:98C0 - 11 FC FF
   ld     hl, (sonic_vel_x_sub)        ; 02:98C3 - 2A 03 D4
   ld     a, (sonic_vel_x_hi)          ; 02:98C6 - 3A 05 D4
   add    hl, de                       ; 02:98C9 - 19
   adc    a, $FF                       ; 02:98CA - CE FF
   ld     (sonic_vel_x_sub), hl        ; 02:98CC - 22 03 D4
   ld     (sonic_vel_x_hi), a          ; 02:98CF - 32 05 D4
   ret                                 ; 02:98D2 - C9

addr_098D3:
   cp     $04                          ; 02:98D3 - FE 04
   jp     nc, addr_0995E               ; 02:98D5 - D2 5E 99
   ld     (ix+15), UNK_09A90&$FF       ; 02:98D8 - DD 36 0F 90
   ld     (ix+16), UNK_09A90>>8        ; 02:98DC - DD 36 10 9A
   ld     hl, $080F                    ; 02:98E0 - 21 0F 08
   ld     (var_D214), hl               ; 02:98E3 - 22 14 D2
   ld     (ix+13), $1E                 ; 02:98E6 - DD 36 0D 1E
   ld     (ix+14), $16                 ; 02:98EA - DD 36 0E 16
   call   UNK_03956                    ; 02:98EE - CD 56 39
   ret    c                            ; 02:98F1 - D8
   ld     bc, UNK_099BE                ; 02:98F2 - 01 BE 99
   call   addr_09AAF                   ; 02:98F5 - CD AF 9A
   ret    nc                           ; 02:98F8 - D0
   ld     a, (ix+18)                   ; 02:98F9 - DD 7E 12
   cp     (ix+17)                      ; 02:98FC - DD BE 11
   ret    nc                           ; 02:98FF - D0
   ld     a, (sonic_x)                 ; 02:9900 - 3A FE D3
   add    a, $0C                       ; 02:9903 - C6 0C
   and    $1F                          ; 02:9905 - E6 1F
   add    a, a                         ; 02:9907 - 87
   ld     c, a                         ; 02:9908 - 4F
   ld     b, $00                       ; 02:9909 - 06 00
   ld     hl, UNK_099FE                ; 02:990B - 21 FE 99
   add    hl, bc                       ; 02:990E - 09
   ld     e, (hl)                      ; 02:990F - 5E
   inc    hl                           ; 02:9910 - 23
   ld     d, (hl)                      ; 02:9911 - 56
   ld     hl, (sonic_vel_x_sub)        ; 02:9912 - 2A 03 D4
   ld     a, (sonic_vel_x_hi)          ; 02:9915 - 3A 05 D4
   add    hl, de                       ; 02:9918 - 19
   adc    a, $FF                       ; 02:9919 - CE FF
   ld     (sonic_vel_x_sub), hl        ; 02:991B - 22 03 D4
   ld     (sonic_vel_x_hi), a          ; 02:991E - 32 05 D4
   ld     hl, UNK_09A3E                ; 02:9921 - 21 3E 9A
   add    hl, bc                       ; 02:9924 - 09
   ld     e, (hl)                      ; 02:9925 - 5E
   inc    hl                           ; 02:9926 - 23
   ld     d, (hl)                      ; 02:9927 - 56
   ld     hl, (sonic_vel_y_sub)        ; 02:9928 - 2A 06 D4
   ld     a, l                         ; 02:992B - 7D
   cpl                                 ; 02:992C - 2F
   ld     l, a                         ; 02:992D - 6F
   ld     a, h                         ; 02:992E - 7C
   cpl                                 ; 02:992F - 2F
   ld     h, a                         ; 02:9930 - 67
   ld     a, (sonic_vel_y_hi)          ; 02:9931 - 3A 08 D4
   cpl                                 ; 02:9934 - 2F
   add    hl, de                       ; 02:9935 - 19
   adc    a, $FF                       ; 02:9936 - CE FF
   ld     (sonic_vel_y_sub), hl        ; 02:9938 - 22 06 D4
   ld     (sonic_vel_y_hi), a          ; 02:993B - 32 08 D4
   ret                                 ; 02:993E - C9
.db $3A, $E8, $D2, $2A, $E6, $D2, $22, $06, $D4, $32, $08, $D4, $11, $08, $00, $2A  ; 02:993F
.db $03, $D4, $3A, $05, $D4, $19, $CE, $00, $22, $03, $D4, $32, $05, $D4, $C9       ; 02:994F

addr_0995E:
   ld     (ix+15), UNK_09AA2&$FF       ; 02:995E - DD 36 0F A2
   ld     (ix+16), UNK_09AA2>>8        ; 02:9962 - DD 36 10 9A
   ld     hl, $021A                    ; 02:9966 - 21 1A 02
   ld     (var_D214), hl               ; 02:9969 - 22 14 D2
   ld     (ix+13), $1E                 ; 02:996C - DD 36 0D 1E
   ld     (ix+14), $16                 ; 02:9970 - DD 36 0E 16
   call   UNK_03956                    ; 02:9974 - CD 56 39
   ret    c                            ; 02:9977 - D8
   ld     bc, UNK_099DE                ; 02:9978 - 01 DE 99
   call   addr_09AAF                   ; 02:997B - CD AF 9A
   ret    nc                           ; 02:997E - D0
   ld     a, (var_D2E8)                ; 02:997F - 3A E8 D2
   ld     hl, (var_D2E6)               ; 02:9982 - 2A E6 D2
   ld     (sonic_vel_y_sub), hl        ; 02:9985 - 22 06 D4
   ld     (sonic_vel_y_hi), a          ; 02:9988 - 32 08 D4
   ld     de, $001A                    ; 02:998B - 11 1A 00
   ld     hl, (sonic_vel_x_sub)        ; 02:998E - 2A 03 D4
   ld     a, (sonic_vel_x_hi)          ; 02:9991 - 3A 05 D4
   add    hl, de                       ; 02:9994 - 19
   adc    a, $00                       ; 02:9995 - CE 00
   ld     (sonic_vel_x_sub), hl        ; 02:9997 - 22 03 D4
   ld     (sonic_vel_x_hi), a          ; 02:999A - 32 05 D4
   ret                                 ; 02:999D - C9

UNK_0999E:
.db $FF, $FF, $FE, $FE, $FE, $FD, $FD, $FD, $FC, $FC, $FC, $FC, $FB, $FB, $FB, $FB  ; 02:999E
.db $FA, $FA, $FA, $FA, $FA, $F9, $F9, $F9, $F9, $F9, $F9, $FA, $FA, $FB, $FC, $FE  ; 02:99AE

UNK_099BE:
.db $EA, $EA, $EA, $F6, $F7, $F8, $F8, $F8, $F9, $F9, $F9, $FA, $FA, $FA, $FB, $FB  ; 02:99BE
.db $FB, $FB, $FC, $FC, $FC, $FC, $FD, $FD, $FD, $FD, $FE, $FE, $FF, $00, $02, $04  ; 02:99CE

UNK_099DE:
.db $EA, $EA, $EA, $EA, $EA, $EA, $EA, $EA, $EA, $EA, $EA, $EA, $EE, $ED, $EC, $EC  ; 02:99DE
.db $EC, $ED, $EE, $EF, $F0, $F2, $F3, $F4, $F5, $F7, $F8, $F9, $FA, $FB, $FD, $FF  ; 02:99EE

UNK_099FE:
.db $00, $F8, $00, $F8, $00, $F9, $00, $FA, $00, $FB, $00, $FC, $E0, $FC, $80, $FD  ; 02:99FE
.db $C0, $FD, $00, $FE, $40, $FE, $80, $FE, $C0, $FE, $00, $FF, $20, $FF, $40, $FF  ; 02:9A0E
.db $60, $FF, $80, $FF, $A0, $FF, $C0, $FF, $E0, $FF, $E8, $FF, $EA, $FF, $EC, $FF  ; 02:9A1E
.db $EE, $FF, $F0, $FF, $F2, $FF, $F4, $FF, $F6, $FF, $F8, $FF, $FC, $FF, $FE, $FF  ; 02:9A2E

UNK_09A3E:
.db $00, $FC, $00, $FC, $00, $FC, $00, $FB, $00, $FA, $00, $F9, $00, $F8, $00, $F7  ; 02:9A3E
.db $00, $F6, $80, $F5, $00, $F5, $C0, $F4, $80, $F4, $40, $F4, $00, $F4, $00, $F4  ; 02:9A4E
.db $00, $F4, $00, $F4, $40, $F4, $80, $F4, $C0, $F4, $00, $F5, $00, $F6, $00, $F7  ; 02:9A5E
.db $00, $F9, $00, $FA, $00, $FC, $80, $FC, $00, $FD, $C0, $FD, $00, $FF, $00, $FF  ; 02:9A6E

UNK_09A7E:
.db $FE, $FF, $FF, $FF, $FF, $FF, $38, $3A, $3C, $3E, $FF, $FF, $FF, $FF, $FF, $FF  ; 02:9A7E
.db $FF, $FF                                                                        ; 02:9A8E

UNK_09A90:
.db $48, $4A, $4C, $4E, $FF, $FF, $68, $6A, $6C, $6E, $FF, $FF, $FF, $FF, $FF, $FF  ; 02:9A90
.db $FF, $FF                                                                        ; 02:9AA0

UNK_09AA2:
.db $FE, $12, $14, $16, $FF, $FF, $FE, $32, $34, $36, $FF, $FF, $FF                 ; 02:9AA2

addr_09AAF:
   ld     a, (sonic_vel_y_hi)          ; 02:9AAF - 3A 08 D4
   and    a                            ; 02:9AB2 - A7
   ret    m                            ; 02:9AB3 - F8
   ld     a, (sonic_x)                 ; 02:9AB4 - 3A FE D3
   add    a, $0C                       ; 02:9AB7 - C6 0C
   and    $1F                          ; 02:9AB9 - E6 1F
   ld     l, a                         ; 02:9ABB - 6F
   ld     h, $00                       ; 02:9ABC - 26 00
   add    hl, bc                       ; 02:9ABE - 09
   ld     b, $00                       ; 02:9ABF - 06 00
   ld     c, (hl)                      ; 02:9AC1 - 4E
   bit    7, c                         ; 02:9AC2 - CB 79
   jr     z, addr_09AC7                ; 02:9AC4 - 28 01
   dec    b                            ; 02:9AC6 - 05

addr_09AC7:
   ld     l, (ix+5)                    ; 02:9AC7 - DD 6E 05
   ld     h, (ix+6)                    ; 02:9ACA - DD 66 06
   add    hl, bc                       ; 02:9ACD - 09
   ld     (sonic_y), hl                ; 02:9ACE - 22 01 D4
   ld     a, (sonic_vel_y)             ; 02:9AD1 - 3A 07 D4
   cp     $03                          ; 02:9AD4 - FE 03
   jr     nc, addr_09ADA               ; 02:9AD6 - 30 02
   scf                                 ; 02:9AD8 - 37
   ret                                 ; 02:9AD9 - C9

addr_09ADA:
   ld     de, $0001                    ; 02:9ADA - 11 01 00
   ld     hl, (sonic_vel_y_sub)        ; 02:9ADD - 2A 06 D4
   ld     a, l                         ; 02:9AE0 - 7D
   cpl                                 ; 02:9AE1 - 2F
   ld     l, a                         ; 02:9AE2 - 6F
   ld     a, h                         ; 02:9AE3 - 7C
   cpl                                 ; 02:9AE4 - 2F
   ld     h, a                         ; 02:9AE5 - 67
   ld     a, (sonic_vel_y_hi)          ; 02:9AE6 - 3A 08 D4
   cpl                                 ; 02:9AE9 - 2F
   add    hl, de                       ; 02:9AEA - 19
   adc    a, $00                       ; 02:9AEB - CE 00
   sra    a                            ; 02:9AED - CB 2F
   rr     h                            ; 02:9AEF - CB 1C
   rr     l                            ; 02:9AF1 - CB 1D
   ld     (sonic_vel_y_sub), hl        ; 02:9AF3 - 22 06 D4
   ld     (sonic_vel_y_hi), a          ; 02:9AF6 - 32 08 D4
   and    a                            ; 02:9AF9 - A7
   ret                                 ; 02:9AFA - C9

objfunc_21_UNKNOWN:
   set    5, (ix+24)                   ; 02:9AFB - DD CB 18 EE
   ld     (ix+13), $1C                 ; 02:9AFF - DD 36 0D 1C
   ld     (ix+14), $06                 ; 02:9B03 - DD 36 0E 06
   ld     (ix+15), UNK_09B6E&$FF       ; 02:9B07 - DD 36 0F 6E
   ld     (ix+16), UNK_09B6E>>8        ; 02:9B0B - DD 36 10 9B
   ld     hl, $0001                    ; 02:9B0F - 21 01 00
   ld     a, (ix+18)                   ; 02:9B12 - DD 7E 12
   cp     $60                          ; 02:9B15 - FE 60
   jr     nc, addr_09B1C               ; 02:9B17 - 30 03
   ld     hl, $FFFF                    ; 02:9B19 - 21 FF FF

addr_09B1C:
   ld     (ix+7), $00                  ; 02:9B1C - DD 36 07 00
   ld     (ix+8), l                    ; 02:9B20 - DD 75 08
   ld     (ix+9), h                    ; 02:9B23 - DD 74 09
   inc    a                            ; 02:9B26 - 3C
   cp     $C0                          ; 02:9B27 - FE C0
   jr     c, addr_09B2C                ; 02:9B29 - 38 01
   xor    a                            ; 02:9B2B - AF

addr_09B2C:
   ld     (ix+18), a                   ; 02:9B2C - DD 77 12
   ld     a, (ix+17)                   ; 02:9B2F - DD 7E 11
   and    a                            ; 02:9B32 - A7
   jr     nz, addr_09B6A               ; 02:9B33 - 20 35
   ld     hl, $0602                    ; 02:9B35 - 21 02 06
   ld     (var_D214), hl               ; 02:9B38 - 22 14 D2
   call   UNK_03956                    ; 02:9B3B - CD 56 39
   ret    c                            ; 02:9B3E - D8
   ld     a, (var_D2E8)                ; 02:9B3F - 3A E8 D2
   ld     de, (var_D2E6)               ; 02:9B42 - ED 5B E6 D2
   ld     c, a                         ; 02:9B46 - 4F
   ld     hl, (sonic_vel_y_sub)        ; 02:9B47 - 2A 06 D4
   ld     a, l                         ; 02:9B4A - 7D
   cpl                                 ; 02:9B4B - 2F
   ld     l, a                         ; 02:9B4C - 6F
   ld     a, h                         ; 02:9B4D - 7C
   cpl                                 ; 02:9B4E - 2F
   ld     h, a                         ; 02:9B4F - 67
   ld     a, (sonic_vel_y_hi)          ; 02:9B50 - 3A 08 D4
   cpl                                 ; 02:9B53 - 2F
   add    hl, de                       ; 02:9B54 - 19
   adc    a, c                         ; 02:9B55 - 89
   ld     de, $0001                    ; 02:9B56 - 11 01 00
   add    hl, de                       ; 02:9B59 - 19
   adc    a, $00                       ; 02:9B5A - CE 00
   ld     (sonic_vel_y_sub), hl        ; 02:9B5C - 22 06 D4
   ld     (sonic_vel_y_hi), a          ; 02:9B5F - 32 08 D4
   ld     (ix+17), $08                 ; 02:9B62 - DD 36 11 08
   ld     a, $07                       ; 02:9B66 - 3E 07
   rst    $28                          ; 02:9B68 - EF
   ret                                 ; 02:9B69 - C9

addr_09B6A:
   dec    (ix+17)                      ; 02:9B6A - DD 35 11
   ret                                 ; 02:9B6D - C9

UNK_09B6E:
.db $08, $0A, $28, $2A, $FF, $FF, $FF                                               ; 02:9B6E

objfunc_13_UNKNOWN:
   set    5, (ix+24)                   ; 02:9B75 - DD CB 18 EE
   ld     (ix+13), $1E                 ; 02:9B79 - DD 36 0D 1E
   ld     (ix+14), $60                 ; 02:9B7D - DD 36 0E 60
   ld     hl, $0000                    ; 02:9B81 - 21 00 00
   ld     (var_D214), hl               ; 02:9B84 - 22 14 D2
   call   UNK_03956                    ; 02:9B87 - CD 56 39
   jr     c, addr_09BD1                ; 02:9B8A - 38 45
   ld     l, (ix+2)                    ; 02:9B8C - DD 6E 02
   ld     h, (ix+3)                    ; 02:9B8F - DD 66 03
   ld     a, l                         ; 02:9B92 - 7D
   add    a, a                         ; 02:9B93 - 87
   rl     h                            ; 02:9B94 - CB 14
   add    a, a                         ; 02:9B96 - 87
   rl     h                            ; 02:9B97 - CB 14
   add    a, a                         ; 02:9B99 - 87
   rl     h                            ; 02:9B9A - CB 14
   ld     e, h                         ; 02:9B9C - 5C
   ld     l, (ix+5)                    ; 02:9B9D - DD 6E 05
   ld     h, (ix+6)                    ; 02:9BA0 - DD 66 06
   ld     a, l                         ; 02:9BA3 - 7D
   add    a, a                         ; 02:9BA4 - 87
   rl     h                            ; 02:9BA5 - CB 14
   add    a, a                         ; 02:9BA7 - 87
   rl     h                            ; 02:9BA8 - CB 14
   add    a, a                         ; 02:9BAA - 87
   rl     h                            ; 02:9BAB - CB 14
   ld     d, h                         ; 02:9BAD - 54
   ld     hl, UNK_09BD9                ; 02:9BAE - 21 D9 9B
   ld     b, $05                       ; 02:9BB1 - 06 05

addr_09BB3:
   ld     a, (hl)                      ; 02:9BB3 - 7E
   inc    hl                           ; 02:9BB4 - 23
   cp     e                            ; 02:9BB5 - BB
   jr     nz, addr_09BCD               ; 02:9BB6 - 20 15
   ld     a, (hl)                      ; 02:9BB8 - 7E
   cp     d                            ; 02:9BB9 - BA
   jr     nz, addr_09BCD               ; 02:9BBA - 20 11
   inc    hl                           ; 02:9BBC - 23
   ld     a, (hl)                      ; 02:9BBD - 7E
   ld     (var_D2D3), a                ; 02:9BBE - 32 D3 D2
   ld     a, $01                       ; 02:9BC1 - 3E 01
   ld     (g_signpost_tickdown_counter), a  ; 02:9BC3 - 32 89 D2
   set    4, (iy+var_D206-IYBASE)      ; 02:9BC6 - FD CB 06 E6
   jp     addr_09BD1                   ; 02:9BCA - C3 D1 9B

addr_09BCD:
   inc    hl                           ; 02:9BCD - 23
   inc    hl                           ; 02:9BCE - 23
   djnz   addr_09BB3                   ; 02:9BCF - 10 E2

addr_09BD1:
   xor    a                            ; 02:9BD1 - AF
   ld     (ix+15), a                   ; 02:9BD2 - DD 77 0F
   ld     (ix+16), a                   ; 02:9BD5 - DD 77 10
   ret                                 ; 02:9BD8 - C9

UNK_09BD9:
.db $7D, $1A, $15, $7D, $01, $14, $01, $3C, $18, $01, $02, $19, $14, $0F, $1A       ; 02:9BD9

objfunc_14_UNKNOWN:
   ld     (ix+7), $80                  ; 02:9BE8 - DD 36 07 80
   ld     (ix+8), $01                  ; 02:9BEC - DD 36 08 01
   ld     (ix+9), $00                  ; 02:9BF0 - DD 36 09 00
   ld     (ix+15), UNK_09C69&$FF       ; 02:9BF4 - DD 36 0F 69
   ld     (ix+16), UNK_09C69>>8        ; 02:9BF8 - DD 36 10 9C

addr_09BFC:
   set    5, (ix+24)                   ; 02:9BFC - DD CB 18 EE
   bit    0, (ix+24)                   ; 02:9C00 - DD CB 18 46
   jr     nz, addr_09C19               ; 02:9C04 - 20 13
   ld     a, (ix+2)                    ; 02:9C06 - DD 7E 02
   ld     (ix+17), a                   ; 02:9C09 - DD 77 11
   ld     a, (ix+3)                    ; 02:9C0C - DD 7E 03
   ld     (ix+18), a                   ; 02:9C0F - DD 77 12
   ld     a, $18                       ; 02:9C12 - 3E 18
   rst    $28                          ; 02:9C14 - EF
   set    0, (ix+24)                   ; 02:9C15 - DD CB 18 C6

addr_09C19:
   ld     (ix+13), $06                 ; 02:9C19 - DD 36 0D 06
   ld     (ix+14), $08                 ; 02:9C1D - DD 36 0E 08
   ld     a, (ix+19)                   ; 02:9C21 - DD 7E 13
   cp     $64                          ; 02:9C24 - FE 64
   jr     nc, addr_09C34               ; 02:9C26 - 30 0C
   ld     hl, $0400                    ; 02:9C28 - 21 00 04
   ld     (var_D214), hl               ; 02:9C2B - 22 14 D2
   call   UNK_03956                    ; 02:9C2E - CD 56 39
   call   nc, addr_035FD               ; 02:9C31 - D4 FD 35

addr_09C34:
   inc    (ix+19)                      ; 02:9C34 - DD 34 13
   ld     a, (ix+19)                   ; 02:9C37 - DD 7E 13
   cp     $64                          ; 02:9C3A - FE 64
   ret    c                            ; 02:9C3C - D8
   cp     $F0                          ; 02:9C3D - FE F0
   jr     c, addr_09C58                ; 02:9C3F - 38 17
   xor    a                            ; 02:9C41 - AF
   ld     (ix+1), a                    ; 02:9C42 - DD 77 01
   ld     (ix+19), a                   ; 02:9C45 - DD 77 13
   ld     a, (ix+17)                   ; 02:9C48 - DD 7E 11
   ld     (ix+2), a                    ; 02:9C4B - DD 77 02
   ld     a, (ix+18)                   ; 02:9C4E - DD 7E 12
   ld     (ix+3), a                    ; 02:9C51 - DD 77 03
   ld     a, $18                       ; 02:9C54 - 3E 18
   rst    $28                          ; 02:9C56 - EF
   ret                                 ; 02:9C57 - C9

addr_09C58:
   xor    a                            ; 02:9C58 - AF
   ld     (ix+15), a                   ; 02:9C59 - DD 77 0F
   ld     (ix+16), a                   ; 02:9C5C - DD 77 10
   ld     (ix+7), a                    ; 02:9C5F - DD 77 07
   ld     (ix+8), a                    ; 02:9C62 - DD 77 08
   ld     (ix+9), a                    ; 02:9C65 - DD 77 09
   ret                                 ; 02:9C68 - C9

UNK_09C69:
.db $0C, $0E, $FF, $FF, $FF, $FF, $FF                                               ; 02:9C69

objfunc_15_UNKNOWN:
   ld     (ix+7), $80                  ; 02:9C70 - DD 36 07 80
   ld     (ix+8), $FE                  ; 02:9C74 - DD 36 08 FE
   ld     (ix+9), $FF                  ; 02:9C78 - DD 36 09 FF
   ld     (ix+15), UNK_09C87&$FF       ; 02:9C7C - DD 36 0F 87
   ld     (ix+16), UNK_09C87>>8        ; 02:9C80 - DD 36 10 9C
   jp     addr_09BFC                   ; 02:9C84 - C3 FC 9B

UNK_09C87:
.db $2C, $2E, $FF, $FF, $FF, $FF, $FF                                               ; 02:9C87

objfunc_16_UNKNOWN:
   set    5, (ix+24)                   ; 02:9C8E - DD CB 18 EE
   bit    0, (ix+24)                   ; 02:9C92 - DD CB 18 46
   jr     nz, addr_09CC2               ; 02:9C96 - 20 2A
   ld     l, (ix+2)                    ; 02:9C98 - DD 6E 02
   ld     h, (ix+3)                    ; 02:9C9B - DD 66 03
   ld     de, $000C                    ; 02:9C9E - 11 0C 00
   add    hl, de                       ; 02:9CA1 - 19
   ld     (ix+2), l                    ; 02:9CA2 - DD 75 02
   ld     (ix+3), h                    ; 02:9CA5 - DD 74 03
   ld     l, (ix+5)                    ; 02:9CA8 - DD 6E 05
   ld     h, (ix+6)                    ; 02:9CAB - DD 66 06
   ld     de, $0012                    ; 02:9CAE - 11 12 00
   add    hl, de                       ; 02:9CB1 - 19
   ld     (ix+5), l                    ; 02:9CB2 - DD 75 05
   ld     (ix+6), h                    ; 02:9CB5 - DD 74 06
   call   random_A                     ; 02:9CB8 - CD 25 06
   ld     (ix+17), a                   ; 02:9CBB - DD 77 11
   set    0, (ix+24)                   ; 02:9CBE - DD CB 18 C6

addr_09CC2:
   ld     l, (ix+2)                    ; 02:9CC2 - DD 6E 02
   ld     h, (ix+3)                    ; 02:9CC5 - DD 66 03
   ld     (g_FF_string_high_byte), hl  ; 02:9CC8 - 22 0E D2
   ld     l, (ix+5)                    ; 02:9CCB - DD 6E 05
   ld     h, (ix+6)                    ; 02:9CCE - DD 66 06
   ld     (var_D210), hl               ; 02:9CD1 - 22 10 D2
   ld     hl, $0000                    ; 02:9CD4 - 21 00 00
   ld     (var_D212), hl               ; 02:9CD7 - 22 12 D2
   ld     a, (ix+17)                   ; 02:9CDA - DD 7E 11
   srl    a                            ; 02:9CDD - CB 3F
   srl    a                            ; 02:9CDF - CB 3F
   srl    a                            ; 02:9CE1 - CB 3F
   srl    a                            ; 02:9CE3 - CB 3F
   ld     c, a                         ; 02:9CE5 - 4F
   ld     b, $00                       ; 02:9CE6 - 06 00
   add    a, a                         ; 02:9CE8 - 87
   ld     e, a                         ; 02:9CE9 - 5F
   ld     d, $00                       ; 02:9CEA - 16 00
   ld     hl, UNK_09D6A                ; 02:9CEC - 21 6A 9D
   add    hl, bc                       ; 02:9CEF - 09
   ld     a, (hl)                      ; 02:9CF0 - 7E
   ld     (ix+14), a                   ; 02:9CF1 - DD 77 0E
   ld     (ix+13), $06                 ; 02:9CF4 - DD 36 0D 06
   ld     hl, PTRLUT_09D4A             ; 02:9CF8 - 21 4A 9D
   add    hl, de                       ; 02:9CFB - 19
   ld     a, (hl)                      ; 02:9CFC - 7E
   inc    hl                           ; 02:9CFD - 23
   ld     h, (hl)                      ; 02:9CFE - 66
   ld     l, a                         ; 02:9CFF - 6F
   or     h                            ; 02:9D00 - B4
   jr     z, addr_09D36                ; 02:9D01 - 28 33
   ld     a, (ix+17)                   ; 02:9D03 - DD 7E 11
   add    a, a                         ; 02:9D06 - 87
   add    a, a                         ; 02:9D07 - 87
   add    a, a                         ; 02:9D08 - 87
   and    $1F                          ; 02:9D09 - E6 1F
   ld     e, a                         ; 02:9D0B - 5F
   ld     d, $00                       ; 02:9D0C - 16 00
   add    hl, de                       ; 02:9D0E - 19
   ld     b, $04                       ; 02:9D0F - 06 04

addr_09D11:
   push   bc                           ; 02:9D11 - C5
   ld     a, (hl)                      ; 02:9D12 - 7E
   inc    hl                           ; 02:9D13 - 23
   ld     e, (hl)                      ; 02:9D14 - 5E
   inc    hl                           ; 02:9D15 - 23
   ld     d, $00                       ; 02:9D16 - 16 00
   push   hl                           ; 02:9D18 - E5
   ld     (var_D214), de               ; 02:9D19 - ED 53 14 D2
   call   UNK_03581                    ; 02:9D1D - CD 81 35
   pop    hl                           ; 02:9D20 - E1
   pop    bc                           ; 02:9D21 - C1
   djnz   addr_09D11                   ; 02:9D22 - 10 ED
   ld     a, (ix+14)                   ; 02:9D24 - DD 7E 0E
   and    a                            ; 02:9D27 - A7
   jr     z, addr_09D36                ; 02:9D28 - 28 0C
   ld     hl, $0202                    ; 02:9D2A - 21 02 02
   ld     (var_D214), hl               ; 02:9D2D - 22 14 D2
   call   UNK_03956                    ; 02:9D30 - CD 56 39
   call   nc, addr_035FD               ; 02:9D33 - D4 FD 35

addr_09D36:
   inc    (ix+17)                      ; 02:9D36 - DD 34 11
   xor    a                            ; 02:9D39 - AF
   ld     (ix+15), a                   ; 02:9D3A - DD 77 0F
   ld     (ix+16), a                   ; 02:9D3D - DD 77 10
   ld     a, (ix+17)                   ; 02:9D40 - DD 7E 11
   cp     $70                          ; 02:9D43 - FE 70
   ret    nz                           ; 02:9D45 - C0
   ld     a, $17                       ; 02:9D46 - 3E 17
   rst    $28                          ; 02:9D48 - EF
   ret                                 ; 02:9D49 - C9

PTRLUT_09D4A:
.dw ENTRY_RESET, ENTRY_RESET, ENTRY_RESET, ENTRY_RESET, ENTRY_RESET, ENTRY_RESET, ENTRY_RESET, addr_09D9A  ; 02:9D4A
.dw addr_09DBA, addr_09DDA, addr_09D7A, addr_09D7A, addr_09D7A, addr_09DDA, addr_09DBA, addr_09D9A  ; 02:9D5A

UNK_09D6A:
.db $00, $00, $00, $00, $00, $00, $00, $1B, $1F, $22, $25, $25, $25, $22, $1F, $1B  ; 02:9D6A

addr_09D7A:
.db $00, $15, $1E, $0E, $1E, $07, $1E, $00, $00, $17, $1E, $10, $1E, $09, $1E, $02  ; 02:9D7A
.db $00, $19, $1E, $12, $1E, $0B, $1E, $04, $00, $1B, $1E, $14, $1E, $0D, $1E, $06  ; 02:9D8A

addr_09D9A:
.db $00, $0C, $1E, $08, $1E, $04, $1E, $00, $00, $0E, $1E, $0A, $1E, $06, $1E, $02  ; 02:9D9A
.db $00, $10, $1E, $0C, $1E, $08, $1E, $04, $00, $11, $1E, $0E, $1E, $0A, $1E, $06  ; 02:9DAA

addr_09DBA:
.db $00, $0F, $1E, $0A, $1E, $05, $1E, $00, $00, $11, $1E, $0C, $1E, $07, $1E, $02  ; 02:9DBA
.db $00, $13, $1E, $0E, $1E, $09, $1E, $04, $00, $15, $1E, $10, $1E, $0B, $1E, $06  ; 02:9DCA

addr_09DDA:
.db $00, $12, $1E, $0C, $1E, $06, $1E, $00, $00, $14, $1E, $0E, $1E, $08, $1E, $02  ; 02:9DDA
.db $00, $16, $1E, $10, $1E, $0A, $1E, $04, $00, $18, $1E, $12, $1E, $0C, $1E, $06  ; 02:9DEA

objfunc_17_UNKNOWN:
   set    5, (ix+24)                   ; 02:9DFA - DD CB 18 EE
   call   addr_09ED4                   ; 02:9DFE - CD D4 9E
   ld     a, (ix+17)                   ; 02:9E01 - DD 7E 11
   cp     $28                          ; 02:9E04 - FE 28
   jr     nc, addr_09E33               ; 02:9E06 - 30 2B
   ld     hl, $0005                    ; 02:9E08 - 21 05 00
   ld     (var_D214), hl               ; 02:9E0B - 22 14 D2
   call   UNK_03956                    ; 02:9E0E - CD 56 39
   jr     c, addr_09E33                ; 02:9E11 - 38 20
   ld     de, $0005                    ; 02:9E13 - 11 05 00
   ld     a, (sonic_vel_x_hi)          ; 02:9E16 - 3A 05 D4
   and    a                            ; 02:9E19 - A7
   jp     m, addr_09E20                ; 02:9E1A - FA 20 9E
   ld     de, $FFEC                    ; 02:9E1D - 11 EC FF

addr_09E20:
   ld     l, (ix+2)                    ; 02:9E20 - DD 6E 02
   ld     h, (ix+3)                    ; 02:9E23 - DD 66 03
   add    hl, de                       ; 02:9E26 - 19
   ld     (sonic_x), hl                ; 02:9E27 - 22 FE D3
   xor    a                            ; 02:9E2A - AF
   ld     l, a                         ; 02:9E2B - 6F
   ld     h, a                         ; 02:9E2C - 67
   ld     (sonic_vel_x_sub), hl        ; 02:9E2D - 22 03 D4
   ld     (sonic_vel_x_hi), a          ; 02:9E30 - 32 05 D4

addr_09E33:
   ld     l, (ix+2)                    ; 02:9E33 - DD 6E 02
   ld     h, (ix+3)                    ; 02:9E36 - DD 66 03
   ld     de, $FFC8                    ; 02:9E39 - 11 C8 FF
   add    hl, de                       ; 02:9E3C - 19
   ld     de, (sonic_x)                ; 02:9E3D - ED 5B FE D3
   xor    a                            ; 02:9E41 - AF
   sbc    hl, de                       ; 02:9E42 - ED 52
   jr     nc, addr_09E78               ; 02:9E44 - 30 32
   ld     l, (ix+2)                    ; 02:9E46 - DD 6E 02
   ld     h, (ix+3)                    ; 02:9E49 - DD 66 03
   and    a                            ; 02:9E4C - A7
   sbc    hl, de                       ; 02:9E4D - ED 52
   jr     c, addr_09E78                ; 02:9E4F - 38 27
   ld     l, (ix+5)                    ; 02:9E51 - DD 6E 05
   ld     h, (ix+6)                    ; 02:9E54 - DD 66 06
   ld     de, $FFE0                    ; 02:9E57 - 11 E0 FF
   add    hl, de                       ; 02:9E5A - 19
   ld     de, (sonic_y)                ; 02:9E5B - ED 5B 01 D4
   xor    a                            ; 02:9E5F - AF
   sbc    hl, de                       ; 02:9E60 - ED 52
   jr     nc, addr_09E78               ; 02:9E62 - 30 14
   ld     l, (ix+5)                    ; 02:9E64 - DD 6E 05
   ld     h, (ix+6)                    ; 02:9E67 - DD 66 06
   ld     bc, $0050                    ; 02:9E6A - 01 50 00
   add    hl, bc                       ; 02:9E6D - 09
   and    a                            ; 02:9E6E - A7
   sbc    hl, de                       ; 02:9E6F - ED 52
   jr     c, addr_09E78                ; 02:9E71 - 38 05
   call   addr_09EB4                   ; 02:9E73 - CD B4 9E
   jr     addr_09E7B                   ; 02:9E76 - 18 03

addr_09E78:
   call   addr_09EC4                   ; 02:9E78 - CD C4 9E

addr_09E7B:
   ld     de, UNK_09F2B                ; 02:9E7B - 11 2B 9F

addr_09E7E:
   ld     a, (ix+17)                   ; 02:9E7E - DD 7E 11
   and    $0F                          ; 02:9E81 - E6 0F
   ld     c, a                         ; 02:9E83 - 4F
   ld     b, $00                       ; 02:9E84 - 06 00
   ld     l, (ix+18)                   ; 02:9E86 - DD 6E 12
   ld     h, (ix+19)                   ; 02:9E89 - DD 66 13
   and    a                            ; 02:9E8C - A7
   sbc    hl, bc                       ; 02:9E8D - ED 42
   ld     (ix+5), l                    ; 02:9E8F - DD 75 05
   ld     (ix+6), h                    ; 02:9E92 - DD 74 06
   ld     a, (ix+17)                   ; 02:9E95 - DD 7E 11
   .IF 0
   srl    a                            ; 02:9E98 - CB 3F
   srl    a                            ; 02:9E9A - CB 3F
   srl    a                            ; 02:9E9C - CB 3F
   srl    a                            ; 02:9E9E - CB 3F
   and    $03                          ; 02:9EA0 - E6 03
   add    a, a                         ; 02:9EA2 - 87
   ld     c, a                         ; 02:9EA3 - 4F
   add    a, a                         ; 02:9EA4 - 87
   add    a, a                         ; 02:9EA5 - 87
   add    a, a                         ; 02:9EA6 - 87
   add    a, c                         ; 02:9EA7 - 81
   ld     c, a                         ; 02:9EA8 - 4F
   .ELSE
   and $30
   ld c, a
   rrca
   rrca
   rrca
   add a, c
   ld c, a
   ; SAVING: 9 bytes
   .ENDIF
   ld     b, $00                       ; 02:9EA9 - 06 00
   ex     de, hl                       ; 02:9EAB - EB
   add    hl, bc                       ; 02:9EAC - 09
   ld     (ix+15), l                   ; 02:9EAD - DD 75 0F
   ld     (ix+16), h                   ; 02:9EB0 - DD 74 10
   ret                                 ; 02:9EB3 - C9

addr_09EB4:
   ld     a, (ix+17)                   ; 02:9EB4 - DD 7E 11
   cp     $30                          ; 02:9EB7 - FE 30
   ret    nc                           ; 02:9EB9 - D0
   inc    a                            ; 02:9EBA - 3C
   ld     (ix+17), a                   ; 02:9EBB - DD 77 11
   dec    a                            ; 02:9EBE - 3D
   ret    nz                           ; 02:9EBF - C0
   ld     a, $19                       ; 02:9EC0 - 3E 19
   rst    $28                          ; 02:9EC2 - EF
   ret                                 ; 02:9EC3 - C9

addr_09EC4:
   ld     a, (ix+17)                   ; 02:9EC4 - DD 7E 11
   and    a                            ; 02:9EC7 - A7
   ret    z                            ; 02:9EC8 - C8
   dec    a                            ; 02:9EC9 - 3D
   ld     (ix+17), a                   ; 02:9ECA - DD 77 11
   cp     $2F                          ; 02:9ECD - FE 2F
   ret    nz                           ; 02:9ECF - C0
   ld     a, $19                       ; 02:9ED0 - 3E 19
   rst    $28                          ; 02:9ED2 - EF
   ret                                 ; 02:9ED3 - C9

addr_09ED4:
   ld     (ix+13), $04                 ; 02:9ED4 - DD 36 0D 04
   ld     a, (ix+17)                   ; 02:9ED8 - DD 7E 11
   .IF 0
   srl    a                            ; 02:9EDB - CB 3F
   srl    a                            ; 02:9EDD - CB 3F
   srl    a                            ; 02:9EDF - CB 3F
   srl    a                            ; 02:9EE1 - CB 3F
   and    $03                          ; 02:9EE3 - E6 03
   ld     e, a                         ; 02:9EE5 - 5F
   ld     a, $03                       ; 02:9EE6 - 3E 03
   sub    e                            ; 02:9EE8 - 93
   add    a, a                         ; 02:9EE9 - 87
   add    a, a                         ; 02:9EEA - 87
   add    a, a                         ; 02:9EEB - 87
   add    a, a                         ; 02:9EEC - 87
   .ELSE
   cpl
   and $30
   ; SAVING: 15 bytes
   .ENDIF
   ld     (ix+14), a                   ; 02:9EED - DD 77 0E
   bit    0, (ix+24)                   ; 02:9EF0 - DD CB 18 46
   ret    nz                           ; 02:9EF4 - C0
   ld     bc, $0000                    ; 02:9EF5 - 01 00 00
   ld     de, $FFF0                    ; 02:9EF8 - 11 F0 FF
   call   addr_036F9                   ; 02:9EFB - CD F9 36
   ld     de, $0014                    ; 02:9EFE - 11 14 00
   ld     a, (hl)                      ; 02:9F01 - 7E
   cp     $A3                          ; 02:9F02 - FE A3
   jr     z, addr_09F0D                ; 02:9F04 - 28 07
   ld     de, $0004                    ; 02:9F06 - 11 04 00
   set    1, (ix+24)                   ; 02:9F09 - DD CB 18 CE

addr_09F0D:
   ld     l, (ix+2)                    ; 02:9F0D - DD 6E 02
   ld     h, (ix+3)                    ; 02:9F10 - DD 66 03
   add    hl, de                       ; 02:9F13 - 19
   ld     (ix+2), l                    ; 02:9F14 - DD 75 02
   ld     (ix+3), h                    ; 02:9F17 - DD 74 03
   ld     a, (ix+5)                    ; 02:9F1A - DD 7E 05
   ld     (ix+18), a                   ; 02:9F1D - DD 77 12
   ld     a, (ix+6)                    ; 02:9F20 - DD 7E 06
   ld     (ix+19), a                   ; 02:9F23 - DD 77 13
   set    0, (ix+24)                   ; 02:9F26 - DD CB 18 C6
   ret                                 ; 02:9F2A - C9

UNK_09F2B:
.db $0A, $FF, $FF, $FF, $FF, $FF, $3E, $FF, $FF, $FF, $FF, $FF, $0A, $FF, $FF, $FF  ; 02:9F2B
.db $FF, $FF, $3E, $FF, $FF, $FF, $FF, $FF, $0A, $FF, $FF, $FF, $FF, $FF, $FF, $FF  ; 02:9F3B
.db $FF, $FF, $FF, $FF, $0A, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF  ; 02:9F4B
.db $FF, $FF, $FF, $FF, $FF, $FF, $FF                                               ; 02:9F5B

objfunc_18_UNKNOWN:
   set    5, (ix+24)                   ; 02:9F62 - DD CB 18 EE
   call   addr_09ED4                   ; 02:9F66 - CD D4 9E
   ld     a, (ix+17)                   ; 02:9F69 - DD 7E 11
   cp     $28                          ; 02:9F6C - FE 28
   jr     nc, addr_09F9C               ; 02:9F6E - 30 2C
   ld     hl, $0005                    ; 02:9F70 - 21 05 00
   ld     (var_D214), hl               ; 02:9F73 - 22 14 D2
   call   UNK_03956                    ; 02:9F76 - CD 56 39
   jr     c, addr_09F9C                ; 02:9F79 - 38 21
   ld     de, $0005                    ; 02:9F7B - 11 05 00
   ld     a, (sonic_vel_x_hi)          ; 02:9F7E - 3A 05 D4
   and    a                            ; 02:9F81 - A7
   jp     m, addr_09F88                ; 02:9F82 - FA 88 9F
   ld     de, $FFEC                    ; 02:9F85 - 11 EC FF

addr_09F88:
   ld     l, (ix+2)                    ; 02:9F88 - DD 6E 02
   ld     h, (ix+3)                    ; 02:9F8B - DD 66 03
   add    hl, de                       ; 02:9F8E - 19
   ld     (sonic_x), hl                ; 02:9F8F - 22 FE D3
   xor    a                            ; 02:9F92 - AF
   ld     (sonic_vel_x_sub), a         ; 02:9F93 - 32 03 D4
   ld     (sonic_vel_x), a             ; 02:9F96 - 32 04 D4
   ld     (sonic_vel_x_hi), a          ; 02:9F99 - 32 05 D4

addr_09F9C:
   ld     l, (ix+2)                    ; 02:9F9C - DD 6E 02
   ld     h, (ix+3)                    ; 02:9F9F - DD 66 03
   ld     de, $FFF0                    ; 02:9FA2 - 11 F0 FF
   add    hl, de                       ; 02:9FA5 - 19
   ld     de, (sonic_x)                ; 02:9FA6 - ED 5B FE D3
   xor    a                            ; 02:9FAA - AF
   sbc    hl, de                       ; 02:9FAB - ED 52
   jr     nc, addr_09FE5               ; 02:9FAD - 30 36
   ld     l, (ix+2)                    ; 02:9FAF - DD 6E 02
   ld     h, (ix+3)                    ; 02:9FB2 - DD 66 03
   ld     bc, $0024                    ; 02:9FB5 - 01 24 00
   add    hl, bc                       ; 02:9FB8 - 09
   and    a                            ; 02:9FB9 - A7
   sbc    hl, de                       ; 02:9FBA - ED 52
   jr     c, addr_09FE5                ; 02:9FBC - 38 27
   ld     l, (ix+5)                    ; 02:9FBE - DD 6E 05
   ld     h, (ix+6)                    ; 02:9FC1 - DD 66 06
   ld     de, $FFE0                    ; 02:9FC4 - 11 E0 FF
   add    hl, de                       ; 02:9FC7 - 19
   ld     de, (sonic_y)                ; 02:9FC8 - ED 5B 01 D4
   xor    a                            ; 02:9FCC - AF
   sbc    hl, de                       ; 02:9FCD - ED 52
   jr     nc, addr_09FE5               ; 02:9FCF - 30 14
   ld     l, (ix+5)                    ; 02:9FD1 - DD 6E 05
   ld     h, (ix+6)                    ; 02:9FD4 - DD 66 06
   ld     bc, $0050                    ; 02:9FD7 - 01 50 00
   add    hl, bc                       ; 02:9FDA - 09
   and    a                            ; 02:9FDB - A7
   sbc    hl, de                       ; 02:9FDC - ED 52
   jr     c, addr_09FE5                ; 02:9FDE - 38 05
   call   addr_09EB4                   ; 02:9FE0 - CD B4 9E
   jr     addr_09FE8                   ; 02:9FE3 - 18 03

addr_09FE5:
   call   addr_09EC4                   ; 02:9FE5 - CD C4 9E

addr_09FE8:
   ld     de, UNK_09FEE                ; 02:9FE8 - 11 EE 9F
   jp     addr_09E7E                   ; 02:9FEB - C3 7E 9E

UNK_09FEE:
.db $36, $FF, $FF, $FF, $FF, $FF, $3E, $FF, $FF, $FF, $FF, $FF, $36, $FF, $FF, $FF  ; 02:9FEE
.db $FF, $FF, $3E, $FF, $FF, $FF, $FF, $FF, $36, $FF, $FF, $FF, $FF, $FF, $FF, $FF  ; 02:9FFE
.db $FF, $FF, $FF, $FF, $36, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF  ; 02:A00E
.db $FF, $FF, $FF, $FF, $FF, $FF, $FF                                               ; 02:A01E

objfunc_19_UNKNOWN:
   set    5, (ix+24)                   ; 02:A025 - DD CB 18 EE
   call   addr_09ED4                   ; 02:A029 - CD D4 9E
   ld     a, (ix+17)                   ; 02:A02C - DD 7E 11
   cp     $28                          ; 02:A02F - FE 28
   jr     nc, addr_0A05F               ; 02:A031 - 30 2C
   ld     hl, $0005                    ; 02:A033 - 21 05 00
   ld     (var_D214), hl               ; 02:A036 - 22 14 D2
   call   UNK_03956                    ; 02:A039 - CD 56 39
   jr     c, addr_0A05F                ; 02:A03C - 38 21
   ld     de, $0005                    ; 02:A03E - 11 05 00
   ld     a, (sonic_vel_x_hi)          ; 02:A041 - 3A 05 D4
   and    a                            ; 02:A044 - A7
   jp     m, addr_0A04B                ; 02:A045 - FA 4B A0
   ld     de, $FFEC                    ; 02:A048 - 11 EC FF

addr_0A04B:
   ld     l, (ix+2)                    ; 02:A04B - DD 6E 02
   ld     h, (ix+3)                    ; 02:A04E - DD 66 03
   add    hl, de                       ; 02:A051 - 19
   ld     (sonic_x), hl                ; 02:A052 - 22 FE D3
   xor    a                            ; 02:A055 - AF
   ld     (sonic_vel_x_sub), a         ; 02:A056 - 32 03 D4
   ld     (sonic_vel_x), a             ; 02:A059 - 32 04 D4
   ld     (sonic_vel_x_hi), a          ; 02:A05C - 32 05 D4

addr_0A05F:
   ld     l, (ix+2)                    ; 02:A05F - DD 6E 02
   ld     h, (ix+3)                    ; 02:A062 - DD 66 03
   ld     de, $FFC8                    ; 02:A065 - 11 C8 FF
   add    hl, de                       ; 02:A068 - 19
   ld     de, (sonic_x)                ; 02:A069 - ED 5B FE D3
   xor    a                            ; 02:A06D - AF
   sbc    hl, de                       ; 02:A06E - ED 52
   jr     nc, addr_0A0A8               ; 02:A070 - 30 36
   ld     l, (ix+2)                    ; 02:A072 - DD 6E 02
   ld     h, (ix+3)                    ; 02:A075 - DD 66 03
   ld     bc, $0024                    ; 02:A078 - 01 24 00
   add    hl, bc                       ; 02:A07B - 09
   and    a                            ; 02:A07C - A7
   sbc    hl, de                       ; 02:A07D - ED 52
   jr     c, addr_0A0A8                ; 02:A07F - 38 27
   ld     l, (ix+5)                    ; 02:A081 - DD 6E 05
   ld     h, (ix+6)                    ; 02:A084 - DD 66 06
   ld     de, $FFE0                    ; 02:A087 - 11 E0 FF
   add    hl, de                       ; 02:A08A - 19
   ld     de, (sonic_y)                ; 02:A08B - ED 5B 01 D4
   xor    a                            ; 02:A08F - AF
   sbc    hl, de                       ; 02:A090 - ED 52
   jr     nc, addr_0A0A8               ; 02:A092 - 30 14
   ld     l, (ix+5)                    ; 02:A094 - DD 6E 05
   ld     h, (ix+6)                    ; 02:A097 - DD 66 06
   ld     bc, $0050                    ; 02:A09A - 01 50 00
   add    hl, bc                       ; 02:A09D - 09
   and    a                            ; 02:A09E - A7
   sbc    hl, de                       ; 02:A09F - ED 52
   jr     c, addr_0A0A8                ; 02:A0A1 - 38 05
   call   addr_09EB4                   ; 02:A0A3 - CD B4 9E
   jr     addr_0A0AB                   ; 02:A0A6 - 18 03

addr_0A0A8:
   call   addr_09EC4                   ; 02:A0A8 - CD C4 9E

addr_0A0AB:
   ld     de, UNK_0A0B1                ; 02:A0AB - 11 B1 A0
   jp     addr_09E7E                   ; 02:A0AE - C3 7E 9E

UNK_0A0B1:
.db $38, $FF, $FF, $FF, $FF, $FF, $3E, $FF, $FF, $FF, $FF, $FF, $38, $FF, $FF, $FF  ; 02:A0B1
.db $FF, $FF, $3E, $FF, $FF, $FF, $FF, $FF, $38, $FF, $FF, $FF, $FF, $FF, $FF, $FF  ; 02:A0C1
.db $FF, $FF, $FF, $FF, $38, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF  ; 02:A0D1
.db $FF, $FF, $FF, $FF, $FF, $FF, $FF                                               ; 02:A0E1

objfunc_1A_UNKNOWN:
   set    5, (ix+24)                   ; 02:A0E8 - DD CB 18 EE
   ld     (ix+13), $30                 ; 02:A0EC - DD 36 0D 30
   ld     (ix+14), $10                 ; 02:A0F0 - DD 36 0E 10
   bit    0, (ix+24)                   ; 02:A0F4 - DD CB 18 46
   jr     nz, addr_0A11E               ; 02:A0F8 - 20 24
   ld     l, (ix+2)                    ; 02:A0FA - DD 6E 02
   ld     h, (ix+3)                    ; 02:A0FD - DD 66 03
   ld     de, $0018                    ; 02:A100 - 11 18 00
   add    hl, de                       ; 02:A103 - 19
   ld     (ix+2), l                    ; 02:A104 - DD 75 02
   ld     (ix+3), h                    ; 02:A107 - DD 74 03
   ld     l, (ix+5)                    ; 02:A10A - DD 6E 05
   ld     h, (ix+6)                    ; 02:A10D - DD 66 06
   ld     de, $0010                    ; 02:A110 - 11 10 00
   add    hl, de                       ; 02:A113 - 19
   ld     (ix+5), l                    ; 02:A114 - DD 75 05
   ld     (ix+6), h                    ; 02:A117 - DD 74 06
   set    0, (ix+24)                   ; 02:A11A - DD CB 18 C6

addr_0A11E:
   ld     a, (ix+17)                   ; 02:A11E - DD 7E 11
   cp     $64                          ; 02:A121 - FE 64
   jr     c, addr_0A142                ; 02:A123 - 38 1D
   jr     nz, addr_0A12A               ; 02:A125 - 20 03
   ld     a, $13                       ; 02:A127 - 3E 13
   rst    $28                          ; 02:A129 - EF

addr_0A12A:
   ld     hl, $0000                    ; 02:A12A - 21 00 00
   ld     (var_D214), hl               ; 02:A12D - 22 14 D2
   call   UNK_03956                    ; 02:A130 - CD 56 39
   call   nc, addr_035FD               ; 02:A133 - D4 FD 35
   ld     de, UNK_0A173                ; 02:A136 - 11 73 A1
   ld     bc, UNK_0A167                ; 02:A139 - 01 67 A1
   call   addr_07C41                   ; 02:A13C - CD 41 7C
   jp     addr_0A159                   ; 02:A13F - C3 59 A1

addr_0A142:
   cp     $46                          ; 02:A142 - FE 46
   jr     nc, addr_0A150               ; 02:A144 - 30 0A
   xor    a                            ; 02:A146 - AF
   ld     (ix+15), a                   ; 02:A147 - DD 77 0F
   ld     (ix+16), a                   ; 02:A14A - DD 77 10
   jp     addr_0A159                   ; 02:A14D - C3 59 A1

addr_0A150:
   ld     de, UNK_0A173                ; 02:A150 - 11 73 A1
   ld     bc, UNK_0A16E                ; 02:A153 - 01 6E A1
   call   addr_07C41                   ; 02:A156 - CD 41 7C

addr_0A159:
   inc    (ix+17)                      ; 02:A159 - DD 34 11
   ld     a, (ix+17)                   ; 02:A15C - DD 7E 11
   cp     $A0                          ; 02:A15F - FE A0
   ret    c                            ; 02:A161 - D8
   ld     (ix+17), $00                 ; 02:A162 - DD 36 11 00
   ret                                 ; 02:A166 - C9

UNK_0A167:
.db $00, $01, $01, $01, $02, $01, $FF                                               ; 02:A167

UNK_0A16E:
.db $02, $01, $03, $01, $FF                                                         ; 02:A16E

UNK_0A173:
.db $02, $04, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF  ; 02:A173
.db $FF, $FF, $FE, $FE, $FE, $FE, $02, $04, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF  ; 02:A183
.db $FF, $FF, $FF, $FF, $FE, $FE, $16, $18, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF  ; 02:A193
.db $FF, $FF, $FF, $FF, $FF, $FF, $FF                                               ; 02:A1A3

objfunc_1B_UNKNOWN:
   ld     (ix+13), $0A                 ; 02:A1AA - DD 36 0D 0A
   ld     (ix+14), $20                 ; 02:A1AE - DD 36 0E 20
   ld     hl, $0803                    ; 02:A1B2 - 21 03 08
   ld     (var_D214), hl               ; 02:A1B5 - 22 14 D2
   call   UNK_03956                    ; 02:A1B8 - CD 56 39
   ld     hl, $0E00                    ; 02:A1BB - 21 00 0E
   ld     (g_FF_string_high_byte), hl  ; 02:A1BE - 22 0E D2
   call   nc, UNK_035E5                ; 02:A1C1 - D4 E5 35
   ld     (ix+10), $00                 ; 02:A1C4 - DD 36 0A 00
   ld     (ix+11), $01                 ; 02:A1C8 - DD 36 0B 01
   ld     (ix+12), $00                 ; 02:A1CC - DD 36 0C 00
   ld     l, (ix+2)                    ; 02:A1D0 - DD 6E 02
   ld     h, (ix+3)                    ; 02:A1D3 - DD 66 03
   ld     de, $000A                    ; 02:A1D6 - 11 0A 00
   add    hl, de                       ; 02:A1D9 - 19
   ex     de, hl                       ; 02:A1DA - EB
   ld     hl, (sonic_x)                ; 02:A1DB - 2A FE D3
   ld     bc, $000C                    ; 02:A1DE - 01 0C 00
   add    hl, bc                       ; 02:A1E1 - 09
   and    a                            ; 02:A1E2 - A7
   sbc    hl, de                       ; 02:A1E3 - ED 52
   jr     nc, addr_0A25D               ; 02:A1E5 - 30 76
   ld     bc, UNK_0A2D2                ; 02:A1E7 - 01 D2 A2
   ld     a, (ix+17)                   ; 02:A1EA - DD 7E 11
   cp     $EB                          ; 02:A1ED - FE EB
   jr     c, addr_0A1FA                ; 02:A1EF - 38 09
   jr     nz, addr_0A1F7               ; 02:A1F1 - 20 04
   ld     (ix+22), $00                 ; 02:A1F3 - DD 36 16 00

addr_0A1F7:
   ld     bc, UNK_0A2D7                ; 02:A1F7 - 01 D7 A2

addr_0A1FA:
   ld     de, UNK_0A2DA                ; 02:A1FA - 11 DA A2
   call   addr_07C41                   ; 02:A1FD - CD 41 7C
   ld     a, (ix+17)                   ; 02:A200 - DD 7E 11
   cp     $ED                          ; 02:A203 - FE ED
   jp     nz, addr_0A2CE               ; 02:A205 - C2 CE A2
   call   spawn_object                 ; 02:A208 - CD 7B 7C
   jp     c, addr_0A2CE                ; 02:A20B - DA CE A2
   ld     e, (ix+2)                    ; 02:A20E - DD 5E 02
   ld     d, (ix+3)                    ; 02:A211 - DD 56 03
   ld     c, (ix+5)                    ; 02:A214 - DD 4E 05
   ld     b, (ix+6)                    ; 02:A217 - DD 46 06
   push   ix                           ; 02:A21A - DD E5
   push   hl                           ; 02:A21C - E5
   pop    ix                           ; 02:A21D - DD E1
   xor    a                            ; 02:A21F - AF
   ld     (ix+0), $1C                  ; 02:A220 - DD 36 00 1C
   ld     (ix+1), a                    ; 02:A224 - DD 77 01
   ld     (ix+2), e                    ; 02:A227 - DD 73 02
   ld     (ix+3), d                    ; 02:A22A - DD 72 03
   ld     hl, $0006                    ; 02:A22D - 21 06 00
   add    hl, bc                       ; 02:A230 - 09
   ld     (ix+4), a                    ; 02:A231 - DD 77 04
   ld     (ix+5), l                    ; 02:A234 - DD 75 05
   ld     (ix+6), h                    ; 02:A237 - DD 74 06
   ld     (ix+17), a                   ; 02:A23A - DD 77 11
   ld     (ix+22), a                   ; 02:A23D - DD 77 16
   ld     (ix+23), a                   ; 02:A240 - DD 77 17
   ld     (ix+7), a                    ; 02:A243 - DD 77 07
   ld     (ix+8), $FF                  ; 02:A246 - DD 36 08 FF
   ld     (ix+9), $FF                  ; 02:A24A - DD 36 09 FF
   ld     (ix+10), a                   ; 02:A24E - DD 77 0A
   ld     (ix+11), $01                 ; 02:A251 - DD 36 0B 01
   ld     (ix+12), a                   ; 02:A255 - DD 77 0C
   pop    ix                           ; 02:A258 - DD E1
   jp     addr_0A2CE                   ; 02:A25A - C3 CE A2

addr_0A25D:
   ld     bc, UNK_0A2D2                ; 02:A25D - 01 D2 A2
   ld     a, (ix+17)                   ; 02:A260 - DD 7E 11
   cp     $EB                          ; 02:A263 - FE EB
   jr     c, addr_0A270                ; 02:A265 - 38 09
   jr     nz, addr_0A26D               ; 02:A267 - 20 04
   ld     (ix+22), $00                 ; 02:A269 - DD 36 16 00

addr_0A26D:
   ld     bc, UNK_0A2D7                ; 02:A26D - 01 D7 A2

addr_0A270:
   ld     de, UNK_0A30B                ; 02:A270 - 11 0B A3
   call   addr_07C41                   ; 02:A273 - CD 41 7C
   ld     a, (ix+17)                   ; 02:A276 - DD 7E 11
   cp     $ED                          ; 02:A279 - FE ED
   jr     nz, addr_0A2CE               ; 02:A27B - 20 51
   call   spawn_object                 ; 02:A27D - CD 7B 7C
   jp     c, addr_0A2CE                ; 02:A280 - DA CE A2
   ld     e, (ix+2)                    ; 02:A283 - DD 5E 02
   ld     d, (ix+3)                    ; 02:A286 - DD 56 03
   ld     c, (ix+5)                    ; 02:A289 - DD 4E 05
   ld     b, (ix+6)                    ; 02:A28C - DD 46 06
   push   ix                           ; 02:A28F - DD E5
   push   hl                           ; 02:A291 - E5
   pop    ix                           ; 02:A292 - DD E1
   xor    a                            ; 02:A294 - AF
   ld     (ix+0), $1C                  ; 02:A295 - DD 36 00 1C
   ld     (ix+1), a                    ; 02:A299 - DD 77 01
   ld     (ix+2), e                    ; 02:A29C - DD 73 02
   ld     (ix+3), d                    ; 02:A29F - DD 72 03
   ld     hl, $0006                    ; 02:A2A2 - 21 06 00
   add    hl, bc                       ; 02:A2A5 - 09
   ld     (ix+4), a                    ; 02:A2A6 - DD 77 04
   ld     (ix+5), l                    ; 02:A2A9 - DD 75 05
   ld     (ix+6), h                    ; 02:A2AC - DD 74 06
   ld     (ix+17), a                   ; 02:A2AF - DD 77 11
   ld     (ix+22), a                   ; 02:A2B2 - DD 77 16
   ld     (ix+23), a                   ; 02:A2B5 - DD 77 17
   ld     (ix+7), a                    ; 02:A2B8 - DD 77 07
   ld     (ix+8), $01                  ; 02:A2BB - DD 36 08 01
   ld     (ix+9), a                    ; 02:A2BF - DD 77 09
   ld     (ix+10), a                   ; 02:A2C2 - DD 77 0A
   ld     (ix+11), $01                 ; 02:A2C5 - DD 36 0B 01
   ld     (ix+12), a                   ; 02:A2C9 - DD 77 0C
   pop    ix                           ; 02:A2CC - DD E1

addr_0A2CE:
   inc    (ix+17)                      ; 02:A2CE - DD 34 11
   ret                                 ; 02:A2D1 - C9

UNK_0A2D2:
.db $00, $1C, $01, $06, $FF                                                         ; 02:A2D2

UNK_0A2D7:
.db $02, $18, $FF                                                                   ; 02:A2D7

UNK_0A2DA:
.db $40, $42, $FF, $FF, $FF, $FF, $60, $62, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF  ; 02:A2DA
.db $FF, $FF, $44, $46, $FF, $FF, $FF, $FF, $64, $66, $FF, $FF, $FF, $FF, $FF, $FF  ; 02:A2EA
.db $FF, $FF, $FF, $FF, $40, $42, $FF, $FF, $FF, $FF, $68, $6A, $FF, $FF, $FF, $FF  ; 02:A2FA
.db $FF                                                                             ; 02:A30A

UNK_0A30B:
.db $50, $52, $FF, $FF, $FF, $FF, $70, $72, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF  ; 02:A30B
.db $FF, $FF, $4C, $4E, $FF, $FF, $FF, $FF, $6C, $6E, $FF, $FF, $FF, $FF, $FF, $FF  ; 02:A31B
.db $FF, $FF, $FF, $FF, $50, $52, $FF, $FF, $FF, $FF, $48, $4A, $FF, $FF, $FF, $FF  ; 02:A32B
.db $FF                                                                             ; 02:A33B

objfunc_1C_UNKNOWN:
   res    5, (ix+24)                   ; 02:A33C - DD CB 18 AE
   ld     (ix+13), $0A                 ; 02:A340 - DD 36 0D 0A
   ld     (ix+14), $0F                 ; 02:A344 - DD 36 0E 0F
   ld     hl, $0101                    ; 02:A348 - 21 01 01
   ld     (var_D214), hl               ; 02:A34B - 22 14 D2
   call   UNK_03956                    ; 02:A34E - CD 56 39
   call   nc, addr_035FD               ; 02:A351 - D4 FD 35
   bit    7, (ix+24)                   ; 02:A354 - DD CB 18 7E
   jr     z, addr_0A366                ; 02:A358 - 28 0C
   ld     (ix+10), $00                 ; 02:A35A - DD 36 0A 00
   ld     (ix+11), $FD                 ; 02:A35E - DD 36 0B FD
   ld     (ix+12), $FF                 ; 02:A362 - DD 36 0C FF

addr_0A366:
   ld     l, (ix+10)                   ; 02:A366 - DD 6E 0A
   ld     h, (ix+11)                   ; 02:A369 - DD 66 0B
   ld     a, (ix+12)                   ; 02:A36C - DD 7E 0C
   ld     de, $001F                    ; 02:A36F - 11 1F 00
   add    hl, de                       ; 02:A372 - 19
   adc    a, $00                       ; 02:A373 - CE 00
   ld     (ix+10), l                   ; 02:A375 - DD 75 0A
   ld     (ix+11), h                   ; 02:A378 - DD 74 0B
   ld     (ix+12), a                   ; 02:A37B - DD 77 0C
   ld     a, (ix+17)                   ; 02:A37E - DD 7E 11
   cp     $82                          ; 02:A381 - FE 82
   jr     nc, addr_0A391               ; 02:A383 - 30 0C
   ld     bc, UNK_0A3B1                ; 02:A385 - 01 B1 A3
   ld     de, UNK_0A3BB                ; 02:A388 - 11 BB A3
   call   addr_07C41                   ; 02:A38B - CD 41 7C
   jp     addr_0A3A3                   ; 02:A38E - C3 A3 A3

addr_0A391:
   jr     nz, addr_0A39A               ; 02:A391 - 20 07
   ld     (ix+22), $00                 ; 02:A393 - DD 36 16 00
   ld     a, $01                       ; 02:A397 - 3E 01
   rst    $28                          ; 02:A399 - EF

addr_0A39A:
   ld     bc, UNK_0A3B4                ; 02:A39A - 01 B4 A3
   ld     de, UNK_0A3BB                ; 02:A39D - 11 BB A3
   call   addr_07C41                   ; 02:A3A0 - CD 41 7C

addr_0A3A3:
   inc    (ix+17)                      ; 02:A3A3 - DD 34 11
   ld     a, (ix+17)                   ; 02:A3A6 - DD 7E 11
   cp     $A5                          ; 02:A3A9 - FE A5
   ret    c                            ; 02:A3AB - D8
   ld     (ix+0), $FF                  ; 02:A3AC - DD 36 00 FF
   ret                                 ; 02:A3B0 - C9

UNK_0A3B1:
.db $00, $08, $FF                                                                   ; 02:A3B1

UNK_0A3B4:
.db $01, $0C, $02, $0C, $03, $0C, $FF                                               ; 02:A3B4

UNK_0A3BB:
.db $20, $22, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF  ; 02:A3BB
.db $FF, $FF, $74, $76, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF  ; 02:A3CB
.db $FF, $FF, $FF, $FF, $78, $7A, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF  ; 02:A3DB
.db $FF, $FF, $FF, $FF, $FF, $FF, $7C, $7E, $FF, $FF, $FF, $FF, $FF                 ; 02:A3EB

objfunc_1D_floorbutton:
   ld     (ix+13), $0A                 ; 02:A3F8 - DD 36 0D 0A
   ld     (ix+14), $11                 ; 02:A3FC - DD 36 0E 11
   bit    0, (ix+24)                   ; 02:A400 - DD CB 18 46
   jr     nz, addr_0A41A               ; 02:A404 - 20 14
   ld     l, (ix+2)                    ; 02:A406 - DD 6E 02
   ld     h, (ix+3)                    ; 02:A409 - DD 66 03
   ld     de, $0008                    ; 02:A40C - 11 08 00
   add    hl, de                       ; 02:A40F - 19
   ld     (ix+2), l                    ; 02:A410 - DD 75 02
   ld     (ix+3), h                    ; 02:A413 - DD 74 03
   set    0, (ix+24)                   ; 02:A416 - DD CB 18 C6

addr_0A41A:
   ld     hl, $0001                    ; 02:A41A - 21 01 00
   ld     (var_D214), hl               ; 02:A41D - 22 14 D2
   call   UNK_03956                    ; 02:A420 - CD 56 39
   jr     c, addr_0A464                ; 02:A423 - 38 3F
   ld     a, (sonic_vel_y_hi)          ; 02:A425 - 3A 08 D4
   and    a                            ; 02:A428 - A7
   jp     m, addr_0A464                ; 02:A429 - FA 64 A4
   ld     (ix+15), UNK_0A48B&$FF       ; 02:A42C - DD 36 0F 8B
   ld     (ix+16), UNK_0A48B>>8        ; 02:A430 - DD 36 10 A4
   ld     a, (var_D2D4)                ; 02:A434 - 3A D4 D2
   cp     $03                          ; 02:A437 - FE 03
   jr     nz, addr_0A443               ; 02:A439 - 20 08
   ld     (ix+15), UNK_0A49B&$FF       ; 02:A43B - DD 36 0F 9B
   ld     (ix+16), UNK_0A49B>>8        ; 02:A43F - DD 36 10 A4

addr_0A443:
   ld     bc, $0006                    ; 02:A443 - 01 06 00
   ld     de, $0000                    ; 02:A446 - 11 00 00
   call   addr_07CC1                   ; 02:A449 - CD C1 7C
   bit    1, (ix+24)                   ; 02:A44C - DD CB 18 4E
   jr     nz, addr_0A47F               ; 02:A450 - 20 2D
   set    1, (ix+24)                   ; 02:A452 - DD CB 18 CE
   ld     hl, var_D317                 ; 02:A456 - 21 17 D3
   call   calc_level_offset_HL_and_mask_C  ; 02:A459 - CD 02 0C
   ld     a, (hl)                      ; 02:A45C - 7E
   xor    c                            ; 02:A45D - A9
   ld     (hl), a                      ; 02:A45E - 77
   ld     a, $1A                       ; 02:A45F - 3E 1A
   rst    $28                          ; 02:A461 - EF
   jr     addr_0A47F                   ; 02:A462 - 18 1B

addr_0A464:
   res    1, (ix+24)                   ; 02:A464 - DD CB 18 8E
   ld     (ix+15), UNK_0A493&$FF       ; 02:A468 - DD 36 0F 93
   ld     (ix+16), UNK_0A493>>8        ; 02:A46C - DD 36 10 A4
   ld     a, (var_D2D4)                ; 02:A470 - 3A D4 D2
   cp     $03                          ; 02:A473 - FE 03
   jr     nz, addr_0A47F               ; 02:A475 - 20 08
   ld     (ix+15), UNK_0A4A3&$FF       ; 02:A477 - DD 36 0F A3
   ld     (ix+16), UNK_0A4A3>>8        ; 02:A47B - DD 36 10 A4

addr_0A47F:
   xor    a                            ; 02:A47F - AF
   ld     (ix+10), a                   ; 02:A480 - DD 77 0A
   ld     (ix+11), $02                 ; 02:A483 - DD 36 0B 02
   ld     (ix+12), a                   ; 02:A487 - DD 77 0C
   ret                                 ; 02:A48A - C9

UNK_0A48B:
.db $1A, $1C, $FF, $FF, $FF, $FF, $FF, $FF                                          ; 02:A48B

UNK_0A493:
.db $3A, $3C, $FF, $FF, $FF, $FF, $FF, $FF                                          ; 02:A493

UNK_0A49B:
.db $38, $3A, $FF, $FF, $FF, $FF, $FF, $FF                                          ; 02:A49B

UNK_0A4A3:
.db $34, $36, $FF, $FF, $FF, $FF, $FF, $FF                                          ; 02:A4A3

objfunc_1E_door_from_button:
   set    5, (ix+24)                   ; 02:A4AB - DD CB 18 EE
   call   addr_09ED4                   ; 02:A4AF - CD D4 9E
   ld     a, (ix+17)                   ; 02:A4B2 - DD 7E 11
   cp     $28                          ; 02:A4B5 - FE 28
   jr     nc, addr_0A4E5               ; 02:A4B7 - 30 2C
   ld     hl, $0005                    ; 02:A4B9 - 21 05 00
   ld     (var_D214), hl               ; 02:A4BC - 22 14 D2
   call   UNK_03956                    ; 02:A4BF - CD 56 39
   jr     c, addr_0A4E5                ; 02:A4C2 - 38 21
   ld     de, $0005                    ; 02:A4C4 - 11 05 00
   ld     a, (sonic_vel_x_hi)          ; 02:A4C7 - 3A 05 D4
   and    a                            ; 02:A4CA - A7
   jp     m, addr_0A4D1                ; 02:A4CB - FA D1 A4
   ld     de, $FFEC                    ; 02:A4CE - 11 EC FF

addr_0A4D1:
   ld     l, (ix+2)                    ; 02:A4D1 - DD 6E 02
   ld     h, (ix+3)                    ; 02:A4D4 - DD 66 03
   add    hl, de                       ; 02:A4D7 - 19
   ld     (sonic_x), hl                ; 02:A4D8 - 22 FE D3
   xor    a                            ; 02:A4DB - AF
   ld     (sonic_vel_x_sub), a         ; 02:A4DC - 32 03 D4
   ld     (sonic_vel_x), a             ; 02:A4DF - 32 04 D4
   ld     (sonic_vel_x_hi), a          ; 02:A4E2 - 32 05 D4

addr_0A4E5:
   ld     hl, var_D317                 ; 02:A4E5 - 21 17 D3
   call   calc_level_offset_HL_and_mask_C  ; 02:A4E8 - CD 02 0C
   bit    1, (ix+24)                   ; 02:A4EB - DD CB 18 4E
   jr     z, addr_0A4F7                ; 02:A4EF - 28 06
   ld     a, (hl)                      ; 02:A4F1 - 7E
   and    c                            ; 02:A4F2 - A1
   jr     nz, addr_0A509               ; 02:A4F3 - 20 14
   jr     addr_0A4FB                   ; 02:A4F5 - 18 04

addr_0A4F7:
   ld     a, (hl)                      ; 02:A4F7 - 7E
   and    c                            ; 02:A4F8 - A1
   jr     z, addr_0A509                ; 02:A4F9 - 28 0E

addr_0A4FB:
   ld     a, (ix+17)                   ; 02:A4FB - DD 7E 11
   cp     $30                          ; 02:A4FE - FE 30
   jr     nc, addr_0A514               ; 02:A500 - 30 12
   inc    a                            ; 02:A502 - 3C
   inc    a                            ; 02:A503 - 3C
   ld     (ix+17), a                   ; 02:A504 - DD 77 11
   jr     addr_0A514                   ; 02:A507 - 18 0B

addr_0A509:
   ld     a, (ix+17)                   ; 02:A509 - DD 7E 11
   and    a                            ; 02:A50C - A7
   jr     z, addr_0A514                ; 02:A50D - 28 05
   dec    a                            ; 02:A50F - 3D
   dec    a                            ; 02:A510 - 3D
   ld     (ix+17), a                   ; 02:A511 - DD 77 11

addr_0A514:
   ld     de, UNK_0A51A                ; 02:A514 - 11 1A A5
   jp     addr_09E7E                   ; 02:A517 - C3 7E 9E

UNK_0A51A:
.db $3E, $FF, $FF, $FF, $FF, $FF, $38, $FF, $FF, $FF, $FF, $FF, $3E, $FF, $FF, $FF  ; 02:A51A
.db $FF, $FF, $38, $FF, $FF, $FF, $FF, $FF, $3E, $FF, $FF, $FF, $FF, $FF, $FF, $FF  ; 02:A52A
.db $FF, $FF, $FF, $FF, $3E, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF  ; 02:A53A
.db $FF, $FF, $FF, $FF, $FF, $FF, $FF                                               ; 02:A54A

objfunc_1F_UNKNOWN:
   ld     (ix+13), $06                 ; 02:A551 - DD 36 0D 06
   ld     (ix+14), $10                 ; 02:A555 - DD 36 0E 10
   ld     a, (var_D223)                ; 02:A559 - 3A 23 D2
   and    $01                          ; 02:A55C - E6 01
   jr     nz, addr_0A5B3               ; 02:A55E - 20 53
   ld     hl, UNK_0A6B9                ; 02:A560 - 21 B9 A6
   bit    1, (ix+24)                   ; 02:A563 - DD CB 18 4E
   jr     z, addr_0A56C                ; 02:A567 - 28 03
   ld     hl, UNK_0A769                ; 02:A569 - 21 69 A7

addr_0A56C:
   ld     e, (ix+17)                   ; 02:A56C - DD 5E 11
   sla    e                            ; 02:A56F - CB 23
   ld     d, $00                       ; 02:A571 - 16 00
   add    hl, de                       ; 02:A573 - 19
   ld     c, (hl)                      ; 02:A574 - 4E
   inc    hl                           ; 02:A575 - 23
   ld     b, (hl)                      ; 02:A576 - 46
   ld     l, (ix+1)                    ; 02:A577 - DD 6E 01
   ld     h, (ix+2)                    ; 02:A57A - DD 66 02
   ld     a, (ix+3)                    ; 02:A57D - DD 7E 03
   add    hl, bc                       ; 02:A580 - 09
   bit    7, b                         ; 02:A581 - CB 78
   jr     z, addr_0A589                ; 02:A583 - 28 04
   adc    a, $FF                       ; 02:A585 - CE FF
   jr     addr_0A58B                   ; 02:A587 - 18 02

addr_0A589:
   adc    a, $00                       ; 02:A589 - CE 00

addr_0A58B:
   ld     (ix+1), l                    ; 02:A58B - DD 75 01
   ld     (ix+2), h                    ; 02:A58E - DD 74 02
   ld     (ix+3), a                    ; 02:A591 - DD 77 03
   ld     hl, UNK_0A6E5                ; 02:A594 - 21 E5 A6
   add    hl, de                       ; 02:A597 - 19
   ld     e, (hl)                      ; 02:A598 - 5E
   inc    hl                           ; 02:A599 - 23
   ld     d, (hl)                      ; 02:A59A - 56
   ld     l, (ix+18)                   ; 02:A59B - DD 6E 12
   ld     h, (ix+19)                   ; 02:A59E - DD 66 13
   add    hl, de                       ; 02:A5A1 - 19
   ld     (ix+18), l                   ; 02:A5A2 - DD 75 12
   ld     (ix+19), h                   ; 02:A5A5 - DD 74 13
   ld     c, $00                       ; 02:A5A8 - 0E 00
   bit    7, h                         ; 02:A5AA - CB 7C
   jr     z, addr_0A5B0                ; 02:A5AC - 28 02
   ld     c, $FF                       ; 02:A5AE - 0E FF

addr_0A5B0:
   ld     (ix+20), c                   ; 02:A5B0 - DD 71 14

addr_0A5B3:
   ld     l, (ix+2)                    ; 02:A5B3 - DD 6E 02
   ld     h, (ix+3)                    ; 02:A5B6 - DD 66 03
   ld     (g_FF_string_high_byte), hl  ; 02:A5B9 - 22 0E D2
   ld     l, (ix+5)                    ; 02:A5BC - DD 6E 05
   ld     h, (ix+6)                    ; 02:A5BF - DD 66 06
   ld     (var_D210), hl               ; 02:A5C2 - 22 10 D2
   bit    1, (ix+24)                   ; 02:A5C5 - DD CB 18 4E
   jr     nz, addr_0A614               ; 02:A5C9 - 20 49
   ld     hl, $A711                    ; 02:A5CB - 21 11 A7
   ld     e, (ix+17)                   ; 02:A5CE - DD 5E 11
   ld     d, $00                       ; 02:A5D1 - 16 00
   add    hl, de                       ; 02:A5D3 - 19
   ld     a, $24                       ; 02:A5D4 - 3E 24
   call   addr_0A688                   ; 02:A5D6 - CD 88 A6
   ld     a, $26                       ; 02:A5D9 - 3E 26
   call   addr_0A6A2                   ; 02:A5DB - CD A2 A6
   ld     a, $26                       ; 02:A5DE - 3E 26
   call   addr_0A688                   ; 02:A5E0 - CD 88 A6
   ld     a, $26                       ; 02:A5E3 - 3E 26
   call   addr_0A6A2                   ; 02:A5E5 - CD A2 A6
   ld     (ix+13), $06                 ; 02:A5E8 - DD 36 0D 06
   ld     hl, $0802                    ; 02:A5EC - 21 02 08
   ld     (var_D214), hl               ; 02:A5EF - 22 14 D2
   call   UNK_03956                    ; 02:A5F2 - CD 56 39
   ld     hl, $0000                    ; 02:A5F5 - 21 00 00
   ld     (g_FF_string_high_byte), hl  ; 02:A5F8 - 22 0E D2
   jr     c, addr_0A602                ; 02:A5FB - 38 05
   call   UNK_035E5                    ; 02:A5FD - CD E5 35
   jr     addr_0A65B                   ; 02:A600 - 18 59

addr_0A602:
   ld     (ix+13), $16                 ; 02:A602 - DD 36 0D 16
   ld     hl, $0806                    ; 02:A606 - 21 06 08
   ld     (var_D214), hl               ; 02:A609 - 22 14 D2
   call   UNK_03956                    ; 02:A60C - CD 56 39
   call   nc, addr_035FD               ; 02:A60F - D4 FD 35
   jr     addr_0A65B                   ; 02:A612 - 18 47

addr_0A614:
   ld     hl, $A795                    ; 02:A614 - 21 95 A7
   ld     e, (ix+17)                   ; 02:A617 - DD 5E 11
   ld     d, $00                       ; 02:A61A - 16 00
   add    hl, de                       ; 02:A61C - 19
   ld     a, $2A                       ; 02:A61D - 3E 2A
   call   addr_0A688                   ; 02:A61F - CD 88 A6
   ld     a, $28                       ; 02:A622 - 3E 28
   call   addr_0A6A2                   ; 02:A624 - CD A2 A6
   ld     a, $28                       ; 02:A627 - 3E 28
   call   addr_0A688                   ; 02:A629 - CD 88 A6
   ld     a, $28                       ; 02:A62C - 3E 28
   call   addr_0A6A2                   ; 02:A62E - CD A2 A6
   ld     (ix+13), $10                 ; 02:A631 - DD 36 0D 10
   ld     hl, $0401                    ; 02:A635 - 21 01 04
   ld     (var_D214), hl               ; 02:A638 - 22 14 D2
   call   UNK_03956                    ; 02:A63B - CD 56 39
   jr     c, addr_0A645                ; 02:A63E - 38 05
   call   addr_035FD                   ; 02:A640 - CD FD 35
   jr     addr_0A65B                   ; 02:A643 - 18 16

addr_0A645:
   ld     (ix+13), $16                 ; 02:A645 - DD 36 0D 16
   ld     hl, $0410                    ; 02:A649 - 21 10 04
   ld     (var_D214), hl               ; 02:A64C - 22 14 D2
   call   UNK_03956                    ; 02:A64F - CD 56 39
   ld     hl, $0000                    ; 02:A652 - 21 00 00
   ld     (g_FF_string_high_byte), hl  ; 02:A655 - 22 0E D2
   call   nc, UNK_035E5                ; 02:A658 - D4 E5 35

addr_0A65B:
   ld     (ix+11), $01                 ; 02:A65B - DD 36 0B 01
   ld     a, (var_D223)                ; 02:A65F - 3A 23 D2
   and    $01                          ; 02:A662 - E6 01
   ret    nz                           ; 02:A664 - C0
   inc    (ix+17)                      ; 02:A665 - DD 34 11
   ld     a, (ix+17)                   ; 02:A668 - DD 7E 11
   cp     $16                          ; 02:A66B - FE 16
   ret    c                            ; 02:A66D - D8
   ld     (ix+17), $00                 ; 02:A66E - DD 36 11 00
   inc    (ix+21)                      ; 02:A672 - DD 34 15
   ld     a, (ix+21)                   ; 02:A675 - DD 7E 15
   cp     $14                          ; 02:A678 - FE 14
   ret    c                            ; 02:A67A - D8
   ld     (ix+21), $00                 ; 02:A67B - DD 36 15 00
   ld     a, (ix+24)                   ; 02:A67F - DD 7E 18
   xor    $02                          ; 02:A682 - EE 02
   ld     (ix+24), a                   ; 02:A684 - DD 77 18
   ret                                 ; 02:A687 - C9

addr_0A688:
   push   hl                           ; 02:A688 - E5
   ld     e, (hl)                      ; 02:A689 - 5E
   ld     d, $00                       ; 02:A68A - 16 00
   ld     (var_D212), de               ; 02:A68C - ED 53 12 D2
   ld     l, (ix+19)                   ; 02:A690 - DD 6E 13
   ld     h, (ix+20)                   ; 02:A693 - DD 66 14
   ld     (var_D214), hl               ; 02:A696 - 22 14 D2
   call   UNK_03581                    ; 02:A699 - CD 81 35
   pop    hl                           ; 02:A69C - E1
   ld     de, $0016                    ; 02:A69D - 11 16 00
   add    hl, de                       ; 02:A6A0 - 19
   ret                                 ; 02:A6A1 - C9

addr_0A6A2:
   push   hl                           ; 02:A6A2 - E5
   ld     e, (hl)                      ; 02:A6A3 - 5E
   ld     d, $00                       ; 02:A6A4 - 16 00
   ld     (var_D212), de               ; 02:A6A6 - ED 53 12 D2
   ld     hl, $0000                    ; 02:A6AA - 21 00 00
   ld     (var_D214), hl               ; 02:A6AD - 22 14 D2
   call   UNK_03581                    ; 02:A6B0 - CD 81 35
   pop    hl                           ; 02:A6B3 - E1
   ld     de, $0016                    ; 02:A6B4 - 11 16 00
   add    hl, de                       ; 02:A6B7 - 19
   ret                                 ; 02:A6B8 - C9

UNK_0A6B9:
.db $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00  ; 02:A6B9
.db $00, $00, $00, $00, $00, $00, $E0, $FF, $E0, $FF, $E0, $FF, $E0, $FF, $C0, $FF  ; 02:A6C9
.db $C0, $FF, $80, $FF, $80, $FF, $00, $FF, $00, $FF, $00, $FE                      ; 02:A6D9

UNK_0A6E5:
.db $00, $FF, $80, $FF, $80, $FF, $C0, $FF, $C0, $FF, $E0, $FF, $E0, $FF, $F0, $FF  ; 02:A6E5
.db $F0, $FF, $F0, $FF, $F0, $FF, $10, $00, $10, $00, $10, $00, $10, $00, $20, $00  ; 02:A6F5
.db $20, $00, $40, $00, $40, $00, $80, $00, $80, $00, $00, $01, $00, $01, $02, $02  ; 02:A705
.db $03, $03, $03, $03, $03, $03, $03, $03, $03, $03, $03, $03, $03, $03, $02, $02  ; 02:A715
.db $01, $00, $07, $07, $07, $07, $07, $07, $07, $07, $07, $07, $07, $07, $07, $07  ; 02:A725
.db $07, $07, $07, $07, $07, $07, $07, $07, $0E, $0D, $0C, $0C, $0B, $0B, $0B, $0B  ; 02:A735
.db $0B, $0B, $0B, $0B, $0B, $0B, $0B, $0B, $0B, $0B, $0C, $0C, $0D, $0E, $15, $13  ; 02:A745
.db $12, $11, $10, $10, $0F, $0F, $0F, $0F, $0F, $0F, $0F, $0F, $0F, $0F, $10, $10  ; 02:A755
.db $11, $12, $13, $15                                                              ; 02:A765

UNK_0A769:
.db $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00  ; 02:A769
.db $00, $00, $00, $00, $00, $00, $20, $00, $20, $00, $20, $00, $20, $00, $40, $00  ; 02:A779
.db $40, $00, $80, $00, $80, $00, $00, $01, $00, $01, $00, $02, $15, $14, $13, $13  ; 02:A789
.db $12, $12, $12, $12, $12, $12, $12, $12, $12, $12, $12, $12, $12, $12, $13, $13  ; 02:A799
.db $14, $15, $0E, $0E, $0E, $0E, $0E, $0E, $0E, $0E, $0E, $0E, $0E, $0E, $0E, $0E  ; 02:A7A9
.db $0E, $0E, $0E, $0E, $0E, $0E, $0E, $0E, $07, $08, $09, $09, $0A, $0A, $0A, $0A  ; 02:A7B9
.db $0A, $0A, $0A, $0A, $0A, $0A, $0A, $0A, $0A, $0A, $09, $09, $08, $07, $00, $02  ; 02:A7C9
.db $03, $04, $05, $05, $06, $06, $06, $06, $06, $06, $06, $06, $06, $06, $05, $05  ; 02:A7D9
.db $04, $03, $02, $00                                                              ; 02:A7E9

objfunc_22_UNKNOWN:
   ld     (ix+13), $1E                 ; 02:A7ED - DD 36 0D 1E
   ld     (ix+14), $2F                 ; 02:A7F1 - DD 36 0E 2F
   bit    0, (ix+24)                   ; 02:A7F5 - DD CB 18 46
   jr     nz, addr_0A830               ; 02:A7F9 - 20 35
   ld     hl, $0340                    ; 02:A7FB - 21 40 03
   ld     (var_D273), hl               ; 02:A7FE - 22 73 D2
   ld     hl, $0540                    ; 02:A801 - 21 40 05
   ld     (var_D275), hl               ; 02:A804 - 22 75 D2
   ld     hl, (var_D25D)               ; 02:A807 - 2A 5D D2
   ld     (var_D277), hl               ; 02:A80A - 22 77 D2
   ld     (var_D279), hl               ; 02:A80D - 22 79 D2
   ld     hl, $0220                    ; 02:A810 - 21 20 02
   ld     (var_D27D), hl               ; 02:A813 - 22 7D D2
   ld     hl, ART_0C_EF3F              ; 02:A816 - 21 3F EF
   ld     de, $2000                    ; 02:A819 - 11 00 20
   ld     a, $0C                       ; 02:A81C - 3E 0C
   call   load_art                     ; 02:A81E - CD 05 04
   ld     hl, PAL2_boss                ; 02:A821 - 21 1C 73
   ld     a, $02                       ; 02:A824 - 3E 02
   call   signal_load_palettes         ; 02:A826 - CD 33 03
   ld     a, $0B                       ; 02:A829 - 3E 0B
   rst    $18                          ; 02:A82B - DF
   set    0, (ix+24)                   ; 02:A82C - DD CB 18 C6

addr_0A830:
   bit    1, (ix+24)                   ; 02:A830 - DD CB 18 4E
   jr     nz, addr_0A893               ; 02:A834 - 20 5D
   ld     hl, (var_D25A)               ; 02:A836 - 2A 5A D2
   ld     (var_D273), hl               ; 02:A839 - 22 73 D2
   ld     de, UNK_0BAF9                ; 02:A83C - 11 F9 BA
   ld     bc, UNK_0A9B7                ; 02:A83F - 01 B7 A9
   call   addr_07C41                   ; 02:A842 - CD 41 7C
   ld     l, (ix+2)                    ; 02:A845 - DD 6E 02
   ld     h, (ix+3)                    ; 02:A848 - DD 66 03
   ld     de, (sonic_x)                ; 02:A84B - ED 5B FE D3
   xor    a                            ; 02:A84F - AF
   sbc    hl, de                       ; 02:A850 - ED 52
   ld     de, $0040                    ; 02:A852 - 11 40 00
   xor    a                            ; 02:A855 - AF
   ld     bc, (sonic_vel_x_sub)        ; 02:A856 - ED 4B 03 D4
   bit    7, b                         ; 02:A85A - CB 78
   jr     nz, addr_0A862               ; 02:A85C - 20 04
   sbc    hl, de                       ; 02:A85E - ED 52
   jr     c, addr_0A865                ; 02:A860 - 38 03

addr_0A862:
   ld     bc, $FF80                    ; 02:A862 - 01 80 FF

addr_0A865:
   inc    b                            ; 02:A865 - 04
   ld     (ix+7), c                    ; 02:A866 - DD 71 07
   ld     (ix+8), b                    ; 02:A869 - DD 70 08
   ld     (ix+9), a                    ; 02:A86C - DD 77 09
   ld     l, (ix+2)                    ; 02:A86F - DD 6E 02
   ld     h, (ix+3)                    ; 02:A872 - DD 66 03
   ld     de, $05A0                    ; 02:A875 - 11 A0 05
   xor    a                            ; 02:A878 - AF
   sbc    hl, de                       ; 02:A879 - ED 52
   jp     c, addr_0A974                ; 02:A87B - DA 74 A9
   ld     l, a                         ; 02:A87E - 6F
   ld     h, a                         ; 02:A87F - 67
   ld     (ix+7), a                    ; 02:A880 - DD 77 07
   ld     (ix+8), a                    ; 02:A883 - DD 77 08
   ld     (sonic_vel_x_sub), hl        ; 02:A886 - 22 03 D4
   ld     (sonic_vel_x_hi), a          ; 02:A889 - 32 05 D4
   set    1, (ix+24)                   ; 02:A88C - DD CB 18 CE
   jp     addr_0A974                   ; 02:A890 - C3 74 A9

addr_0A893:
   bit    2, (ix+24)                   ; 02:A893 - DD CB 18 56
   jr     nz, addr_0A8CD               ; 02:A897 - 20 34
   ld     hl, $0530                    ; 02:A899 - 21 30 05
   ld     de, $0220                    ; 02:A89C - 11 20 02
   call   addr_07C8C                   ; 02:A89F - CD 8C 7C
   ld     (iy+g_inputs_player_1-IYBASE), $FF  ; 02:A8A2 - FD 36 03 FF
   ld     hl, $05A0                    ; 02:A8A6 - 21 A0 05
   ld     (ix+1), $00                  ; 02:A8A9 - DD 36 01 00
   ld     (ix+2), l                    ; 02:A8AD - DD 75 02
   ld     (ix+3), h                    ; 02:A8B0 - DD 74 03
   ld     (ix+15), UNK_0BAF9&$FF       ; 02:A8B3 - DD 36 0F F9
   ld     (ix+16), UNK_0BAF9>>8        ; 02:A8B7 - DD 36 10 BA
   inc    (ix+17)                      ; 02:A8BB - DD 34 11
   ld     a, (ix+17)                   ; 02:A8BE - DD 7E 11
   cp     $C0                          ; 02:A8C1 - FE C0
   jp     c, addr_0A974                ; 02:A8C3 - DA 74 A9
   set    2, (ix+24)                   ; 02:A8C6 - DD CB 18 D6
   jp     addr_0A974                   ; 02:A8CA - C3 74 A9

addr_0A8CD:
   bit    3, (ix+24)                   ; 02:A8CD - DD CB 18 5E
   jr     nz, addr_0A8EB               ; 02:A8D1 - 20 18
   ld     (iy+g_inputs_player_1-IYBASE), $FF  ; 02:A8D3 - FD 36 03 FF
   xor    a                            ; 02:A8D7 - AF
   ld     (ix+15), a                   ; 02:A8D8 - DD 77 0F
   ld     (ix+16), a                   ; 02:A8DB - DD 77 10
   dec    (ix+17)                      ; 02:A8DE - DD 35 11
   jp     nz, addr_0A974               ; 02:A8E1 - C2 74 A9
   set    3, (ix+24)                   ; 02:A8E4 - DD CB 18 DE
   jp     addr_0A974                   ; 02:A8E8 - C3 74 A9

addr_0A8EB:
   bit    4, (ix+24)                   ; 02:A8EB - DD CB 18 66
   jr     nz, addr_0A96B               ; 02:A8EF - 20 7A
   ld     de, (sonic_x)                ; 02:A8F1 - ED 5B FE D3
   ld     hl, $0596                    ; 02:A8F5 - 21 96 05
   and    a                            ; 02:A8F8 - A7
   sbc    hl, de                       ; 02:A8F9 - ED 52
   jr     nc, addr_0A974               ; 02:A8FB - 30 77
   ld     hl, $05C0                    ; 02:A8FD - 21 C0 05
   xor    a                            ; 02:A900 - AF
   sbc    hl, de                       ; 02:A901 - ED 52
   jr     c, addr_0A974                ; 02:A903 - 38 6F
   or     (ix+17)                      ; 02:A905 - DD B6 11
   jr     nz, addr_0A91D               ; 02:A908 - 20 13
   ld     hl, (sonic_y)                ; 02:A90A - 2A 01 D4
   ld     de, $028D                    ; 02:A90D - 11 8D 02
   xor    a                            ; 02:A910 - AF
   sbc    hl, de                       ; 02:A911 - ED 52
   jr     c, addr_0A974                ; 02:A913 - 38 5F
   ld     l, a                         ; 02:A915 - 6F
   ld     h, a                         ; 02:A916 - 67
   ld     (sonic_vel_x_sub), hl        ; 02:A917 - 22 03 D4
   ld     (sonic_vel_x_hi), a          ; 02:A91A - 32 05 D4

addr_0A91D:
   ld     a, $80                       ; 02:A91D - 3E 80
   ld     (var_D414), a                ; 02:A91F - 32 14 D4
   ld     hl, $05A0                    ; 02:A922 - 21 A0 05
   ld     (sonic_x), hl                ; 02:A925 - 22 FE D3
   ld     (iy+g_inputs_player_1-IYBASE), $FF  ; 02:A928 - FD 36 03 FF
   ld     e, (ix+17)                   ; 02:A92C - DD 5E 11
   ld     d, $00                       ; 02:A92F - 16 00
   ld     hl, $028E                    ; 02:A931 - 21 8E 02
   xor    a                            ; 02:A934 - AF
   sbc    hl, de                       ; 02:A935 - ED 52
   ld     (sonic_y_sub), a             ; 02:A937 - 32 00 D4
   ld     (sonic_y), hl                ; 02:A93A - 22 01 D4
   ld     a, (var_D2E8)                ; 02:A93D - 3A E8 D2
   ld     hl, (var_D2E6)               ; 02:A940 - 2A E6 D2
   ld     (sonic_vel_y_sub), hl        ; 02:A943 - 22 06 D4
   ld     (sonic_vel_y_hi), a          ; 02:A946 - 32 08 D4
   inc    (ix+17)                      ; 02:A949 - DD 34 11
   ld     a, (ix+17)                   ; 02:A94C - DD 7E 11
   cp     $C0                          ; 02:A94F - FE C0
   jr     nz, addr_0A974               ; 02:A951 - 20 21
   ld     hl, (var_D25A)               ; 02:A953 - 2A 5A D2
   inc    h                            ; 02:A956 - 24
   ld     (sonic_x), hl                ; 02:A957 - 22 FE D3
   set    4, (ix+24)                   ; 02:A95A - DD CB 18 E6
   ld     a, $09                       ; 02:A95E - 3E 09
   rst    $18                          ; 02:A960 - DF
   ld     a, $A0                       ; 02:A961 - 3E A0
   ld     (g_signpost_tickdown_counter), a  ; 02:A963 - 32 89 D2
   set    1, (iy+var_D206-IYBASE)      ; 02:A966 - FD CB 06 CE
   ret                                 ; 02:A96A - C9

addr_0A96B:
   ld     a, (ix+17)                   ; 02:A96B - DD 7E 11
   and    a                            ; 02:A96E - A7
   jr     z, addr_0A974                ; 02:A96F - 28 03
   dec    (ix+17)                      ; 02:A971 - DD 35 11

addr_0A974:
   ld     e, (ix+17)                   ; 02:A974 - DD 5E 11
   ld     d, $00                       ; 02:A977 - 16 00
   ld     hl, $0280                    ; 02:A979 - 21 80 02
   xor    a                            ; 02:A97C - AF
   sbc    hl, de                       ; 02:A97D - ED 52
   ld     (ix+4), a                    ; 02:A97F - DD 77 04
   ld     (ix+5), l                    ; 02:A982 - DD 75 05
   ld     (ix+6), h                    ; 02:A985 - DD 74 06
   ld     e, (ix+17)                   ; 02:A988 - DD 5E 11
   ld     d, $00                       ; 02:A98B - 16 00
   ld     hl, $02AF                    ; 02:A98D - 21 AF 02
   and    a                            ; 02:A990 - A7
   sbc    hl, de                       ; 02:A991 - ED 52
   ld     bc, (var_D25D)               ; 02:A993 - ED 4B 5D D2
   and    a                            ; 02:A997 - A7
   sbc    hl, bc                       ; 02:A998 - ED 42
   ex     de, hl                       ; 02:A99A - EB
   ld     hl, $05A0                    ; 02:A99B - 21 A0 05
   ld     bc, (var_D25A)               ; 02:A99E - ED 4B 5A D2
   and    a                            ; 02:A9A2 - A7
   sbc    hl, bc                       ; 02:A9A3 - ED 42
   ld     bc, UNK_0A9C0                ; 02:A9A5 - 01 C0 A9
   call   addr_0350F                   ; 02:A9A8 - CD 0F 35
   ld     a, (ix+17)                   ; 02:A9AB - DD 7E 11
   and    $1F                          ; 02:A9AE - E6 1F
   cp     $0F                          ; 02:A9B0 - FE 0F
   ret    nz                           ; 02:A9B2 - C0
   ld     a, $19                       ; 02:A9B3 - 3E 19
   rst    $28                          ; 02:A9B5 - EF
   ret                                 ; 02:A9B6 - C9

UNK_0A9B7:
.db $03, $08, $04, $07, $05, $08, $04, $07, $FF                                     ; 02:A9B7

UNK_0A9C0:
.db $74, $76, $76, $78, $FF, $FF, $FF                                               ; 02:A9C0

objfunc_30_UNKNOWN:
   set    5, (ix+24)                   ; 02:A9C7 - DD CB 18 EE
   ld     a, (iy+g_sprite_count-IYBASE)  ; 02:A9CB - FD 7E 0A
   ld     hl, (var_D23C)               ; 02:A9CE - 2A 3C D2
   push   af                           ; 02:A9D1 - F5
   push   hl                           ; 02:A9D2 - E5
   ld     a, (var_D2DE)                ; 02:A9D3 - 3A DE D2
   cp     $24                          ; 02:A9D6 - FE 24
   jr     nc, addr_0AA1C               ; 02:A9D8 - 30 42
   ld     e, a                         ; 02:A9DA - 5F
   ld     d, $00                       ; 02:A9DB - 16 00
   ld     hl, var_D000                 ; 02:A9DD - 21 00 D0
   add    hl, de                       ; 02:A9E0 - 19
   ld     (var_D23C), hl               ; 02:A9E1 - 22 3C D2
   ld     a, (var_D2A3)                ; 02:A9E4 - 3A A3 D2
   ld     c, a                         ; 02:A9E7 - 4F
   ld     de, (var_D2A1)               ; 02:A9E8 - ED 5B A1 D2
   ld     l, (ix+4)                    ; 02:A9EC - DD 6E 04
   ld     h, (ix+5)                    ; 02:A9EF - DD 66 05
   ld     a, (ix+6)                    ; 02:A9F2 - DD 7E 06
   add    hl, de                       ; 02:A9F5 - 19
   adc    a, c                         ; 02:A9F6 - 89
   ld     l, h                         ; 02:A9F7 - 6C
   ld     h, a                         ; 02:A9F8 - 67
   ld     bc, (var_D25D)               ; 02:A9F9 - ED 4B 5D D2
   and    a                            ; 02:A9FD - A7
   sbc    hl, bc                       ; 02:A9FE - ED 42
   ex     de, hl                       ; 02:AA00 - EB
   ld     l, (ix+2)                    ; 02:AA01 - DD 6E 02
   ld     h, (ix+3)                    ; 02:AA04 - DD 66 03
   ld     bc, (var_D25A)               ; 02:AA07 - ED 4B 5A D2
   and    a                            ; 02:AA0B - A7
   sbc    hl, bc                       ; 02:AA0C - ED 42
   ld     bc, UNK_0AA63                ; 02:AA0E - 01 63 AA
   call   addr_0350F                   ; 02:AA11 - CD 0F 35
   ld     a, (var_D2DE)                ; 02:AA14 - 3A DE D2
   add    a, $0C                       ; 02:AA17 - C6 0C
   ld     (var_D2DE), a                ; 02:AA19 - 32 DE D2

addr_0AA1C:
   pop    hl                           ; 02:AA1C - E1
   pop    af                           ; 02:AA1D - F1
   ld     (var_D23C), hl               ; 02:AA1E - 22 3C D2
   ld     (iy+g_sprite_count-IYBASE), a  ; 02:AA21 - FD 77 0A
   ld     hl, (var_D25A)               ; 02:AA24 - 2A 5A D2
   ld     de, $FFE0                    ; 02:AA27 - 11 E0 FF
   add    hl, de                       ; 02:AA2A - 19
   ex     de, hl                       ; 02:AA2B - EB
   ld     l, (ix+2)                    ; 02:AA2C - DD 6E 02
   ld     h, (ix+3)                    ; 02:AA2F - DD 66 03
   and    a                            ; 02:AA32 - A7
   sbc    hl, de                       ; 02:AA33 - ED 52
   jr     nc, addr_0AA4E               ; 02:AA35 - 30 17
   call   random_A                     ; 02:AA37 - CD 25 06
   ld     b, $00                       ; 02:AA3A - 06 00
   add    a, a                         ; 02:AA3C - 87
   ld     c, a                         ; 02:AA3D - 4F
   rl     b                            ; 02:AA3E - CB 10
   ld     hl, (var_D25A)               ; 02:AA40 - 2A 5A D2
   ld     de, $01B4                    ; 02:AA43 - 11 B4 01
   add    hl, de                       ; 02:AA46 - 19
   add    hl, bc                       ; 02:AA47 - 09
   ld     (ix+2), l                    ; 02:AA48 - DD 75 02
   ld     (ix+3), h                    ; 02:AA4B - DD 74 03

addr_0AA4E:
   ld     (ix+7), $00                  ; 02:AA4E - DD 36 07 00
   ld     (ix+8), $FD                  ; 02:AA52 - DD 36 08 FD
   ld     (ix+9), $FF                  ; 02:AA56 - DD 36 09 FF
   ld     (ix+15), $00                 ; 02:AA5A - DD 36 0F 00
   ld     (ix+16), $00                 ; 02:AA5E - DD 36 10 00
   ret                                 ; 02:AA62 - C9

UNK_0AA63:
.db $40, $42, $44, $46, $FF, $FF, $FF                                               ; 02:AA63

objfunc_31_UNKNOWN:
   set    5, (ix+24)                   ; 02:AA6A - DD CB 18 EE
   ld     (ix+13), $05                 ; 02:AA6E - DD 36 0D 05
   ld     (ix+14), $14                 ; 02:AA72 - DD 36 0E 14
   bit    0, (ix+24)                   ; 02:AA76 - DD CB 18 46
   jr     nz, addr_0AAA0               ; 02:AA7A - 20 24
   ld     l, (ix+2)                    ; 02:AA7C - DD 6E 02
   ld     h, (ix+3)                    ; 02:AA7F - DD 66 03
   ld     de, $000F                    ; 02:AA82 - 11 0F 00
   add    hl, de                       ; 02:AA85 - 19
   ld     (ix+2), l                    ; 02:AA86 - DD 75 02
   ld     (ix+3), h                    ; 02:AA89 - DD 74 03
   ld     l, (ix+5)                    ; 02:AA8C - DD 6E 05
   ld     h, (ix+6)                    ; 02:AA8F - DD 66 06
   ld     de, $FFFA                    ; 02:AA92 - 11 FA FF
   add    hl, de                       ; 02:AA95 - 19
   ld     (ix+5), l                    ; 02:AA96 - DD 75 05
   ld     (ix+6), h                    ; 02:AA99 - DD 74 06
   set    0, (ix+24)                   ; 02:AA9C - DD CB 18 C6

addr_0AAA0:
   ld     l, (ix+2)                    ; 02:AAA0 - DD 6E 02
   ld     h, (ix+3)                    ; 02:AAA3 - DD 66 03
   ld     (g_FF_string_high_byte), hl  ; 02:AAA6 - 22 0E D2
   ld     l, (ix+5)                    ; 02:AAA9 - DD 6E 05
   ld     h, (ix+6)                    ; 02:AAAC - DD 66 06
   ld     (var_D210), hl               ; 02:AAAF - 22 10 D2
   ld     e, (ix+17)                   ; 02:AAB2 - DD 5E 11
   ld     d, $00                       ; 02:AAB5 - 16 00
   ld     hl, UNK_0AB01                ; 02:AAB7 - 21 01 AB
   add    hl, de                       ; 02:AABA - 19
   ld     e, (hl)                      ; 02:AABB - 5E
   inc    hl                           ; 02:AABC - 23
   ld     d, (hl)                      ; 02:AABD - 56
   ld     b, $02                       ; 02:AABE - 06 02

addr_0AAC0:
   push   bc                           ; 02:AAC0 - C5
   ld     a, (de)                      ; 02:AAC1 - 1A
   ld     l, a                         ; 02:AAC2 - 6F
   ld     h, $00                       ; 02:AAC3 - 26 00
   ld     (var_D212), hl               ; 02:AAC5 - 22 12 D2
   inc    de                           ; 02:AAC8 - 13
   ld     a, (de)                      ; 02:AAC9 - 1A
   ld     l, a                         ; 02:AACA - 6F
   ld     (var_D214), hl               ; 02:AACB - 22 14 D2
   inc    de                           ; 02:AACE - 13
   ld     a, (de)                      ; 02:AACF - 1A
   inc    de                           ; 02:AAD0 - 13
   and    a                            ; 02:AAD1 - A7
   jp     m, addr_0AADA                ; 02:AAD2 - FA DA AA
   push   de                           ; 02:AAD5 - D5
   call   UNK_03581                    ; 02:AAD6 - CD 81 35
   pop    de                           ; 02:AAD9 - D1

addr_0AADA:
   pop    bc                           ; 02:AADA - C1
   djnz   addr_0AAC0                   ; 02:AADB - 10 E3
   ld     hl, $0202                    ; 02:AADD - 21 02 02
   ld     (var_D214), hl               ; 02:AAE0 - 22 14 D2
   call   UNK_03956                    ; 02:AAE3 - CD 56 39
   call   nc, addr_035FD               ; 02:AAE6 - D4 FD 35
   ld     (ix+15), $00                 ; 02:AAE9 - DD 36 0F 00
   ld     (ix+16), $00                 ; 02:AAED - DD 36 10 00
   ld     a, (ix+17)                   ; 02:AAF1 - DD 7E 11
   inc    a                            ; 02:AAF4 - 3C
   inc    a                            ; 02:AAF5 - 3C
   cp     $08                          ; 02:AAF6 - FE 08
   ld     (ix+17), a                   ; 02:AAF8 - DD 77 11
   ret    c                            ; 02:AAFB - D8
   ld     (ix+17), $00                 ; 02:AAFC - DD 36 11 00
   ret                                 ; 02:AB00 - C9

UNK_0AB01:
.db $09, $AB, $0F, $AB, $15, $AB, $1B, $AB, $00, $00, $1C, $00, $18, $3C, $00, $00  ; 02:AB01
.db $1E, $00, $18, $3E, $00, $00, $38, $00, $18, $3A, $00, $08, $1A, $00, $00, $FF  ; 02:AB11

objfunc_32_UNKNOWN:
   ld     (ix+13), $0C                 ; 02:AB21 - DD 36 0D 0C
   ld     (ix+14), $10                 ; 02:AB25 - DD 36 0E 10
   ld     a, (ix+17)                   ; 02:AB29 - DD 7E 11
   cp     $64                          ; 02:AB2C - FE 64
   jr     nc, addr_0AB5A               ; 02:AB2E - 30 2A
   ld     l, (ix+2)                    ; 02:AB30 - DD 6E 02
   ld     h, (ix+3)                    ; 02:AB33 - DD 66 03
   ld     de, $FFC8                    ; 02:AB36 - 11 C8 FF
   add    hl, de                       ; 02:AB39 - 19
   ex     de, hl                       ; 02:AB3A - EB
   ld     hl, (sonic_x)                ; 02:AB3B - 2A FE D3
   and    a                            ; 02:AB3E - A7
   sbc    hl, de                       ; 02:AB3F - ED 52
   jr     c, addr_0AB5A                ; 02:AB41 - 38 17
   ld     l, (ix+2)                    ; 02:AB43 - DD 6E 02
   ld     h, (ix+3)                    ; 02:AB46 - DD 66 03
   ld     de, $002C                    ; 02:AB49 - 11 2C 00
   add    hl, de                       ; 02:AB4C - 19
   ex     de, hl                       ; 02:AB4D - EB
   ld     hl, (sonic_x)                ; 02:AB4E - 2A FE D3
   and    a                            ; 02:AB51 - A7
   sbc    hl, de                       ; 02:AB52 - ED 52
   jr     nc, addr_0AB5A               ; 02:AB54 - 30 04
   ld     (ix+17), $64                 ; 02:AB56 - DD 36 11 64

addr_0AB5A:
   ld     a, (ix+17)                   ; 02:AB5A - DD 7E 11
   cp     $1E                          ; 02:AB5D - FE 1E
   jr     nc, addr_0AB79               ; 02:AB5F - 30 18
   ld     (ix+7), $F8                  ; 02:AB61 - DD 36 07 F8
   ld     (ix+8), $FF                  ; 02:AB65 - DD 36 08 FF
   ld     (ix+9), $FF                  ; 02:AB69 - DD 36 09 FF
   ld     de, UNK_0AD0B                ; 02:AB6D - 11 0B AD
   ld     bc, UNK_0ACF1                ; 02:AB70 - 01 F1 AC
   call   addr_07C41                   ; 02:AB73 - CD 41 7C
   jp     addr_0AC6A                   ; 02:AB76 - C3 6A AC

addr_0AB79:
   ld     a, (ix+17)                   ; 02:AB79 - DD 7E 11
   cp     $64                          ; 02:AB7C - FE 64
   jp     c, addr_0AC1E                ; 02:AB7E - DA 1E AC
   ld     (ix+7), $00                  ; 02:AB81 - DD 36 07 00
   ld     (ix+8), $00                  ; 02:AB85 - DD 36 08 00
   ld     (ix+9), $00                  ; 02:AB89 - DD 36 09 00
   cp     $66                          ; 02:AB8D - FE 66
   jr     nc, addr_0AB9D               ; 02:AB8F - 30 0C
   ld     de, UNK_0AD0B                ; 02:AB91 - 11 0B AD
   ld     bc, UNK_0AD01                ; 02:AB94 - 01 01 AD
   call   addr_07C41                   ; 02:AB97 - CD 41 7C
   jp     addr_0AC6A                   ; 02:AB9A - C3 6A AC

addr_0AB9D:
   ld     (ix+15), UNK_0AD53&$FF       ; 02:AB9D - DD 36 0F 53
   ld     (ix+16), UNK_0AD53>>8        ; 02:ABA1 - DD 36 10 AD
   cp     $67                          ; 02:ABA5 - FE 67
   jp     nz, addr_0AC6A               ; 02:ABA7 - C2 6A AC
   ld     hl, $FFFE                    ; 02:ABAA - 21 FE FF
   ld     (var_D212), hl               ; 02:ABAD - 22 12 D2
   ld     hl, $FFFC                    ; 02:ABB0 - 21 FC FF
   ld     (var_D214), hl               ; 02:ABB3 - 22 14 D2
   call   spawn_object                 ; 02:ABB6 - CD 7B 7C
   jp     c, addr_0AC76                ; 02:ABB9 - DA 76 AC
   ld     de, $0000                    ; 02:ABBC - 11 00 00
   ld     c, e                         ; 02:ABBF - 4B
   ld     b, d                         ; 02:ABC0 - 42
   call   UNK_0AC96                    ; 02:ABC1 - CD 96 AC
   ld     hl, $0003                    ; 02:ABC4 - 21 03 00
   ld     (var_D212), hl               ; 02:ABC7 - 22 12 D2
   ld     hl, $FFFC                    ; 02:ABCA - 21 FC FF
   ld     (var_D214), hl               ; 02:ABCD - 22 14 D2
   call   spawn_object                 ; 02:ABD0 - CD 7B 7C
   jp     c, addr_0AC76                ; 02:ABD3 - DA 76 AC
   ld     de, $0008                    ; 02:ABD6 - 11 08 00
   ld     bc, $0000                    ; 02:ABD9 - 01 00 00
   call   UNK_0AC96                    ; 02:ABDC - CD 96 AC
   ld     hl, $FFFE                    ; 02:ABDF - 21 FE FF
   ld     (var_D212), hl               ; 02:ABE2 - 22 12 D2
   ld     hl, $FFFE                    ; 02:ABE5 - 21 FE FF
   ld     (var_D214), hl               ; 02:ABE8 - 22 14 D2
   call   spawn_object                 ; 02:ABEB - CD 7B 7C
   jp     c, addr_0AC76                ; 02:ABEE - DA 76 AC
   ld     de, $0000                    ; 02:ABF1 - 11 00 00
   ld     bc, $0008                    ; 02:ABF4 - 01 08 00
   call   UNK_0AC96                    ; 02:ABF7 - CD 96 AC
   ld     hl, $0003                    ; 02:ABFA - 21 03 00
   ld     (var_D212), hl               ; 02:ABFD - 22 12 D2
   ld     hl, $FFFE                    ; 02:AC00 - 21 FE FF
   ld     (var_D214), hl               ; 02:AC03 - 22 14 D2
   call   spawn_object                 ; 02:AC06 - CD 7B 7C
   jp     c, addr_0AC76                ; 02:AC09 - DA 76 AC
   ld     de, $0008                    ; 02:AC0C - 11 08 00
   ld     bc, $0008                    ; 02:AC0F - 01 08 00
   call   UNK_0AC96                    ; 02:AC12 - CD 96 AC
   ld     (ix+0), $FF                  ; 02:AC15 - DD 36 00 FF
   ld     a, $1B                       ; 02:AC19 - 3E 1B
   rst    $28                          ; 02:AC1B - EF
   jr     addr_0AC76                   ; 02:AC1C - 18 58

addr_0AC1E:
   cp     $23                          ; 02:AC1E - FE 23
   jr     nc, addr_0AC37               ; 02:AC20 - 30 15
   xor    a                            ; 02:AC22 - AF
   ld     (ix+7), a                    ; 02:AC23 - DD 77 07
   ld     (ix+8), a                    ; 02:AC26 - DD 77 08
   ld     (ix+9), a                    ; 02:AC29 - DD 77 09
   ld     de, UNK_0AD0B                ; 02:AC2C - 11 0B AD
   ld     bc, UNK_0ACF6                ; 02:AC2F - 01 F6 AC
   call   addr_07C41                   ; 02:AC32 - CD 41 7C
   jr     addr_0AC6A                   ; 02:AC35 - 18 33

addr_0AC37:
   ld     a, (ix+17)                   ; 02:AC37 - DD 7E 11
   cp     $41                          ; 02:AC3A - FE 41
   jr     nc, addr_0AC55               ; 02:AC3C - 30 17
   ld     (ix+7), $08                  ; 02:AC3E - DD 36 07 08
   ld     (ix+8), $00                  ; 02:AC42 - DD 36 08 00
   ld     (ix+9), $00                  ; 02:AC46 - DD 36 09 00
   ld     de, UNK_0AD0B                ; 02:AC4A - 11 0B AD
   ld     bc, UNK_0ACF9                ; 02:AC4D - 01 F9 AC
   call   addr_07C41                   ; 02:AC50 - CD 41 7C
   jr     addr_0AC6A                   ; 02:AC53 - 18 15

addr_0AC55:
   ld     (ix+7), $00                  ; 02:AC55 - DD 36 07 00
   ld     (ix+8), $00                  ; 02:AC59 - DD 36 08 00
   ld     (ix+9), $00                  ; 02:AC5D - DD 36 09 00
   ld     de, UNK_0AD0B                ; 02:AC61 - 11 0B AD
   ld     bc, UNK_0ACFE                ; 02:AC64 - 01 FE AC
   call   addr_07C41                   ; 02:AC67 - CD 41 7C

addr_0AC6A:
   ld     (ix+10), $80                 ; 02:AC6A - DD 36 0A 80
   ld     (ix+11), $00                 ; 02:AC6E - DD 36 0B 00
   ld     (ix+12), $00                 ; 02:AC72 - DD 36 0C 00

addr_0AC76:
   ld     hl, $0202                    ; 02:AC76 - 21 02 02
   ld     (var_D214), hl               ; 02:AC79 - 22 14 D2
   call   UNK_03956                    ; 02:AC7C - CD 56 39
   call   nc, addr_035FD               ; 02:AC7F - D4 FD 35
   ld     a, (var_D223)                ; 02:AC82 - 3A 23 D2
   and    $3F                          ; 02:AC85 - E6 3F
   ret    nz                           ; 02:AC87 - C0
   inc    (ix+17)                      ; 02:AC88 - DD 34 11
   ld     a, (ix+17)                   ; 02:AC8B - DD 7E 11
   cp     $46                          ; 02:AC8E - FE 46
   ret    nz                           ; 02:AC90 - C0
   ld     (ix+17), $00                 ; 02:AC91 - DD 36 11 00
   ret                                 ; 02:AC95 - C9

UNK_0AC96:
   push   ix                           ; 02:AC96 - DD E5
   push   hl                           ; 02:AC98 - E5
   ld     l, (ix+2)                    ; 02:AC99 - DD 6E 02
   ld     h, (ix+3)                    ; 02:AC9C - DD 66 03
   add    hl, de                       ; 02:AC9F - 19
   ex     de, hl                       ; 02:ACA0 - EB
   ld     l, (ix+5)                    ; 02:ACA1 - DD 6E 05
   ld     h, (ix+6)                    ; 02:ACA4 - DD 66 06
   add    hl, bc                       ; 02:ACA7 - 09
   ld     c, l                         ; 02:ACA8 - 4D
   ld     b, h                         ; 02:ACA9 - 44
   pop    ix                           ; 02:ACAA - DD E1
   xor    a                            ; 02:ACAC - AF
   ld     (ix+0), $0D                  ; 02:ACAD - DD 36 00 0D
   ld     (ix+1), a                    ; 02:ACB1 - DD 77 01
   ld     (ix+2), e                    ; 02:ACB4 - DD 73 02
   ld     (ix+3), d                    ; 02:ACB7 - DD 72 03
   ld     (ix+4), a                    ; 02:ACBA - DD 77 04
   ld     (ix+5), c                    ; 02:ACBD - DD 71 05
   ld     (ix+6), b                    ; 02:ACC0 - DD 70 06
   ld     (ix+17), a                   ; 02:ACC3 - DD 77 11
   ld     (ix+19), $24                 ; 02:ACC6 - DD 36 13 24
   ld     (ix+20), a                   ; 02:ACCA - DD 77 14
   ld     (ix+21), a                   ; 02:ACCD - DD 77 15
   ld     (ix+22), a                   ; 02:ACD0 - DD 77 16
   ld     (ix+23), a                   ; 02:ACD3 - DD 77 17
   ld     (ix+7), a                    ; 02:ACD6 - DD 77 07
   ld     hl, (var_D212)               ; 02:ACD9 - 2A 12 D2
   ld     (ix+8), l                    ; 02:ACDC - DD 75 08
   ld     (ix+9), h                    ; 02:ACDF - DD 74 09
   ld     (ix+10), a                   ; 02:ACE2 - DD 77 0A
   ld     hl, (var_D214)               ; 02:ACE5 - 2A 14 D2
   ld     (ix+11), l                   ; 02:ACE8 - DD 75 0B
   ld     (ix+12), h                   ; 02:ACEB - DD 74 0C
   pop    ix                           ; 02:ACEE - DD E1
   ret                                 ; 02:ACF0 - C9

UNK_0ACF1:
.db $00, $20, $01, $20, $FF                                                         ; 02:ACF1

UNK_0ACF6:
.db $01, $20, $FF                                                                   ; 02:ACF6

UNK_0ACF9:
.db $02, $20, $03, $20, $FF                                                         ; 02:ACF9

UNK_0ACFE:
.db $03, $20, $FF                                                                   ; 02:ACFE

UNK_0AD01:
.db $01, $02, $04, $02, $FF, $03, $02, $05, $02, $FF                                ; 02:AD01

UNK_0AD0B:
.db $0A, $0C, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF  ; 02:AD0B
.db $FF, $FF, $0E, $10, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF  ; 02:AD1B
.db $FF, $FF, $FF, $FF, $2A, $2C, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF  ; 02:AD2B
.db $FF, $FF, $FF, $FF, $FF, $FF, $2E, $30, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF  ; 02:AD3B
.db $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF                                          ; 02:AD4B

UNK_0AD53:
.db $12, $14, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF  ; 02:AD53
.db $FF, $FF, $32, $34, $FF, $FF, $FF, $FF, $FF                                     ; 02:AD63

objfunc_33_UNKNOWN:
   set    5, (ix+24)                   ; 02:AD6C - DD CB 18 EE
   bit    0, (ix+24)                   ; 02:AD70 - DD CB 18 46
   jr     nz, addr_0AD90               ; 02:AD74 - 20 1A
   ld     l, (ix+2)                    ; 02:AD76 - DD 6E 02
   ld     h, (ix+3)                    ; 02:AD79 - DD 66 03
   ld     de, $FFFC                    ; 02:AD7C - 11 FC FF
   add    hl, de                       ; 02:AD7F - 19
   ld     (ix+2), l                    ; 02:AD80 - DD 75 02
   ld     (ix+3), h                    ; 02:AD83 - DD 74 03
   call   random_A                     ; 02:AD86 - CD 25 06
   ld     (ix+17), a                   ; 02:AD89 - DD 77 11
   set    0, (ix+24)                   ; 02:AD8C - DD CB 18 C6

addr_0AD90:
   ld     a, (ix+17)                   ; 02:AD90 - DD 7E 11
   cp     $64                          ; 02:AD93 - FE 64
   jr     nz, addr_0ADDD               ; 02:AD95 - 20 46
   call   spawn_object                 ; 02:AD97 - CD 7B 7C
   jr     c, addr_0ADDD                ; 02:AD9A - 38 41
   push   ix                           ; 02:AD9C - DD E5
   ld     e, (ix+2)                    ; 02:AD9E - DD 5E 02
   ld     d, (ix+3)                    ; 02:ADA1 - DD 56 03
   ld     c, (ix+5)                    ; 02:ADA4 - DD 4E 05
   ld     b, (ix+6)                    ; 02:ADA7 - DD 46 06
   push   hl                           ; 02:ADAA - E5
   pop    ix                           ; 02:ADAB - DD E1
   xor    a                            ; 02:ADAD - AF
   ld     (ix+0), $34                  ; 02:ADAE - DD 36 00 34
   ld     (ix+1), a                    ; 02:ADB2 - DD 77 01
   ld     hl, $0004                    ; 02:ADB5 - 21 04 00
   add    hl, de                       ; 02:ADB8 - 19
   ld     (ix+2), l                    ; 02:ADB9 - DD 75 02
   ld     (ix+3), h                    ; 02:ADBC - DD 74 03
   ld     (ix+4), a                    ; 02:ADBF - DD 77 04
   ld     hl, $0010                    ; 02:ADC2 - 21 10 00
   add    hl, bc                       ; 02:ADC5 - 09
   ld     (ix+5), l                    ; 02:ADC6 - DD 75 05
   ld     (ix+6), h                    ; 02:ADC9 - DD 74 06
   pop    ix                           ; 02:ADCC - DD E1
   ld     a, $1C                       ; 02:ADCE - 3E 1C
   rst    $28                          ; 02:ADD0 - EF
   ld     (ix+18), $18                 ; 02:ADD1 - DD 36 12 18
   ld     (ix+22), $00                 ; 02:ADD5 - DD 36 16 00
   ld     (ix+23), $00                 ; 02:ADD9 - DD 36 17 00

addr_0ADDD:
   ld     a, (ix+18)                   ; 02:ADDD - DD 7E 12
   and    a                            ; 02:ADE0 - A7
   jr     z, addr_0ADF3                ; 02:ADE1 - 28 10
   ld     de, UNK_0AE04                ; 02:ADE3 - 11 04 AE
   ld     bc, UNK_0ADFD                ; 02:ADE6 - 01 FD AD
   call   addr_07C41                   ; 02:ADE9 - CD 41 7C
   dec    (ix+18)                      ; 02:ADEC - DD 35 12
   inc    (ix+17)                      ; 02:ADEF - DD 34 11
   ret                                 ; 02:ADF2 - C9

addr_0ADF3:
   ld     (ix+15), a                   ; 02:ADF3 - DD 77 0F
   ld     (ix+16), a                   ; 02:ADF6 - DD 77 10
   inc    (ix+17)                      ; 02:ADF9 - DD 34 11
   ret                                 ; 02:ADFC - C9

UNK_0ADFD:
.db $00, $08, $01, $08, $02, $08, $FF                                               ; 02:ADFD

UNK_0AE04:
.db $FE, $FF, $FF, $FF, $FF, $FF, $74, $76, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF  ; 02:AE04
.db $FF, $FF, $FE, $FF, $FF, $FF, $FF, $FF, $78, $7A, $FF, $FF, $FF, $FF, $FF, $FF  ; 02:AE14
.db $FF, $FF, $FF, $FF, $FE, $FF, $FF, $FF, $FF, $FF, $7C, $7E, $FF, $FF, $FF, $FF  ; 02:AE24
.db $FF                                                                             ; 02:AE34

objfunc_34_UNKNOWN:
   set    5, (ix+24)                   ; 02:AE35 - DD CB 18 EE
   ld     (ix+13), $0C                 ; 02:AE39 - DD 36 0D 0C
   ld     (ix+14), $0C                 ; 02:AE3D - DD 36 0E 0C
   ld     hl, (var_D25A)               ; 02:AE41 - 2A 5A D2
   ld     de, $0110                    ; 02:AE44 - 11 10 01
   add    hl, de                       ; 02:AE47 - 19
   ld     e, (ix+2)                    ; 02:AE48 - DD 5E 02
   ld     d, (ix+3)                    ; 02:AE4B - DD 56 03
   and    a                            ; 02:AE4E - A7
   sbc    hl, de                       ; 02:AE4F - ED 52
   jr     nc, addr_0AE57               ; 02:AE51 - 30 04
   ld     (ix+0), $FF                  ; 02:AE53 - DD 36 00 FF

addr_0AE57:
   ld     hl, $0202                    ; 02:AE57 - 21 02 02
   ld     (var_D214), hl               ; 02:AE5A - 22 14 D2
   call   UNK_03956                    ; 02:AE5D - CD 56 39
   call   nc, addr_035FD               ; 02:AE60 - D4 FD 35
   xor    a                            ; 02:AE63 - AF
   ld     (ix+7), $80                  ; 02:AE64 - DD 36 07 80
   ld     (ix+8), $02                  ; 02:AE68 - DD 36 08 02
   ld     (ix+9), a                    ; 02:AE6C - DD 77 09
   ld     (ix+10), a                   ; 02:AE6F - DD 77 0A
   ld     (ix+11), a                   ; 02:AE72 - DD 77 0B
   ld     (ix+12), a                   ; 02:AE75 - DD 77 0C
   ld     (ix+15), UNK_0AE81&$FF       ; 02:AE78 - DD 36 0F 81
   ld     (ix+16), UNK_0AE81>>8        ; 02:AE7C - DD 36 10 AE
   ret                                 ; 02:AE80 - C9

UNK_0AE81:
.db $02, $04, $FF, $FF, $FF, $FF, $FF                                               ; 02:AE81

objfunc_35_UNKNOWN:
   set    5, (ix+24)                   ; 02:AE88 - DD CB 18 EE
   bit    0, (ix+24)                   ; 02:AE8C - DD CB 18 46
   jr     nz, addr_0AEA6               ; 02:AE90 - 20 14
   ld     (ix+17), $00                 ; 02:AE92 - DD 36 11 00
   ld     (ix+18), $2A                 ; 02:AE96 - DD 36 12 2A
   ld     (ix+19), $52                 ; 02:AE9A - DD 36 13 52
   ld     (ix+20), $7C                 ; 02:AE9E - DD 36 14 7C
   set    0, (ix+24)                   ; 02:AEA2 - DD CB 18 C6

addr_0AEA6:
   ld     l, (ix+2)                    ; 02:AEA6 - DD 6E 02
   ld     h, (ix+3)                    ; 02:AEA9 - DD 66 03
   ld     de, (sonic_x)                ; 02:AEAC - ED 5B FE D3
   and    a                            ; 02:AEB0 - A7
   sbc    hl, de                       ; 02:AEB1 - ED 52
   jr     c, addr_0AED8                ; 02:AEB3 - 38 23
   ld     (ix+7), $F8                  ; 02:AEB5 - DD 36 07 F8
   ld     (ix+8), $FF                  ; 02:AEB9 - DD 36 08 FF
   ld     (ix+9), $FF                  ; 02:AEBD - DD 36 09 FF
   ld     (ix+15), UNK_0B0D5&$FF       ; 02:AEC1 - DD 36 0F D5
   ld     (ix+16), UNK_0B0D5>>8        ; 02:AEC5 - DD 36 10 B0
   ld     hl, $FF80                    ; 02:AEC9 - 21 80 FF
   ld     (var_D216), hl               ; 02:AECC - 22 16 D2
   call   addr_0AF98                   ; 02:AECF - CD 98 AF
   ld     (ix+22), $01                 ; 02:AED2 - DD 36 16 01
   jr     addr_0AEF9                   ; 02:AED6 - 18 21

addr_0AED8:
   ld     (ix+7), $08                  ; 02:AED8 - DD 36 07 08
   ld     (ix+8), $00                  ; 02:AEDC - DD 36 08 00
   ld     (ix+9), $00                  ; 02:AEE0 - DD 36 09 00
   ld     (ix+15), UNK_0B0E7&$FF       ; 02:AEE4 - DD 36 0F E7
   ld     (ix+16), UNK_0B0E7>>8        ; 02:AEE8 - DD 36 10 B0
   ld     hl, $0080                    ; 02:AEEC - 21 80 00
   ld     (var_D216), hl               ; 02:AEEF - 22 16 D2
   call   addr_0AF98                   ; 02:AEF2 - CD 98 AF
   ld     (ix+22), $FF                 ; 02:AEF5 - DD 36 16 FF

addr_0AEF9:
   ld     (ix+13), $1C                 ; 02:AEF9 - DD 36 0D 1C
   ld     (ix+14), $1C                 ; 02:AEFD - DD 36 0E 1C
   ld     hl, $1212                    ; 02:AF01 - 21 12 12
   ld     (var_D214), hl               ; 02:AF04 - 22 14 D2
   call   UNK_03956                    ; 02:AF07 - CD 56 39
   ld     hl, $1010                    ; 02:AF0A - 21 10 10
   ld     (g_FF_string_high_byte), hl  ; 02:AF0D - 22 0E D2
   call   nc, UNK_035E5                ; 02:AF10 - D4 E5 35
   ld     l, (ix+2)                    ; 02:AF13 - DD 6E 02
   ld     h, (ix+3)                    ; 02:AF16 - DD 66 03
   ld     (g_FF_string_high_byte), hl  ; 02:AF19 - 22 0E D2
   ld     l, (ix+5)                    ; 02:AF1C - DD 6E 05
   ld     h, (ix+6)                    ; 02:AF1F - DD 66 06
   ld     (var_D210), hl               ; 02:AF22 - 22 10 D2
   push   ix                           ; 02:AF25 - DD E5
   pop    hl                           ; 02:AF27 - E1
   ld     de, $0011                    ; 02:AF28 - 11 11 00
   add    hl, de                       ; 02:AF2B - 19
   ld     b, $04                       ; 02:AF2C - 06 04

addr_0AF2E:
   push   bc                           ; 02:AF2E - C5
   push   hl                           ; 02:AF2F - E5
   ld     a, (hl)                      ; 02:AF30 - 7E
   cp     $FE                          ; 02:AF31 - FE FE
   jr     z, addr_0AF6D                ; 02:AF33 - 28 38
   and    $FE                          ; 02:AF35 - E6 FE
   ld     e, a                         ; 02:AF37 - 5F
   ld     d, $00                       ; 02:AF38 - 16 00
   ld     hl, UNK_0B031                ; 02:AF3A - 21 31 B0
   add    hl, de                       ; 02:AF3D - 19
   push   hl                           ; 02:AF3E - E5
   ld     e, (hl)                      ; 02:AF3F - 5E
   ld     (var_D212), de               ; 02:AF40 - ED 53 12 D2
   inc    hl                           ; 02:AF44 - 23
   ld     e, (hl)                      ; 02:AF45 - 5E
   ld     (var_D214), de               ; 02:AF46 - ED 53 14 D2
   ld     a, $24                       ; 02:AF4A - 3E 24
   call   UNK_03581                    ; 02:AF4C - CD 81 35
   pop    hl                           ; 02:AF4F - E1
   ld     a, (hl)                      ; 02:AF50 - 7E
   inc    a                            ; 02:AF51 - 3C
   inc    a                            ; 02:AF52 - 3C
   ld     (var_D214), a                ; 02:AF53 - 32 14 D2
   add    a, $04                       ; 02:AF56 - C6 04
   ld     (ix+13), a                   ; 02:AF58 - DD 77 0D
   inc    hl                           ; 02:AF5B - 23
   ld     a, (hl)                      ; 02:AF5C - 7E
   inc    a                            ; 02:AF5D - 3C
   inc    a                            ; 02:AF5E - 3C
   ld     (var_D215), a                ; 02:AF5F - 32 15 D2
   add    a, $04                       ; 02:AF62 - C6 04
   ld     (ix+14), a                   ; 02:AF64 - DD 77 0E
   call   UNK_03956                    ; 02:AF67 - CD 56 39
   call   nc, addr_035FD               ; 02:AF6A - D4 FD 35

addr_0AF6D:
   pop    hl                           ; 02:AF6D - E1
   pop    bc                           ; 02:AF6E - C1
   ld     a, (hl)                      ; 02:AF6F - 7E
   cp     $FE                          ; 02:AF70 - FE FE
   jr     z, addr_0AF84                ; 02:AF72 - 28 10
   add    a, (ix+22)                   ; 02:AF74 - DD 86 16
   cp     $FF                          ; 02:AF77 - FE FF
   jr     nz, addr_0AF7F               ; 02:AF79 - 20 04
   ld     a, $A3                       ; 02:AF7B - 3E A3
   jr     addr_0AF84                   ; 02:AF7D - 18 05

addr_0AF7F:
   cp     $A4                          ; 02:AF7F - FE A4
   jr     nz, addr_0AF84               ; 02:AF81 - 20 01
   xor    a                            ; 02:AF83 - AF

addr_0AF84:
   ld     (hl), a                      ; 02:AF84 - 77
   inc    hl                           ; 02:AF85 - 23
   djnz   addr_0AF2E                   ; 02:AF86 - 10 A6
   ld     a, (var_D223)                ; 02:AF88 - 3A 23 D2
   and    $07                          ; 02:AF8B - E6 07
   ret    z                            ; 02:AF8D - C8
   ld     a, (ix+21)                   ; 02:AF8E - DD 7E 15
   cp     $C8                          ; 02:AF91 - FE C8
   ret    nc                           ; 02:AF93 - D0
   inc    (ix+21)                      ; 02:AF94 - DD 34 15
   ret                                 ; 02:AF97 - C9

addr_0AF98:
   ld     a, (ix+21)                   ; 02:AF98 - DD 7E 15
   cp     $C8                          ; 02:AF9B - FE C8
   ret    nz                           ; 02:AF9D - C0
   ld     a, (var_D2D4)                ; 02:AF9E - 3A D4 D2
   cp     $03                          ; 02:AFA1 - FE 03
   ret    nz                           ; 02:AFA3 - C0
   ld     l, (ix+5)                    ; 02:AFA4 - DD 6E 05
   ld     h, (ix+6)                    ; 02:AFA7 - DD 66 06
   ld     de, $FFD0                    ; 02:AFAA - 11 D0 FF
   add    hl, de                       ; 02:AFAD - 19
   ld     de, (sonic_y)                ; 02:AFAE - ED 5B 01 D4
   and    a                            ; 02:AFB2 - A7
   sbc    hl, de                       ; 02:AFB3 - ED 52
   ret    nc                           ; 02:AFB5 - D0
   ld     l, (ix+5)                    ; 02:AFB6 - DD 6E 05
   ld     h, (ix+6)                    ; 02:AFB9 - DD 66 06
   ld     bc, $002C                    ; 02:AFBC - 01 2C 00
   add    hl, bc                       ; 02:AFBF - 09
   and    a                            ; 02:AFC0 - A7
   sbc    hl, de                       ; 02:AFC1 - ED 52
   ret    c                            ; 02:AFC3 - D8
   push   ix                           ; 02:AFC4 - DD E5
   pop    hl                           ; 02:AFC6 - E1
   ld     de, $0011                    ; 02:AFC7 - 11 11 00
   add    hl, de                       ; 02:AFCA - 19
   ld     b, $04                       ; 02:AFCB - 06 04

addr_0AFCD:
   push   bc                           ; 02:AFCD - C5
   push   hl                           ; 02:AFCE - E5
   ld     a, (hl)                      ; 02:AFCF - 7E
   cp     $4A                          ; 02:AFD0 - FE 4A
   call   z, addr_0AFDB                ; 02:AFD2 - CC DB AF
   pop    hl                           ; 02:AFD5 - E1
   pop    bc                           ; 02:AFD6 - C1
   inc    hl                           ; 02:AFD7 - 23
   djnz   addr_0AFCD                   ; 02:AFD8 - 10 F3
   ret                                 ; 02:AFDA - C9

addr_0AFDB:
   ld     (hl), $FE                    ; 02:AFDB - 36 FE
   call   spawn_object                 ; 02:AFDD - CD 7B 7C
   ret    c                            ; 02:AFE0 - D8
   push   ix                           ; 02:AFE1 - DD E5
   ld     e, (ix+2)                    ; 02:AFE3 - DD 5E 02
   ld     d, (ix+3)                    ; 02:AFE6 - DD 56 03
   ld     c, (ix+5)                    ; 02:AFE9 - DD 4E 05
   ld     b, (ix+6)                    ; 02:AFEC - DD 46 06
   push   hl                           ; 02:AFEF - E5
   pop    ix                           ; 02:AFF0 - DD E1
   xor    a                            ; 02:AFF2 - AF
   ld     (ix+0), $36                  ; 02:AFF3 - DD 36 00 36
   ld     (ix+1), a                    ; 02:AFF7 - DD 77 01
   ld     hl, $0012                    ; 02:AFFA - 21 12 00
   add    hl, de                       ; 02:AFFD - 19
   ld     (ix+2), l                    ; 02:AFFE - DD 75 02
   ld     (ix+3), h                    ; 02:B001 - DD 74 03
   ld     (ix+4), a                    ; 02:B004 - DD 77 04
   ld     hl, $001E                    ; 02:B007 - 21 1E 00
   add    hl, bc                       ; 02:B00A - 09
   ld     (ix+5), l                    ; 02:B00B - DD 75 05
   ld     (ix+6), h                    ; 02:B00E - DD 74 06
   ld     hl, (var_D216)               ; 02:B011 - 2A 16 D2
   ld     (ix+7), l                    ; 02:B014 - DD 75 07
   ld     (ix+8), h                    ; 02:B017 - DD 74 08
   xor    a                            ; 02:B01A - AF
   bit    7, h                         ; 02:B01B - CB 7C
   jr     z, addr_0B021                ; 02:B01D - 28 02
   ld     a, $FF                       ; 02:B01F - 3E FF

addr_0B021:
   ld     (ix+9), a                    ; 02:B021 - DD 77 09
   xor    a                            ; 02:B024 - AF
   ld     (ix+10), a                   ; 02:B025 - DD 77 0A
   ld     (ix+11), a                   ; 02:B028 - DD 77 0B
   ld     (ix+12), a                   ; 02:B02B - DD 77 0C
   pop    ix                           ; 02:B02E - DD E1
   ret                                 ; 02:B030 - C9

UNK_0B031:
.db $0C, $03, $0D, $03, $0E, $03, $0E, $04, $0F, $04, $10, $04, $10, $05, $11, $05  ; 02:B031
.db $11, $06, $12, $06, $12, $07, $13, $07, $13, $08, $13, $09, $14, $09, $14, $0A  ; 02:B041
.db $14, $0B, $15, $0B, $15, $0C, $15, $0D, $15, $0E, $15, $0F, $15, $10, $15, $11  ; 02:B051
.db $14, $11, $14, $12, $14, $13, $13, $13, $13, $14, $13, $15, $12, $15, $12, $16  ; 02:B061
.db $11, $16, $11, $17, $10, $17, $10, $18, $0F, $18, $0E, $18, $0E, $19, $0D, $19  ; 02:B071
.db $0C, $19, $0B, $19, $0A, $19, $09, $19, $09, $18, $08, $18, $07, $18, $07, $17  ; 02:B081
.db $06, $17, $06, $16, $05, $16, $05, $15, $04, $15, $04, $14, $04, $13, $03, $13  ; 02:B091
.db $03, $12, $03, $11, $02, $11, $02, $10, $02, $0F, $02, $0E, $02, $0D, $02, $0C  ; 02:B0A1
.db $02, $0B, $03, $0B, $03, $0A, $03, $09, $04, $09, $04, $08, $04, $07, $05, $07  ; 02:B0B1
.db $05, $06, $06, $06, $06, $05, $07, $05, $07, $04, $08, $04, $09, $04, $09, $03  ; 02:B0C1
.db $0A, $03, $0B, $03                                                              ; 02:B0D1

UNK_0B0D5:
.db $FE, $FF, $FF, $FF, $FF, $FF, $FE, $26, $28, $FF, $FF, $FF, $FF, $FF, $FF, $FF  ; 02:B0D5
.db $FF, $FF                                                                        ; 02:B0E5

UNK_0B0E7:
.db $FE, $FF, $FF, $FF, $FF, $FF, $FE, $20, $22, $FF, $FF, $FF, $FF                 ; 02:B0E7

objfunc_36_UNKNOWN:
   set    5, (ix+24)                   ; 02:B0F4 - DD CB 18 EE
   ld     (ix+15), $00                 ; 02:B0F8 - DD 36 0F 00
   ld     (ix+16), $00                 ; 02:B0FC - DD 36 10 00
   ld     (ix+13), $04                 ; 02:B100 - DD 36 0D 04
   ld     (ix+14), $0A                 ; 02:B104 - DD 36 0E 0A
   ld     hl, $0602                    ; 02:B108 - 21 02 06
   ld     (var_D214), hl               ; 02:B10B - 22 14 D2
   call   UNK_03956                    ; 02:B10E - CD 56 39
   call   nc, addr_035FD               ; 02:B111 - D4 FD 35
   ld     l, (ix+2)                    ; 02:B114 - DD 6E 02
   ld     h, (ix+3)                    ; 02:B117 - DD 66 03
   ld     (g_FF_string_high_byte), hl  ; 02:B11A - 22 0E D2
   ex     de, hl                       ; 02:B11D - EB
   ld     hl, (var_D25A)               ; 02:B11E - 2A 5A D2
   ld     bc, $FFF0                    ; 02:B121 - 01 F0 FF
   add    hl, bc                       ; 02:B124 - 09
   and    a                            ; 02:B125 - A7
   sbc    hl, de                       ; 02:B126 - ED 52
   jr     nc, addr_0B167               ; 02:B128 - 30 3D
   ld     hl, (var_D25A)               ; 02:B12A - 2A 5A D2
   ld     bc, $0110                    ; 02:B12D - 01 10 01
   add    hl, bc                       ; 02:B130 - 09
   and    a                            ; 02:B131 - A7
   sbc    hl, de                       ; 02:B132 - ED 52
   jr     c, addr_0B167                ; 02:B134 - 38 31
   ld     l, (ix+5)                    ; 02:B136 - DD 6E 05
   ld     h, (ix+6)                    ; 02:B139 - DD 66 06
   ld     (var_D210), hl               ; 02:B13C - 22 10 D2
   ex     de, hl                       ; 02:B13F - EB
   ld     hl, (var_D25D)               ; 02:B140 - 2A 5D D2
   ld     bc, $FFF0                    ; 02:B143 - 01 F0 FF
   add    hl, bc                       ; 02:B146 - 09
   and    a                            ; 02:B147 - A7
   sbc    hl, de                       ; 02:B148 - ED 52
   jr     nc, addr_0B167               ; 02:B14A - 30 1B
   ld     hl, (var_D25D)               ; 02:B14C - 2A 5D D2
   ld     bc, $00D0                    ; 02:B14F - 01 D0 00
   add    hl, bc                       ; 02:B152 - 09
   and    a                            ; 02:B153 - A7
   sbc    hl, de                       ; 02:B154 - ED 52
   jr     c, addr_0B167                ; 02:B156 - 38 0F
   ld     hl, $0000                    ; 02:B158 - 21 00 00
   ld     (var_D212), hl               ; 02:B15B - 22 12 D2
   ld     (var_D214), hl               ; 02:B15E - 22 14 D2
   ld     a, $24                       ; 02:B161 - 3E 24
   call   UNK_03581                    ; 02:B163 - CD 81 35
   ret                                 ; 02:B166 - C9

addr_0B167:
   ld     (ix+0), $FF                  ; 02:B167 - DD 36 00 FF
   ret                                 ; 02:B16B - C9

objfunc_37_UNKNOWN:
   set    5, (ix+24)                   ; 02:B16C - DD CB 18 EE
   bit    0, (ix+24)                   ; 02:B170 - DD CB 18 46
   jr     nz, addr_0B182               ; 02:B174 - 20 0C
   call   random_A                     ; 02:B176 - CD 25 06
   and    $07                          ; 02:B179 - E6 07
   ld     (ix+17), a                   ; 02:B17B - DD 77 11
   set    0, (ix+24)                   ; 02:B17E - DD CB 18 C6

addr_0B182:
   ld     (ix+15), $00                 ; 02:B182 - DD 36 0F 00
   ld     (ix+16), $00                 ; 02:B186 - DD 36 10 00
   ld     l, (ix+2)                    ; 02:B18A - DD 6E 02
   ld     h, (ix+3)                    ; 02:B18D - DD 66 03
   ld     (g_FF_string_high_byte), hl  ; 02:B190 - 22 0E D2
   ld     l, (ix+5)                    ; 02:B193 - DD 6E 05
   ld     h, (ix+6)                    ; 02:B196 - DD 66 06
   ld     (var_D210), hl               ; 02:B199 - 22 10 D2
   ld     a, (ix+17)                   ; 02:B19C - DD 7E 11
   add    a, a                         ; 02:B19F - 87
   add    a, a                         ; 02:B1A0 - 87
   add    a, a                         ; 02:B1A1 - 87
   ld     e, a                         ; 02:B1A2 - 5F
   ld     d, $00                       ; 02:B1A3 - 16 00
   ld     hl, UNK_0B227                ; 02:B1A5 - 21 27 B2
   add    hl, de                       ; 02:B1A8 - 19
   ld     b, $02                       ; 02:B1A9 - 06 02

addr_0B1AB:
   push   bc                           ; 02:B1AB - C5
   ld     d, $00                       ; 02:B1AC - 16 00
   ld     e, (hl)                      ; 02:B1AE - 5E
   bit    7, e                         ; 02:B1AF - CB 7B
   jr     z, addr_0B1B5                ; 02:B1B1 - 28 02
   ld     d, $FF                       ; 02:B1B3 - 16 FF

addr_0B1B5:
   ld     (var_D212), de               ; 02:B1B5 - ED 53 12 D2
   inc    hl                           ; 02:B1B9 - 23
   ld     d, $00                       ; 02:B1BA - 16 00
   ld     e, (hl)                      ; 02:B1BC - 5E
   bit    7, e                         ; 02:B1BD - CB 7B
   jr     z, addr_0B1C3                ; 02:B1BF - 28 02
   ld     d, $FF                       ; 02:B1C1 - 16 FF

addr_0B1C3:
   ld     (var_D214), de               ; 02:B1C3 - ED 53 14 D2
   inc    hl                           ; 02:B1C7 - 23
   ld     a, (hl)                      ; 02:B1C8 - 7E
   inc    hl                           ; 02:B1C9 - 23
   inc    hl                           ; 02:B1CA - 23
   cp     $FF                          ; 02:B1CB - FE FF
   jr     z, addr_0B1D4                ; 02:B1CD - 28 05
   push   hl                           ; 02:B1CF - E5
   call   UNK_03581                    ; 02:B1D0 - CD 81 35
   pop    hl                           ; 02:B1D3 - E1

addr_0B1D4:
   pop    bc                           ; 02:B1D4 - C1
   djnz   addr_0B1AB                   ; 02:B1D5 - 10 D4
   ld     a, (var_D223)                ; 02:B1D7 - 3A 23 D2
   and    $3F                          ; 02:B1DA - E6 3F
   jr     nz, addr_0B1E7               ; 02:B1DC - 20 09
   ld     a, (ix+17)                   ; 02:B1DE - DD 7E 11
   inc    a                            ; 02:B1E1 - 3C
   and    $07                          ; 02:B1E2 - E6 07
   ld     (ix+17), a                   ; 02:B1E4 - DD 77 11

addr_0B1E7:
   inc    (ix+18)                      ; 02:B1E7 - DD 34 12
   ld     a, (ix+18)                   ; 02:B1EA - DD 7E 12
   cp     $1A                          ; 02:B1ED - FE 1A
   ret    nz                           ; 02:B1EF - C0
   ld     (ix+18), $00                 ; 02:B1F0 - DD 36 12 00
   ld     a, (ix+17)                   ; 02:B1F4 - DD 7E 11
   add    a, a                         ; 02:B1F7 - 87
   ld     e, a                         ; 02:B1F8 - 5F
   add    a, a                         ; 02:B1F9 - 87
   add    a, e                         ; 02:B1FA - 83
   ld     e, a                         ; 02:B1FB - 5F
   ld     d, $00                       ; 02:B1FC - 16 00
   ld     hl, UNK_0B267                ; 02:B1FE - 21 67 B2
   add    hl, de                       ; 02:B201 - 19
   ld     e, (hl)                      ; 02:B202 - 5E
   inc    hl                           ; 02:B203 - 23
   ld     d, (hl)                      ; 02:B204 - 56
   inc    hl                           ; 02:B205 - 23
   ld     (var_D212), de               ; 02:B206 - ED 53 12 D2
   ld     e, (hl)                      ; 02:B20A - 5E
   inc    hl                           ; 02:B20B - 23
   ld     d, (hl)                      ; 02:B20C - 56
   ld     (var_D214), de               ; 02:B20D - ED 53 14 D2
   inc    hl                           ; 02:B211 - 23
   ld     e, (hl)                      ; 02:B212 - 5E
   ld     d, $00                       ; 02:B213 - 16 00
   bit    7, e                         ; 02:B215 - CB 7B
   jr     z, addr_0B21A                ; 02:B217 - 28 01
   dec    d                            ; 02:B219 - 15

addr_0B21A:
   inc    hl                           ; 02:B21A - 23
   ld     c, (hl)                      ; 02:B21B - 4E
   ld     b, $00                       ; 02:B21C - 06 00
   bit    7, c                         ; 02:B21E - CB 79
   jr     z, addr_0B223                ; 02:B220 - 28 01
   dec    b                            ; 02:B222 - 05

addr_0B223:
   call   addr_0B5C2                   ; 02:B223 - CD C2 B5
   ret                                 ; 02:B226 - C9

UNK_0B227:
.db $08, $F8, $66, $00, $00, $00, $FF, $00, $0C, $FA, $70, $00, $14, $FA, $72, $00  ; 02:B227
.db $0F, $07, $4C, $00, $17, $07, $4E, $00, $0D, $0C, $6C, $00, $15, $0C, $6E, $00  ; 02:B237
.db $08, $0F, $64, $00, $00, $00, $FF, $00, $FC, $0C, $68, $00, $04, $0C, $6A, $00  ; 02:B247
.db $F9, $07, $48, $00, $01, $07, $4A, $00, $FB, $F9, $50, $00, $03, $F9, $52, $00  ; 02:B257

UNK_0B267:
.db $00, $00, $00, $FE, $08, $F0, $00, $01, $00, $FF, $18, $F8, $00, $02, $00, $00  ; 02:B267
.db $1E, $07, $00, $01, $00, $01, $16, $16, $00, $00, $00, $02, $08, $20, $00, $FF  ; 02:B277
.db $00, $01, $F8, $18, $00, $FE, $00, $00, $F2, $07, $00, $FF, $00, $FF, $F7, $F6  ; 02:B287

objfunc_38_UNKNOWN:
   set    5, (ix+24)                   ; 02:B297 - DD CB 18 EE
   bit    0, (ix+24)                   ; 02:B29B - DD CB 18 46
   jr     nz, addr_0B2B7               ; 02:B29F - 20 16
   ld     a, (ix+4)                    ; 02:B2A1 - DD 7E 04
   ld     (ix+18), a                   ; 02:B2A4 - DD 77 12
   ld     a, (ix+5)                    ; 02:B2A7 - DD 7E 05
   ld     (ix+19), a                   ; 02:B2AA - DD 77 13
   ld     a, (ix+6)                    ; 02:B2AD - DD 7E 06
   ld     (ix+20), a                   ; 02:B2B0 - DD 77 14
   set    0, (ix+24)                   ; 02:B2B3 - DD CB 18 C6

addr_0B2B7:
   ld     a, (var_D2A3)                ; 02:B2B7 - 3A A3 D2
   ld     c, a                         ; 02:B2BA - 4F
   ld     de, (var_D2A1)               ; 02:B2BB - ED 5B A1 D2
   ld     l, (ix+18)                   ; 02:B2BF - DD 6E 12
   ld     h, (ix+19)                   ; 02:B2C2 - DD 66 13
   ld     a, (ix+20)                   ; 02:B2C5 - DD 7E 14
   add    hl, de                       ; 02:B2C8 - 19
   adc    a, c                         ; 02:B2C9 - 89
   ld     (ix+4), l                    ; 02:B2CA - DD 75 04
   ld     (ix+5), h                    ; 02:B2CD - DD 74 05
   ld     (ix+6), a                    ; 02:B2D0 - DD 77 06
   ld     a, (sonic_vel_y_hi)          ; 02:B2D3 - 3A 08 D4
   and    a                            ; 02:B2D6 - A7
   jp     m, addr_0B329                ; 02:B2D7 - FA 29 B3
   ld     (ix+13), $1E                 ; 02:B2DA - DD 36 0D 1E
   ld     (ix+14), $10                 ; 02:B2DE - DD 36 0E 10
   ld     hl, $0A02                    ; 02:B2E2 - 21 02 0A
   ld     (var_D214), hl               ; 02:B2E5 - 22 14 D2
   call   UNK_03956                    ; 02:B2E8 - CD 56 39
   jr     c, addr_0B329                ; 02:B2EB - 38 3C
   ld     hl, $0030                    ; 02:B2ED - 21 30 00
   ld     (var_D26B), hl               ; 02:B2F0 - 22 6B D2
   ld     hl, $0030                    ; 02:B2F3 - 21 30 00
   ld     (var_D26D), hl               ; 02:B2F6 - 22 6D D2
   ld     bc, $0010                    ; 02:B2F9 - 01 10 00
   ld     de, $0000                    ; 02:B2FC - 11 00 00
   call   addr_07CC1                   ; 02:B2FF - CD C1 7C
   ld     l, (ix+1)                    ; 02:B302 - DD 6E 01
   ld     h, (ix+2)                    ; 02:B305 - DD 66 02
   ld     a, (ix+3)                    ; 02:B308 - DD 7E 03
   ld     de, $0080                    ; 02:B30B - 11 80 00
   add    hl, de                       ; 02:B30E - 19
   adc    a, $00                       ; 02:B30F - CE 00
   ld     (ix+1), l                    ; 02:B311 - DD 75 01
   ld     (ix+2), h                    ; 02:B314 - DD 74 02
   ld     (ix+3), a                    ; 02:B317 - DD 77 03
   ld     hl, (sonic_x_sub)            ; 02:B31A - 2A FD D3
   ld     a, (var_D3FF)                ; 02:B31D - 3A FF D3
   add    hl, de                       ; 02:B320 - 19
   adc    a, $00                       ; 02:B321 - CE 00
   ld     (sonic_x_sub), hl            ; 02:B323 - 22 FD D3
   ld     (var_D3FF), a                ; 02:B326 - 32 FF D3

addr_0B329:
   ld     l, (ix+2)                    ; 02:B329 - DD 6E 02
   ld     h, (ix+3)                    ; 02:B32C - DD 66 03
   ld     (g_FF_string_high_byte), hl  ; 02:B32F - 22 0E D2
   ld     l, (ix+5)                    ; 02:B332 - DD 6E 05
   ld     h, (ix+6)                    ; 02:B335 - DD 66 06
   ld     (var_D210), hl               ; 02:B338 - 22 10 D2
   ld     hl, $FFF8                    ; 02:B33B - 21 F8 FF
   ld     (var_D212), hl               ; 02:B33E - 22 12 D2
   ld     e, (ix+17)                   ; 02:B341 - DD 5E 11
   ld     d, $00                       ; 02:B344 - 16 00
   ld     hl, UNK_0B388                ; 02:B346 - 21 88 B3
   add    hl, de                       ; 02:B349 - 19
   ld     b, $02                       ; 02:B34A - 06 02

addr_0B34C:
   push   bc                           ; 02:B34C - C5
   ld     e, (hl)                      ; 02:B34D - 5E
   ld     d, $00                       ; 02:B34E - 16 00
   inc    hl                           ; 02:B350 - 23
   ld     (var_D214), de               ; 02:B351 - ED 53 14 D2
   ld     a, (hl)                      ; 02:B355 - 7E
   inc    hl                           ; 02:B356 - 23
   cp     $FF                          ; 02:B357 - FE FF
   jr     z, addr_0B360                ; 02:B359 - 28 05
   push   hl                           ; 02:B35B - E5
   call   UNK_03581                    ; 02:B35C - CD 81 35
   pop    hl                           ; 02:B35F - E1

addr_0B360:
   pop    bc                           ; 02:B360 - C1
   djnz   addr_0B34C                   ; 02:B361 - 10 E9
   ld     (ix+15), UNK_0B37B&$FF       ; 02:B363 - DD 36 0F 7B
   ld     (ix+16), UNK_0B37B>>8        ; 02:B367 - DD 36 10 B3
   ld     a, (ix+17)                   ; 02:B36B - DD 7E 11
   add    a, $04                       ; 02:B36E - C6 04
   ld     (ix+17), a                   ; 02:B370 - DD 77 11
   cp     $10                          ; 02:B373 - FE 10
   ret    c                            ; 02:B375 - D8
   ld     (ix+17), $00                 ; 02:B376 - DD 36 11 00
   ret                                 ; 02:B37A - C9

UNK_0B37B:
.db $FE, $FF, $FF, $FF, $FF, $FF, $36, $36, $36, $36, $FF, $FF, $FF                 ; 02:B37B

UNK_0B388:
.db $08, $1C, $18, $3C, $08, $1E, $18, $3E, $08, $38, $18, $3A, $0C, $1A, $00, $FF  ; 02:B388

objfunc_39_UNKNOWN:
   set    5, (ix+24)                   ; 02:B398 - DD CB 18 EE
   bit    0, (ix+24)                   ; 02:B39C - DD CB 18 46
   jr     nz, addr_0B3B2               ; 02:B3A0 - 20 10
   ld     l, (ix+2)                    ; 02:B3A2 - DD 6E 02
   ld     h, (ix+3)                    ; 02:B3A5 - DD 66 03
   ld     (ix+17), l                   ; 02:B3A8 - DD 75 11
   ld     (ix+18), h                   ; 02:B3AB - DD 74 12
   set    0, (ix+24)                   ; 02:B3AE - DD CB 18 C6

addr_0B3B2:
   ld     (ix+13), $0C                 ; 02:B3B2 - DD 36 0D 0C
   ld     (ix+14), $2E                 ; 02:B3B6 - DD 36 0E 2E
   ld     (ix+15), UNK_0B45B&$FF       ; 02:B3BA - DD 36 0F 5B
   ld     (ix+16), UNK_0B45B>>8        ; 02:B3BE - DD 36 10 B4
   ld     hl, $0202                    ; 02:B3C2 - 21 02 02
   ld     (var_D214), hl               ; 02:B3C5 - 22 14 D2
   call   UNK_03956                    ; 02:B3C8 - CD 56 39
   call   nc, addr_035FD               ; 02:B3CB - D4 FD 35
   ld     l, (ix+1)                    ; 02:B3CE - DD 6E 01
   ld     h, (ix+2)                    ; 02:B3D1 - DD 66 02
   ld     a, (ix+3)                    ; 02:B3D4 - DD 7E 03
   ld     de, $0080                    ; 02:B3D7 - 11 80 00
   add    hl, de                       ; 02:B3DA - 19
   adc    a, $00                       ; 02:B3DB - CE 00
   ld     l, h                         ; 02:B3DD - 6C
   ld     h, a                         ; 02:B3DE - 67
   ld     (g_FF_string_high_byte), hl  ; 02:B3DF - 22 0E D2
   ld     l, (ix+5)                    ; 02:B3E2 - DD 6E 05
   ld     h, (ix+6)                    ; 02:B3E5 - DD 66 06
   ld     (var_D210), hl               ; 02:B3E8 - 22 10 D2
   ld     hl, $0000                    ; 02:B3EB - 21 00 00
   ld     (var_D212), hl               ; 02:B3EE - 22 12 D2
   ld     hl, $FFF0                    ; 02:B3F1 - 21 F0 FF
   ld     (var_D214), hl               ; 02:B3F4 - 22 14 D2
   ld     a, $16                       ; 02:B3F7 - 3E 16
   call   UNK_03581                    ; 02:B3F9 - CD 81 35
   ld     hl, $0008                    ; 02:B3FC - 21 08 00
   ld     (var_D212), hl               ; 02:B3FF - 22 12 D2
   ld     a, $18                       ; 02:B402 - 3E 18
   call   UNK_03581                    ; 02:B404 - CD 81 35
   ld     l, (ix+2)                    ; 02:B407 - DD 6E 02
   ld     h, (ix+3)                    ; 02:B40A - DD 66 03
   ld     de, $0580                    ; 02:B40D - 11 80 05
   xor    a                            ; 02:B410 - AF
   ld     (ix+7), a                    ; 02:B411 - DD 77 07
   ld     (ix+8), a                    ; 02:B414 - DD 77 08
   ld     (ix+9), a                    ; 02:B417 - DD 77 09
   sbc    hl, de                       ; 02:B41A - ED 52
   ret    nc                           ; 02:B41C - D0
   ld     c, (ix+5)                    ; 02:B41D - DD 4E 05
   ld     b, (ix+6)                    ; 02:B420 - DD 46 06
   ld     hl, $0040                    ; 02:B423 - 21 40 00
   add    hl, bc                       ; 02:B426 - 09
   ld     de, (var_D25D)               ; 02:B427 - ED 5B 5D D2
   and    a                            ; 02:B42B - A7
   sbc    hl, de                       ; 02:B42C - ED 52
   jr     nc, addr_0B43C               ; 02:B42E - 30 0C
   ld     a, (ix+17)                   ; 02:B430 - DD 7E 11
   ld     (ix+2), a                    ; 02:B433 - DD 77 02
   ld     a, (ix+18)                   ; 02:B436 - DD 7E 12
   ld     (ix+3), a                    ; 02:B439 - DD 77 03

addr_0B43C:
   ld     de, (sonic_y)                ; 02:B43C - ED 5B 01 D4
   ld     hl, $FFE0                    ; 02:B440 - 21 E0 FF
   add    hl, bc                       ; 02:B443 - 09
   xor    a                            ; 02:B444 - AF
   sbc    hl, de                       ; 02:B445 - ED 52
   ret    nc                           ; 02:B447 - D0
   ld     hl, $002C                    ; 02:B448 - 21 2C 00
   add    hl, bc                       ; 02:B44B - 09
   xor    a                            ; 02:B44C - AF
   sbc    hl, de                       ; 02:B44D - ED 52
   ret    c                            ; 02:B44F - D8
   ld     (ix+7), $80                  ; 02:B450 - DD 36 07 80
   ld     (ix+8), a                    ; 02:B454 - DD 77 08
   ld     (ix+9), a                    ; 02:B457 - DD 77 09
   ret                                 ; 02:B45A - C9

UNK_0B45B:
.db $16, $18, $FF, $FF, $FF, $FF, $16, $18, $FF, $FF, $FF, $FF, $16, $18, $FF, $FF  ; 02:B45B
.db $FF, $FF                                                                        ; 02:B46B

objfunc_3A_UNKNOWN:
   set    5, (ix+24)                   ; 02:B46D - DD CB 18 EE
   bit    0, (ix+24)                   ; 02:B471 - DD CB 18 46
   jr     nz, addr_0B48C               ; 02:B475 - 20 15
   ld     bc, $0000                    ; 02:B477 - 01 00 00
   ld     e, c                         ; 02:B47A - 59
   ld     d, b                         ; 02:B47B - 50
   call   addr_036F9                   ; 02:B47C - CD F9 36
   ld     a, (hl)                      ; 02:B47F - 7E
   sub    $3C                          ; 02:B480 - D6 3C
   cp     $04                          ; 02:B482 - FE 04
   ret    nc                           ; 02:B484 - D0
   ld     (ix+17), a                   ; 02:B485 - DD 77 11
   set    0, (ix+24)                   ; 02:B488 - DD CB 18 C6

addr_0B48C:
   inc    (ix+18)                      ; 02:B48C - DD 34 12
   ld     a, (ix+18)                   ; 02:B48F - DD 7E 12
   bit    6, a                         ; 02:B492 - CB 77
   ret    nz                           ; 02:B494 - C0
   and    $0F                          ; 02:B495 - E6 0F
   ret    nz                           ; 02:B497 - C0
   ld     a, (ix+17)                   ; 02:B498 - DD 7E 11
   add    a, a                         ; 02:B49B - 87
   ld     e, a                         ; 02:B49C - 5F
   add    a, a                         ; 02:B49D - 87
   add    a, a                         ; 02:B49E - 87
   add    a, e                         ; 02:B49F - 83
   ld     e, a                         ; 02:B4A0 - 5F
   ld     d, $00                       ; 02:B4A1 - 16 00
   ld     hl, UNK_0B4E6                ; 02:B4A3 - 21 E6 B4
   add    hl, de                       ; 02:B4A6 - 19
   ld     e, (hl)                      ; 02:B4A7 - 5E
   inc    hl                           ; 02:B4A8 - 23
   ld     d, (hl)                      ; 02:B4A9 - 56
   inc    hl                           ; 02:B4AA - 23
   ld     (var_D212), de               ; 02:B4AB - ED 53 12 D2
   ld     e, (hl)                      ; 02:B4AF - 5E
   inc    hl                           ; 02:B4B0 - 23
   ld     d, (hl)                      ; 02:B4B1 - 56
   inc    hl                           ; 02:B4B2 - 23
   ld     (var_D214), de               ; 02:B4B3 - ED 53 14 D2
   ld     e, (hl)                      ; 02:B4B7 - 5E
   inc    hl                           ; 02:B4B8 - 23
   ld     d, (hl)                      ; 02:B4B9 - 56
   inc    hl                           ; 02:B4BA - 23
   ld     c, (hl)                      ; 02:B4BB - 4E
   inc    hl                           ; 02:B4BC - 23
   ld     b, (hl)                      ; 02:B4BD - 46
   inc    hl                           ; 02:B4BE - 23
   exx                                 ; 02:B4BF - D9
   ld     e, (ix+2)                    ; 02:B4C0 - DD 5E 02
   ld     d, (ix+3)                    ; 02:B4C3 - DD 56 03
   ld     hl, (sonic_x)                ; 02:B4C6 - 2A FE D3
   and    a                            ; 02:B4C9 - A7
   sbc    hl, de                       ; 02:B4CA - ED 52
   ld     a, h                         ; 02:B4CC - 7C
   exx                                 ; 02:B4CD - D9
   cp     (hl)                         ; 02:B4CE - BE
   ret    nz                           ; 02:B4CF - C0
   inc    hl                           ; 02:B4D0 - 23
   exx                                 ; 02:B4D1 - D9
   ld     e, (ix+5)                    ; 02:B4D2 - DD 5E 05
   ld     d, (ix+6)                    ; 02:B4D5 - DD 56 06
   ld     hl, (sonic_y)                ; 02:B4D8 - 2A 01 D4
   and    a                            ; 02:B4DB - A7
   sbc    hl, de                       ; 02:B4DC - ED 52
   ld     a, h                         ; 02:B4DE - 7C
   exx                                 ; 02:B4DF - D9
   cp     (hl)                         ; 02:B4E0 - BE
   ret    nz                           ; 02:B4E1 - C0
   call   addr_0B5C2                   ; 02:B4E2 - CD C2 B5
   ret                                 ; 02:B4E5 - C9

UNK_0B4E6:
.db $80, $FE, $80, $FE, $00, $00, $F8, $FF, $FF, $FF, $80, $01, $80, $FE, $18, $00  ; 02:B4E6
.db $F8, $FF, $00, $FF, $80, $FE, $80, $01, $00, $00, $10, $00, $FF, $00, $80, $01  ; 02:B4F6
.db $80, $01, $18, $00, $10, $00, $00, $00                                          ; 02:B506

objfunc_3B_UNKNOWN:
   set    5, (ix+24)                   ; 02:B50E - DD CB 18 EE
   ld     hl, UNK_0B37B                ; 02:B512 - 21 7B B3
   ld     a, (var_D2D4)                ; 02:B515 - 3A D4 D2
   cp     $01                          ; 02:B518 - FE 01
   jr     nz, addr_0B51F               ; 02:B51A - 20 03
   ld     hl, UNK_0B5B5                ; 02:B51C - 21 B5 B5

addr_0B51F:
   ld     (ix+15), l                   ; 02:B51F - DD 75 0F
   ld     (ix+16), h                   ; 02:B522 - DD 74 10
   ld     a, $50                       ; 02:B525 - 3E 50
   ld     (var_D216), a                ; 02:B527 - 32 16 D2
   call   addr_0B53B                   ; 02:B52A - CD 3B B5
   inc    (ix+17)                      ; 02:B52D - DD 34 11
   ld     a, (ix+17)                   ; 02:B530 - DD 7E 11
   cp     $A0                          ; 02:B533 - FE A0
   ret    c                            ; 02:B535 - D8
   ld     (ix+17), $00                 ; 02:B536 - DD 36 11 00
   ret                                 ; 02:B53A - C9

addr_0B53B:
   ld     a, (var_D216)                ; 02:B53B - 3A 16 D2
   ld     l, a                         ; 02:B53E - 6F
   ld     de, $0010                    ; 02:B53F - 11 10 00
   ld     c, $00                       ; 02:B542 - 0E 00
   ld     a, (ix+17)                   ; 02:B544 - DD 7E 11
   cp     l                            ; 02:B547 - BD
   jr     c, addr_0B54E                ; 02:B548 - 38 04
   dec    c                            ; 02:B54A - 0D
   ld     de, $FFF0                    ; 02:B54B - 11 F0 FF

addr_0B54E:
   ld     l, (ix+10)                   ; 02:B54E - DD 6E 0A
   ld     h, (ix+11)                   ; 02:B551 - DD 66 0B
   ld     a, (ix+12)                   ; 02:B554 - DD 7E 0C
   add    hl, de                       ; 02:B557 - 19
   adc    a, c                         ; 02:B558 - 89
   ld     (ix+10), l                   ; 02:B559 - DD 75 0A
   ld     (ix+11), h                   ; 02:B55C - DD 74 0B
   ld     (ix+12), a                   ; 02:B55F - DD 77 0C
   ld     a, h                         ; 02:B562 - 7C
   and    a                            ; 02:B563 - A7
   jp     p, addr_0B581                ; 02:B564 - F2 81 B5
   ld     a, l                         ; 02:B567 - 7D
   cpl                                 ; 02:B568 - 2F
   ld     l, a                         ; 02:B569 - 6F
   ld     a, h                         ; 02:B56A - 7C
   cpl                                 ; 02:B56B - 2F
   ld     h, a                         ; 02:B56C - 67
   inc    hl                           ; 02:B56D - 23
   ld     a, h                         ; 02:B56E - 7C
   cp     $02                          ; 02:B56F - FE 02
   jr     c, addr_0B591                ; 02:B571 - 38 1E
   ld     (ix+10), $00                 ; 02:B573 - DD 36 0A 00
   ld     (ix+11), $FE                 ; 02:B577 - DD 36 0B FE
   ld     (ix+12), $FF                 ; 02:B57B - DD 36 0C FF
   jr     addr_0B591                   ; 02:B57F - 18 10

addr_0B581:
   cp     $02                          ; 02:B581 - FE 02
   jr     c, addr_0B591                ; 02:B583 - 38 0C
   ld     (ix+10), $00                 ; 02:B585 - DD 36 0A 00
   ld     (ix+11), $02                 ; 02:B589 - DD 36 0B 02
   ld     (ix+12), $00                 ; 02:B58D - DD 36 0C 00

addr_0B591:
   ld     a, (sonic_vel_y_hi)          ; 02:B591 - 3A 08 D4
   and    a                            ; 02:B594 - A7
   ret    m                            ; 02:B595 - F8
   ld     (ix+13), $1E                 ; 02:B596 - DD 36 0D 1E
   ld     (ix+14), $1C                 ; 02:B59A - DD 36 0E 1C
   ld     hl, $0802                    ; 02:B59E - 21 02 08
   ld     (var_D214), hl               ; 02:B5A1 - 22 14 D2
   call   UNK_03956                    ; 02:B5A4 - CD 56 39
   ret    c                            ; 02:B5A7 - D8
   ld     e, (ix+10)                   ; 02:B5A8 - DD 5E 0A
   ld     d, (ix+11)                   ; 02:B5AB - DD 56 0B
   ld     bc, $0010                    ; 02:B5AE - 01 10 00
   call   addr_07CC1                   ; 02:B5B1 - CD C1 7C
   ret                                 ; 02:B5B4 - C9

UNK_0B5B5:
.db $FE, $FF, $FF, $FF, $FF, $FF, $6C, $6E, $6C, $6E, $FF, $FF, $FF                 ; 02:B5B5

addr_0B5C2:
   push   bc                           ; 02:B5C2 - C5
   push   de                           ; 02:B5C3 - D5
   call   spawn_object                 ; 02:B5C4 - CD 7B 7C
   pop    de                           ; 02:B5C7 - D1
   pop    bc                           ; 02:B5C8 - C1
   ret    c                            ; 02:B5C9 - D8
   push   ix                           ; 02:B5CA - DD E5
   push   hl                           ; 02:B5CC - E5
   ld     l, (ix+2)                    ; 02:B5CD - DD 6E 02
   ld     h, (ix+3)                    ; 02:B5D0 - DD 66 03
   add    hl, de                       ; 02:B5D3 - 19
   ex     de, hl                       ; 02:B5D4 - EB
   ld     l, (ix+5)                    ; 02:B5D5 - DD 6E 05
   ld     h, (ix+6)                    ; 02:B5D8 - DD 66 06
   add    hl, bc                       ; 02:B5DB - 09
   ld     c, l                         ; 02:B5DC - 4D
   ld     b, h                         ; 02:B5DD - 44
   pop    ix                           ; 02:B5DE - DD E1
   xor    a                            ; 02:B5E0 - AF
   ld     (ix+0), $0D                  ; 02:B5E1 - DD 36 00 0D
   ld     (ix+1), a                    ; 02:B5E5 - DD 77 01
   ld     (ix+2), e                    ; 02:B5E8 - DD 73 02
   ld     (ix+3), d                    ; 02:B5EB - DD 72 03
   ld     (ix+4), a                    ; 02:B5EE - DD 77 04
   ld     (ix+5), c                    ; 02:B5F1 - DD 71 05
   ld     (ix+6), b                    ; 02:B5F4 - DD 70 06
   ld     (ix+17), a                   ; 02:B5F7 - DD 77 11
   ld     (ix+19), a                   ; 02:B5FA - DD 77 13
   ld     (ix+20), a                   ; 02:B5FD - DD 77 14
   ld     (ix+21), a                   ; 02:B600 - DD 77 15
   ld     (ix+22), a                   ; 02:B603 - DD 77 16
   ld     (ix+23), a                   ; 02:B606 - DD 77 17
   ld     hl, (var_D212)               ; 02:B609 - 2A 12 D2
   bit    7, h                         ; 02:B60C - CB 7C
   jr     z, addr_0B612                ; 02:B60E - 28 02
   ld     a, $FF                       ; 02:B610 - 3E FF

addr_0B612:
   ld     (ix+7), l                    ; 02:B612 - DD 75 07
   ld     (ix+8), h                    ; 02:B615 - DD 74 08
   ld     (ix+9), a                    ; 02:B618 - DD 77 09
   xor    a                            ; 02:B61B - AF
   ld     hl, (var_D214)               ; 02:B61C - 2A 14 D2
   bit    7, h                         ; 02:B61F - CB 7C
   jr     z, addr_0B625                ; 02:B621 - 28 02
   ld     a, $FF                       ; 02:B623 - 3E FF

addr_0B625:
   ld     (ix+10), l                   ; 02:B625 - DD 75 0A
   ld     (ix+11), h                   ; 02:B628 - DD 74 0B
   ld     (ix+12), a                   ; 02:B62B - DD 77 0C
   pop    ix                           ; 02:B62E - DD E1
   ld     a, $01                       ; 02:B630 - 3E 01
   rst    $28                          ; 02:B632 - EF
   ret                                 ; 02:B633 - C9

objfunc_4A_UNKNOWN:
   ld     (ix+13), $1E                 ; 02:B634 - DD 36 0D 1E
   ld     (ix+14), $2F                 ; 02:B638 - DD 36 0E 2F
   set    5, (ix+24)                   ; 02:B63C - DD CB 18 EE
   bit    2, (ix+24)                   ; 02:B640 - DD CB 18 56
   jp     nz, addr_0B821               ; 02:B644 - C2 21 B8
   call   addr_07CA6                   ; 02:B647 - CD A6 7C
   call   addr_0B7E6                   ; 02:B64A - CD E6 B7
   bit    0, (ix+24)                   ; 02:B64D - DD CB 18 46
   jr     nz, addr_0B697               ; 02:B651 - 20 44
   ld     hl, $0350                    ; 02:B653 - 21 50 03
   ld     de, $0120                    ; 02:B656 - 11 20 01
   call   addr_07C8C                   ; 02:B659 - CD 8C 7C
   ld     l, (ix+2)                    ; 02:B65C - DD 6E 02
   ld     h, (ix+3)                    ; 02:B65F - DD 66 03
   ld     de, $0008                    ; 02:B662 - 11 08 00
   add    hl, de                       ; 02:B665 - 19
   ld     (ix+2), l                    ; 02:B666 - DD 75 02
   ld     (ix+3), h                    ; 02:B669 - DD 74 03
   ld     (ix+17), l                   ; 02:B66C - DD 75 11
   ld     (ix+18), h                   ; 02:B66F - DD 74 12
   ld     l, (ix+5)                    ; 02:B672 - DD 6E 05
   ld     h, (ix+6)                    ; 02:B675 - DD 66 06
   ld     de, $0010                    ; 02:B678 - 11 10 00
   add    hl, de                       ; 02:B67B - 19
   ld     (ix+5), l                    ; 02:B67C - DD 75 05
   ld     (ix+6), h                    ; 02:B67F - DD 74 06
   ld     (ix+19), l                   ; 02:B682 - DD 75 13
   ld     (ix+20), h                   ; 02:B685 - DD 74 14
   xor    a                            ; 02:B688 - AF
   ld     (var_D2EC), a                ; 02:B689 - 32 EC D2
   ld     a, $0D                       ; 02:B68C - 3E 0D
   rst    $18                          ; 02:B68E - DF
   set    4, (iy+var_D208-IYBASE)      ; 02:B68F - FD CB 08 E6
   set    0, (ix+24)                   ; 02:B693 - DD CB 18 C6

addr_0B697:
   ld     a, (ix+21)                   ; 02:B697 - DD 7E 15
   and    a                            ; 02:B69A - A7
   jp     nz, addr_0B6D4               ; 02:B69B - C2 D4 B6
   call   addr_0B99F                   ; 02:B69E - CD 9F B9
   ld     a, (var_D223)                ; 02:B6A1 - 3A 23 D2
   and    $07                          ; 02:B6A4 - E6 07
   jp     nz, addr_0B793               ; 02:B6A6 - C2 93 B7
   ld     a, (ix+22)                   ; 02:B6A9 - DD 7E 16
   cp     $1C                          ; 02:B6AC - FE 1C
   jr     nc, addr_0B6BB               ; 02:B6AE - 30 0B
   inc    (ix+23)                      ; 02:B6B0 - DD 34 17
   ld     a, (ix+23)                   ; 02:B6B3 - DD 7E 17
   cp     $02                          ; 02:B6B6 - FE 02
   jp     c, addr_0B6BF                ; 02:B6B8 - DA BF B6

addr_0B6BB:
   ld     (ix+23), $00                 ; 02:B6BB - DD 36 17 00

addr_0B6BF:
   inc    (ix+22)                      ; 02:B6BF - DD 34 16
   ld     a, (ix+22)                   ; 02:B6C2 - DD 7E 16
   cp     $28                          ; 02:B6C5 - FE 28
   jp     c, addr_0B793                ; 02:B6C7 - DA 93 B7
   ld     (ix+22), $00                 ; 02:B6CA - DD 36 16 00
   inc    (ix+21)                      ; 02:B6CE - DD 34 15
   jp     addr_0B793                   ; 02:B6D1 - C3 93 B7

addr_0B6D4:
   dec    a                            ; 02:B6D4 - 3D
   jr     nz, addr_0B701               ; 02:B6D5 - 20 2A
   ld     (ix+10), $40                 ; 02:B6D7 - DD 36 0A 40
   ld     (ix+11), $FE                 ; 02:B6DB - DD 36 0B FE
   ld     (ix+12), $FF                 ; 02:B6DF - DD 36 0C FF
   inc    (ix+21)                      ; 02:B6E3 - DD 34 15
   ld     l, (ix+17)                   ; 02:B6E6 - DD 6E 11
   ld     h, (ix+18)                   ; 02:B6E9 - DD 66 12
   ld     de, $0004                    ; 02:B6EC - 11 04 00
   add    hl, de                       ; 02:B6EF - 19
   ld     (ix+2), l                    ; 02:B6F0 - DD 75 02
   ld     (ix+3), h                    ; 02:B6F3 - DD 74 03
   ld     (ix+15), UNK_0BB1D&$FF       ; 02:B6F6 - DD 36 0F 1D
   ld     (ix+16), UNK_0BB1D>>8        ; 02:B6FA - DD 36 10 BB
   jp     addr_0B793                   ; 02:B6FE - C3 93 B7

addr_0B701:
   dec    a                            ; 02:B701 - 3D
   jp     nz, addr_0B75C               ; 02:B702 - C2 5C B7
   ld     l, (ix+10)                   ; 02:B705 - DD 6E 0A
   ld     h, (ix+11)                   ; 02:B708 - DD 66 0B
   ld     a, (ix+12)                   ; 02:B70B - DD 7E 0C
   ld     de, $000E                    ; 02:B70E - 11 0E 00
   add    hl, de                       ; 02:B711 - 19
   adc    a, $00                       ; 02:B712 - CE 00
   ld     c, a                         ; 02:B714 - 4F
   jp     m, addr_0B720                ; 02:B715 - FA 20 B7
   ld     a, h                         ; 02:B718 - 7C
   cp     $02                          ; 02:B719 - FE 02
   jr     c, addr_0B720                ; 02:B71B - 38 03
   ld     hl, $0200                    ; 02:B71D - 21 00 02

addr_0B720:
   ld     (ix+10), l                   ; 02:B720 - DD 75 0A
   ld     (ix+11), h                   ; 02:B723 - DD 74 0B
   ld     (ix+12), c                   ; 02:B726 - DD 71 0C
   ld     (ix+15), UNK_0BB1D&$FF       ; 02:B729 - DD 36 0F 1D
   ld     (ix+16), UNK_0BB1D>>8        ; 02:B72D - DD 36 10 BB
   ld     l, (ix+5)                    ; 02:B731 - DD 6E 05
   ld     h, (ix+6)                    ; 02:B734 - DD 66 06
   dec    hl                           ; 02:B737 - 2B
   ld     e, (ix+19)                   ; 02:B738 - DD 5E 13
   ld     d, (ix+20)                   ; 02:B73B - DD 56 14
   and    a                            ; 02:B73E - A7
   sbc    hl, de                       ; 02:B73F - ED 52
   jr     c, addr_0B793                ; 02:B741 - 38 50
   ld     (ix+5), e                    ; 02:B743 - DD 73 05
   ld     (ix+6), d                    ; 02:B746 - DD 72 06
   xor    a                            ; 02:B749 - AF
   ld     (ix+22), a                   ; 02:B74A - DD 77 16
   ld     (ix+10), a                   ; 02:B74D - DD 77 0A
   ld     (ix+11), a                   ; 02:B750 - DD 77 0B
   ld     (ix+12), a                   ; 02:B753 - DD 77 0C
   inc    (ix+21)                      ; 02:B756 - DD 34 15
   jp     addr_0B793                   ; 02:B759 - C3 93 B7

addr_0B75C:
   dec    a                            ; 02:B75C - 3D
   jp     nz, addr_0B793               ; 02:B75D - C2 93 B7
   ld     l, (ix+17)                   ; 02:B760 - DD 6E 11
   ld     h, (ix+18)                   ; 02:B763 - DD 66 12
   ld     (ix+2), l                    ; 02:B766 - DD 75 02
   ld     (ix+3), h                    ; 02:B769 - DD 74 03
   ld     a, (ix+22)                   ; 02:B76C - DD 7E 16
   and    a                            ; 02:B76F - A7
   call   z, addr_0B9D5                ; 02:B770 - CC D5 B9
   ld     (ix+23), $02                 ; 02:B773 - DD 36 17 02
   set    1, (ix+24)                   ; 02:B777 - DD CB 18 CE
   call   addr_0B99F                   ; 02:B77B - CD 9F B9
   inc    (ix+22)                      ; 02:B77E - DD 34 16
   ld     a, (ix+22)                   ; 02:B781 - DD 7E 16
   cp     $12                          ; 02:B784 - FE 12
   jr     c, addr_0B793                ; 02:B786 - 38 0B
   res    1, (ix+24)                   ; 02:B788 - DD CB 18 8E
   xor    a                            ; 02:B78C - AF
   ld     (ix+21), a                   ; 02:B78D - DD 77 15
   ld     (ix+22), a                   ; 02:B790 - DD 77 16

addr_0B793:
   ld     hl, UNK_0BA31                ; 02:B793 - 21 31 BA
   bit    1, (ix+24)                   ; 02:B796 - DD CB 18 4E
   jr     z, addr_0B79F                ; 02:B79A - 28 03
   ld     hl, UNK_0BA3B                ; 02:B79C - 21 3B BA

addr_0B79F:
   ld     de, g_FF_string_high_byte    ; 02:B79F - 11 0E D2
   ldi                                 ; 02:B7A2 - ED A0
   ldi                                 ; 02:B7A4 - ED A0
   ldi                                 ; 02:B7A6 - ED A0
   ldi                                 ; 02:B7A8 - ED A0
   ldi                                 ; 02:B7AA - ED A0
   ldi                                 ; 02:B7AC - ED A0
   ldi                                 ; 02:B7AE - ED A0
   ldi                                 ; 02:B7B0 - ED A0
   ld     a, (hl)                      ; 02:B7B2 - 7E
   inc    hl                           ; 02:B7B3 - 23
   push   hl                           ; 02:B7B4 - E5
   call   UNK_03581                    ; 02:B7B5 - CD 81 35
   ld     hl, (var_D212)               ; 02:B7B8 - 2A 12 D2
   ld     de, $0008                    ; 02:B7BB - 11 08 00
   add    hl, de                       ; 02:B7BE - 19
   ld     (var_D212), hl               ; 02:B7BF - 22 12 D2
   pop    hl                           ; 02:B7C2 - E1
   ld     a, (hl)                      ; 02:B7C3 - 7E
   call   UNK_03581                    ; 02:B7C4 - CD 81 35
   ld     a, (var_D2EC)                ; 02:B7C7 - 3A EC D2
   cp     $0C                          ; 02:B7CA - FE 0C
   ret    c                            ; 02:B7CC - D8
   xor    a                            ; 02:B7CD - AF
   ld     (ix+17), a                   ; 02:B7CE - DD 77 11
   ld     (ix+22), a                   ; 02:B7D1 - DD 77 16
   ld     (ix+23), a                   ; 02:B7D4 - DD 77 17
   set    2, (ix+24)                   ; 02:B7D7 - DD CB 18 D6
   res    4, (iy+var_D208-IYBASE)      ; 02:B7DB - FD CB 08 A6
   ld     a, $04                       ; 02:B7DF - 3E 04
   rst    $18                          ; 02:B7E1 - DF
   ld     a, $21                       ; 02:B7E2 - 3E 21
   rst    $28                          ; 02:B7E4 - EF
   ret                                 ; 02:B7E5 - C9

addr_0B7E6:
   ld     a, (var_D2B1)                ; 02:B7E6 - 3A B1 D2
   and    a                            ; 02:B7E9 - A7
   ret    nz                           ; 02:B7EA - C0
   bit    0, (iy+var_D205-IYBASE)      ; 02:B7EB - FD CB 05 46
   ret    nz                           ; 02:B7EF - C0
   ld     a, (var_D414)                ; 02:B7F0 - 3A 14 D4
   rrca                                ; 02:B7F3 - 0F
   jr     c, addr_0B7F9                ; 02:B7F4 - 38 03
   and    $02                          ; 02:B7F6 - E6 02
   ret    z                            ; 02:B7F8 - C8

addr_0B7F9:
   ld     hl, (sonic_x)                ; 02:B7F9 - 2A FE D3
   ld     de, $0410                    ; 02:B7FC - 11 10 04
   and    a                            ; 02:B7FF - A7
   sbc    hl, de                       ; 02:B800 - ED 52
   ret    c                            ; 02:B802 - D8
   ld     hl, $FD00                    ; 02:B803 - 21 00 FD
   ld     a, $FF                       ; 02:B806 - 3E FF
   ld     (sonic_vel_x_sub), hl        ; 02:B808 - 22 03 D4
   ld     (sonic_vel_x_hi), a          ; 02:B80B - 32 05 D4
   ld     hl, var_D2B1                 ; 02:B80E - 21 B1 D2
   ld     (hl), $18                    ; 02:B811 - 36 18
   inc    hl                           ; 02:B813 - 23
   ld     (hl), $0C                    ; 02:B814 - 36 0C
   inc    hl                           ; 02:B816 - 23
   ld     (hl), $3F                    ; 02:B817 - 36 3F
   ld     a, $01                       ; 02:B819 - 3E 01
   rst    $28                          ; 02:B81B - EF
   ld     hl, var_D2EC                 ; 02:B81C - 21 EC D2
   inc    (hl)                         ; 02:B81F - 34
   ret                                 ; 02:B820 - C9

addr_0B821:
   bit    3, (ix+24)                   ; 02:B821 - DD CB 18 5E
   jp     nz, addr_0B95B               ; 02:B825 - C2 5B B9
   res    5, (ix+24)                   ; 02:B828 - DD CB 18 AE
   ld     a, (ix+17)                   ; 02:B82C - DD 7E 11
   cp     $0F                          ; 02:B82F - FE 0F
   jr     nc, addr_0B86A               ; 02:B831 - 30 37
   add    a, a                         ; 02:B833 - 87
   add    a, a                         ; 02:B834 - 87
   ld     e, a                         ; 02:B835 - 5F
   add    a, a                         ; 02:B836 - 87
   add    a, e                         ; 02:B837 - 83
   ld     e, a                         ; 02:B838 - 5F
   ld     d, $00                       ; 02:B839 - 16 00
   ld     hl, UNK_0BA45                ; 02:B83B - 21 45 BA
   add    hl, de                       ; 02:B83E - 19
   ld     e, (hl)                      ; 02:B83F - 5E
   inc    hl                           ; 02:B840 - 23
   ld     d, (hl)                      ; 02:B841 - 56
   inc    hl                           ; 02:B842 - 23
   ld     (var_D2AB), de               ; 02:B843 - ED 53 AB D2
   ld     e, (hl)                      ; 02:B847 - 5E
   inc    hl                           ; 02:B848 - 23
   ld     d, (hl)                      ; 02:B849 - 56
   inc    hl                           ; 02:B84A - 23
   ld     (var_D2AD), de               ; 02:B84B - ED 53 AD D2
   ld     (var_D2AF), hl               ; 02:B84F - 22 AF D2
   inc    (ix+17)                      ; 02:B852 - DD 34 11
   ld     a, (ix+17)                   ; 02:B855 - DD 7E 11
   cp     $0F                          ; 02:B858 - FE 0F
   jr     nz, addr_0B86A               ; 02:B85A - 20 0E
   set    5, (iy+var_D200-IYBASE)      ; 02:B85C - FD CB 00 EE
   res    1, (iy+var_D202-IYBASE)      ; 02:B860 - FD CB 02 8E
   ld     hl, $0550                    ; 02:B864 - 21 50 05
   ld     (var_D275), hl               ; 02:B867 - 22 75 D2

addr_0B86A:
   ld     e, (ix+2)                    ; 02:B86A - DD 5E 02
   ld     d, (ix+3)                    ; 02:B86D - DD 56 03
   ld     hl, $05E0                    ; 02:B870 - 21 E0 05
   xor    a                            ; 02:B873 - AF
   sbc    hl, de                       ; 02:B874 - ED 52
   jr     nc, addr_0B87D               ; 02:B876 - 30 05
   ld     c, a                         ; 02:B878 - 4F
   ld     b, a                         ; 02:B879 - 47
   jp     addr_0B899                   ; 02:B87A - C3 99 B8

addr_0B87D:
   ex     de, hl                       ; 02:B87D - EB
   ld     de, (sonic_x)                ; 02:B87E - ED 5B FE D3
   xor    a                            ; 02:B882 - AF
   sbc    hl, de                       ; 02:B883 - ED 52
   ld     de, $0040                    ; 02:B885 - 11 40 00
   xor    a                            ; 02:B888 - AF
   ld     bc, (sonic_vel_x_sub)        ; 02:B889 - ED 4B 03 D4
   bit    7, b                         ; 02:B88D - CB 78
   jr     nz, addr_0B895               ; 02:B88F - 20 04
   sbc    hl, de                       ; 02:B891 - ED 52
   jr     c, addr_0B898                ; 02:B893 - 38 03

addr_0B895:
   ld     bc, $FF80                    ; 02:B895 - 01 80 FF

addr_0B898:
   inc    b                            ; 02:B898 - 04

addr_0B899:
   ld     (ix+7), c                    ; 02:B899 - DD 71 07
   ld     (ix+8), b                    ; 02:B89C - DD 70 08
   ld     (ix+9), a                    ; 02:B89F - DD 77 09
   ld     a, (ix+23)                   ; 02:B8A2 - DD 7E 17
   cp     $06                          ; 02:B8A5 - FE 06
   jr     nz, addr_0B8C1               ; 02:B8A7 - 20 18
   ld     a, (ix+22)                   ; 02:B8A9 - DD 7E 16
   dec    a                            ; 02:B8AC - 3D
   jr     nz, addr_0B8C1               ; 02:B8AD - 20 12
   bit    7, (ix+24)                   ; 02:B8AF - DD CB 18 7E
   jr     z, addr_0B8C1                ; 02:B8B3 - 28 0C
   ld     (ix+10), $00                 ; 02:B8B5 - DD 36 0A 00
   ld     (ix+11), $FF                 ; 02:B8B9 - DD 36 0B FF
   ld     (ix+12), $FF                 ; 02:B8BD - DD 36 0C FF

addr_0B8C1:
   ld     de, $0017                    ; 02:B8C1 - 11 17 00
   ld     bc, $0036                    ; 02:B8C4 - 01 36 00
   call   addr_036F9                   ; 02:B8C7 - CD F9 36
   ld     e, (hl)                      ; 02:B8CA - 5E
   ld     d, $00                       ; 02:B8CB - 16 00
   ld     hl, LVTILEFLAGS_SKY_3        ; 02:B8CD - 21 28 3F
   add    hl, de                       ; 02:B8D0 - 19
   ld     a, (hl)                      ; 02:B8D1 - 7E
   and    $3F                          ; 02:B8D2 - E6 3F
   and    a                            ; 02:B8D4 - A7
   jr     z, addr_0B8E9                ; 02:B8D5 - 28 12
   bit    7, (ix+24)                   ; 02:B8D7 - DD CB 18 7E
   jr     z, addr_0B8E9                ; 02:B8DB - 28 0C
   ld     (ix+10), $80                 ; 02:B8DD - DD 36 0A 80
   ld     (ix+11), $FD                 ; 02:B8E1 - DD 36 0B FD
   ld     (ix+12), $FF                 ; 02:B8E5 - DD 36 0C FF

addr_0B8E9:
   ld     de, $0000                    ; 02:B8E9 - 11 00 00
   ld     bc, $0008                    ; 02:B8EC - 01 08 00
   call   addr_036F9                   ; 02:B8EF - CD F9 36
   ld     a, (hl)                      ; 02:B8F2 - 7E
   cp     $49                          ; 02:B8F3 - FE 49
   jr     nz, addr_0B92D               ; 02:B8F5 - 20 36
   bit    7, (ix+24)                   ; 02:B8F7 - DD CB 18 7E
   jr     z, addr_0B92D                ; 02:B8FB - 28 30
   xor    a                            ; 02:B8FD - AF
   ld     (ix+22), a                   ; 02:B8FE - DD 77 16
   ld     (ix+23), a                   ; 02:B901 - DD 77 17
   ld     (ix+7), a                    ; 02:B904 - DD 77 07
   ld     (ix+8), a                    ; 02:B907 - DD 77 08
   ld     (ix+9), a                    ; 02:B90A - DD 77 09
   ld     (ix+17), $E0                 ; 02:B90D - DD 36 11 E0
   ld     (ix+18), $05                 ; 02:B911 - DD 36 12 05
   ld     (ix+19), $60                 ; 02:B915 - DD 36 13 60
   ld     (ix+20), $01                 ; 02:B919 - DD 36 14 01
   ld     hl, $0550                    ; 02:B91D - 21 50 05
   ld     de, $0120                    ; 02:B920 - 11 20 01
   call   addr_07C8C                   ; 02:B923 - CD 8C 7C
   set    3, (ix+24)                   ; 02:B926 - DD CB 18 DE
   jp     addr_0B95B                   ; 02:B92A - C3 5B B9

addr_0B92D:
   ld     l, (ix+10)                   ; 02:B92D - DD 6E 0A
   ld     h, (ix+11)                   ; 02:B930 - DD 66 0B
   ld     a, (ix+12)                   ; 02:B933 - DD 7E 0C
   ld     de, $000E                    ; 02:B936 - 11 0E 00
   add    hl, de                       ; 02:B939 - 19
   adc    a, $00                       ; 02:B93A - CE 00
   ld     c, a                         ; 02:B93C - 4F
   jp     m, addr_0B948                ; 02:B93D - FA 48 B9
   ld     a, h                         ; 02:B940 - 7C
   cp     $02                          ; 02:B941 - FE 02
   jr     c, addr_0B948                ; 02:B943 - 38 03
   ld     hl, $0200                    ; 02:B945 - 21 00 02

addr_0B948:
   ld     (ix+10), l                   ; 02:B948 - DD 75 0A
   ld     (ix+11), h                   ; 02:B94B - DD 74 0B
   ld     (ix+12), c                   ; 02:B94E - DD 71 0C
   ld     bc, UNK_0BA28                ; 02:B951 - 01 28 BA
   ld     de, UNK_0BAF9                ; 02:B954 - 11 F9 BA
   call   addr_07C41                   ; 02:B957 - CD 41 7C
   ret                                 ; 02:B95A - C9

addr_0B95B:
   ld     (iy+g_inputs_player_1-IYBASE), $FF  ; 02:B95B - FD 36 03 FF
   call   addr_0B99F                   ; 02:B95F - CD 9F B9
   ld     a, (ix+22)                   ; 02:B962 - DD 7E 16
   cp     $30                          ; 02:B965 - FE 30
   jr     nc, addr_0B98A               ; 02:B967 - 30 21
   ld     c, a                         ; 02:B969 - 4F
   ld     a, (var_D223)                ; 02:B96A - 3A 23 D2
   and    $07                          ; 02:B96D - E6 07
   jr     nz, addr_0B97D               ; 02:B96F - 20 0C
   ld     a, (ix+23)                   ; 02:B971 - DD 7E 17
   inc    a                            ; 02:B974 - 3C
   and    $01                          ; 02:B975 - E6 01
   ld     (ix+23), a                   ; 02:B977 - DD 77 17
   inc    (ix+22)                      ; 02:B97A - DD 34 16

addr_0B97D:
   ld     a, c                         ; 02:B97D - 79
   cp     $2C                          ; 02:B97E - FE 2C
   ret    c                            ; 02:B980 - D8
   ld     (ix+15), UNK_0BB77&$FF       ; 02:B981 - DD 36 0F 77
   ld     (ix+16), UNK_0BB77>>8        ; 02:B985 - DD 36 10 BB
   ret                                 ; 02:B989 - C9

addr_0B98A:
   xor    a                            ; 02:B98A - AF
   ld     (ix+15), a                   ; 02:B98B - DD 77 0F
   ld     (ix+16), a                   ; 02:B98E - DD 77 10
   inc    (ix+22)                      ; 02:B991 - DD 34 16
   ld     a, (ix+22)                   ; 02:B994 - DD 7E 16
   cp     $70                          ; 02:B997 - FE 70
   ret    c                            ; 02:B999 - D8
   ld     (ix+0), $FF                  ; 02:B99A - DD 36 00 FF
   ret                                 ; 02:B99E - C9

addr_0B99F:
   ld     hl, UNK_0BA1C                ; 02:B99F - 21 1C BA
   ld     a, (ix+23)                   ; 02:B9A2 - DD 7E 17
   add    a, a                         ; 02:B9A5 - 87
   add    a, a                         ; 02:B9A6 - 87
   ld     e, a                         ; 02:B9A7 - 5F
   ld     d, $00                       ; 02:B9A8 - 16 00
   ld     b, d                         ; 02:B9AA - 42
   add    hl, de                       ; 02:B9AB - 19
   ld     c, (hl)                      ; 02:B9AC - 4E
   inc    hl                           ; 02:B9AD - 23
   ld     e, (hl)                      ; 02:B9AE - 5E
   inc    hl                           ; 02:B9AF - 23
   ld     a, (hl)                      ; 02:B9B0 - 7E
   inc    hl                           ; 02:B9B1 - 23
   ld     h, (hl)                      ; 02:B9B2 - 66
   ld     l, a                         ; 02:B9B3 - 6F
   ld     (ix+15), l                   ; 02:B9B4 - DD 75 0F
   ld     (ix+16), h                   ; 02:B9B7 - DD 74 10
   ld     l, (ix+17)                   ; 02:B9BA - DD 6E 11
   ld     h, (ix+18)                   ; 02:B9BD - DD 66 12
   add    hl, bc                       ; 02:B9C0 - 09
   ld     (ix+2), l                    ; 02:B9C1 - DD 75 02
   ld     (ix+3), h                    ; 02:B9C4 - DD 74 03
   ld     l, (ix+19)                   ; 02:B9C7 - DD 6E 13
   ld     h, (ix+20)                   ; 02:B9CA - DD 66 14
   add    hl, de                       ; 02:B9CD - 19
   ld     (ix+5), l                    ; 02:B9CE - DD 75 05
   ld     (ix+6), h                    ; 02:B9D1 - DD 74 06
   ret                                 ; 02:B9D4 - C9

addr_0B9D5:
   bit    5, (iy+var_D208-IYBASE)      ; 02:B9D5 - FD CB 08 6E
   ret    nz                           ; 02:B9D9 - C0
   call   spawn_object                 ; 02:B9DA - CD 7B 7C
   ret    c                            ; 02:B9DD - D8
   push   ix                           ; 02:B9DE - DD E5
   push   hl                           ; 02:B9E0 - E5
   pop    ix                           ; 02:B9E1 - DD E1
   xor    a                            ; 02:B9E3 - AF
   ld     (ix+0), $47                  ; 02:B9E4 - DD 36 00 47
   ld     (ix+1), a                    ; 02:B9E8 - DD 77 01
   ld     hl, $0420                    ; 02:B9EB - 21 20 04
   ld     (ix+2), l                    ; 02:B9EE - DD 75 02
   ld     (ix+3), h                    ; 02:B9F1 - DD 74 03
   ld     (ix+4), a                    ; 02:B9F4 - DD 77 04
   ld     hl, $012F                    ; 02:B9F7 - 21 2F 01
   ld     (ix+5), l                    ; 02:B9FA - DD 75 05
   ld     (ix+6), h                    ; 02:B9FD - DD 74 06
   ld     (ix+17), a                   ; 02:BA00 - DD 77 11
   ld     (ix+24), a                   ; 02:BA03 - DD 77 18
   ld     (ix+7), a                    ; 02:BA06 - DD 77 07
   ld     (ix+8), a                    ; 02:BA09 - DD 77 08
   ld     (ix+9), a                    ; 02:BA0C - DD 77 09
   ld     (ix+10), a                   ; 02:BA0F - DD 77 0A
   ld     (ix+11), a                   ; 02:BA12 - DD 77 0B
   ld     (ix+12), a                   ; 02:BA15 - DD 77 0C
   pop    ix                           ; 02:BA18 - DD E1
   ret                                 ; 02:BA1A - C9

.IF 0
UNUSED_0BA1B:
   ret                                 ; 02:BA1B - C9
.ENDIF
; SAVING: 1 byte

UNK_0BA1C:
.db $00, $00                                                                        ; 02:BA1C

UNK_0BA1C_PTR:
.dw UNK_0BAF9                                                                       ; 02:BA1E
.db $00, $02                                                                        ; 02:BA20
.dw addr_0BB0B                                                                      ; 02:BA22
.db $00, $07                                                                        ; 02:BA24
.dw addr_0BB0B                                                                      ; 02:BA26

UNK_0BA28:
.db $03, $08, $04, $07, $05, $08, $04, $07, $FF                                     ; 02:BA28

UNK_0BA31:
.db $30, $04, $A0, $01, $00, $00, $00, $00, $20, $22                                ; 02:BA31

UNK_0BA3B:
.db $30, $04, $A0, $01, $00, $00, $00, $00, $24, $26                                ; 02:BA3B

UNK_0BA45:
.db $20, $04, $60, $01, $37, $10, $38, $10, $4A, $10, $4B, $10, $30, $04, $60, $01  ; 02:BA45
.db $28, $10, $19, $10, $4C, $10, $4D, $10, $40, $04, $60, $01, $00, $10, $2D, $10  ; 02:BA55
.db $4E, $10, $4F, $10, $20, $04, $70, $01, $00, $00, $00, $00, $00, $00, $00, $00  ; 02:BA65
.db $30, $04, $70, $01, $00, $00, $00, $00, $00, $00, $00, $00, $40, $04, $70, $01  ; 02:BA75
.db $00, $00, $00, $00, $00, $00, $00, $00, $20, $04, $80, $01, $00, $00, $00, $00  ; 02:BA85
.db $00, $00, $00, $00, $30, $04, $80, $01, $00, $00, $00, $00, $00, $00, $00, $00  ; 02:BA95
.db $40, $04, $80, $01, $00, $00, $00, $00, $00, $00, $00, $00, $20, $04, $90, $01  ; 02:BAA5
.db $00, $00, $00, $00, $00, $00, $00, $00, $30, $04, $90, $01, $00, $00, $00, $00  ; 02:BAB5
.db $00, $00, $00, $00, $40, $04, $90, $01, $00, $00, $00, $00, $00, $00, $00, $00  ; 02:BAC5
.db $20, $04, $A0, $01, $5A, $10, $5B, $10, $37, $10, $3B, $10, $30, $04, $A0, $01  ; 02:BAD5
.db $5C, $10, $5D, $10, $3C, $10, $00, $10, $40, $04, $A0, $01, $5E, $10, $5F, $10  ; 02:BAE5
.db $00, $10, $2D, $10                                                              ; 02:BAF5

UNK_0BAF9:
.db $FE, $0A, $0C, $0E, $FF, $FF, $28, $2A, $2C, $2E, $FF, $FF, $FE, $4A, $4C, $4E  ; 02:BAF9
.db $FF, $FF                                                                        ; 02:BB09

addr_0BB0B:
.db $FE, $0A, $0C, $0E, $FF, $FF, $28, $2A, $2C, $2E, $FF, $FF, $FE, $02, $04, $06  ; 02:BB0B
.db $FF, $FF                                                                        ; 02:BB1B

UNK_0BB1D:
.db $10, $12, $14, $16, $FF, $FF, $30, $32, $34, $FE, $FF, $FF, $50, $52, $54, $FE  ; 02:BB1D
.db $FF, $FF, $18, $1A, $1C, $1E, $FF, $FF, $FE, $3A, $3C, $3E, $FF, $FF, $FE, $64  ; 02:BB2D
.db $66, $68, $FF, $FF, $18, $1A, $1C, $1E, $FF, $FF, $FE, $3A, $3C, $3E, $FF, $FF  ; 02:BB3D
.db $FE, $6A, $6C, $6E, $FF, $FF, $18, $1A, $1C, $1E, $FF, $FF, $FE, $3A, $3C, $3E  ; 02:BB4D
.db $FF, $FF, $70, $72, $5A, $5C, $5E, $FF, $00, $0A, $0C, $0E, $FF, $FF, $28, $2A  ; 02:BB5D
.db $2C, $2E, $FF, $FF, $00, $4A, $4C, $4E, $FF, $FF                                ; 02:BB6D

UNK_0BB77:
.db $FE, $FF, $FF, $FF, $FF, $FF, $FE, $44, $46, $FF, $FF, $FF, $FF                 ; 02:BB77

objfunc_46_UNKNOWN:
   set    5, (ix+24)                   ; 02:BB84 - DD CB 18 EE
   ld     hl, $0008                    ; 02:BB88 - 21 08 00
   ld     (var_D26B), hl               ; 02:BB8B - 22 6B D2
   bit    0, (ix+24)                   ; 02:BB8E - DD CB 18 46
   jr     nz, addr_0BBA7               ; 02:BB92 - 20 13
   ld     hl, ART_0C_EF3F              ; 02:BB94 - 21 3F EF
   ld     de, $2000                    ; 02:BB97 - 11 00 20
   ld     a, $0C                       ; 02:BB9A - 3E 0C
   call   load_art                     ; 02:BB9C - CD 05 04
   ld     (ix+18), $01                 ; 02:BB9F - DD 36 12 01
   set    0, (ix+24)                   ; 02:BBA3 - DD CB 18 C6

addr_0BBA7:
   ld     hl, $0390                    ; 02:BBA7 - 21 90 03
   ld     (g_FF_string_high_byte), hl  ; 02:BBAA - 22 0E D2
   ld     l, (ix+17)                   ; 02:BBAD - DD 6E 11
   ld     h, $00                       ; 02:BBB0 - 26 00
   ld     (var_D212), hl               ; 02:BBB2 - 22 12 D2
   ld     l, h                         ; 02:BBB5 - 6C
   ld     (var_D214), hl               ; 02:BBB6 - 22 14 D2
   ld     de, $011A                    ; 02:BBB9 - 11 1A 01
   ld     hl, UNK_0BCDD                ; 02:BBBC - 21 DD BC
   call   addr_0BCA5                   ; 02:BBBF - CD A5 BC
   ld     e, (ix+17)                   ; 02:BBC2 - DD 5E 11
   ld     d, $00                       ; 02:BBC5 - 16 00
   ld     (var_D212), de               ; 02:BBC7 - ED 53 12 D2
   ld     de, $01D2                    ; 02:BBCB - 11 D2 01
   ld     hl, UNK_0BCDD                ; 02:BBCE - 21 DD BC
   call   addr_0BCA5                   ; 02:BBD1 - CD A5 BC
   bit    4, (iy+var_D208-IYBASE)      ; 02:BBD4 - FD CB 08 66
   ret    z                            ; 02:BBD8 - C8
   bit    1, (ix+24)                   ; 02:BBD9 - DD CB 18 4E
   jr     z, addr_0BC2B                ; 02:BBDD - 28 4C
   ld     a, (var_D223)                ; 02:BBDF - 3A 23 D2
   bit    0, a                         ; 02:BBE2 - CB 47
   ret    nz                           ; 02:BBE4 - C0
   and    $02                          ; 02:BBE5 - E6 02
   ld     e, a                         ; 02:BBE7 - 5F
   ld     d, $00                       ; 02:BBE8 - 16 00
   ld     hl, UNK_0BCC7                ; 02:BBEA - 21 C7 BC
   add    hl, de                       ; 02:BBED - 19
   ld     b, $0A                       ; 02:BBEE - 06 0A
   ld     de, $0130                    ; 02:BBF0 - 11 30 01

addr_0BBF3:
   push   bc                           ; 02:BBF3 - C5
   push   de                           ; 02:BBF4 - D5
   call   addr_0BCA5                   ; 02:BBF5 - CD A5 BC
   pop    de                           ; 02:BBF8 - D1
   push   hl                           ; 02:BBF9 - E5
   ld     hl, $0010                    ; 02:BBFA - 21 10 00
   add    hl, de                       ; 02:BBFD - 19
   ex     de, hl                       ; 02:BBFE - EB
   pop    hl                           ; 02:BBFF - E1
   pop    bc                           ; 02:BC00 - C1
   djnz   addr_0BBF3                   ; 02:BC01 - 10 F0
   ld     hl, $0390                    ; 02:BC03 - 21 90 03
   ld     c, (ix+17)                   ; 02:BC06 - DD 4E 11
   ld     b, $00                       ; 02:BC09 - 06 00
   add    hl, bc                       ; 02:BC0B - 09
   ld     c, l                         ; 02:BC0C - 4D
   ld     b, h                         ; 02:BC0D - 44
   ld     hl, $000C                    ; 02:BC0E - 21 0C 00
   add    hl, bc                       ; 02:BC11 - 09
   ld     de, (sonic_x)                ; 02:BC12 - ED 5B FE D3
   and    a                            ; 02:BC16 - A7
   sbc    hl, de                       ; 02:BC17 - ED 52
   jr     c, addr_0BC2B                ; 02:BC19 - 38 10
   ld     hl, $000E                    ; 02:BC1B - 21 0E 00
   add    hl, de                       ; 02:BC1E - 19
   and    a                            ; 02:BC1F - A7
   sbc    hl, bc                       ; 02:BC20 - ED 42
   jr     c, addr_0BC2B                ; 02:BC22 - 38 07
   bit    0, (iy+var_D205-IYBASE)      ; 02:BC24 - FD CB 05 46
   call   z, addr_035FD                ; 02:BC28 - CC FD 35

addr_0BC2B:
   ld     a, (var_D2EC)                ; 02:BC2B - 3A EC D2
   cp     $06                          ; 02:BC2E - FE 06
   jr     nc, addr_0BC65               ; 02:BC30 - 30 33
   bit    1, (ix+24)                   ; 02:BC32 - DD CB 18 4E
   jr     nz, addr_0BC4E               ; 02:BC36 - 20 16
   ld     a, (ix+17)                   ; 02:BC38 - DD 7E 11
   inc    a                            ; 02:BC3B - 3C
   ld     (ix+17), a                   ; 02:BC3C - DD 77 11
   cp     $80                          ; 02:BC3F - FE 80
   ret    c                            ; 02:BC41 - D8
   ld     a, (var_D223)                ; 02:BC42 - 3A 23 D2
   ld     c, a                         ; 02:BC45 - 4F
   and    $01                          ; 02:BC46 - E6 01
   ret    nz                           ; 02:BC48 - C0
   set    1, (ix+24)                   ; 02:BC49 - DD CB 18 CE
   ret                                 ; 02:BC4D - C9

addr_0BC4E:
   ld     a, (var_D223)                ; 02:BC4E - 3A 23 D2
   and    $0F                          ; 02:BC51 - E6 0F
   jr     nz, addr_0BC58               ; 02:BC53 - 20 03
   ld     a, $13                       ; 02:BC55 - 3E 13
   rst    $28                          ; 02:BC57 - EF

addr_0BC58:
   dec    (ix+17)                      ; 02:BC58 - DD 35 11
   ret    nz                           ; 02:BC5B - C0
   ld     (ix+17), $00                 ; 02:BC5C - DD 36 11 00
   res    1, (ix+24)                   ; 02:BC60 - DD CB 18 8E
   ret                                 ; 02:BC64 - C9

addr_0BC65:
   ld     hl, (sonic_x)                ; 02:BC65 - 2A FE D3
   ld     e, (ix+2)                    ; 02:BC68 - DD 5E 02
   ld     d, (ix+3)                    ; 02:BC6B - DD 56 03
   and    a                            ; 02:BC6E - A7
   sbc    hl, de                       ; 02:BC6F - ED 52
   jr     nc, addr_0BC7E               ; 02:BC71 - 30 0B
   ld     a, (ix+17)                   ; 02:BC73 - DD 7E 11
   and    a                            ; 02:BC76 - A7
   jr     z, addr_0BC88                ; 02:BC77 - 28 0F
   dec    (ix+17)                      ; 02:BC79 - DD 35 11
   jr     addr_0BC88                   ; 02:BC7C - 18 0A

addr_0BC7E:
   ld     a, (ix+17)                   ; 02:BC7E - DD 7E 11
   cp     $80                          ; 02:BC81 - FE 80
   jr     nc, addr_0BC88               ; 02:BC83 - 30 03
   inc    (ix+17)                      ; 02:BC85 - DD 34 11

addr_0BC88:
   res    1, (ix+24)                   ; 02:BC88 - DD CB 18 8E
   ld     a, (var_D223)                ; 02:BC8C - 3A 23 D2
   ld     c, a                         ; 02:BC8F - 4F
   and    $40                          ; 02:BC90 - E6 40
   ret    nz                           ; 02:BC92 - C0
   ld     a, (var_D2EC)                ; 02:BC93 - 3A EC D2
   cp     $06                          ; 02:BC96 - FE 06
   ret    z                            ; 02:BC98 - C8
   set    1, (ix+24)                   ; 02:BC99 - DD CB 18 CE
   ld     a, c                         ; 02:BC9D - 79
   and    $1F                          ; 02:BC9E - E6 1F
   ret    nz                           ; 02:BCA0 - C0
   ld     a, $13                       ; 02:BCA1 - 3E 13
   rst    $28                          ; 02:BCA3 - EF
   ret                                 ; 02:BCA4 - C9

addr_0BCA5:
   ld     (var_D210), de               ; 02:BCA5 - ED 53 10 D2
   ld     a, (hl)                      ; 02:BCA9 - 7E
   inc    hl                           ; 02:BCAA - 23
   push   hl                           ; 02:BCAB - E5
   call   UNK_03581                    ; 02:BCAC - CD 81 35
   pop    hl                           ; 02:BCAF - E1
   ld     a, (hl)                      ; 02:BCB0 - 7E
   inc    hl                           ; 02:BCB1 - 23
   push   hl                           ; 02:BCB2 - E5
   ld     hl, (var_D212)               ; 02:BCB3 - 2A 12 D2
   push   hl                           ; 02:BCB6 - E5
   ld     de, $0008                    ; 02:BCB7 - 11 08 00
   add    hl, de                       ; 02:BCBA - 19
   ld     (var_D212), hl               ; 02:BCBB - 22 12 D2
   call   UNK_03581                    ; 02:BCBE - CD 81 35
   pop    hl                           ; 02:BCC1 - E1
   ld     (var_D212), hl               ; 02:BCC2 - 22 12 D2
   pop    hl                           ; 02:BCC5 - E1
   ret                                 ; 02:BCC6 - C9

UNK_0BCC7:
.db $36, $38, $56, $58, $36, $38, $56, $58, $36, $38, $56, $58, $36, $38, $56, $58  ; 02:BCC7
.db $36, $38, $56, $58, $36, $38                                                    ; 02:BCD7

UNK_0BCDD:
.db $40, $42                                                                        ; 02:BCDD

objfunc_47_UNKNOWN:
   set    5, (ix+24)                   ; 02:BCDF - DD CB 18 EE
   set    5, (iy+var_D208-IYBASE)      ; 02:BCE3 - FD CB 08 EE
   ld     hl, $0202                    ; 02:BCE7 - 21 02 02
   ld     (var_D214), hl               ; 02:BCEA - 22 14 D2
   call   UNK_03956                    ; 02:BCED - CD 56 39
   jr     c, addr_0BCFC                ; 02:BCF0 - 38 0A
   bit    0, (iy+var_D205-IYBASE)      ; 02:BCF2 - FD CB 05 46
   call   z, addr_035FD                ; 02:BCF6 - CC FD 35
   jp     addr_0BDBE                   ; 02:BCF9 - C3 BE BD

addr_0BCFC:
   ld     a, (ix+17)                   ; 02:BCFC - DD 7E 11
   cp     $C8                          ; 02:BCFF - FE C8
   jp     c, addr_0BDAD                ; 02:BD01 - DA AD BD
   ld     e, (ix+2)                    ; 02:BD04 - DD 5E 02
   ld     d, (ix+3)                    ; 02:BD07 - DD 56 03
   ld     hl, (var_D25A)               ; 02:BD0A - 2A 5A D2
   ld     bc, $FFF4                    ; 02:BD0D - 01 F4 FF
   add    hl, bc                       ; 02:BD10 - 09
   and    a                            ; 02:BD11 - A7
   sbc    hl, de                       ; 02:BD12 - ED 52
   jp     nc, addr_0BDBE               ; 02:BD14 - D2 BE BD
   ld     hl, (var_D25A)               ; 02:BD17 - 2A 5A D2
   inc    h                            ; 02:BD1A - 24
   and    a                            ; 02:BD1B - A7
   sbc    hl, de                       ; 02:BD1C - ED 52
   jp     c, addr_0BDBE                ; 02:BD1E - DA BE BD
   ld     hl, (sonic_x)                ; 02:BD21 - 2A FE D3
   and    a                            ; 02:BD24 - A7
   sbc    hl, de                       ; 02:BD25 - ED 52
   ld     l, (ix+7)                    ; 02:BD27 - DD 6E 07
   ld     h, (ix+8)                    ; 02:BD2A - DD 66 08
   ld     a, (ix+9)                    ; 02:BD2D - DD 7E 09
   jr     nc, addr_0BD40               ; 02:BD30 - 30 0E
   ld     c, $FF                       ; 02:BD32 - 0E FF
   ld     de, $FFF4                    ; 02:BD34 - 11 F4 FF
   bit    7, a                         ; 02:BD37 - CB 7F
   jr     nz, addr_0BD4C               ; 02:BD39 - 20 11
   ld     de, $FFE8                    ; 02:BD3B - 11 E8 FF
   jr     addr_0BD4C                   ; 02:BD3E - 18 0C

addr_0BD40:
   ld     c, $00                       ; 02:BD40 - 0E 00
   ld     de, $000C                    ; 02:BD42 - 11 0C 00
   bit    7, a                         ; 02:BD45 - CB 7F
   jr     z, addr_0BD4C                ; 02:BD47 - 28 03
   ld     de, $0018                    ; 02:BD49 - 11 18 00

addr_0BD4C:
   add    hl, de                       ; 02:BD4C - 19
   adc    a, c                         ; 02:BD4D - 89
   ld     (ix+7), l                    ; 02:BD4E - DD 75 07
   ld     (ix+8), h                    ; 02:BD51 - DD 74 08
   ld     (ix+9), a                    ; 02:BD54 - DD 77 09
   ld     e, (ix+5)                    ; 02:BD57 - DD 5E 05
   ld     d, (ix+6)                    ; 02:BD5A - DD 56 06
   ld     hl, (var_D25D)               ; 02:BD5D - 2A 5D D2
   ld     bc, $FFF4                    ; 02:BD60 - 01 F4 FF
   add    hl, bc                       ; 02:BD63 - 09
   and    a                            ; 02:BD64 - A7
   sbc    hl, de                       ; 02:BD65 - ED 52
   jr     nc, addr_0BDBE               ; 02:BD67 - 30 55
   ld     hl, (var_D25D)               ; 02:BD69 - 2A 5D D2
   ld     bc, $00C0                    ; 02:BD6C - 01 C0 00
   add    hl, de                       ; 02:BD6F - 19
   and    a                            ; 02:BD70 - A7
   sbc    hl, de                       ; 02:BD71 - ED 52
   jr     c, addr_0BDBE                ; 02:BD73 - 38 49
   ld     hl, (sonic_y)                ; 02:BD75 - 2A 01 D4
   and    a                            ; 02:BD78 - A7
   sbc    hl, de                       ; 02:BD79 - ED 52
   ld     l, (ix+10)                   ; 02:BD7B - DD 6E 0A
   ld     h, (ix+11)                   ; 02:BD7E - DD 66 0B
   ld     a, (ix+12)                   ; 02:BD81 - DD 7E 0C
   jr     nc, addr_0BD94               ; 02:BD84 - 30 0E
   ld     c, $FF                       ; 02:BD86 - 0E FF
   ld     de, $FFF6                    ; 02:BD88 - 11 F6 FF
   bit    7, a                         ; 02:BD8B - CB 7F
   jr     nz, addr_0BDA0               ; 02:BD8D - 20 11
   ld     de, $FFFB                    ; 02:BD8F - 11 FB FF
   jr     addr_0BDA0                   ; 02:BD92 - 18 0C

addr_0BD94:
   ld     de, $000A                    ; 02:BD94 - 11 0A 00
   ld     c, $00                       ; 02:BD97 - 0E 00
   bit    7, a                         ; 02:BD99 - CB 7F
   jr     z, addr_0BDA0                ; 02:BD9B - 28 03
   ld     de, $0005                    ; 02:BD9D - 11 05 00

addr_0BDA0:
   add    hl, de                       ; 02:BDA0 - 19
   adc    a, c                         ; 02:BDA1 - 89
   ld     (ix+10), l                   ; 02:BDA2 - DD 75 0A
   ld     (ix+11), h                   ; 02:BDA5 - DD 74 0B
   ld     (ix+12), a                   ; 02:BDA8 - DD 77 0C
   jr     addr_0BDB0                   ; 02:BDAB - 18 03

addr_0BDAD:
   inc    (ix+17)                      ; 02:BDAD - DD 34 11

addr_0BDB0:
   ld     bc, UNK_0BDC7                ; 02:BDB0 - 01 C7 BD
   ld     de, UNK_0BDCE                ; 02:BDB3 - 11 CE BD
   call   addr_07C41                   ; 02:BDB6 - CD 41 7C
   bit    4, (iy+var_D208-IYBASE)      ; 02:BDB9 - FD CB 08 66
   ret    nz                           ; 02:BDBD - C0

addr_0BDBE:
   ld     (ix+0), $FF                  ; 02:BDBE - DD 36 00 FF
   res    5, (iy+var_D208-IYBASE)      ; 02:BDC2 - FD CB 08 AE
   ret                                 ; 02:BDC6 - C9

UNK_0BDC7:
.db $00, $01, $01, $01, $02, $01, $FF                                               ; 02:BDC7

UNK_0BDCE:
.db $44, $46, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF  ; 02:BDCE
.db $FF, $FF, $48, $08, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF  ; 02:BDDE
.db $FF, $FF, $FF, $FF, $60, $62, $FF, $FF, $FF, $FF, $FF                           ; 02:BDEE

objfunc_53_UNKNOWN:
   set    5, (ix+24)                   ; 02:BDF9 - DD CB 18 EE
   ld     (iy+g_inputs_player_1-IYBASE), $FF  ; 02:BDFD - FD 36 03 FF
   bit    1, (ix+24)                   ; 02:BE01 - DD CB 18 4E
   jr     nz, addr_0BE26               ; 02:BE05 - 20 1F
   ld     hl, PAL2_boss                ; 02:BE07 - 21 1C 73
   ld     a, $02                       ; 02:BE0A - 3E 02
   call   signal_load_palettes         ; 02:BE0C - CD 33 03
   ld     a, $FF                       ; 02:BE0F - 3E FF
   ld     (object_list), a             ; 02:BE11 - 32 FC D3
   ld     hl, $0000                    ; 02:BE14 - 21 00 00
   ld     (sonic_y), hl                ; 02:BE17 - 22 01 D4
   ld     (ix+18), $FF                 ; 02:BE1A - DD 36 12 FF
   set    6, (iy+var_D207-IYBASE)      ; 02:BE1E - FD CB 07 F6
   set    1, (ix+24)                   ; 02:BE22 - DD CB 18 CE

addr_0BE26:
   ld     a, (var_D223)                ; 02:BE26 - 3A 23 D2
   rrca                                ; 02:BE29 - 0F
   jr     c, addr_0BE5C                ; 02:BE2A - 38 30
   ld     a, (ix+18)                   ; 02:BE2C - DD 7E 12
   and    a                            ; 02:BE2F - A7
   jr     z, addr_0BE5C                ; 02:BE30 - 28 2A
   dec    (ix+18)                      ; 02:BE32 - DD 35 12
   jr     nz, addr_0BE5C               ; 02:BE35 - 20 25
   ld     l, (ix+2)                    ; 02:BE37 - DD 6E 02
   ld     h, (ix+3)                    ; 02:BE3A - DD 66 03
   ld     de, $003C                    ; 02:BE3D - 11 3C 00
   add    hl, de                       ; 02:BE40 - 19
   ld     (sonic_x), hl                ; 02:BE41 - 22 FE D3
   ld     l, (ix+5)                    ; 02:BE44 - DD 6E 05
   ld     h, (ix+6)                    ; 02:BE47 - DD 66 06
   ld     de, $FFC0                    ; 02:BE4A - 11 C0 FF
   add    hl, de                       ; 02:BE4D - 19
   ld     (sonic_y), hl                ; 02:BE4E - 22 01 D4
   xor    a                            ; 02:BE51 - AF
   ld     (object_list), a             ; 02:BE52 - 32 FC D3
   set    6, (iy+var_D208-IYBASE)      ; 02:BE55 - FD CB 08 F6
   ld     a, $06                       ; 02:BE59 - 3E 06
   rst    $28                          ; 02:BE5B - EF

addr_0BE5C:
   ld     (ix+13), $20                 ; 02:BE5C - DD 36 0D 20
   ld     (ix+14), $1C                 ; 02:BE60 - DD 36 0E 1C
   xor    a                            ; 02:BE64 - AF
   ld     (ix+7), a                    ; 02:BE65 - DD 77 07
   ld     (ix+8), $01                  ; 02:BE68 - DD 36 08 01
   ld     (ix+9), a                    ; 02:BE6C - DD 77 09
   ld     (ix+10), a                   ; 02:BE6F - DD 77 0A
   ld     (ix+11), a                   ; 02:BE72 - DD 77 0B
   ld     (ix+12), a                   ; 02:BE75 - DD 77 0C
   bit    6, (iy+var_D207-IYBASE)      ; 02:BE78 - FD CB 07 76
   jr     z, addr_0BE96                ; 02:BE7C - 28 18
   ld     de, (var_D25A)               ; 02:BE7E - ED 5B 5A D2
   ld     hl, $0040                    ; 02:BE82 - 21 40 00
   add    hl, de                       ; 02:BE85 - 19
   ld     c, (ix+2)                    ; 02:BE86 - DD 4E 02
   ld     b, (ix+3)                    ; 02:BE89 - DD 46 03
   and    a                            ; 02:BE8C - A7
   sbc    hl, bc                       ; 02:BE8D - ED 42
   jr     nc, addr_0BE96               ; 02:BE8F - 30 05
   inc    de                           ; 02:BE91 - 13
   ld     (var_D25A), de               ; 02:BE92 - ED 53 5A D2

addr_0BE96:
   ld     (ix+15), UNK_0BF21&$FF       ; 02:BE96 - DD 36 0F 21
   ld     (ix+16), UNK_0BF21>>8        ; 02:BE9A - DD 36 10 BF
   bit    0, (ix+24)                   ; 02:BE9E - DD CB 18 46
   jr     nz, addr_0BED7               ; 02:BEA2 - 20 33
   ld     hl, $1008                    ; 02:BEA4 - 21 08 10
   ld     (var_D214), hl               ; 02:BEA7 - 22 14 D2
   call   UNK_03956                    ; 02:BEAA - CD 56 39
   jr     c, addr_0BED7                ; 02:BEAD - 38 28
   ld     de, $0001                    ; 02:BEAF - 11 01 00
   ld     hl, (sonic_vel_y_sub)        ; 02:BEB2 - 2A 06 D4
   ld     a, l                         ; 02:BEB5 - 7D
   cpl                                 ; 02:BEB6 - 2F
   ld     l, a                         ; 02:BEB7 - 6F
   ld     a, h                         ; 02:BEB8 - 7C
   cpl                                 ; 02:BEB9 - 2F
   ld     h, a                         ; 02:BEBA - 67
   ld     a, (sonic_vel_y_hi)          ; 02:BEBB - 3A 08 D4
   cpl                                 ; 02:BEBE - 2F
   add    hl, de                       ; 02:BEBF - 19
   adc    a, $00                       ; 02:BEC0 - CE 00
   ld     (sonic_vel_y_sub), hl        ; 02:BEC2 - 22 06 D4
   ld     (sonic_vel_y_hi), a          ; 02:BEC5 - 32 08 D4
   res    6, (iy+var_D207-IYBASE)      ; 02:BEC8 - FD CB 07 B6
   set    0, (ix+24)                   ; 02:BECC - DD CB 18 C6
   ld     (ix+17), $01                 ; 02:BED0 - DD 36 11 01
   ld     a, $01                       ; 02:BED4 - 3E 01
   rst    $28                          ; 02:BED6 - EF

addr_0BED7:
   call   addr_079FA                   ; 02:BED7 - CD FA 79
   bit    0, (ix+24)                   ; 02:BEDA - DD CB 18 46
   ret    z                            ; 02:BEDE - C8
   xor    a                            ; 02:BEDF - AF
   ld     (ix+10), $40                 ; 02:BEE0 - DD 36 0A 40
   ld     (ix+11), a                   ; 02:BEE4 - DD 77 0B
   ld     (ix+12), a                   ; 02:BEE7 - DD 77 0C
   ld     (ix+15), UNK_0BF33&$FF       ; 02:BEEA - DD 36 0F 33
   ld     (ix+16), UNK_0BF33>>8        ; 02:BEEE - DD 36 10 BF
   dec    (ix+17)                      ; 02:BEF2 - DD 35 11
   ret    nz                           ; 02:BEF5 - C0
   call   addr_07A3A                   ; 02:BEF6 - CD 3A 7A
   ld     (ix+17), $18                 ; 02:BEF9 - DD 36 11 18
   inc    (ix+19)                      ; 02:BEFD - DD 34 13
   ld     a, (ix+19)                   ; 02:BF00 - DD 7E 13
   cp     $0A                          ; 02:BF03 - FE 0A
   ret    c                            ; 02:BF05 - D8
   .IF !cht_force_good_ending
   ld     a, (var_D27F)                ; 02:BF06 - 3A 7F D2
   cp     $06                          ; 02:BF09 - FE 06
   jr     c, addr_0BF12                ; 02:BF0B - 38 05
   .ENDIF
   set    7, (iy+var_D208-IYBASE)      ; 02:BF0D - FD CB 08 FE
   ret                                 ; 02:BF11 - C9

addr_0BF12:
   ld     a, (g_signpost_tickdown_counter)  ; 02:BF12 - 3A 89 D2
   and    a                            ; 02:BF15 - A7
   ret    nz                           ; 02:BF16 - C0
   ld     a, $20                       ; 02:BF17 - 3E 20
   ld     (g_signpost_tickdown_counter), a  ; 02:BF19 - 32 89 D2
   set    2, (iy+var_D20D-IYBASE)      ; 02:BF1C - FD CB 0D D6
   ret                                 ; 02:BF20 - C9

UNK_0BF21:
.db $2A, $2C, $2E, $30, $32, $FF, $4A, $4C, $4E, $50, $52, $FF, $6A, $6C, $6E, $70  ; 02:BF21
.db $72, $FF                                                                        ; 02:BF31

UNK_0BF33:
.db $2A, $34, $36, $38, $32, $FF, $4A, $4C, $4E, $50, $52, $FF, $6A, $6C, $6E, $70  ; 02:BF33
.db $72, $FF, $5C, $5E, $FF, $FF, $FF, $FF, $FF                                     ; 02:BF43

objfunc_54_UNKNOWN:
   set    5, (ix+24)                   ; 02:BF4C - DD CB 18 EE
   ld     hl, $5400                    ; 02:BF50 - 21 00 54
   call   UNK_00C1D                    ; 02:BF53 - CD 1D 0C
   bit    0, (ix+24)                   ; 02:BF56 - DD CB 18 46
   jr     nz, addr_0BF7E               ; 02:BF5A - 20 22
   xor    a                            ; 02:BF5C - AF
   ld     (ix+15), a                   ; 02:BF5D - DD 77 0F
   ld     (ix+16), a                   ; 02:BF60 - DD 77 10
   ld     (ix+7), a                    ; 02:BF63 - DD 77 07
   ld     (ix+8), a                    ; 02:BF66 - DD 77 08
   ld     (ix+9), a                    ; 02:BF69 - DD 77 09
   inc    (ix+17)                      ; 02:BF6C - DD 34 11
   ld     a, (ix+17)                   ; 02:BF6F - DD 7E 11
   cp     $50                          ; 02:BF72 - FE 50
   ret    c                            ; 02:BF74 - D8
   set    0, (ix+24)                   ; 02:BF75 - DD CB 18 C6
   ld     (ix+17), $64                 ; 02:BF79 - DD 36 11 64
   ret                                 ; 02:BF7D - C9

addr_0BF7E:
   ld     a, (ix+17)                   ; 02:BF7E - DD 7E 11
   and    a                            ; 02:BF81 - A7
   jr     z, addr_0BF89                ; 02:BF82 - 28 05
   dec    (ix+17)                      ; 02:BF84 - DD 35 11
   jr     addr_0BF95                   ; 02:BF87 - 18 0C

addr_0BF89:
   ld     (ix+10), $80                 ; 02:BF89 - DD 36 0A 80
   ld     (ix+11), $FF                 ; 02:BF8D - DD 36 0B FF
   ld     (ix+12), $FF                 ; 02:BF91 - DD 36 0C FF

addr_0BF95:
   ld     hl, UNK_0BFF1                ; 02:BF95 - 21 F1 BF
   ld     a, (var_D223)                ; 02:BF98 - 3A 23 D2
   rrca                                ; 02:BF9B - 0F
   jr     nc, addr_0BFD5               ; 02:BF9C - 30 37
   ld     a, (iy+g_sprite_count-IYBASE)  ; 02:BF9E - FD 7E 0A
   ld     hl, (var_D23C)               ; 02:BFA1 - 2A 3C D2
   push   af                           ; 02:BFA4 - F5
   push   hl                           ; 02:BFA5 - E5
   ld     hl, var_D000                 ; 02:BFA6 - 21 00 D0
   ld     (var_D23C), hl               ; 02:BFA9 - 22 3C D2
   ld     l, (ix+5)                    ; 02:BFAC - DD 6E 05
   ld     h, (ix+6)                    ; 02:BFAF - DD 66 06
   ld     de, (var_D25D)               ; 02:BFB2 - ED 5B 5D D2
   and    a                            ; 02:BFB6 - A7
   sbc    hl, de                       ; 02:BFB7 - ED 52
   ex     de, hl                       ; 02:BFB9 - EB
   ld     l, (ix+2)                    ; 02:BFBA - DD 6E 02
   ld     h, (ix+3)                    ; 02:BFBD - DD 66 03
   ld     bc, (var_D25A)               ; 02:BFC0 - ED 4B 5A D2
   and    a                            ; 02:BFC4 - A7
   sbc    hl, bc                       ; 02:BFC5 - ED 42
   ld     bc, UNK_0BFF1                ; 02:BFC7 - 01 F1 BF
   call   addr_0350F                   ; 02:BFCA - CD 0F 35
   pop    hl                           ; 02:BFCD - E1
   pop    af                           ; 02:BFCE - F1
   ld     (var_D23C), hl               ; 02:BFCF - 22 3C D2
   ld     (iy+g_sprite_count-IYBASE), a  ; 02:BFD2 - FD 77 0A

addr_0BFD5:
   ld     l, (ix+5)                    ; 02:BFD5 - DD 6E 05
   ld     h, (ix+6)                    ; 02:BFD8 - DD 66 06
   ld     de, $0020                    ; 02:BFDB - 11 20 00
   add    hl, de                       ; 02:BFDE - 19
   ld     de, (var_D25D)               ; 02:BFDF - ED 5B 5D D2
   and    a                            ; 02:BFE3 - A7
   sbc    hl, de                       ; 02:BFE4 - ED 52
   ret    nc                           ; 02:BFE6 - D0
   ld     a, $01                       ; 02:BFE7 - 3E 01
   ld     (g_signpost_tickdown_counter), a  ; 02:BFE9 - 32 89 D2
   set    2, (iy+var_D20D-IYBASE)      ; 02:BFEC - FD CB 0D D6
   ret                                 ; 02:BFF0 - C9

UNK_0BFF1:
.db $5C, $5E, $FF, $FF, $FF, $FF, $FF                                               ; 02:BFF1

.IF 0
BANK02_JUNK_END_BFF8:
.db $49, $43, $20, $54, $48, $45, $20, $48                                          ; 02:BFF8
.ENDIF
.ENDS

.SECTION "Bank03" SLOT 1 BANK $03 FORCE ORG $0000

; .dsb 7, 0 ; TEST: Force non-PI code to break. --GM

snddrv_update:
   jp     addr_03_423A                 ; 03:4000 - C3 3A 42

snddrv_UNK_4003:
   jp     addr_03_4018                 ; 03:4003 - C3 18 40

snddrv_stop:
   jp     addr_03_412D                 ; 03:4006 - C3 2D 41

snddrv_UNK_4009:
   jp     addr_03_41E5                 ; 03:4009 - C3 E5 41

snddrv_UNK_400C:
   jp     addr_03_4224                 ; 03:400C - C3 24 42

snddrv_UNK_400F:
   jp     addr_03_4171                 ; 03:400F - C3 71 41

snddrv_play_music:
   jp     addr_03_46EB                 ; 03:4012 - C3 EB 46

snddrv_play_sound:
   jp     addr_03_46FF                 ; 03:4015 - C3 FF 46

addr_03_4018:
   push   af                           ; 03:4018 - F5
   push   bc                           ; 03:4019 - C5
   push   de                           ; 03:401A - D5
   push   hl                           ; 03:401B - E5
   push   ix                           ; 03:401C - DD E5
   ld     c, l                         ; 03:401E - 4D
   ld     b, h                         ; 03:401F - 44
   ld     ix, var_DC1C                 ; 03:4020 - DD 21 1C DC
   ld     a, $05                       ; 03:4024 - 3E 05

addr_03_4026:
   ld     e, (hl)                      ; 03:4026 - 5E
   inc    hl                           ; 03:4027 - 23
   ld     d, (hl)                      ; 03:4028 - 56
   inc    hl                           ; 03:4029 - 23
   ex     de, hl                       ; 03:402A - EB
   add    hl, bc                       ; 03:402B - 09
   ld     (ix+0), l                    ; 03:402C - DD 75 00
   inc    ix                           ; 03:402F - DD 23
   ld     (ix+0), h                    ; 03:4031 - DD 74 00
   inc    ix                           ; 03:4034 - DD 23
   ex     de, hl                       ; 03:4036 - EB
   dec    a                            ; 03:4037 - 3D
   jp     nz, addr_03_4026             ; 03:4038 - C2 26 40
   ld     hl, UNK_03_4070              ; 03:403B - 21 70 40

addr_03_403E:
   ld     e, (hl)                      ; 03:403E - 5E
   inc    hl                           ; 03:403F - 23
   ld     d, (hl)                      ; 03:4040 - 56
   ld     a, d                         ; 03:4041 - 7A
   inc    a                            ; 03:4042 - 3C
   jr     z, addr_03_404D              ; 03:4043 - 28 08
   inc    hl                           ; 03:4045 - 23
   ldi                                 ; 03:4046 - ED A0
   ldi                                 ; 03:4048 - ED A0
   jp     addr_03_403E                 ; 03:404A - C3 3E 40

addr_03_404D:
   ld     hl, UNK_03_40D6              ; 03:404D - 21 D6 40

addr_03_4050:
   ld     e, (hl)                      ; 03:4050 - 5E
   inc    hl                           ; 03:4051 - 23
   ld     d, (hl)                      ; 03:4052 - 56
   ld     a, d                         ; 03:4053 - 7A
   inc    a                            ; 03:4054 - 3C
   jr     z, addr_03_405D              ; 03:4055 - 28 06
   inc    hl                           ; 03:4057 - 23
   ldi                                 ; 03:4058 - ED A0
   jp     addr_03_4050                 ; 03:405A - C3 50 40

addr_03_405D:
   pop    ix                           ; 03:405D - DD E1
   pop    hl                           ; 03:405F - E1
   pop    de                           ; 03:4060 - D1
   pop    bc                           ; 03:4061 - C1
   pop    af                           ; 03:4062 - F1
   ld     (var_DC4F), hl               ; 03:4063 - 22 4F DC
   ld     (var_DC7C), hl               ; 03:4066 - 22 7C DC
   ld     (var_DCA9), hl               ; 03:4069 - 22 A9 DC
   ld     (var_DCD6), hl               ; 03:406C - 22 D6 DC
   ret                                 ; 03:406F - C9

UNK_03_4070:
.db $48, $DC, $00, $00, $75, $DC, $00, $00, $A2, $DC, $00, $00, $CF, $DC, $00, $00  ; 03:4070
.db $46, $DC, $07, $DD, $73, $DC, $08, $DD, $A0, $DC, $09, $DD, $CD, $DC, $0A, $DD  ; 03:4080
.db $28, $DC, $01, $00, $55, $DC, $01, $00, $82, $DC, $01, $00, $AF, $DC, $01, $00  ; 03:4090
.db $3D, $DC, $00, $00, $42, $DC, $00, $00, $6A, $DC, $00, $00, $6F, $DC, $00, $00  ; 03:40A0
.db $97, $DC, $00, $00, $9C, $DC, $00, $00, $C4, $DC, $00, $00, $C9, $DC, $00, $00  ; 03:40B0
.db $2E, $DC, $00, $00, $5B, $DC, $00, $00, $88, $DC, $00, $00, $B5, $DC, $00, $00  ; 03:40C0
.db $0A, $DC, $01, $00, $FF, $FF                                                    ; 03:40D0

UNK_03_40D6:
.db $26, $DC, $80, $27, $DC, $90, $53, $DC, $A0, $54, $DC, $B0, $80, $DC, $C0, $81  ; 03:40D6
.db $DC, $D0, $AD, $DC, $E0, $AE, $DC, $F0, $4E, $DC, $02, $7B, $DC, $02, $A8, $DC  ; 03:40E6
.db $02, $D5, $DC, $02, $02, $DD, $00, $3A, $DC, $00, $67, $DC, $00, $94, $DC, $00  ; 03:40F6
.db $C1, $DC, $00, $3B, $DC, $00, $68, $DC, $00, $95, $DC, $00, $C2, $DC, $00, $51  ; 03:4106
.db $DC, $00, $7E, $DC, $01, $AB, $DC, $02, $D8, $DC, $03, $06, $DC, $00, $04, $DC  ; 03:4116
.db $00, $FF, $FF                                                                   ; 03:4126

psg_silence_outputs_str:
.db $9F, $BF, $DF, $FF                                                              ; 03:4129

addr_03_412D:
   push   af                           ; 03:412D - F5
   push   hl                           ; 03:412E - E5
   push   bc                           ; 03:412F - C5
   ld     a, (var_DC4E)                ; 03:4130 - 3A 4E DC
   and    $FD                          ; 03:4133 - E6 FD
   ld     (var_DC4E), a                ; 03:4135 - 32 4E DC
   ld     a, (var_DC7B)                ; 03:4138 - 3A 7B DC
   and    $FD                          ; 03:413B - E6 FD
   ld     (var_DC7B), a                ; 03:413D - 32 7B DC
   ld     a, (var_DCA8)                ; 03:4140 - 3A A8 DC
   and    $FD                          ; 03:4143 - E6 FD
   ld     (var_DCA8), a                ; 03:4145 - 32 A8 DC
   ld     a, (var_DCD5)                ; 03:4148 - 3A D5 DC
   and    $FD                          ; 03:414B - E6 FD
   ld     (var_DCD5), a                ; 03:414D - 32 D5 DC
   ld     a, (var_DD02)                ; 03:4150 - 3A 02 DD
   and    $FD                          ; 03:4153 - E6 FD
   ld     (var_DD02), a                ; 03:4155 - 32 02 DD
   xor    a                            ; 03:4158 - AF
   ld     (var_DC06), a                ; 03:4159 - 32 06 DC
   ld     b, $04                       ; 03:415C - 06 04
   ld     c, $7F                       ; 03:415E - 0E 7F
   ld     hl, psg_silence_outputs_str  ; 03:4160 - 21 29 41
   otir                                ; 03:4163 - ED B3
   ld     a, (var_DC04)                ; 03:4165 - 3A 04 DC
   and    $F7                          ; 03:4168 - E6 F7
   ld     (var_DC04), a                ; 03:416A - 32 04 DC
   pop    bc                           ; 03:416D - C1
   pop    hl                           ; 03:416E - E1
   pop    af                           ; 03:416F - F1
   ret                                 ; 03:4170 - C9

addr_03_4171:
   push   af                           ; 03:4171 - F5
   push   de                           ; 03:4172 - D5
   push   hl                           ; 03:4173 - E5
   ld     e, a                         ; 03:4174 - 5F
   ld     a, (var_DC06)                ; 03:4175 - 3A 06 DC
   and    a                            ; 03:4178 - A7
   jr     z, addr_03_417E              ; 03:4179 - 28 03
   cp     e                            ; 03:417B - BB
   jr     c, addr_03_41D9              ; 03:417C - 38 5B

addr_03_417E:
   ld     a, e                         ; 03:417E - 7B
   ld     (var_DC06), a                ; 03:417F - 32 06 DC
   ld     (var_DD03), hl               ; 03:4182 - 22 03 DD
   ld     a, (var_DCDB)                ; 03:4185 - 3A DB DC
   or     $0F                          ; 03:4188 - F6 0F
   out    ($7F), a                     ; 03:418A - D3 7F
   ld     a, (hl)                      ; 03:418C - 7E
   ld     (var_DC05), a                ; 03:418D - 32 05 DC
   inc    hl                           ; 03:4190 - 23
   ld     e, (hl)                      ; 03:4191 - 5E
   inc    hl                           ; 03:4192 - 23
   ld     d, (hl)                      ; 03:4193 - 56
   inc    hl                           ; 03:4194 - 23
   ld     (var_DD00), de               ; 03:4195 - ED 53 00 DD
   ld     e, (hl)                      ; 03:4199 - 5E
   inc    hl                           ; 03:419A - 23
   ld     d, (hl)                      ; 03:419B - 56
   inc    hl                           ; 03:419C - 23
   ld     (var_DC0E), de               ; 03:419D - ED 53 0E DC
   inc    hl                           ; 03:41A1 - 23
   ld     (var_DC24), hl               ; 03:41A2 - 22 24 DC
   ld     hl, UNK_03_41DD              ; 03:41A5 - 21 DD 41
   add    a, a                         ; 03:41A8 - 87
   ld     e, a                         ; 03:41A9 - 5F
   ld     d, $00                       ; 03:41AA - 16 00
   add    hl, de                       ; 03:41AC - 19
   ld     a, (hl)                      ; 03:41AD - 7E
   ld     (var_DCDA), a                ; 03:41AE - 32 DA DC
   inc    hl                           ; 03:41B1 - 23
   ld     a, (hl)                      ; 03:41B2 - 7E
   ld     (var_DCDB), a                ; 03:41B3 - 32 DB DC
   ld     hl, $0000                    ; 03:41B6 - 21 00 00
   ld     (var_DCFC), hl               ; 03:41B9 - 22 FC DC
   ld     (var_DCF1), hl               ; 03:41BC - 22 F1 DC
   ld     (var_DCF6), hl               ; 03:41BF - 22 F6 DC
   ld     (var_DCE2), hl               ; 03:41C2 - 22 E2 DC
   ld     a, $04                       ; 03:41C5 - 3E 04
   ld     (var_DD05), a                ; 03:41C7 - 32 05 DD
   inc    hl                           ; 03:41CA - 23
   ld     (var_DCDC), hl               ; 03:41CB - 22 DC DC
   ld     hl, var_DD0B                 ; 03:41CE - 21 0B DD
   ld     (var_DCFA), hl               ; 03:41D1 - 22 FA DC
   ld     a, $02                       ; 03:41D4 - 3E 02
   ld     (var_DD02), a                ; 03:41D6 - 32 02 DD

addr_03_41D9:
   pop    hl                           ; 03:41D9 - E1
   pop    de                           ; 03:41DA - D1
   pop    af                           ; 03:41DB - F1
   ret                                 ; 03:41DC - C9

UNK_03_41DD:
.db $80, $90, $A0, $B0, $C0, $D0, $E0, $F0                                          ; 03:41DD

addr_03_41E5:
   push   af                           ; 03:41E5 - F5
   ld     a, (var_DC4E)                ; 03:41E6 - 3A 4E DC
   or     $02                          ; 03:41E9 - F6 02
   ld     (var_DC4E), a                ; 03:41EB - 32 4E DC
   ld     a, (var_DC7B)                ; 03:41EE - 3A 7B DC
   or     $02                          ; 03:41F1 - F6 02
   ld     (var_DC7B), a                ; 03:41F3 - 32 7B DC
   ld     a, (var_DCA8)                ; 03:41F6 - 3A A8 DC
   or     $02                          ; 03:41F9 - F6 02
   ld     (var_DCA8), a                ; 03:41FB - 32 A8 DC
   ld     a, (var_DCD5)                ; 03:41FE - 3A D5 DC
   or     $02                          ; 03:4201 - F6 02
   ld     (var_DCD5), a                ; 03:4203 - 32 D5 DC
   ld     a, (var_DC52)                ; 03:4206 - 3A 52 DC
   ld     (var_DC2B), a                ; 03:4209 - 32 2B DC
   ld     a, (var_DC7F)                ; 03:420C - 3A 7F DC
   ld     (var_DC58), a                ; 03:420F - 32 58 DC
   ld     a, (var_DCAC)                ; 03:4212 - 3A AC DC
   ld     (var_DC85), a                ; 03:4215 - 32 85 DC
   ld     a, (var_DCD9)                ; 03:4218 - 3A D9 DC
   ld     (var_DCB2), a                ; 03:421B - 32 B2 DC
   xor    a                            ; 03:421E - AF
   ld     (var_DC04), a                ; 03:421F - 32 04 DC
   pop    af                           ; 03:4222 - F1
   ret                                 ; 03:4223 - C9

addr_03_4224:
   push   af                           ; 03:4224 - F5
   push   hl                           ; 03:4225 - E5
   ld     (var_DC12), hl               ; 03:4226 - 22 12 DC
   ld     a, (var_DC04)                ; 03:4229 - 3A 04 DC
   or     $08                          ; 03:422C - F6 08
   ld     (var_DC04), a                ; 03:422E - 32 04 DC
   ld     hl, $1000                    ; 03:4231 - 21 00 10
   ld     (var_DC10), hl               ; 03:4234 - 22 10 DC
   pop    hl                           ; 03:4237 - E1
   pop    af                           ; 03:4238 - F1
   ret                                 ; 03:4239 - C9

addr_03_423A:
   ld     ix, var_DC26                 ; 03:423A - DD 21 26 DC
   ld     de, (var_DC1C)               ; 03:423E - ED 5B 1C DC
   ld     bc, (var_DC0A)               ; 03:4242 - ED 4B 0A DC
   call   addr_03_42F4                 ; 03:4246 - CD F4 42
   ld     (var_DC14), ix               ; 03:4249 - DD 22 14 DC
   ld     (var_DC1C), de               ; 03:424D - ED 53 1C DC
   ld     ix, var_DC53                 ; 03:4251 - DD 21 53 DC
   ld     de, (var_DC1E)               ; 03:4255 - ED 5B 1E DC
   ld     bc, (var_DC0A)               ; 03:4259 - ED 4B 0A DC
   call   addr_03_42F4                 ; 03:425D - CD F4 42
   ld     (var_DC16), ix               ; 03:4260 - DD 22 16 DC
   ld     (var_DC1E), de               ; 03:4264 - ED 53 1E DC
   ld     ix, var_DC80                 ; 03:4268 - DD 21 80 DC
   ld     de, (var_DC20)               ; 03:426C - ED 5B 20 DC
   ld     bc, (var_DC0A)               ; 03:4270 - ED 4B 0A DC
   call   addr_03_42F4                 ; 03:4274 - CD F4 42
   ld     (var_DC18), ix               ; 03:4277 - DD 22 18 DC
   ld     (var_DC20), de               ; 03:427B - ED 53 20 DC
   ld     ix, var_DCAD                 ; 03:427F - DD 21 AD DC
   ld     de, (var_DC22)               ; 03:4283 - ED 5B 22 DC
   ld     bc, (var_DC0A)               ; 03:4287 - ED 4B 0A DC
   call   addr_03_42F4                 ; 03:428B - CD F4 42
   ld     (var_DC1A), ix               ; 03:428E - DD 22 1A DC
   ld     (var_DC22), de               ; 03:4292 - ED 53 22 DC
   ld     ix, var_DCDA                 ; 03:4296 - DD 21 DA DC
   ld     de, (var_DC24)               ; 03:429A - ED 5B 24 DC
   ld     bc, (var_DC0E)               ; 03:429E - ED 4B 0E DC
   call   addr_03_42F4                 ; 03:42A2 - CD F4 42
   ld     (var_DC24), de               ; 03:42A5 - ED 53 24 DC
   bit    1, (ix+40)                   ; 03:42A9 - DD CB 28 4E
   jr     z, addr_03_42BF              ; 03:42AD - 28 10
   ld     hl, var_DC14                 ; 03:42AF - 21 14 DC
   ld     a, (var_DC05)                ; 03:42B2 - 3A 05 DC
   add    a, a                         ; 03:42B5 - 87
   ld     c, a                         ; 03:42B6 - 4F
   ld     b, $00                       ; 03:42B7 - 06 00
   add    hl, bc                       ; 03:42B9 - 09
   ld     (hl), $DA                    ; 03:42BA - 36 DA
   inc    hl                           ; 03:42BC - 23
   ld     (hl), $DC                    ; 03:42BD - 36 DC

addr_03_42BF:
   ld     ix, (var_DC14)               ; 03:42BF - DD 2A 14 DC
   call   addr_03_43DE                 ; 03:42C3 - CD DE 43
   ld     ix, (var_DC16)               ; 03:42C6 - DD 2A 16 DC
   call   addr_03_43DE                 ; 03:42CA - CD DE 43
   ld     ix, (var_DC18)               ; 03:42CD - DD 2A 18 DC
   call   addr_03_43DE                 ; 03:42D1 - CD DE 43
   ld     ix, (var_DC1A)               ; 03:42D4 - DD 2A 1A DC
   call   addr_03_43DE                 ; 03:42D8 - CD DE 43
   ld     a, (var_DC04)                ; 03:42DB - 3A 04 DC
   and    $08                          ; 03:42DE - E6 08
   ret    z                            ; 03:42E0 - C8
   ld     hl, (var_DC10)               ; 03:42E1 - 2A 10 DC
   ld     bc, (var_DC12)               ; 03:42E4 - ED 4B 12 DC
   and    a                            ; 03:42E8 - A7
   sbc    hl, bc                       ; 03:42E9 - ED 42
   jr     nc, addr_03_42F0             ; 03:42EB - 30 03
   call   addr_03_412D                 ; 03:42ED - CD 2D 41

addr_03_42F0:
   ld     (var_DC10), hl               ; 03:42F0 - 22 10 DC
   ret                                 ; 03:42F3 - C9

addr_03_42F4:
   bit    1, (ix+40)                   ; 03:42F4 - DD CB 28 4E
   ret    z                            ; 03:42F8 - C8
   ld     l, (ix+2)                    ; 03:42F9 - DD 6E 02
   ld     h, (ix+3)                    ; 03:42FC - DD 66 03
   and    a                            ; 03:42FF - A7
   sbc    hl, bc                       ; 03:4300 - ED 42
   ld     (ix+2), l                    ; 03:4302 - DD 75 02
   ld     (ix+3), h                    ; 03:4305 - DD 74 03
   jr     z, addr_03_430D              ; 03:4308 - 28 03
   jp     nc, addr_03_43C9             ; 03:430A - D2 C9 43

addr_03_430D:
   ld     a, (de)                      ; 03:430D - 1A
   and    a                            ; 03:430E - A7
   jp     m, addr_03_44F3              ; 03:430F - FA F3 44
   cp     $70                          ; 03:4312 - FE 70
   jr     c, addr_03_434B              ; 03:4314 - 38 35
   cp     $7F                          ; 03:4316 - FE 7F
   jr     nz, addr_03_4321             ; 03:4318 - 20 07
   ld     (ix+30), $00                 ; 03:431A - DD 36 1E 00
   jp     addr_03_439F                 ; 03:431E - C3 9F 43

addr_03_4321:
   push   de                           ; 03:4321 - D5
   push   ix                           ; 03:4322 - DD E5
   pop    hl                           ; 03:4324 - E1
   ld     bc, $000E                    ; 03:4325 - 01 0E 00
   add    hl, bc                       ; 03:4328 - 09
   ex     de, hl                       ; 03:4329 - EB
   and    $0F                          ; 03:432A - E6 0F
   ld     l, a                         ; 03:432C - 6F
   ld     h, $00                       ; 03:432D - 26 00
   add    hl, hl                       ; 03:432F - 29
   add    hl, hl                       ; 03:4330 - 29
   add    hl, hl                       ; 03:4331 - 29
   ld     bc, UNK_03_43CE              ; 03:4332 - 01 CE 43
   add    hl, bc                       ; 03:4335 - 09
   ld     a, (hl)                      ; 03:4336 - 7E
   ld     (ix+37), a                   ; 03:4337 - DD 77 25
   inc    hl                           ; 03:433A - 23
   ldi                                 ; 03:433B - ED A0
   ldi                                 ; 03:433D - ED A0
   ldi                                 ; 03:433F - ED A0
   ldi                                 ; 03:4341 - ED A0
   ldi                                 ; 03:4343 - ED A0
   ldi                                 ; 03:4345 - ED A0
   pop    de                           ; 03:4347 - D1
   jp     addr_03_436E                 ; 03:4348 - C3 6E 43

addr_03_434B:
   and    $0F                          ; 03:434B - E6 0F
   ld     hl, psg_note_periods         ; 03:434D - 21 D5 44
   add    a, a                         ; 03:4350 - 87
   ld     c, a                         ; 03:4351 - 4F
   ld     b, $00                       ; 03:4352 - 06 00
   add    hl, bc                       ; 03:4354 - 09
   ld     a, (hl)                      ; 03:4355 - 7E
   ld     (ix+6), a                    ; 03:4356 - DD 77 06
   inc    hl                           ; 03:4359 - 23
   ld     a, (hl)                      ; 03:435A - 7E
   ld     (ix+7), a                    ; 03:435B - DD 77 07
   ld     a, (de)                      ; 03:435E - 1A
   rrca                                ; 03:435F - 0F
   rrca                                ; 03:4360 - 0F
   rrca                                ; 03:4361 - 0F
   rrca                                ; 03:4362 - 0F
   and    $0F                          ; 03:4363 - E6 0F
   ld     (ix+31), a                   ; 03:4365 - DD 77 1F
   bit    0, (ix+40)                   ; 03:4368 - DD CB 28 46
   jr     nz, addr_03_439F             ; 03:436C - 20 31

addr_03_436E:
   ld     a, (ix+20)                   ; 03:436E - DD 7E 14
   ld     (ix+25), a                   ; 03:4371 - DD 77 19
   ld     a, (ix+21)                   ; 03:4374 - DD 7E 15
   ld     (ix+26), a                   ; 03:4377 - DD 77 1A
   ld     a, (ix+22)                   ; 03:437A - DD 7E 16
   srl    a                            ; 03:437D - CB 3F
   ld     (ix+27), a                   ; 03:437F - DD 77 1B
   ld     a, (ix+23)                   ; 03:4382 - DD 7E 17
   ld     (ix+28), a                   ; 03:4385 - DD 77 1C
   ld     a, (ix+24)                   ; 03:4388 - DD 7E 18
   ld     (ix+29), a                   ; 03:438B - DD 77 1D
   xor    a                            ; 03:438E - AF
   ld     (ix+10), a                   ; 03:438F - DD 77 0A
   ld     (ix+11), a                   ; 03:4392 - DD 77 0B
   ld     (ix+13), a                   ; 03:4395 - DD 77 0D
   ld     (ix+12), a                   ; 03:4398 - DD 77 0C
   ld     (ix+30), $0F                 ; 03:439B - DD 36 1E 0F

addr_03_439F:
   inc    de                           ; 03:439F - 13
   ld     a, (de)                      ; 03:43A0 - 1A
   inc    de                           ; 03:43A1 - 13
   and    a                            ; 03:43A2 - A7
   jr     nz, addr_03_43A8             ; 03:43A3 - 20 03
   ld     a, (ix+36)                   ; 03:43A5 - DD 7E 24

addr_03_43A8:
   push   de                           ; 03:43A8 - D5
   ld     c, a                         ; 03:43A9 - 4F
   ld     l, (ix+38)                   ; 03:43AA - DD 6E 26
   ld     h, (ix+39)                   ; 03:43AD - DD 66 27
   ld     a, l                         ; 03:43B0 - 7D
   or     h                            ; 03:43B1 - B4
   jr     nz, addr_03_43B7             ; 03:43B2 - 20 03
   ld     hl, (var_DC08)               ; 03:43B4 - 2A 08 DC

addr_03_43B7:
   call   addr_03_46D8                 ; 03:43B7 - CD D8 46
   pop    de                           ; 03:43BA - D1
   ld     a, l                         ; 03:43BB - 7D
   add    a, (ix+2)                    ; 03:43BC - DD 86 02
   ld     (ix+2), a                    ; 03:43BF - DD 77 02
   ld     a, h                         ; 03:43C2 - 7C
   adc    a, (ix+3)                    ; 03:43C3 - DD 8E 03
   ld     (ix+3), a                    ; 03:43C6 - DD 77 03

addr_03_43C9:
   res    0, (ix+40)                   ; 03:43C9 - DD CB 28 86
   ret                                 ; 03:43CD - C9

UNK_03_43CE:
.db $05, $FF, $BE, $0A, $04, $05, $02, $00, $05, $E6, $24, $5A, $14, $28, $08, $00  ; 03:43CE

addr_03_43DE:
   bit    1, (ix+40)                   ; 03:43DE - DD CB 28 4E
   ret    z                            ; 03:43E2 - C8
   ld     a, (ix+13)                   ; 03:43E3 - DD 7E 0D
   and    a                            ; 03:43E6 - A7
   jp     z, addr_03_4545              ; 03:43E7 - CA 45 45
   dec    a                            ; 03:43EA - 3D
   jp     z, addr_03_455C              ; 03:43EB - CA 5C 45
   dec    a                            ; 03:43EE - 3D
   jp     z, addr_03_4579              ; 03:43EF - CA 79 45
   dec    a                            ; 03:43F2 - 3D
   jp     z, addr_03_4597              ; 03:43F3 - CA 97 45

addr_03_43F6:
   ld     a, (ix+0)                    ; 03:43F6 - DD 7E 00
   cp     $E0                          ; 03:43F9 - FE E0
   jr     nz, addr_03_4412             ; 03:43FB - 20 15
   ld     c, (ix+37)                   ; 03:43FD - DD 4E 25
   ld     a, (var_DC07)                ; 03:4400 - 3A 07 DC
   cp     c                            ; 03:4403 - B9
   jp     z, addr_03_448F              ; 03:4404 - CA 8F 44
   ld     a, c                         ; 03:4407 - 79
   ld     (var_DC07), a                ; 03:4408 - 32 07 DC
   or     $E0                          ; 03:440B - F6 E0
   out    ($7F), a                     ; 03:440D - D3 7F
   jp     addr_03_448F                 ; 03:440F - C3 8F 44

addr_03_4412:
   ld     e, (ix+10)                   ; 03:4412 - DD 5E 0A
   ld     d, (ix+11)                   ; 03:4415 - DD 56 0B
   ld     a, (ix+25)                   ; 03:4418 - DD 7E 19
   and    a                            ; 03:441B - A7
   jr     z, addr_03_4424              ; 03:441C - 28 06
   dec    (ix+25)                      ; 03:441E - DD 35 19
   jp     addr_03_445A                 ; 03:4421 - C3 5A 44

addr_03_4424:
   dec    (ix+26)                      ; 03:4424 - DD 35 1A
   jp     nz, addr_03_445A             ; 03:4427 - C2 5A 44
   ld     a, (ix+21)                   ; 03:442A - DD 7E 15
   ld     (ix+26), a                   ; 03:442D - DD 77 1A
   ld     l, (ix+28)                   ; 03:4430 - DD 6E 1C
   ld     h, (ix+29)                   ; 03:4433 - DD 66 1D
   dec    (ix+27)                      ; 03:4436 - DD 35 1B
   jp     nz, addr_03_4452             ; 03:4439 - C2 52 44
   ld     a, (ix+22)                   ; 03:443C - DD 7E 16
   ld     (ix+27), a                   ; 03:443F - DD 77 1B
   ld     a, l                         ; 03:4442 - 7D
   cpl                                 ; 03:4443 - 2F
   ld     l, a                         ; 03:4444 - 6F
   ld     a, h                         ; 03:4445 - 7C
   cpl                                 ; 03:4446 - 2F
   ld     h, a                         ; 03:4447 - 67
   inc    hl                           ; 03:4448 - 23
   ld     (ix+28), l                   ; 03:4449 - DD 75 1C
   ld     (ix+29), h                   ; 03:444C - DD 74 1D
   jp     addr_03_445A                 ; 03:444F - C3 5A 44

addr_03_4452:
   add    hl, de                       ; 03:4452 - 19
   ld     (ix+10), l                   ; 03:4453 - DD 75 0A
   ld     (ix+11), h                   ; 03:4456 - DD 74 0B
   ex     de, hl                       ; 03:4459 - EB

addr_03_445A:
   ld     l, (ix+6)                    ; 03:445A - DD 6E 06
   ld     h, (ix+7)                    ; 03:445D - DD 66 07
   ld     c, (ix+8)                    ; 03:4460 - DD 4E 08
   ld     b, (ix+9)                    ; 03:4463 - DD 46 09
   add    hl, bc                       ; 03:4466 - 09
   add    hl, de                       ; 03:4467 - 19
   ld     a, (ix+31)                   ; 03:4468 - DD 7E 1F
   and    a                            ; 03:446B - A7
   jr     z, addr_03_4475              ; 03:446C - 28 07
   ld     b, a                         ; 03:446E - 47

addr_03_446F:
   srl    h                            ; 03:446F - CB 3C
   rr     l                            ; 03:4471 - CB 1D
   djnz   addr_03_446F                 ; 03:4473 - 10 FA

addr_03_4475:
   ld     a, l                         ; 03:4475 - 7D
   and    $0F                          ; 03:4476 - E6 0F
   or     (ix+0)                       ; 03:4478 - DD B6 00
   out    ($7F), a                     ; 03:447B - D3 7F
   ld     a, h                         ; 03:447D - 7C
   rlca                                ; 03:447E - 07
   rlca                                ; 03:447F - 07
   rlca                                ; 03:4480 - 07
   rlca                                ; 03:4481 - 07
   and    $F0                          ; 03:4482 - E6 F0
   ld     c, a                         ; 03:4484 - 4F
   ld     a, l                         ; 03:4485 - 7D
   rrca                                ; 03:4486 - 0F
   rrca                                ; 03:4487 - 0F
   rrca                                ; 03:4488 - 0F
   rrca                                ; 03:4489 - 0F
   and    $0F                          ; 03:448A - E6 0F
   or     c                            ; 03:448C - B1
   out    ($7F), a                     ; 03:448D - D3 7F

addr_03_448F:
   ld     a, (ix+5)                    ; 03:448F - DD 7E 05
   and    a                            ; 03:4492 - A7
   jr     z, addr_03_44A7              ; 03:4493 - 28 12
   ld     c, a                         ; 03:4495 - 4F
   ld     a, (ix+12)                   ; 03:4496 - DD 7E 0C
   and    a                            ; 03:4499 - A7
   jr     z, addr_03_44A7              ; 03:449A - 28 0B
   ld     l, a                         ; 03:449C - 6F
   ld     h, $00                       ; 03:449D - 26 00
   call   addr_03_46D8                 ; 03:449F - CD D8 46
   rl     l                            ; 03:44A2 - CB 15
   ld     a, $00                       ; 03:44A4 - 3E 00
   adc    a, h                         ; 03:44A6 - 8C

addr_03_44A7:
   and    (ix+30)                      ; 03:44A7 - DD A6 1E
   xor    $0F                          ; 03:44AA - EE 0F
   or     (ix+1)                       ; 03:44AC - DD B6 01
   out    ($7F), a                     ; 03:44AF - D3 7F
   ld     a, (var_DC04)                ; 03:44B1 - 3A 04 DC
   and    $08                          ; 03:44B4 - E6 08
   ret    z                            ; 03:44B6 - C8
   ld     a, (ix+43)                   ; 03:44B7 - DD 7E 2B
   cp     $04                          ; 03:44BA - FE 04
   ret    z                            ; 03:44BC - C8
   ld     l, (ix+4)                    ; 03:44BD - DD 6E 04
   ld     h, (ix+5)                    ; 03:44C0 - DD 66 05
   ld     bc, (var_DC12)               ; 03:44C3 - ED 4B 12 DC
   sbc    hl, bc                       ; 03:44C7 - ED 42
   jr     nc, addr_03_44CE             ; 03:44C9 - 30 03
   ld     hl, $0000                    ; 03:44CB - 21 00 00

addr_03_44CE:
   ld     (ix+4), l                    ; 03:44CE - DD 75 04
   ld     (ix+5), h                    ; 03:44D1 - DD 74 05
   ret                                 ; 03:44D4 - C9

psg_note_periods:
.dw $0356, $0326, $02F9, $02CE, $02A5, $0280, $025C, $023A                          ; 03:44D5
.dw $021A, $01FB, $01DF, $01C4, $03F7, $03BE, $0388                                 ; 03:44E5

addr_03_44F3:
   cp     $FF                          ; 03:44F3 - FE FF
   jp     z, addr_03_450B              ; 03:44F5 - CA 0B 45
   cp     $FE                          ; 03:44F8 - FE FE
   jp     z, addr_03_4519              ; 03:44FA - CA 19 45
   inc    de                           ; 03:44FD - 13
   ld     hl, CODEPTRLUT_03_4529       ; 03:44FE - 21 29 45
   add    a, a                         ; 03:4501 - 87
   ld     c, a                         ; 03:4502 - 4F
   ld     b, $00                       ; 03:4503 - 06 00
   add    hl, bc                       ; 03:4505 - 09
   ld     a, (hl)                      ; 03:4506 - 7E
   inc    hl                           ; 03:4507 - 23
   ld     h, (hl)                      ; 03:4508 - 66
   ld     l, a                         ; 03:4509 - 6F
   jp     (hl)                         ; 03:450A - E9

addr_03_450B:
   ld     l, (ix+34)                   ; 03:450B - DD 6E 22
   ld     h, (ix+35)                   ; 03:450E - DD 66 23
   ld     a, l                         ; 03:4511 - 7D
   or     h                            ; 03:4512 - B4
   jr     z, addr_03_451D              ; 03:4513 - 28 08
   ex     de, hl                       ; 03:4515 - EB
   jp     addr_03_430D                 ; 03:4516 - C3 0D 43

addr_03_4519:
   xor    a                            ; 03:4519 - AF
   ld     (var_DC06), a                ; 03:451A - 32 06 DC

addr_03_451D:
   res    1, (ix+40)                   ; 03:451D - DD CB 28 8E
   ld     a, $0F                       ; 03:4521 - 3E 0F
   or     (ix+1)                       ; 03:4523 - DD B6 01
   out    ($7F), a                     ; 03:4526 - D3 7F
   ret                                 ; 03:4528 - C9

CODEPTRLUT_03_4529:
.dw addr_03_45AE, addr_03_45D1, addr_03_45F2, addr_03_460A, addr_03_4620, addr_03_462D, addr_03_4632, addr_03_4647  ; 03:4529
.dw addr_03_467D, addr_03_4686, addr_03_468E, addr_03_4696, addr_03_46B4, addr_03_46D1  ; 03:4539

addr_03_4545:
   ld     a, (ix+14)                   ; 03:4545 - DD 7E 0E
   add    a, (ix+12)                   ; 03:4548 - DD 86 0C
   jp     nc, addr_03_4550             ; 03:454B - D2 50 45
   ld     a, $FF                       ; 03:454E - 3E FF

addr_03_4550:
   ld     (ix+12), a                   ; 03:4550 - DD 77 0C
   jp     nc, addr_03_43F6             ; 03:4553 - D2 F6 43
   inc    (ix+13)                      ; 03:4556 - DD 34 0D
   jp     addr_03_43F6                 ; 03:4559 - C3 F6 43

addr_03_455C:
   ld     c, (ix+16)                   ; 03:455C - DD 4E 10
   ld     a, (ix+12)                   ; 03:455F - DD 7E 0C
   sub    (ix+15)                      ; 03:4562 - DD 96 0F
   jr     c, addr_03_456D              ; 03:4565 - 38 06
   cp     (ix+16)                      ; 03:4567 - DD BE 10
   jr     c, addr_03_456D              ; 03:456A - 38 01
   ld     c, a                         ; 03:456C - 4F

addr_03_456D:
   ld     (ix+12), c                   ; 03:456D - DD 71 0C
   jp     nc, addr_03_43F6             ; 03:4570 - D2 F6 43
   inc    (ix+13)                      ; 03:4573 - DD 34 0D
   jp     addr_03_43F6                 ; 03:4576 - C3 F6 43

addr_03_4579:
   ld     c, (ix+18)                   ; 03:4579 - DD 4E 12
   ld     a, (ix+12)                   ; 03:457C - DD 7E 0C
   sub    (ix+17)                      ; 03:457F - DD 96 11
   jr     c, addr_03_458B              ; 03:4582 - 38 07
   cp     (ix+18)                      ; 03:4584 - DD BE 12
   jp     c, addr_03_458B              ; 03:4587 - DA 8B 45
   ld     c, a                         ; 03:458A - 4F

addr_03_458B:
   ld     (ix+12), c                   ; 03:458B - DD 71 0C
   jp     nc, addr_03_43F6             ; 03:458E - D2 F6 43
   inc    (ix+13)                      ; 03:4591 - DD 34 0D
   jp     addr_03_43F6                 ; 03:4594 - C3 F6 43

addr_03_4597:
   ld     a, (ix+12)                   ; 03:4597 - DD 7E 0C
   sub    (ix+19)                      ; 03:459A - DD 96 13
   jp     nc, addr_03_45A2             ; 03:459D - D2 A2 45
   ld     a, $00                       ; 03:45A0 - 3E 00

addr_03_45A2:
   ld     (ix+12), a                   ; 03:45A2 - DD 77 0C
   jp     nc, addr_03_43F6             ; 03:45A5 - D2 F6 43
   inc    (ix+13)                      ; 03:45A8 - DD 34 0D
   jp     addr_03_43F6                 ; 03:45AB - C3 F6 43

addr_03_45AE:
   ld     a, (de)                      ; 03:45AE - 1A
   ld     (ix+38), a                   ; 03:45AF - DD 77 26
   ld     (var_DC08), a                ; 03:45B2 - 32 08 DC
   inc    de                           ; 03:45B5 - 13
   ld     a, (de)                      ; 03:45B6 - 1A
   ld     (ix+39), a                   ; 03:45B7 - DD 77 27
   ld     (var_DC09), a                ; 03:45BA - 32 09 DC
   inc    de                           ; 03:45BD - 13
   ld     a, (de)                      ; 03:45BE - 1A
   ld     (var_DC0A), a                ; 03:45BF - 32 0A DC
   ld     (var_DC0C), a                ; 03:45C2 - 32 0C DC
   inc    de                           ; 03:45C5 - 13
   ld     a, (de)                      ; 03:45C6 - 1A
   ld     (var_DC0B), a                ; 03:45C7 - 32 0B DC
   ld     (var_DC0D), a                ; 03:45CA - 32 0D DC
   inc    de                           ; 03:45CD - 13
   jp     addr_03_430D                 ; 03:45CE - C3 0D 43

addr_03_45D1:
   ld     a, (de)                      ; 03:45D1 - 1A
   ld     (ix+44), a                   ; 03:45D2 - DD 77 2C
   inc    de                           ; 03:45D5 - 13
   ld     a, (ix+43)                   ; 03:45D6 - DD 7E 2B
   cp     $04                          ; 03:45D9 - FE 04
   jr     z, addr_03_45E5              ; 03:45DB - 28 08
   ld     a, (var_DC04)                ; 03:45DD - 3A 04 DC
   and    $08                          ; 03:45E0 - E6 08
   jp     nz, addr_03_430D             ; 03:45E2 - C2 0D 43

addr_03_45E5:
   ld     a, (ix+44)                   ; 03:45E5 - DD 7E 2C
   ld     (ix+5), a                    ; 03:45E8 - DD 77 05
   ld     (ix+4), $00                  ; 03:45EB - DD 36 04 00
   jp     addr_03_430D                 ; 03:45EF - C3 0D 43

addr_03_45F2:
   push   ix                           ; 03:45F2 - DD E5
   pop    hl                           ; 03:45F4 - E1
   ld     bc, $000E                    ; 03:45F5 - 01 0E 00
   add    hl, bc                       ; 03:45F8 - 09
   ex     de, hl                       ; 03:45F9 - EB
   ldi                                 ; 03:45FA - ED A0
   ldi                                 ; 03:45FC - ED A0
   ldi                                 ; 03:45FE - ED A0
   ldi                                 ; 03:4600 - ED A0
   ldi                                 ; 03:4602 - ED A0
   ldi                                 ; 03:4604 - ED A0
   ex     de, hl                       ; 03:4606 - EB
   jp     addr_03_430D                 ; 03:4607 - C3 0D 43

addr_03_460A:
   push   ix                           ; 03:460A - DD E5
   pop    hl                           ; 03:460C - E1
   ld     bc, $0014                    ; 03:460D - 01 14 00
   add    hl, bc                       ; 03:4610 - 09
   ex     de, hl                       ; 03:4611 - EB
   ldi                                 ; 03:4612 - ED A0
   ldi                                 ; 03:4614 - ED A0
   ldi                                 ; 03:4616 - ED A0
   ldi                                 ; 03:4618 - ED A0
   ldi                                 ; 03:461A - ED A0
   ex     de, hl                       ; 03:461C - EB
   jp     addr_03_430D                 ; 03:461D - C3 0D 43

addr_03_4620:
   ld     a, (de)                      ; 03:4620 - 1A
   ld     (ix+8), a                    ; 03:4621 - DD 77 08
   inc    de                           ; 03:4624 - 13
   ld     a, (de)                      ; 03:4625 - 1A
   ld     (ix+9), a                    ; 03:4626 - DD 77 09
   inc    de                           ; 03:4629 - 13
   jp     addr_03_430D                 ; 03:462A - C3 0D 43

addr_03_462D:
   ld     a, (de)                      ; 03:462D - 1A
   inc    de                           ; 03:462E - 13
   jp     addr_03_430D                 ; 03:462F - C3 0D 43

addr_03_4632:
   ld     l, (ix+32)                   ; 03:4632 - DD 6E 20
   ld     h, (ix+33)                   ; 03:4635 - DD 66 21
   ld     (hl), $00                    ; 03:4638 - 36 00
   ld     bc, $0005                    ; 03:463A - 01 05 00
   add    hl, bc                       ; 03:463D - 09
   ld     (ix+32), l                   ; 03:463E - DD 75 20
   ld     (ix+33), h                   ; 03:4641 - DD 74 21
   jp     addr_03_430D                 ; 03:4644 - C3 0D 43

addr_03_4647:
   ld     l, (ix+32)                   ; 03:4647 - DD 6E 20
   ld     h, (ix+33)                   ; 03:464A - DD 66 21
   ld     bc, $FFFB                    ; 03:464D - 01 FB FF
   add    hl, bc                       ; 03:4650 - 09
   ld     a, (hl)                      ; 03:4651 - 7E
   and    a                            ; 03:4652 - A7
   jr     nz, addr_03_465D             ; 03:4653 - 20 08
   ld     a, (de)                      ; 03:4655 - 1A
   dec    a                            ; 03:4656 - 3D
   jr     z, addr_03_4671              ; 03:4657 - 28 18
   ld     (hl), a                      ; 03:4659 - 77
   jp     addr_03_4660                 ; 03:465A - C3 60 46

addr_03_465D:
   dec    (hl)                         ; 03:465D - 35
   jr     z, addr_03_4671              ; 03:465E - 28 11

addr_03_4660:
   ex     de, hl                       ; 03:4660 - EB
   inc    hl                           ; 03:4661 - 23
   ld     a, (hl)                      ; 03:4662 - 7E
   inc    hl                           ; 03:4663 - 23
   ld     h, (hl)                      ; 03:4664 - 66
   ld     l, a                         ; 03:4665 - 6F
   ld     c, (ix+41)                   ; 03:4666 - DD 4E 29
   ld     b, (ix+42)                   ; 03:4669 - DD 46 2A
   add    hl, bc                       ; 03:466C - 09
   ex     de, hl                       ; 03:466D - EB
   jp     addr_03_430D                 ; 03:466E - C3 0D 43

addr_03_4671:
   ld     (ix+32), l                   ; 03:4671 - DD 75 20
   ld     (ix+33), h                   ; 03:4674 - DD 74 21
   inc    de                           ; 03:4677 - 13
   inc    de                           ; 03:4678 - 13
   inc    de                           ; 03:4679 - 13
   jp     addr_03_430D                 ; 03:467A - C3 0D 43

addr_03_467D:
   ld     (ix+34), e                   ; 03:467D - DD 73 22
   ld     (ix+35), d                   ; 03:4680 - DD 72 23
   jp     addr_03_430D                 ; 03:4683 - C3 0D 43

addr_03_4686:
   ld     a, (de)                      ; 03:4686 - 1A
   ld     (ix+37), a                   ; 03:4687 - DD 77 25
   inc    de                           ; 03:468A - 13
   jp     addr_03_430D                 ; 03:468B - C3 0D 43

addr_03_468E:
   ld     a, (de)                      ; 03:468E - 1A
   ld     (ix+36), a                   ; 03:468F - DD 77 24
   inc    de                           ; 03:4692 - 13
   jp     addr_03_430D                 ; 03:4693 - C3 0D 43

addr_03_4696:
   ld     a, (ix+44)                   ; 03:4696 - DD 7E 2C
   inc    a                            ; 03:4699 - 3C
   cp     $10                          ; 03:469A - FE 10
   jr     c, addr_03_46A0              ; 03:469C - 38 02
   ld     a, $0F                       ; 03:469E - 3E 0F

addr_03_46A0:
   ld     (ix+44), a                   ; 03:46A0 - DD 77 2C
   ld     a, (var_DC04)                ; 03:46A3 - 3A 04 DC
   and    $08                          ; 03:46A6 - E6 08
   jp     nz, addr_03_430D             ; 03:46A8 - C2 0D 43
   ld     a, (ix+44)                   ; 03:46AB - DD 7E 2C
   ld     (ix+5), a                    ; 03:46AE - DD 77 05
   jp     addr_03_430D                 ; 03:46B1 - C3 0D 43

addr_03_46B4:
   ld     a, (ix+44)                   ; 03:46B4 - DD 7E 2C
   dec    a                            ; 03:46B7 - 3D
   cp     $10                          ; 03:46B8 - FE 10
   jr     c, addr_03_46BD              ; 03:46BA - 38 01
   xor    a                            ; 03:46BC - AF

addr_03_46BD:
   ld     (ix+44), a                   ; 03:46BD - DD 77 2C
   ld     a, (var_DC04)                ; 03:46C0 - 3A 04 DC
   and    $08                          ; 03:46C3 - E6 08
   jp     nz, addr_03_430D             ; 03:46C5 - C2 0D 43
   ld     a, (ix+44)                   ; 03:46C8 - DD 7E 2C
   ld     (ix+5), a                    ; 03:46CB - DD 77 05
   jp     addr_03_430D                 ; 03:46CE - C3 0D 43

addr_03_46D1:
   set    0, (ix+40)                   ; 03:46D1 - DD CB 28 C6
   jp     addr_03_430D                 ; 03:46D5 - C3 0D 43

addr_03_46D8:
   xor    a                            ; 03:46D8 - AF
   ld     b, $07                       ; 03:46D9 - 06 07
   ex     de, hl                       ; 03:46DB - EB
   ld     l, a                         ; 03:46DC - 6F
   ld     h, a                         ; 03:46DD - 67

addr_03_46DE:
   rl     c                            ; 03:46DE - CB 11
   jp     nc, addr_03_46E4             ; 03:46E0 - D2 E4 46
   add    hl, de                       ; 03:46E3 - 19

addr_03_46E4:
   add    hl, hl                       ; 03:46E4 - 29
   djnz   addr_03_46DE                 ; 03:46E5 - 10 F7
   or     c                            ; 03:46E7 - B1
   ret    z                            ; 03:46E8 - C8
   add    hl, de                       ; 03:46E9 - 19
   ret                                 ; 03:46EA - C9

addr_03_46EB:
   push   hl                           ; 03:46EB - E5
   ld     hl, song_ptr_table           ; 03:46EC - 21 16 47
   add    a, a                         ; 03:46EF - 87
   add    a, l                         ; 03:46F0 - 85
   ld     l, a                         ; 03:46F1 - 6F
   ld     a, $00                       ; 03:46F2 - 3E 00
   adc    a, h                         ; 03:46F4 - 8C
   ld     h, a                         ; 03:46F5 - 67
   ld     a, (hl)                      ; 03:46F6 - 7E
   inc    hl                           ; 03:46F7 - 23
   ld     h, (hl)                      ; 03:46F8 - 66
   ld     l, a                         ; 03:46F9 - 6F
   call   addr_03_4018                 ; 03:46FA - CD 18 40
   pop    hl                           ; 03:46FD - E1
   ret                                 ; 03:46FE - C9

addr_03_46FF:
   push   hl                           ; 03:46FF - E5
   push   de                           ; 03:4700 - D5
   ld     hl, UNK_03_4740              ; 03:4701 - 21 40 47
   add    a, a                         ; 03:4704 - 87
   add    a, a                         ; 03:4705 - 87
   ld     e, a                         ; 03:4706 - 5F
   ld     d, $00                       ; 03:4707 - 16 00
   add    hl, de                       ; 03:4709 - 19
   ld     e, (hl)                      ; 03:470A - 5E
   inc    hl                           ; 03:470B - 23
   ld     d, (hl)                      ; 03:470C - 56
   inc    hl                           ; 03:470D - 23
   ld     a, (hl)                      ; 03:470E - 7E
   ex     de, hl                       ; 03:470F - EB
   call   addr_03_4171                 ; 03:4710 - CD 71 41
   pop    de                           ; 03:4713 - D1
   pop    hl                           ; 03:4714 - E1
   ret                                 ; 03:4715 - C9

song_ptr_table:
.dw SONG_GHZ, SONG_BRI, SONG_JUN, SONG_LAB, SONG_SCR, SONG_SKY_2, SONG_title_screen, SONG_world_map  ; 03:4716
.dw SONG_invincibility, SONG_level_end, SONG_death, SONG_boss, SONG_boss, SONG_boss, SONG_credits, SONG_GHZ  ; 03:4726
.dw SONG_special, SONG_GHZ, SONG_GHZ, SONG_good_ending_sfx, SONG_chaos_emerald      ; 03:4736

UNK_03_4740:
.dw addr_03_7B27                                                                    ; 03:4740
.db $02, $00                                                                        ; 03:4742
.dw addr_03_7B43                                                                    ; 03:4744
.db $02, $00                                                                        ; 03:4746
.dw addr_03_7B74                                                                    ; 03:4748
.db $02, $00                                                                        ; 03:474A
.dw addr_03_7B98                                                                    ; 03:474C
.db $02, $00                                                                        ; 03:474E
.dw addr_03_7BBF                                                                    ; 03:4750
.db $02, $00                                                                        ; 03:4752
.dw addr_03_7BE6                                                                    ; 03:4754
.db $02, $00                                                                        ; 03:4756
.dw addr_03_7C18                                                                    ; 03:4758
.db $02, $00                                                                        ; 03:475A
.dw addr_03_7C42                                                                    ; 03:475C
.db $02, $00                                                                        ; 03:475E
.dw addr_03_7C5E                                                                    ; 03:4760
.db $01, $00                                                                        ; 03:4762
.dw addr_03_7C8E                                                                    ; 03:4764
.db $01, $00                                                                        ; 03:4766
.dw addr_03_7CB7                                                                    ; 03:4768
.db $02, $00                                                                        ; 03:476A
.dw addr_03_7CD8                                                                    ; 03:476C
.db $01, $00                                                                        ; 03:476E
.dw addr_03_7CFD                                                                    ; 03:4770
.db $01, $00                                                                        ; 03:4772
.dw addr_03_7D24                                                                    ; 03:4774
.db $01, $00                                                                        ; 03:4776
.dw addr_03_7D62                                                                    ; 03:4778
.db $02, $00                                                                        ; 03:477A
.dw addr_03_7D62                                                                    ; 03:477C
.db $01, $00                                                                        ; 03:477E
.dw addr_03_7D62                                                                    ; 03:4780
.db $02, $00                                                                        ; 03:4782
.dw addr_03_7D62                                                                    ; 03:4784
.db $02, $00                                                                        ; 03:4786
.dw addr_03_7D88                                                                    ; 03:4788
.db $02, $00                                                                        ; 03:478A
.dw addr_03_7DB1                                                                    ; 03:478C
.db $01, $00                                                                        ; 03:478E
.dw addr_03_7DB1                                                                    ; 03:4790
.db $02, $00                                                                        ; 03:4792
.dw addr_03_7DB1                                                                    ; 03:4794
.db $02, $00                                                                        ; 03:4796
.dw addr_03_7DB1                                                                    ; 03:4798
.db $02, $00                                                                        ; 03:479A
.dw addr_03_7DE6                                                                    ; 03:479C
.db $01, $00                                                                        ; 03:479E
.dw addr_03_7E0C                                                                    ; 03:47A0
.db $01, $00                                                                        ; 03:47A2
.dw addr_03_7E2F                                                                    ; 03:47A4
.db $02, $00                                                                        ; 03:47A6
.dw addr_03_7E48                                                                    ; 03:47A8
.db $01, $00                                                                        ; 03:47AA
.dw addr_03_7E5C                                                                    ; 03:47AC
.db $01, $00                                                                        ; 03:47AE
.dw addr_03_7E74                                                                    ; 03:47B0
.db $01, $00                                                                        ; 03:47B2
.dw addr_03_7EA4                                                                    ; 03:47B4
.db $01, $00                                                                        ; 03:47B6
.dw addr_03_7ECC                                                                    ; 03:47B8
.db $02, $00                                                                        ; 03:47BA
.dw addr_03_7ECC                                                                    ; 03:47BC
.db $02, $00                                                                        ; 03:47BE
.dw addr_03_7EE8                                                                    ; 03:47C0
.db $02, $00                                                                        ; 03:47C2
.dw addr_03_7F08                                                                    ; 03:47C4
.db $01, $00                                                                        ; 03:47C6
.dw addr_03_7F4E                                                                    ; 03:47C8
.db $01, $00                                                                        ; 03:47CA
.dw addr_03_7F83                                                                    ; 03:47CC
.db $02, $00                                                                        ; 03:47CE

SONG_GHZ:
.INCBIN "src/data/lv_ghz.song"

SONG_MAR:
.INCBIN "src/data/lv_mar.song"

SONG_JUN:
.INCBIN "src/data/lv_jun.song"

SONG_BRI:
.INCBIN "src/data/lv_bri.song"

SONG_SCR:
.INCBIN "src/data/lv_scr.song"

SONG_SKY_2:
.INCBIN "src/data/lv_sky_2.song"

SONG_title_screen:
.INCBIN "src/data/title_screen.song"

SONG_world_map:
.INCBIN "src/data/world_map.song"

SONG_invincibility:
.INCBIN "src/data/invincibility.song"

SONG_level_end:
.INCBIN "src/data/level_end.song"

SONG_death:
.INCBIN "src/data/death.song"

SONG_boss:
.INCBIN "src/data/boss.song"

SONG_credits:
.INCBIN "src/data/credits.song"

SONG_special:
.INCBIN "src/data/special.song"

SONG_LAB:
.INCBIN "src/data/lv_lab.song"

SONG_good_ending_sfx:
.INCBIN "src/data/good_ending_sfx.song"

SONG_chaos_emerald:
.INCBIN "src/data/chaos_emerald.song"

addr_03_7B27:
.db $02, $01, $00, $01, $00, $00, $82, $FF, $00, $FA, $00, $32, $0A, $83, $03, $01  ; 03:7B27
.db $FA, $F0, $FF, $81, $0F, $15, $03, $1A, $15, $81, $00, $FE                      ; 03:7B37

addr_03_7B43:
.db $02, $01, $00, $01, $00, $00, $82, $FF, $00, $FA, $00, $32, $0A, $8A, $01, $81  ; 03:7B43
.db $0F, $10, $00, $07, $00, $04, $00, $00, $00, $86, $17, $00, $15, $00, $14, $00  ; 03:7B53
.db $12, $00, $10, $00, $0B, $00, $8C, $8C, $8C, $8C, $87, $03, $1A, $00, $81, $00  ; 03:7B63
.db $FE                                                                             ; 03:7B73

addr_03_7B74:
.db $02, $01, $00, $01, $00, $00, $82, $FF, $00, $FA, $00, $32, $0A, $81, $0F, $34  ; 03:7B74
.db $04, $37, $04, $40, $04, $8C, $8C, $40, $04, $8C, $8C, $40, $04, $8C, $8C, $40  ; 03:7B84
.db $04, $81, $00, $FE                                                              ; 03:7B94

addr_03_7B98:
.db $02, $01, $00, $01, $00, $00, $82, $FF, $00, $FA, $00, $32, $0A, $81, $0F, $8A  ; 03:7B98
.db $01, $28, $00, $2A, $00, $28, $00, $2A, $00, $7F, $02, $86, $28, $00, $2A, $00  ; 03:7BA8
.db $87, $09, $1C, $00, $81, $00, $FE                                               ; 03:7BB8

addr_03_7BBF:
.db $02, $01, $00, $01, $00, $00, $82, $FF, $00, $FA, $00, $32, $0A, $81, $0F, $8A  ; 03:7BBF
.db $01, $86, $17, $00, $19, $00, $1B, $00, $20, $00, $22, $00, $24, $00, $8C, $8C  ; 03:7BCF
.db $87, $07, $12, $00, $81, $00, $FE                                               ; 03:7BDF

addr_03_7BE6:
.db $02, $01, $00, $01, $00, $00, $83, $01, $01, $FA, $F2, $FF, $82, $FF, $00, $FA  ; 03:7BE6
.db $00, $32, $0A, $81, $0A, $86, $3B, $02, $8D, $8B, $87, $03, $16, $00, $3B, $02  ; 03:7BF6
.db $83, $01, $01, $FA, $17, $00, $86, $4B, $03, $8D, $8C, $87, $0E, $27, $00, $81  ; 03:7C06
.db $00, $FE                                                                        ; 03:7C16

addr_03_7C18:
.db $02, $01, $00, $01, $00, $00, $83, $01, $01, $FA, $FE, $FF, $82, $FF, $00, $FA  ; 03:7C18
.db $00, $32, $0A, $81, $0A, $86, $3B, $0C, $8D, $8B, $87, $04, $16, $00, $86, $3B  ; 03:7C28
.db $0C, $8D, $8C, $87, $06, $1F, $00, $81, $00, $FE                                ; 03:7C38

addr_03_7C42:
.db $02, $01, $00, $01, $00, $00, $82, $FF, $00, $FA, $00, $32, $0A, $81, $0F, $86  ; 03:7C42
.db $10, $01, $30, $01, $8C, $87, $0F, $10, $00, $81, $00, $FE                      ; 03:7C52

addr_03_7C5E:
.db $02, $01, $00, $01, $00, $00, $83, $01, $01, $FA, $BF, $FF, $82, $FF, $00, $FA  ; 03:7C5E
.db $00, $32, $0A, $8A, $06, $81, $0F, $86, $10, $00, $8C, $12, $00, $8C, $14, $00  ; 03:7C6E
.db $8C, $15, $00, $8C, $17, $00, $8C, $19, $00, $87, $03, $18, $00, $81, $00, $FE  ; 03:7C7E

addr_03_7C8E:
.db $02, $01, $00, $01, $00, $00, $82, $FF, $00, $FA, $00, $32, $0A, $8A, $04, $81  ; 03:7C8E
.db $0F, $38, $00, $40, $00, $43, $00, $40, $00, $43, $00, $86, $48, $00, $7F, $00  ; 03:7C9E
.db $8C, $8C, $87, $07, $1C, $00, $81, $00, $FE                                     ; 03:7CAE

addr_03_7CB7:
.db $02, $01, $00, $01, $00, $00, $82, $FF, $00, $FA, $00, $32, $0A, $81, $0F, $86  ; 03:7CB7
.db $18, $01, $7F, $01, $8C, $10, $01, $7F, $01, $8C, $87, $07, $10, $00, $81, $00  ; 03:7CC7
.db $FE                                                                             ; 03:7CD7

addr_03_7CD8:
.db $02, $01, $00, $01, $00, $00, $82, $FF, $00, $FA, $00, $32, $0A, $8A, $01, $81  ; 03:7CD8
.db $0F, $86, $3B, $00, $49, $00, $7F, $02, $3B, $00, $49, $00, $7F, $02, $87, $FF  ; 03:7CE8
.db $12, $00, $81, $00, $FE                                                         ; 03:7CF8

addr_03_7CFD:
.db $02, $01, $00, $01, $00, $00, $82, $FF, $1E, $C8, $1E, $0A, $01, $83, $01, $01  ; 03:7CFD
.db $FA, $F0, $FF, $81, $0F, $10, $02, $7F, $02, $86, $19, $0C, $8C, $8C, $8C, $8C  ; 03:7D0D
.db $87, $03, $1A, $00, $81, $00, $FE                                               ; 03:7D1D

addr_03_7D24:
.db $02, $01, $00, $01, $00, $00, $82, $FF, $00, $FA, $00, $00, $0A, $83, $01, $01  ; 03:7D24
.db $FA, $C4, $FF, $81, $00, $86, $00, $09, $8B, $87, $0A, $16, $00, $86, $86, $00  ; 03:7D34
.db $09, $00, $09, $8B, $87, $04, $1F, $00, $86, $00, $09, $87, $08, $29, $00, $86  ; 03:7D44
.db $00, $09, $00, $09, $8C, $87, $04, $30, $00, $87, $FF, $1E, $00, $FE            ; 03:7D54

addr_03_7D62:
.db $02, $01, $00, $01, $00, $00, $82, $FF, $00, $FF, $00, $0A, $01, $81, $0F, $86  ; 03:7D62
.db $00, $01, $01, $01, $87, $02, $10, $00, $7F, $05, $86, $00, $01, $01, $01, $87  ; 03:7D72
.db $10, $1B, $00, $81, $00, $FE                                                    ; 03:7D82

addr_03_7D88:
.db $03, $01, $00, $01, $00, $00, $81, $0D, $82, $FF, $00, $FA, $00, $32, $0A, $8A  ; 03:7D88
.db $02, $89, $05, $00, $00, $7F, $00, $89, $04, $81, $0C, $00, $00, $8B, $86, $00  ; 03:7D98
.db $00, $8C, $87, $0D, $1F, $00, $81, $00, $FE                                     ; 03:7DA8

addr_03_7DB1:
.db $02, $01, $00, $01, $00, $00, $82, $FF, $00, $FA, $00, $32, $0A, $81, $0F, $8A  ; 03:7DB1
.db $01, $01, $00, $7F, $00, $02, $00, $7F, $00, $03, $00, $7F, $00, $86, $04, $00  ; 03:7DC1
.db $7F, $00, $87, $0F, $1E, $00, $86, $04, $00, $7F, $00, $7F, $00, $8C, $87, $0F  ; 03:7DD1
.db $27, $00, $81, $00, $FE                                                         ; 03:7DE1

addr_03_7DE6:
.db $03, $01, $00, $01, $00, $00, $81, $07, $82, $FF, $00, $FA, $00, $32, $0A, $89  ; 03:7DE6
.db $06, $86, $00, $0C, $8B, $87, $07, $12, $00, $00, $30, $86, $00, $02, $8C, $87  ; 03:7DF6
.db $0E, $1C, $00, $81, $00, $FE                                                    ; 03:7E06

addr_03_7E0C:
.db $03, $01, $00, $01, $00, $00, $81, $0F, $82, $FF, $00, $FA, $00, $32, $0A, $89  ; 03:7E0C
.db $06, $86, $00, $03, $7F, $03, $8C, $8C, $8C, $8C, $87, $03, $12, $00, $00, $03  ; 03:7E1C
.db $81, $00, $FE                                                                   ; 03:7E2C

addr_03_7E2F:
.db $02, $01, $00, $01, $00, $00, $82, $FF, $00, $FA, $00, $00, $0A, $81, $0E, $86  ; 03:7E2F
.db $0C, $02, $0D, $02, $87, $0A, $10, $00, $FE                                     ; 03:7E3F

addr_03_7E48:
.db $02, $01, $00, $01, $00, $00, $82, $FF, $00, $FA, $00, $32, $0A, $81, $0D, $49  ; 03:7E48
.db $03, $81, $00, $FE                                                              ; 03:7E58

addr_03_7E5C:
.db $03, $01, $00, $01, $00, $00, $81, $0F, $82, $FF, $0A, $96, $14, $50, $0A, $8A  ; 03:7E5C
.db $10, $89, $06, $00, $12, $81, $00, $FE                                          ; 03:7E6C

addr_03_7E74:
.db $02, $01, $00, $01, $00, $00, $82, $FF, $00, $FA, $00, $32, $0A, $8A, $01, $81  ; 03:7E74
.db $0F, $0C, $02, $7F, $02, $86, $11, $00, $09, $00, $07, $00, $04, $00, $03, $00  ; 03:7E84
.db $00, $00, $0E, $00, $0C, $00, $8C, $8C, $8C, $87, $04, $16, $00, $81, $00, $FE  ; 03:7E94

addr_03_7EA4:
.db $02, $01, $00, $01, $00, $00, $82, $FF, $00, $FA, $00, $32, $0A, $81, $0F, $8A  ; 03:7EA4
.db $01, $17, $00, $10, $00, $07, $00, $00, $00, $0C, $00, $86, $4B, $00, $0B, $00  ; 03:7EB4
.db $8C, $87, $0F, $1C, $00, $81, $00, $FE                                          ; 03:7EC4

addr_03_7ECC:
.db $02, $01, $00, $01, $00, $00, $82, $FF, $00, $FA, $00, $32, $0A, $81, $0F, $86  ; 03:7ECC
.db $19, $01, $39, $01, $8C, $87, $0F, $10, $00, $81, $00, $FE                      ; 03:7EDC

addr_03_7EE8:
.db $03, $01, $00, $01, $00, $00, $82, $FF, $00, $FA, $00, $32, $0A, $8A, $03, $81  ; 03:7EE8
.db $0E, $89, $06, $86, $00, $00, $7F, $00, $8C, $87, $0E, $14, $00, $81, $00, $FE  ; 03:7EF8

addr_03_7F08:
.db $02, $01, $00, $01, $00, $00, $82, $FF, $00, $FA, $00, $32, $0A, $81, $0F, $8A  ; 03:7F08
.db $01, $09, $00, $7F, $00, $47, $00, $7F, $00, $40, $00, $5B, $00, $7F, $00, $57  ; 03:7F18
.db $02, $54, $00, $4B, $00, $7F, $02, $5B, $00, $7F, $00, $54, $00, $7F, $00, $5B  ; 03:7F28
.db $00, $7F, $00, $81, $0C, $86, $5B, $00, $0C, $00, $7F, $00, $57, $00, $8C, $87  ; 03:7F38
.db $06, $36, $00, $81, $00, $FE                                                    ; 03:7F48

addr_03_7F4E:
.db $02, $01, $00, $01, $00, $00, $82, $FF, $00, $FA, $00, $00, $0A, $81, $0B, $8A  ; 03:7F4E
.db $01, $19, $00, $8B, $15, $00, $8B, $22, $00, $27, $00, $7F, $03, $2B, $00, $32  ; 03:7F5E
.db $00, $36, $00, $39, $00, $7F, $06, $81, $05, $2B, $00, $32, $00, $36, $00, $39  ; 03:7F6E
.db $00, $81, $00, $FE, $00                                                         ; 03:7F7E

addr_03_7F83:
.db $02, $01, $00, $01, $00, $00, $83, $01, $01, $FA, $F2, $FF, $82, $FF, $00, $FA  ; 03:7F83
.db $00, $00, $0A, $86, $81, $0A, $86, $30, $06, $8B, $87, $04, $17, $00, $86, $30  ; 03:7F93
.db $06, $8C, $8C, $87, $05, $1F, $00, $87, $FF, $14, $00, $81, $00, $FE            ; 03:7FA3

.IF 0
BANK03_JUNK_END_7FB1:
.db $4D, $61, $73, $74, $65, $72, $20, $53, $79, $73, $74, $65, $6D, $20, $26, $20  ; 03:7FB1
.db $47, $61, $6D, $65, $20, $47, $65, $61, $72, $20, $56, $65, $72, $73, $69, $6F  ; 03:7FC1
.db $6E, $2E, $20, $20, $27, $31, $39, $39, $31, $20, $28, $43, $29, $41, $6E, $63  ; 03:7FD1
.db $69, $65, $6E, $74, $2E, $20, $28, $42, $41, $4E, $4B, $30, $2D, $34, $29, $A2  ; 03:7FE1
.db $53, $4F, $4E, $49, $43, $20, $54, $48, $45, $20, $48, $45, $44, $47, $45       ; 03:7FF1
.ENDIF
.ENDS

.SECTION "Bank04" SLOT 2 BANK $04 FORCE ORG $0000

LVTILEMAP_GHZ:
.INCBIN "src/data/lv_ghz.tilemap"

LVTILEMAP_BRI:
.INCBIN "src/data/lv_bri.tilemap"

LVTILEMAP_JUN:
.INCBIN "src/data/lv_jun.tilemap"

LVTILEMAP_LAB:
.INCBIN "src/data/lv_lab.tilemap"

LVTILEMAP_SCR:
.INCBIN "src/data/lv_scr.tilemap"

LVTILEMAP_SKY:
.INCBIN "src/data/lv_sky.tilemap" READ $00A80
.ENDS

.SECTION "Bank05" SLOT 1 BANK $05 FORCE ORG $0000
.INCBIN "src/data/lv_sky.tilemap" SKIP $00A80

LVTILEMAP_SKY_3:
.INCBIN "src/data/lv_sky_3.tilemap"

LVTILEMAP_special:
.INCBIN "src/data/lv_special.tilemap"

MONART_rings:
.INCBIN "src/data/mon_rings.monart"

MONART_speed_shoes:
.INCBIN "src/data/mon_speed_shoes.monart"

MONART_life:
.INCBIN "src/data/mon_life.monart"

MONART_shield:
.INCBIN "src/data/mon_shield.monart"

MONART_invincibility:
.INCBIN "src/data/mon_invincibility.monart"

MONART_chaos_emerald:
.INCBIN "src/data/mon_chaos_emerald.monart"

MONART_checkpoint:
.INCBIN "src/data/mon_checkpoint.monart"

MONART_continue:
.INCBIN "src/data/mon_continue.monart"

level_headers_rel:
.dw $004A, $006F, $0094, $00DE, $0103, $0128, $014D, $0172                          ; 05:5580
.dw $0197, $01BC, $01E1, $0206, $022B, $0250, $02BF, $0378                          ; 05:5590
.dw $039D, $03C2, $00B9, $0000, $0275, $029A, $032E, $0353                          ; 05:55A0
.dw $02E4, $0309, $03E7, $03E7, $040C, $0431, $0456, $047B                          ; 05:55B0
.dw $04A0, $04C5, $04EA, $050F, $0000                                               ; 05:55C0

LVHEAD_00:
.db $00                                                                             ; 05:55CA

lvh_width:
.dw $0100                                                                           ; 05:55CB

lvh_height:
.dw $0010                                                                           ; 05:55CD

lvh_x0:
.dw $0040                                                                           ; 05:55CF

lvh_x1:
.dw $18C0                                                                           ; 05:55D1

lvh_y0:
.dw $0020                                                                           ; 05:55D3

lvh_y1:
.dw $0140                                                                           ; 05:55D5
.db $08, $0B                                                                        ; 05:55D7

lvh_layout_bank05:
.dw $2DEA                                                                           ; 05:55D9

lvh_layout_cmpsize:
.dw $083E                                                                           ; 05:55DB

lvh_tilemap_bank04:
.dw $0000                                                                           ; 05:55DD

lvh_art0000_bank0C:
.dw $2FE6                                                                           ; 05:55DF
.db $09                                                                             ; 05:55E1

lvh_art2000:
.dw $612A                                                                           ; 05:55E2
.db $00, $0A, $03, $00                                                              ; 05:55E4

lvh_objlist_15580:
.dw $0534                                                                           ; 05:55E8
.db $04, $00, $20, $00, $00                                                         ; 05:55EA

LVHEAD_01:
.db $00                                                                             ; 05:55EF
.dw $0080, $0020, $0001, $0CA0, $0001, $0340                                        ; 05:55F0
.db $02, $03                                                                        ; 05:55FC
.dw $3628, $0661, $0000, $2FE6                                                      ; 05:55FE
.db $09                                                                             ; 05:5606
.dw $612A                                                                           ; 05:5607
.db $00, $0A, $03, $00                                                              ; 05:5609
.dw $0580                                                                           ; 05:560D
.db $04, $00, $20, $00, $00                                                         ; 05:560F

LVHEAD_02:
.db $00                                                                             ; 05:5614
.dw $0080, $0020, $0001, $0A00, $00E8, $0340                                        ; 05:5615
.db $07, $16                                                                        ; 05:5621
.dw $3C89, $032D, $0000, $2FE6                                                      ; 05:5623
.db $09                                                                             ; 05:562B
.dw $612A                                                                           ; 05:562C
.db $00, $0A, $03, $00                                                              ; 05:562E
.dw $05C3                                                                           ; 05:5632
.db $00, $00, $00, $00, $00                                                         ; 05:5634

LVHEAD_12:
.db $00                                                                             ; 05:5639
.dw $0100, $0010, $1A40, $1D00, $00E0, $00E8                                        ; 05:563A
.db $D9, $0A                                                                        ; 05:5646
.dw $2DEA, $083E, $0000, $2FE6                                                      ; 05:5648
.db $09                                                                             ; 05:5650
.dw $AEB1                                                                           ; 05:5651
.db $00, $0A, $03, $00                                                              ; 05:5653
.dw $0A3A                                                                           ; 05:5657
.db $00, $00, $00, $00, $FF                                                         ; 05:5659

LVHEAD_03:
.db $01                                                                             ; 05:565E
.dw $0100, $0010, $0001, $1F00, $0001, $0140                                        ; 05:565F
.db $03, $0C                                                                        ; 05:566B
.dw $7ED1, $0694, $0B80, $4578                                                      ; 05:566D
.db $09                                                                             ; 05:5675
.dw $6C3D                                                                           ; 05:5676
.db $01, $08, $03, $01                                                              ; 05:5678
.dw $05D6                                                                           ; 05:567C
.db $04, $00, $20, $00, $01                                                         ; 05:567E

LVHEAD_04:
.db $01                                                                             ; 05:5683
.dw $0080, $0020, $0001, $0F00, $0001, $0340                                        ; 05:5684
.db $02, $1C                                                                        ; 05:5690
.dw $A2A8, $0499, $0B80, $4578                                                      ; 05:5692
.db $09                                                                             ; 05:569A
.dw $6C3D                                                                           ; 05:569B
.db $01, $08, $03, $01                                                              ; 05:569D
.dw $061C                                                                           ; 05:56A1
.db $0C, $00, $20, $00, $01                                                         ; 05:56A3

LVHEAD_05:
.db $01                                                                             ; 05:56A8
.dw $0080, $0020, $0001, $0F00, $0300, $0340                                        ; 05:56A9
.db $06, $1B                                                                        ; 05:56B5
.dw $B301, $0140, $0B80, $4578                                                      ; 05:56B7
.db $09                                                                             ; 05:56BF
.dw $6C3D                                                                           ; 05:56C0
.db $01, $08, $03, $01                                                              ; 05:56C2
.dw $0656                                                                           ; 05:56C6
.db $00, $00, $00, $00, $01                                                         ; 05:56C8

LVHEAD_06:
.db $02                                                                             ; 05:56CD
.dw $0100, $0010, $0001, $1F00, $0001, $0120                                        ; 05:56CE
.db $02, $0B                                                                        ; 05:56DA
.dw $3FB6, $0AAC, $1480, $5B00                                                      ; 05:56DC
.db $09                                                                             ; 05:56E4
.dw $77CD                                                                           ; 05:56E5
.db $02, $05, $03, $02                                                              ; 05:56E7
.dw $066C                                                                           ; 05:56EB
.db $04, $00, $20, $00, $02                                                         ; 05:56ED

LVHEAD_07:
.db $02                                                                             ; 05:56F2
.dw $0010, $0100, $0001, $0100, $0001, $1F20                                        ; 05:56F3
.db $02, $FA                                                                        ; 05:56FF
.dw $4A62, $08DB, $1480, $5B00                                                      ; 05:5701
.db $09                                                                             ; 05:5709
.dw $77CD                                                                           ; 05:570A
.db $02, $05, $03, $02                                                              ; 05:570C
.dw $06C4                                                                           ; 05:5710
.db $84, $00, $20, $00, $02                                                         ; 05:5712

LVHEAD_08:
.db $02                                                                             ; 05:5717
.dw $0040, $0040, $0001, $0700, $0001, $0480                                        ; 05:5718
.db $03, $21                                                                        ; 05:5724
.dw $AC01, $03F5, $1480, $5B00                                                      ; 05:5726
.db $09                                                                             ; 05:572E
.dw $77CD                                                                           ; 05:572F
.db $02, $05, $03, $02                                                              ; 05:5731
.dw $070D                                                                           ; 05:5735
.db $00, $00, $00, $00, $02                                                         ; 05:5737

LVHEAD_09:
.db $03                                                                             ; 05:573C
.dw $0040, $0040, $0001, $0700, $0001, $0740                                        ; 05:573D
.db $02, $05                                                                        ; 05:5749
.dw $8565, $08C2, $1E80, $71BF                                                      ; 05:574B
.db $09                                                                             ; 05:5753
.dw $83B6                                                                           ; 05:5754
.db $03, $05, $03, $03                                                              ; 05:5756
.dw $0723                                                                           ; 05:575A
.db $04, $80, $20, $00, $03                                                         ; 05:575C

LVHEAD_0A:
.db $03                                                                             ; 05:5761
.dw $0040, $0040, $0001, $0700, $0001, $0740                                        ; 05:5762
.db $03, $09                                                                        ; 05:576E
.dw $8E27, $0D13, $1E80, $71BF                                                      ; 05:5770
.db $09                                                                             ; 05:5778
.dw $83B6                                                                           ; 05:5779
.db $03, $05, $03, $03                                                              ; 05:577B
.dw $0772                                                                           ; 05:577F
.db $04, $80, $20, $00, $03                                                         ; 05:5781

LVHEAD_0B:
.db $03                                                                             ; 05:5786
.dw $0040, $0040, $0001, $0700, $0001, $0740                                        ; 05:5787
.db $03, $25                                                                        ; 05:5793
.dw $AFF6, $030B, $1E80, $71BF                                                      ; 05:5795
.db $09                                                                             ; 05:579D
.dw $83B6                                                                           ; 05:579E
.db $03, $05, $03, $03                                                              ; 05:57A0
.dw $07CA                                                                           ; 05:57A4
.db $00, $80, $10, $00, $03                                                         ; 05:57A6

LVHEAD_0C:
.db $04                                                                             ; 05:57AB
.dw $0100, $0010, $0001, $1E00, $0001, $0120                                        ; 05:57AC
.db $03, $0B                                                                        ; 05:57B8
.dw $533D, $069A, $2980, $884B                                                      ; 05:57BA
.db $09                                                                             ; 05:57C2
.dw $8F75                                                                           ; 05:57C3
.db $04, $06, $04, $04                                                              ; 05:57C5
.dw $07E9                                                                           ; 05:57C9
.db $04, $00, $20, $00, $04                                                         ; 05:57CB

LVHEAD_0D:
.db $04                                                                             ; 05:57D0
.dw $0080, $0020, $0001, $0F00, $0001, $0340                                        ; 05:57D1
.db $04, $16                                                                        ; 05:57DD
.dw $59D7, $0904, $2980, $884B                                                      ; 05:57DF
.db $09                                                                             ; 05:57E7
.dw $8F75                                                                           ; 05:57E8
.db $04, $06, $04, $04                                                              ; 05:57EA
.dw $082C                                                                           ; 05:57EE
.db $04, $00, $20, $00, $04                                                         ; 05:57F0

LVHEAD_14:
.db $04                                                                             ; 05:57F5
.dw $0040, $0040, $0001, $0700, $0001, $0740                                        ; 05:57F6
.db $03, $3D                                                                        ; 05:5802
.dw $62DB, $08F8, $2980, $884B                                                      ; 05:5804
.db $09                                                                             ; 05:580C
.dw $8F75                                                                           ; 05:580D
.db $04, $06, $04, $04                                                              ; 05:580F
.dw $0869                                                                           ; 05:5813
.db $04, $00, $20, $00, $04                                                         ; 05:5815

LVHEAD_15:
.db $04                                                                             ; 05:581A
.dw $0020, $0080, $0001, $0300, $0001, $0AA0                                        ; 05:581B
.db $03, $03                                                                        ; 05:5827
.dw $6BD3, $06AF, $2980, $884B                                                      ; 05:5829
.db $09                                                                             ; 05:5831
.dw $8F75                                                                           ; 05:5832
.db $04, $06, $04, $04                                                              ; 05:5834
.dw $08B5                                                                           ; 05:5838
.db $04, $00, $20, $00, $04                                                         ; 05:583A

LVHEAD_0E:
.db $04                                                                             ; 05:583F
.dw $0040, $0040, $0001, $0700, $0220, $0740                                        ; 05:5840
.db $03, $36                                                                        ; 05:584C
.dw $7282, $08B2, $2980, $884B                                                      ; 05:584E
.db $09                                                                             ; 05:5856
.dw $8F75                                                                           ; 05:5857
.db $04, $06, $04, $04                                                              ; 05:5859
.dw $08CE                                                                           ; 05:585D
.db $04, $00, $00, $00, $04                                                         ; 05:585F

LVHEAD_18:
.db $04                                                                             ; 05:5864
.dw $0080, $0020, $0001, $0F00, $0001, $0340                                        ; 05:5865
.db $7B, $03                                                                        ; 05:5871
.dw $59D7, $0904, $2980, $884B                                                      ; 05:5873
.db $09                                                                             ; 05:587B
.dw $8F75                                                                           ; 05:587C
.db $04, $06, $04, $04                                                              ; 05:587E
.dw $082C                                                                           ; 05:5882
.db $04, $00, $20, $00, $04                                                         ; 05:5884

LVHEAD_19:
.db $04                                                                             ; 05:5889
.dw $0080, $0020, $0001, $0F00, $0001, $0340                                        ; 05:588A
.db $7B, $1B                                                                        ; 05:5896
.dw $59D7, $0904, $2980, $884B                                                      ; 05:5898
.db $09                                                                             ; 05:58A0
.dw $8F75                                                                           ; 05:58A1
.db $04, $06, $04, $04                                                              ; 05:58A3
.dw $082C                                                                           ; 05:58A7
.db $04, $00, $20, $00, $04                                                         ; 05:58A9

LVHEAD_16:
.db $04                                                                             ; 05:58AE
.dw $0080, $0020, $0001, $0F00, $0001, $0340                                        ; 05:58AF
.db $50, $10                                                                        ; 05:58BB
.dw $59D7, $0904, $2980, $884B                                                      ; 05:58BD
.db $09                                                                             ; 05:58C5
.dw $8F75                                                                           ; 05:58C6
.db $04, $06, $04, $04                                                              ; 05:58C8
.dw $082C                                                                           ; 05:58CC
.db $04, $00, $20, $00, $04                                                         ; 05:58CE

LVHEAD_17:
.db $04                                                                             ; 05:58D3
.dw $0040, $0040, $0001, $0700, $0001, $0740                                        ; 05:58D4
.db $27, $1C                                                                        ; 05:58E0
.dw $62DB, $08F8, $2980, $884B                                                      ; 05:58E2
.db $09                                                                             ; 05:58EA
.dw $8F75                                                                           ; 05:58EB
.db $04, $06, $04, $04                                                              ; 05:58ED
.dw $0869                                                                           ; 05:58F1
.db $04, $00, $20, $00, $04                                                         ; 05:58F3

LVHEAD_0F:
.db $05                                                                             ; 05:58F8
.dw $0080, $0020, $0001, $0F00, $0001, $0340                                        ; 05:58F9
.db $02, $1D                                                                        ; 05:5905
.dw $9B3A, $076E, $3580, $9CEE                                                      ; 05:5907
.db $09                                                                             ; 05:590F
.dw $99E0                                                                           ; 05:5910
.db $05, $06, $04, $05                                                              ; 05:5912
.dw $091A                                                                           ; 05:5916
.db $04, $00, $22, $00, $04                                                         ; 05:5918

LVHEAD_10:
.db $05                                                                             ; 05:591D
.dw $0040, $0040, $0001, $0700, $0001, $0640                                        ; 05:591E
.db $0A, $17                                                                        ; 05:592A
.dw $7B34, $039D, $3580, $9CEE                                                      ; 05:592C
.db $09                                                                             ; 05:5934
.dw $99E0                                                                           ; 05:5935
.db $05, $06, $04, $08                                                              ; 05:5937
.dw $0954                                                                           ; 05:593B
.db $40, $00, $20, $00, $05                                                         ; 05:593D

LVHEAD_11:
.db $07                                                                             ; 05:5942
.dw $0040, $0040, $0001, $0700, $0001, $0120                                        ; 05:5943
.db $02, $01                                                                        ; 05:594F
.dw $A741, $04C0, $4300, $B3B5                                                      ; 05:5951
.db $09                                                                             ; 05:5959
.dw $99E0                                                                           ; 05:595A
.db $06, $08, $04, $06                                                              ; 05:595C
.dw $0997                                                                           ; 05:5960
.db $00, $00, $00, $00, $04                                                         ; 05:5962

LVHEAD_1A:
LVHEAD_1B:
.db $07                                                                             ; 05:5967
.dw $0040, $0040, $0001, $0700, $0001, $0740                                        ; 05:5968
.db $03, $3B                                                                        ; 05:5974
.dw $A741, $04C0, $4300, $B3B5                                                      ; 05:5976
.db $09                                                                             ; 05:597E
.dw $99E0                                                                           ; 05:597F
.db $06, $08, $04, $06                                                              ; 05:5981
.dw $09A1                                                                           ; 05:5985
.db $00, $00, $00, $00, $04                                                         ; 05:5987

LVHEAD_1C:
.db $06                                                                             ; 05:598C
.dw $0040, $0040, $0001, $0700, $0001, $0240                                        ; 05:598D
.db $02, $06                                                                        ; 05:5999
.dw $B441, $0760, $4980, $C7FE                                                      ; 05:599B
.db $09                                                                             ; 05:59A3
.dw $A511                                                                           ; 05:59A4
.db $07, $01, $01, $07                                                              ; 05:59A6
.dw $09A5                                                                           ; 05:59AA
.db $04, $00, $21, $00, $10                                                         ; 05:59AC

LVHEAD_1D:
.db $06                                                                             ; 05:59B1
.dw $0040, $0040, $0001, $0700, $0320, $05C0                                        ; 05:59B2
.db $02, $1E                                                                        ; 05:59BE
.dw $B441, $0760, $4980, $C7FE                                                      ; 05:59C0
.db $09                                                                             ; 05:59C8
.dw $A511                                                                           ; 05:59C9
.db $07, $01, $01, $07                                                              ; 05:59CB
.dw $09AC                                                                           ; 05:59CF
.db $04, $00, $21, $00, $10                                                         ; 05:59D1

LVHEAD_1E:
.db $06                                                                             ; 05:59D6
.dw $0040, $0040, $0001, $0700, $0680, $0740                                        ; 05:59D7
.db $03, $3B                                                                        ; 05:59E3
.dw $B441, $0760, $4980, $C7FE                                                      ; 05:59E5
.db $09                                                                             ; 05:59ED
.dw $A511                                                                           ; 05:59EE
.db $07, $01, $01, $07                                                              ; 05:59F0
.dw $09B6                                                                           ; 05:59F4
.db $04, $00, $21, $00, $10                                                         ; 05:59F6

LVHEAD_1F:
.db $06                                                                             ; 05:59FB
.dw $0010, $0100, $0001, $0100, $0001, $1F20                                        ; 05:59FC
.db $06, $04                                                                        ; 05:5A08
.dw $4A62, $08DB, $4980, $C7FE                                                      ; 05:5A0A
.db $09                                                                             ; 05:5A12
.dw $A511                                                                           ; 05:5A13
.db $07, $01, $01, $07                                                              ; 05:5A15
.dw $09C0                                                                           ; 05:5A19
.db $04, $00, $21, $00, $10                                                         ; 05:5A1B

LVHEAD_20:
.db $06                                                                             ; 05:5A20
.dw $0040, $0040, $0001, $0700, $0001, $0240                                        ; 05:5A21
.db $02, $06                                                                        ; 05:5A2D
.dw $B441, $0760, $4980, $C7FE                                                      ; 05:5A2F
.db $09                                                                             ; 05:5A37
.dw $A511                                                                           ; 05:5A38
.db $07, $01, $01, $07                                                              ; 05:5A3A
.dw $09D3                                                                           ; 05:5A3E
.db $04, $00, $21, $00, $10                                                         ; 05:5A40

LVHEAD_21:
.db $06                                                                             ; 05:5A45
.dw $0040, $0040, $0001, $0700, $0320, $05C0                                        ; 05:5A46
.db $02, $1E                                                                        ; 05:5A52
.dw $B441, $0760, $4980, $C7FE                                                      ; 05:5A54
.db $09                                                                             ; 05:5A5C
.dw $A511                                                                           ; 05:5A5D
.db $07, $01, $01, $07                                                              ; 05:5A5F
.dw $09E6                                                                           ; 05:5A63
.db $04, $00, $21, $00, $10                                                         ; 05:5A65

LVHEAD_22:
.db $06                                                                             ; 05:5A6A
.dw $0040, $0040, $0001, $0700, $0680, $0740                                        ; 05:5A6B
.db $03, $3B                                                                        ; 05:5A77
.dw $B441, $0760, $4980, $C7FE                                                      ; 05:5A79
.db $09                                                                             ; 05:5A81
.dw $A511                                                                           ; 05:5A82
.db $07, $01, $01, $07                                                              ; 05:5A84
.dw $09FF                                                                           ; 05:5A88
.db $04, $00, $21, $00, $10                                                         ; 05:5A8A

LVHEAD_23:
.db $06                                                                             ; 05:5A8F
.dw $0010, $0100, $0001, $0100, $0001, $1F20                                        ; 05:5A90
.db $06, $04                                                                        ; 05:5A9C
.dw $4A62, $08DB, $4980, $C7FE                                                      ; 05:5A9E
.db $09                                                                             ; 05:5AA6
.dw $A511                                                                           ; 05:5AA7
.db $07, $01, $01, $07                                                              ; 05:5AA9
.dw $0A15                                                                           ; 05:5AAD
.db $04, $00, $21, $00, $10                                                         ; 05:5AAF

LVOBJECTS_05_5AB4:
.INCBIN "src/data/lv_ghz_1.objects"

LVOBJECTS_05_5B00:
.INCBIN "src/data/lv_ghz_2.objects"

LVOBJECTS_05_5B43:
.INCBIN "src/data/lv_ghz_3.objects"

LVOBJECTS_05_5B56:
.INCBIN "src/data/lv_bri_1.objects"

LVOBJECTS_05_5B9C:
.INCBIN "src/data/lv_bri_2.objects"

LVOBJECTS_05_5BD6:
.INCBIN "src/data/lv_bri_3.objects"

LVOBJECTS_05_5BEC:
.INCBIN "src/data/lv_jun_1.objects"

LVOBJECTS_05_5C44:
.INCBIN "src/data/lv_jun_2.objects"

LVOBJECTS_05_5C8D:
.INCBIN "src/data/lv_jun_3.objects"

LVOBJECTS_05_5CA3:
.INCBIN "src/data/lv_lab_1.objects"

LVOBJECTS_05_5CF2:
.INCBIN "src/data/lv_lab_2.objects"

LVOBJECTS_05_5D4A:
.INCBIN "src/data/lv_lab_3.objects"

LVOBJECTS_05_5D69:
.INCBIN "src/data/lv_scr_1.objects"

LVOBJECTS_05_5DAC:
.INCBIN "src/data/lv_scr_2_main.objects"

LVOBJECTS_05_5DE9:
.INCBIN "src/data/lv_scr_2_upper.objects"

LVOBJECTS_05_5E35:
.INCBIN "src/data/lv_scr_2_lower.objects"

LVOBJECTS_05_5E4E:
.INCBIN "src/data/lv_scr_3.objects"

LVOBJECTS_05_5E9A:
.INCBIN "src/data/lv_sky_1.objects"

LVOBJECTS_05_5ED4:
.INCBIN "src/data/lv_sky_2.objects"

LVOBJECTS_05_5F17:
.INCBIN "src/data/lv_sky_3.objects"

LVOBJECTS_05_5F21:
.INCBIN "src/data/lv_sky_2_end.objects"

LVOBJECTS_05_5F25:
.INCBIN "src/data/lv_special_1.objects"

LVOBJECTS_05_5F2C:
.INCBIN "src/data/lv_special_2.objects"

LVOBJECTS_05_5F36:
.INCBIN "src/data/lv_special_3.objects"

LVOBJECTS_05_5F40:
.INCBIN "src/data/lv_special_4.objects"

LVOBJECTS_05_5F53:
.INCBIN "src/data/lv_special_5.objects"

LVOBJECTS_05_5F66:
.INCBIN "src/data/lv_special_6.objects"

LVOBJECTS_05_5F7F:
.INCBIN "src/data/lv_special_7.objects"

LVOBJECTS_05_5F95:
.INCBIN "src/data/lv_special_8.objects"

LVOBJECTS_05_5FBA:
.INCBIN "src/data/lv_ending.objects"
.ENDS

.IF 0
.SECTION "Bank05_1FC4_JUNK" SLOT 1 BANK $05 FORCE ORG $1FC4
BANK05_JUNK_MID_5FC4:
.db $74, $2E, $20, $28, $42, $41, $4E, $4B, $30, $2D, $34, $29, $A2, $53, $4F, $4E  ; 05:5FC4
.db $49, $43, $20, $54, $48, $45, $20, $48, $45, $44, $47, $45, $48, $4F, $47, $A3  ; 05:5FD4
.db $20, $4D, $61, $73, $74, $65, $72, $20, $53, $79, $73, $74, $65, $6D, $20, $26  ; 05:5FE4
.db $20, $47, $61, $6D, $65, $20, $47, $65, $61, $72, $20, $56                      ; 05:5FF4
.ENDS
.ENDIF

.SECTION "Bank05_2000" SLOT 1 BANK $05 FORCE ORG $2000
ARTMAP_05_6000:
.INCBIN "src/data/title_screen.artmap00"

ARTMAP_05_612E:
.INCBIN "src/data/score_tally_normal.artmap00"

ARTMAP_05_61E9:
.INCBIN "src/data/score_tally_special.artmap00"

ARTMAP_05_627E:
.INCBIN "src/data/world_map_1.artmap10"

ARTMAP_05_63F6:
.INCBIN "src/data/world_map_1.artmap00"

ARTMAP_05_653B:
.INCBIN "src/data/world_map_2.artmap10"

ARTMAP_05_66AB:
.INCBIN "src/data/world_map_2.artmap00"

ARTMAP_05_67FE:
.INCBIN "src/data/game_over.artmap00"

ARTMAP_05_6830:
.INCBIN "src/data/ending_tally.artmap00"

ARTMAP_05_69A9:
.INCBIN "src/data/good_ending_island.artmap00"

ARTMAP_05_6AEE_UNUSED:
.INCBIN "src/data/unused_credits_screen_beta.artmap00"

ARTMAP_05_6C61:
.INCBIN "src/data/credits_screen.artmap00"

LVLAYOUT_05_2DEA:
.INCBIN "src/data/lv_ghz_1_ending.layout8"

LVLAYOUT_05_3628:
.INCBIN "src/data/lv_ghz_2.layout7"

LVLAYOUT_05_3C89:
.INCBIN "src/data/lv_ghz_3.layout7"

LVLAYOUT_05_3FB6:
.INCBIN "src/data/lv_jun_1.layout8" READ $0004A
.ENDS

.SECTION "Bank06" SLOT 2 BANK $06 FORCE ORG $0000
.INCBIN "src/data/lv_jun_1.layout8" SKIP $0004A

LVLAYOUT_05_4A62:
.INCBIN "src/data/lv_jun_2_special_2_6.layout4"

LVLAYOUT_05_533D:
.INCBIN "src/data/lv_scr_1.layout8"

LVLAYOUT_05_59D7:
.INCBIN "src/data/lv_scr_2_main.layout7"

LVLAYOUT_05_62DB:
.INCBIN "src/data/lv_scr_2_upper.layout6"

LVLAYOUT_05_6BD3:
.INCBIN "src/data/lv_scr_2_lower.layout5"

LVLAYOUT_05_7282:
.INCBIN "src/data/lv_scr_3.layout6"

LVLAYOUT_05_7B34:
.INCBIN "src/data/lv_sky_2.layout6"

LVLAYOUT_05_7ED1:
.INCBIN "src/data/lv_bri_1.layout8" READ $0012F
.ENDS

.SECTION "Bank07" SLOT 2 BANK $07 FORCE ORG $0000
.INCBIN "src/data/lv_bri_1.layout8" SKIP $0012F

LVLAYOUT_05_8565:
.INCBIN "src/data/lv_lab_1.layout6"

LVLAYOUT_05_8E27:
.INCBIN "src/data/lv_lab_2.layout6"

LVLAYOUT_05_9B3A:
.INCBIN "src/data/lv_sky_1.layout7"

LVLAYOUT_05_A2A8:
.INCBIN "src/data/lv_bri_2.layout7"

LVLAYOUT_05_A741:
.INCBIN "src/data/lv_sky_3_end_sky_2.layout6"

LVLAYOUT_05_AC01:
.INCBIN "src/data/lv_jun_3.layout6"

LVLAYOUT_05_AFF6:
.INCBIN "src/data/lv_lab_3.layout6"

LVLAYOUT_05_B301:
.INCBIN "src/data/lv_bri_3.layout7"

LVLAYOUT_05_B441:
.INCBIN "src/data/lv_special_1_3_4_5_7_8.layout6"

BANK07_JUNK_END_BBA1:
.IF 0
.db $2E, $20, $28, $42, $41, $4E, $4B, $30, $2D, $34, $29, $A2, $53, $4F, $4E, $49  ; 07:BBA1
.db $43, $20, $54, $48, $45, $20, $48, $45, $44, $47, $45, $48, $4F, $47, $A3, $20  ; 07:BBB1
.db $4D, $61, $73, $74, $65, $72, $20, $53, $79, $73, $74, $65, $6D, $20, $26, $20  ; 07:BBC1
.db $47, $61, $6D, $65, $20, $47, $65, $61, $72, $20, $56, $65, $72, $73, $69, $6F  ; 07:BBD1
.db $6E, $2E, $20, $20, $27, $31, $39, $39, $31, $20, $28, $43, $29, $41, $6E, $63  ; 07:BBE1
.db $69, $65, $6E, $74, $2E, $20, $28, $42, $41, $4E, $4B, $30, $2D, $34, $29, $A2  ; 07:BBF1
.db $53, $4F, $4E, $49, $43, $20, $54, $48, $45, $20, $48, $45, $44, $47, $45, $48  ; 07:BC01
.db $4F, $47, $A3, $20, $4D, $61, $73, $74, $65, $72, $20, $53, $79, $73, $74, $65  ; 07:BC11
.db $6D, $20, $26, $20, $47, $61, $6D, $65, $20, $47, $65, $61, $72, $20, $56, $65  ; 07:BC21
.db $72, $73, $69, $6F, $6E, $2E, $20, $20, $27, $31, $39, $39, $31, $20, $28, $43  ; 07:BC31
.db $29, $41, $6E, $63, $69, $65, $6E, $74, $2E, $20, $28, $42, $41, $4E, $4B, $30  ; 07:BC41
.db $2D, $34, $29, $A2, $53, $4F, $4E, $49, $43, $20, $54, $48, $45, $20, $48, $45  ; 07:BC51
.db $44, $47, $45, $48, $4F, $47, $A3, $20, $4D, $61, $73, $74, $65, $72, $20, $53  ; 07:BC61
.db $79, $73, $74, $65, $6D, $20, $26, $20, $47, $61, $6D, $65, $20, $47, $65, $61  ; 07:BC71
.db $72, $20, $56, $65, $72, $73, $69, $6F, $6E, $2E, $20, $20, $27, $31, $39, $39  ; 07:BC81
.db $31, $20, $28, $43, $29, $41, $6E, $63, $69, $65, $6E, $74, $2E, $20, $28, $42  ; 07:BC91
.db $41, $4E, $4B, $30, $2D, $34, $29, $A2, $53, $4F, $4E, $49, $43, $20, $54, $48  ; 07:BCA1
.db $45, $20, $48, $45, $44, $47, $45, $48, $4F, $47, $A3, $20, $4D, $61, $73, $74  ; 07:BCB1
.db $65, $72, $20, $53, $79, $73, $74, $65, $6D, $20, $26, $20, $47, $61, $6D, $65  ; 07:BCC1
.db $20, $47, $65, $61, $72, $20, $56, $65, $72, $73, $69, $6F, $6E, $2E, $20, $20  ; 07:BCD1
.db $27, $31, $39, $39, $31, $20, $28, $43, $29, $41, $6E, $63, $69, $65, $6E, $74  ; 07:BCE1
.db $2E, $20, $28, $42, $41, $4E, $4B, $30, $2D, $34, $29, $A2, $53, $4F, $4E, $49  ; 07:BCF1
.db $43, $20, $54, $48, $45, $20, $48, $45, $44, $47, $45, $48, $4F, $47, $A3, $20  ; 07:BD01
.db $4D, $61, $73, $74, $65, $72, $20, $53, $79, $73, $74, $65, $6D, $20, $26, $20  ; 07:BD11
.db $47, $61, $6D, $65, $20, $47, $65, $61, $72, $20, $56, $65, $72, $73, $69, $6F  ; 07:BD21
.db $6E, $2E, $20, $20, $27, $31, $39, $39, $31, $20, $28, $43, $29, $41, $6E, $63  ; 07:BD31
.db $69, $65, $6E, $74, $2E, $20, $28, $42, $41, $4E, $4B, $30, $2D, $34, $29, $A2  ; 07:BD41
.db $53, $4F, $4E, $49, $43, $20, $54, $48, $45, $20, $48, $45, $44, $47, $45, $48  ; 07:BD51
.db $4F, $47, $A3, $20, $4D, $61, $73, $74, $65, $72, $20, $53, $79, $73, $74, $65  ; 07:BD61
.db $6D, $20, $26, $20, $47, $61, $6D, $65, $20, $47, $65, $61, $72, $20, $56, $65  ; 07:BD71
.db $72, $73, $69, $6F, $6E, $2E, $20, $20, $27, $31, $39, $39, $31, $20, $28, $43  ; 07:BD81
.db $29, $41, $6E, $63, $69, $65, $6E, $74, $2E, $20, $28, $42, $41, $4E, $4B, $30  ; 07:BD91
.db $2D, $34, $29, $A2, $53, $4F, $4E, $49, $43, $20, $54, $48, $45, $20, $48, $45  ; 07:BDA1
.db $44, $47, $45, $48, $4F, $47, $A3, $20, $4D, $61, $73, $74, $65, $72, $20, $53  ; 07:BDB1
.db $79, $73, $74, $65, $6D, $20, $26, $20, $47, $61, $6D, $65, $20, $47, $65, $61  ; 07:BDC1
.db $72, $20, $56, $65, $72, $73, $69, $6F, $6E, $2E, $20, $20, $27, $31, $39, $39  ; 07:BDD1
.db $31, $20, $28, $43, $29, $41, $6E, $63, $69, $65, $6E, $74, $2E, $20, $28, $42  ; 07:BDE1
.db $41, $4E, $4B, $30, $2D, $34, $29, $A2, $53, $4F, $4E, $49, $43, $20, $54, $48  ; 07:BDF1
.db $45, $20, $48, $45, $44, $47, $45, $48, $4F, $47, $A3, $20, $4D, $61, $73, $74  ; 07:BE01
.db $65, $72, $20, $53, $79, $73, $74, $65, $6D, $20, $26, $20, $47, $61, $6D, $65  ; 07:BE11
.db $20, $47, $65, $61, $72, $20, $56, $65, $72, $73, $69, $6F, $6E, $2E, $20, $20  ; 07:BE21
.db $27, $31, $39, $39, $31, $20, $28, $43, $29, $41, $6E, $63, $69, $65, $6E, $74  ; 07:BE31
.db $2E, $20, $28, $42, $41, $4E, $4B, $30, $2D, $34, $29, $A2, $53, $4F, $4E, $49  ; 07:BE41
.db $43, $20, $54, $48, $45, $20, $48, $45, $44, $47, $45, $48, $4F, $47, $A3, $20  ; 07:BE51
.db $4D, $61, $73, $74, $65, $72, $20, $53, $79, $73, $74, $65, $6D, $20, $26, $20  ; 07:BE61
.db $47, $61, $6D, $65, $20, $47, $65, $61, $72, $20, $56, $65, $72, $73, $69, $6F  ; 07:BE71
.db $6E, $2E, $20, $20, $27, $31, $39, $39, $31, $20, $28, $43, $29, $41, $6E, $63  ; 07:BE81
.db $69, $65, $6E, $74, $2E, $20, $28, $42, $41, $4E, $4B, $30, $2D, $34, $29, $A2  ; 07:BE91
.db $53, $4F, $4E, $49, $43, $20, $54, $48, $45, $20, $48, $45, $44, $47, $45, $48  ; 07:BEA1
.db $4F, $47, $A3, $20, $4D, $61, $73, $74, $65, $72, $20, $53, $79, $73, $74, $65  ; 07:BEB1
.db $6D, $20, $26, $20, $47, $61, $6D, $65, $20, $47, $65, $61, $72, $20, $56, $65  ; 07:BEC1
.db $72, $73, $69, $6F, $6E, $2E, $20, $20, $27, $31, $39, $39, $31, $20, $28, $43  ; 07:BED1
.db $29, $41, $6E, $63, $69, $65, $6E, $74, $2E, $20, $28, $42, $41, $4E, $4B, $30  ; 07:BEE1
.db $2D, $34, $29, $A2, $53, $4F, $4E, $49, $43, $20, $54, $48, $45, $20, $48, $45  ; 07:BEF1
.db $44, $47, $45, $48, $4F, $47, $A3, $20, $4D, $61, $73, $74, $65, $72, $20, $53  ; 07:BF01
.db $79, $73, $74, $65, $6D, $20, $26, $20, $47, $61, $6D, $65, $20, $47, $65, $61  ; 07:BF11
.db $72, $20, $56, $65, $72, $73, $69, $6F, $6E, $2E, $20, $20, $27, $31, $39, $39  ; 07:BF21
.db $31, $20, $28, $43, $29, $41, $6E, $63, $69, $65, $6E, $74, $2E, $20, $28, $42  ; 07:BF31
.db $41, $4E, $4B, $30, $2D, $34, $29, $A2, $53, $4F, $4E, $49, $43, $20, $54, $48  ; 07:BF41
.db $45, $20, $48, $45, $44, $47, $45, $48, $4F, $47, $A3, $20, $4D, $61, $73, $74  ; 07:BF51
.db $65, $72, $20, $53, $79, $73, $74, $65, $6D, $20, $26, $20, $47, $61, $6D, $65  ; 07:BF61
.db $20, $47, $65, $61, $72, $20, $56, $65, $72, $73, $69, $6F, $6E, $2E, $20, $20  ; 07:BF71
.db $27, $31, $39, $39, $31, $20, $28, $43, $29, $41, $6E, $63, $69, $65, $6E, $74  ; 07:BF81
.db $2E, $20, $28, $42, $41, $4E, $4B, $30, $2D, $34, $29, $A2, $53, $4F, $4E, $49  ; 07:BF91
.db $43, $20, $54, $48, $45, $20, $48, $45, $44, $47, $45, $48, $4F, $47, $A3, $20  ; 07:BFA1
.db $4D, $61, $73, $74, $65, $72, $20, $53, $79, $73, $74, $65, $6D, $20, $26, $20  ; 07:BFB1
.db $47, $61, $6D, $65, $20, $47, $65, $61, $72, $20, $56, $65, $72, $73, $69, $6F  ; 07:BFC1
.db $6E, $2E, $20, $20, $27, $31, $39, $39, $31, $20, $28, $43, $29, $41, $6E, $63  ; 07:BFD1
.db $69, $65, $6E, $74, $2E, $20, $28, $42, $41, $4E, $4B, $30, $2D, $34, $29, $A2  ; 07:BFE1
.db $53, $4F, $4E, $49, $43, $20, $54, $48, $45, $20, $48, $45, $44, $47, $45       ; 07:BFF1
.ENDIF
.ENDS

.IF !shrink_sonicuncart_interleave
;;
;; Original data
;;
.SECTION "Bank08" SLOT 1 BANK $08 FORCE ORG $0000

SONICUNCART_R_00_UNKNOWN:
.INCBIN "src/data/sonic_00_r.sonicuncart"

SONICUNCART_R_01_UNKNOWN:
.INCBIN "src/data/sonic_01_r.sonicuncart"

SONICUNCART_R_02_UNKNOWN:
.INCBIN "src/data/sonic_02_r.sonicuncart"

SONICUNCART_R_03_UNKNOWN:
.INCBIN "src/data/sonic_03_r.sonicuncart"

SONICUNCART_R_04_UNKNOWN:
.INCBIN "src/data/sonic_04_r.sonicuncart"

SONICUNCART_R_05_UNKNOWN:
.INCBIN "src/data/sonic_05_r.sonicuncart"

SONICUNCART_R_06_UNKNOWN:
.INCBIN "src/data/sonic_06_r.sonicuncart"

SONICUNCART_R_07_UNKNOWN:
.INCBIN "src/data/sonic_07_r.sonicuncart"

SONICUNCART_R_08_UNKNOWN:
.INCBIN "src/data/sonic_08_r.sonicuncart"

SONICUNCART_R_09_UNKNOWN:
.INCBIN "src/data/sonic_09_r.sonicuncart"

SONICUNCART_R_0A_UNKNOWN:
.INCBIN "src/data/sonic_0A_r.sonicuncart"

SONICUNCART_R_0B_UNKNOWN:
.INCBIN "src/data/sonic_0B_r.sonicuncart"

SONICUNCART_R_0C_UNKNOWN:
.INCBIN "src/data/sonic_0C_r.sonicuncart"

SONICUNCART_R_0D_UNKNOWN:
.INCBIN "src/data/sonic_0D_r.sonicuncart"

SONICUNCART_R_0E_UNKNOWN:
.INCBIN "src/data/sonic_0E_r.sonicuncart"

SONICUNCART_R_0F_UNKNOWN:
.INCBIN "src/data/sonic_0F_r.sonicuncart"

SONICUNCART_R_10_UNKNOWN:
.INCBIN "src/data/sonic_10_r.sonicuncart"

SONICUNCART_R_11_UNKNOWN:
.INCBIN "src/data/sonic_11_r.sonicuncart"

SONICUNCART_R_12_UNKNOWN:
.INCBIN "src/data/sonic_12_r.sonicuncart"

SONICUNCART_R_13_UNKNOWN:
.INCBIN "src/data/sonic_13_r.sonicuncart"

SONICUNCART_R_14_UNKNOWN:
.INCBIN "src/data/sonic_14_r.sonicuncart"

SONICUNCART_R_15_UNKNOWN:
.INCBIN "src/data/sonic_15_r.sonicuncart"

SONICUNCART_R_16_UNKNOWN:
.INCBIN "src/data/sonic_16_r.sonicuncart"

SONICUNCART_R_17_UNKNOWN:
.INCBIN "src/data/sonic_17_r.sonicuncart"

SONICUNCART_R_18_UNKNOWN:
.INCBIN "src/data/sonic_18_r.sonicuncart"

SONICUNCART_R_19_UNKNOWN:
.INCBIN "src/data/sonic_19_r.sonicuncart"

SONICUNCART_R_1A_UNKNOWN:
.INCBIN "src/data/sonic_1A_r.sonicuncart"

SONICUNCART_R_1B_UNKNOWN:
.INCBIN "src/data/sonic_1B_r.sonicuncart"

SONICUNCART_R_1C_UNKNOWN:
.INCBIN "src/data/sonic_1C_r.sonicuncart"

SONICUNCART_R_1D_UNKNOWN:
.INCBIN "src/data/sonic_1D_r.sonicuncart"

SONICUNCART_R_1E_UNKNOWN:
.INCBIN "src/data/sonic_1E_r.sonicuncart"

SONICUNCART_R_1F_UNKNOWN:
.INCBIN "src/data/sonic_1F_r.sonicuncart"

SONICUNCART_R_20_UNKNOWN:
.INCBIN "src/data/sonic_20_r.sonicuncart"

SONICUNCART_R_21_UNKNOWN:
.INCBIN "src/data/sonic_21_r.sonicuncart"

SONICUNCART_R_22_UNKNOWN:
.INCBIN "src/data/sonic_22_r.sonicuncart"

SONICUNCART_R_23_UNKNOWN:
.INCBIN "src/data/sonic_23_r.sonicuncart"

SONICUNCART_R_24_UNKNOWN:
.INCBIN "src/data/sonic_24_r.sonicuncart"

SONICUNCART_R_25_UNKNOWN:
.INCBIN "src/data/sonic_25_r.sonicuncart"

SONICUNCART_R_26_UNKNOWN:
.INCBIN "src/data/sonic_26_r.sonicuncart"

SONICUNCART_R_27_UNKNOWN:
.INCBIN "src/data/sonic_27_r.sonicuncart"

SONICUNCART_R_28_UNKNOWN:
.INCBIN "src/data/sonic_28_r.sonicuncart"

SONICUNCART_R_29_UNKNOWN:
.INCBIN "src/data/sonic_29_r.sonicuncart"
.ENDS

.IF 0
.SECTION "Bank08_2F40_JUNK" SLOT 1 BANK $08 FORCE ORG $2F40
SONICUNCART_R_JUNK_12F40:
.db $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00  ; 08:6F40
.db $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00  ; 08:6F50
.db $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00  ; 08:6F60
.db $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00  ; 08:6F70
.db $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00  ; 08:6F80
.db $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00  ; 08:6F90
.db $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00  ; 08:6FA0
.db $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00  ; 08:6FB0
.db $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00  ; 08:6FC0
.db $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00  ; 08:6FD0
.db $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00  ; 08:6FE0
.db $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00  ; 08:6FF0
.ENDS
.ENDIF

.SECTION "Bank08_3000" SLOT 1 BANK $08 FORCE ORG $3000
SONICUNCART_L_00_UNKNOWN:
.INCBIN "src/data/sonic_00_l.sonicuncart"

SONICUNCART_L_01_UNKNOWN:
.INCBIN "src/data/sonic_01_l.sonicuncart"

SONICUNCART_L_02_UNKNOWN:
.INCBIN "src/data/sonic_02_l.sonicuncart"

SONICUNCART_L_03_UNKNOWN:
.INCBIN "src/data/sonic_03_l.sonicuncart"

SONICUNCART_L_04_UNKNOWN:
.INCBIN "src/data/sonic_04_l.sonicuncart"

SONICUNCART_L_05_UNKNOWN:
.INCBIN "src/data/sonic_05_l.sonicuncart"

SONICUNCART_L_06_UNKNOWN:
.INCBIN "src/data/sonic_06_l.sonicuncart"

SONICUNCART_L_07_UNKNOWN:
.INCBIN "src/data/sonic_07_l.sonicuncart"

SONICUNCART_L_08_UNKNOWN:
.INCBIN "src/data/sonic_08_l.sonicuncart"

SONICUNCART_L_09_UNKNOWN:
.INCBIN "src/data/sonic_09_l.sonicuncart"

SONICUNCART_L_0A_UNKNOWN:
.INCBIN "src/data/sonic_0A_l.sonicuncart"

SONICUNCART_L_0B_UNKNOWN:
.INCBIN "src/data/sonic_0B_l.sonicuncart"

SONICUNCART_L_0C_UNKNOWN:
.INCBIN "src/data/sonic_0C_l.sonicuncart"

SONICUNCART_L_0D_UNKNOWN:
.INCBIN "src/data/sonic_0D_l.sonicuncart"

SONICUNCART_L_0E_UNKNOWN:
.INCBIN "src/data/sonic_0E_l.sonicuncart" READ $00040
.ENDS

.SECTION "Bank09" SLOT 2 BANK $09 FORCE ORG $0000
.INCBIN "src/data/sonic_0E_l.sonicuncart" SKIP $00040

SONICUNCART_L_0F_UNKNOWN:
.INCBIN "src/data/sonic_0F_l.sonicuncart"

SONICUNCART_L_10_UNKNOWN:
.INCBIN "src/data/sonic_10_l.sonicuncart"

SONICUNCART_L_11_UNKNOWN:
.INCBIN "src/data/sonic_11_l.sonicuncart"

SONICUNCART_L_12_UNKNOWN:
.INCBIN "src/data/sonic_12_l.sonicuncart"

SONICUNCART_L_13_UNKNOWN:
.INCBIN "src/data/sonic_13_l.sonicuncart"

SONICUNCART_L_14_UNKNOWN:
.INCBIN "src/data/sonic_14_l.sonicuncart"

SONICUNCART_L_15_UNKNOWN:
.INCBIN "src/data/sonic_15_l.sonicuncart"

SONICUNCART_L_16_UNKNOWN:
.INCBIN "src/data/sonic_16_l.sonicuncart"

SONICUNCART_L_17_UNKNOWN:
.INCBIN "src/data/sonic_17_l.sonicuncart"

SONICUNCART_L_18_UNKNOWN:
.INCBIN "src/data/sonic_18_l.sonicuncart"

SONICUNCART_L_19_UNKNOWN:
.INCBIN "src/data/sonic_19_l.sonicuncart"

SONICUNCART_L_1A_UNKNOWN:
.INCBIN "src/data/sonic_1A_l.sonicuncart"

SONICUNCART_L_1B_UNKNOWN:
.INCBIN "src/data/sonic_1B_l.sonicuncart"

SONICUNCART_L_1C_UNKNOWN:
.INCBIN "src/data/sonic_1C_l.sonicuncart"

SONICUNCART_L_1D_UNKNOWN:
.INCBIN "src/data/sonic_1D_l.sonicuncart"

SONICUNCART_L_1E_UNKNOWN:
.INCBIN "src/data/sonic_1E_l.sonicuncart"

SONICUNCART_L_1F_UNKNOWN:
.INCBIN "src/data/sonic_1F_l.sonicuncart"

SONICUNCART_L_20_UNKNOWN:
.INCBIN "src/data/sonic_20_l.sonicuncart"

SONICUNCART_L_21_UNKNOWN:
.INCBIN "src/data/sonic_21_l.sonicuncart"

SONICUNCART_L_22_UNKNOWN:
.INCBIN "src/data/sonic_22_l.sonicuncart"

SONICUNCART_L_23_UNKNOWN:
.INCBIN "src/data/sonic_23_l.sonicuncart"

SONICUNCART_L_24_UNKNOWN:
.INCBIN "src/data/sonic_24_l.sonicuncart"

SONICUNCART_L_25_UNKNOWN:
.INCBIN "src/data/sonic_25_l.sonicuncart"

SONICUNCART_L_26_UNKNOWN:
.INCBIN "src/data/sonic_26_l.sonicuncart"

SONICUNCART_L_27_UNKNOWN:
.INCBIN "src/data/sonic_27_l.sonicuncart"

SONICUNCART_L_28_UNKNOWN:
.INCBIN "src/data/sonic_28_l.sonicuncart"

SONICUNCART_L_29_UNKNOWN:
.INCBIN "src/data/sonic_29_l.sonicuncart"
.ENDS

.IF 0
.SECTION "Bank09_1F40_JUNK" SLOT 2 BANK $09 FORCE ORG $1F40
SONICUNCART_R_JUNK_15F40:
.db $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00  ; 09:9F40
.db $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00  ; 09:9F50
.db $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00  ; 09:9F60
.db $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00  ; 09:9F70
.db $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00  ; 09:9F80
.db $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00  ; 09:9F90
.db $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00  ; 09:9FA0
.db $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00  ; 09:9FB0
.db $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00  ; 09:9FC0
.db $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00  ; 09:9FD0
.db $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00  ; 09:9FE0
.db $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00  ; 09:9FF0
.ENDS
.ENDIF

.ELSE
;;
;; Use interleaved left/right rows of Sonic
;; FIXME: Both directions are not actually identical! --GM
;; e.g. Sonic rolling in a ball always has the shiny highlight on the right side.
;;
.MACRO INTERLEAVED_SONIC_ART_R ARGS fname
   .FOPEN fname fp
   .REPEAT 2 INDEX ty
      .REPEAT 3 INDEX tx
         .REPEAT 8 INDEX y
            ;; Normal
            .REPEAT 3
               .FREAD fp v
               .DB v
            .ENDR
            ;; Horizontally flipped
            .REPEAT 3
               .FREAD fp v
               .REDEF v ((v>>4)&$0F)|((v&$0F)<<4)
               .REDEF v ((v>>2)&$33)|((v&$33)<<2)
               .REDEF v ((v>>1)&$55)|((v&$55)<<1)
               .DB v
            .ENDR
         .ENDR
      .ENDR
   .ENDR
   .UNDEF v
.ENDM

.MACRO INTERLEAVED_SONIC_ART_L ARGS fname
   .FOPEN fname fp
   .REPEAT 2 INDEX ty
      .REPEAT 3 INDEX tx
         .FSEEK fp (16*3)*((2-tx)+(ty*3)) START
         .REPEAT 8 INDEX y
            ;; Horizontally flipped
            .REPEAT 3
               .FREAD fp v
               .REDEF v ((v>>4)&$0F)|((v&$0F)<<4)
               .REDEF v ((v>>2)&$33)|((v&$33)<<2)
               .REDEF v ((v>>1)&$55)|((v&$55)<<1)
               .DB v
            .ENDR
            ;; Normal
            .REPEAT 3
               .FREAD fp v
               .DB v
            .ENDR
         .ENDR
      .ENDR
   .ENDR
   .UNDEF v
.ENDM

.MACRO INTERLEAVED_SONIC_ART_L_NOSWAP ARGS fname
   .FOPEN fname fp
   .REPEAT 2 INDEX ty
      .REPEAT 3 INDEX tx
         ;.FSEEK fp (16*3)*((2-tx)+(ty*3)) START
         .REPEAT 8 INDEX y
            ;; Horizontally flipped
            .REPEAT 3
               .FREAD fp v
               .REDEF v ((v>>4)&$0F)|((v&$0F)<<4)
               .REDEF v ((v>>2)&$33)|((v&$33)<<2)
               .REDEF v ((v>>1)&$55)|((v&$55)<<1)
               .DB v
            .ENDR
            ;; Normal
            .REPEAT 3
               .FREAD fp v
               .DB v
            .ENDR
         .ENDR
      .ENDR
   .ENDR
   .UNDEF v
.ENDM

;; Flip-table
.SECTION "Bank08" SLOT 1 BANK $08 FORCE ORG $0000 ALIGN $0100
sprite_hflip_table:
   .REPEAT $100 INDEX i
      .DEF v i
      .REDEF v ((v>>4)&$0F)|((v&$0F)<<4)
      .REDEF v ((v>>2)&$33)|((v&$33)<<2)
      .REDEF v ((v>>1)&$55)|((v&$55)<<1)
      .DB v
      .UNDEF v
   .ENDR
.ENDS

.SECTION "Bank08_0100" SLOT 1 BANK $08 FORCE ORG $0100
sonic_art:
INTERLEAVED_SONIC_ART_R "src/data/sonic_00_r.sonicuncart"
INTERLEAVED_SONIC_ART_R "src/data/sonic_01_r.sonicuncart"
INTERLEAVED_SONIC_ART_R "src/data/sonic_02_r.sonicuncart"
INTERLEAVED_SONIC_ART_R "src/data/sonic_03_r.sonicuncart"
INTERLEAVED_SONIC_ART_R "src/data/sonic_04_r.sonicuncart"
INTERLEAVED_SONIC_ART_R "src/data/sonic_05_r.sonicuncart"
INTERLEAVED_SONIC_ART_R "src/data/sonic_06_r.sonicuncart"
INTERLEAVED_SONIC_ART_R "src/data/sonic_07_r.sonicuncart"
INTERLEAVED_SONIC_ART_R "src/data/sonic_08_r.sonicuncart"
INTERLEAVED_SONIC_ART_R "src/data/sonic_09_r.sonicuncart"
INTERLEAVED_SONIC_ART_R "src/data/sonic_0A_r.sonicuncart"
INTERLEAVED_SONIC_ART_R "src/data/sonic_0B_r.sonicuncart"
INTERLEAVED_SONIC_ART_R "src/data/sonic_0C_r.sonicuncart"
INTERLEAVED_SONIC_ART_R "src/data/sonic_0D_r.sonicuncart"
INTERLEAVED_SONIC_ART_R "src/data/sonic_0E_r.sonicuncart"
INTERLEAVED_SONIC_ART_R "src/data/sonic_0F_r.sonicuncart"
INTERLEAVED_SONIC_ART_R "src/data/sonic_10_r.sonicuncart"
INTERLEAVED_SONIC_ART_R "src/data/sonic_11_r.sonicuncart"
INTERLEAVED_SONIC_ART_R "src/data/sonic_12_r.sonicuncart"
INTERLEAVED_SONIC_ART_R "src/data/sonic_13_r.sonicuncart"
INTERLEAVED_SONIC_ART_R "src/data/sonic_14_r.sonicuncart"
INTERLEAVED_SONIC_ART_R "src/data/sonic_15_r.sonicuncart"
INTERLEAVED_SONIC_ART_R "src/data/sonic_16_r.sonicuncart"
INTERLEAVED_SONIC_ART_R "src/data/sonic_17_r.sonicuncart"
INTERLEAVED_SONIC_ART_R "src/data/sonic_18_r.sonicuncart"
;; $19 animation
INTERLEAVED_SONIC_ART_R "src/data/sonic_19_r.sonicuncart"
INTERLEAVED_SONIC_ART_R "src/data/sonic_1A_r.sonicuncart"
INTERLEAVED_SONIC_ART_R "src/data/sonic_1B_r.sonicuncart"
INTERLEAVED_SONIC_ART_R "src/data/sonic_1C_r.sonicuncart"
INTERLEAVED_SONIC_ART_R "src/data/sonic_1D_r.sonicuncart"
INTERLEAVED_SONIC_ART_R "src/data/sonic_1E_r.sonicuncart"
INTERLEAVED_SONIC_ART_R "src/data/sonic_1F_r.sonicuncart"
INTERLEAVED_SONIC_ART_R "src/data/sonic_20_r.sonicuncart"
INTERLEAVED_SONIC_ART_R "src/data/sonic_21_r.sonicuncart"
;; $22 normal
INTERLEAVED_SONIC_ART_R "src/data/sonic_22_r.sonicuncart"
INTERLEAVED_SONIC_ART_R "src/data/sonic_23_r.sonicuncart"
INTERLEAVED_SONIC_ART_R "src/data/sonic_24_r.sonicuncart"
INTERLEAVED_SONIC_ART_R "src/data/sonic_25_r.sonicuncart"
INTERLEAVED_SONIC_ART_R "src/data/sonic_26_r.sonicuncart"
;; These 3 are unused
;INTERLEAVED_SONIC_ART_R "src/data/sonic_27_r.sonicuncart"
;INTERLEAVED_SONIC_ART_R "src/data/sonic_28_r.sonicuncart"
;INTERLEAVED_SONIC_ART_R "src/data/sonic_29_r.sonicuncart"
;; $27 remap of otherwise-$19-through-$1D-inclusive left flips
INTERLEAVED_SONIC_ART_L "src/data/sonic_19_l.sonicuncart"
INTERLEAVED_SONIC_ART_L "src/data/sonic_1A_l.sonicuncart"
INTERLEAVED_SONIC_ART_L "src/data/sonic_1B_l.sonicuncart"
INTERLEAVED_SONIC_ART_L_NOSWAP "src/data/sonic_1C_l.sonicuncart"
INTERLEAVED_SONIC_ART_L_NOSWAP "src/data/sonic_1D_l.sonicuncart"
.ENDS

.ENDIF

.SECTION "Bank09_2000" SLOT 0 BANK $09 FORCE ORG $2000
ART_09_2000:
.INCBIN "src/data/title_screen.art0000"

ART_09_351F:
.INCBIN "src/data/score_tally_game_over.art0000" READ $00AE1
.ENDS

.SECTION "Bank0A" SLOT 1 BANK $0A FORCE ORG $0000
.INCBIN "src/data/score_tally_game_over.art0000" SKIP $00AE1

ART_09_4294:
.INCBIN "src/data/signpost.art2000"

ART_09_4B0A:
.INCBIN "src/data/title_screen_credits.art2000"

ART_09_526B:
.INCBIN "src/data/world_map_1.art2000"

ART_09_5942:
.INCBIN "src/data/world_map_2.art2000"

ART_09_612A:
.INCBIN "src/data/lv_ghz.art2000"

ART_09_6C3D:
.INCBIN "src/data/lv_bri.art2000"

ART_09_77CD:
.INCBIN "src/data/lv_jun.art2000" READ $00833
.ENDS

.SECTION "Bank0B" SLOT 2 BANK $0B FORCE ORG $0000
.INCBIN "src/data/lv_jun.art2000" SKIP $00833

ART_09_83B6:
.INCBIN "src/data/lv_lab.art2000"

ART_09_8F75:
.INCBIN "src/data/lv_scr.art2000"

ART_09_99E0:
.INCBIN "src/data/lv_sky.art2000"

ART_09_A511:
.INCBIN "src/data/lv_special.art2000"

ART_09_AEB1:
.INCBIN "src/data/boss_1.art2000"

ART_09_B92E:
.INCBIN "src/data/common_level_art.art3000"

ring_art_0B:
.INCBIN "src/data/ringart_00.ringart"
.INCBIN "src/data/ringart_01.ringart"
.INCBIN "src/data/ringart_02.ringart"
.INCBIN "src/data/ringart_03.ringart"
.INCBIN "src/data/ringart_04.ringart"
.INCBIN "src/data/ringart_05.ringart"

BANK0B_JUNK_END_BFF0:
.IF 0
.db $65, $6E, $74, $2E, $20, $28, $42, $41, $4E, $4B, $38, $2D, $31, $31, $29, $A2  ; 0B:BFF0
.ENDIF
.ENDS

.SECTION "Bank0C" SLOT 0 BANK $0C FORCE ORG $0000

ART_0C_0000:
.INCBIN "src/data/world_map_1_ending.art0000"

ART_0C_1801:
.INCBIN "src/data/world_map_2_credits.art0000"

ART_0C_2FE6:
.INCBIN "src/data/lv_ghz.art0000" READ $0101A
.ENDS

.SECTION "Bank0D" SLOT 1 BANK $0D FORCE ORG $0000
.INCBIN "src/data/lv_ghz.art0000" SKIP $0101A

ART_0C_4578:
.INCBIN "src/data/lv_bri.art0000"

ART_0C_5B00:
.INCBIN "src/data/lv_jun.art0000"

ART_0C_71BF:
.INCBIN "src/data/lv_lab.art0000" READ $00E41
.ENDS

.SECTION "Bank0E" SLOT 2 BANK $0E FORCE ORG $0000
.INCBIN "src/data/lv_lab.art0000" SKIP $00E41

ART_0C_884B:
.INCBIN "src/data/lv_scr.art0000"

ART_0C_9CEE:
.INCBIN "src/data/lv_sky.art0000"

ART_0C_B3B5:
.INCBIN "src/data/lv_sky_3.art0000" READ $00C4B
.ENDS

.SECTION "Bank0F" SLOT 3 BANK $0F FORCE ORG $0000
.INCBIN "src/data/lv_sky_3.art0000" SKIP $00C4B

ART_0C_C7FE:
.INCBIN "src/data/lv_special.art0000"

ART_0C_DA28:
.INCBIN "src/data/animal_capsule_and_friends.art2000"

ART_0C_E508:
.INCBIN "src/data/boss_2.art2000"

ART_0C_EF3F:
.INCBIN "src/data/boss_3.art2000"

level_specials_rel:
.dw $0010, $00C4, $0154, $01F4, $02B4, $0374, $044C, $04CC                          ; 0F:B9ED

LVTILESPECIALS_GHZ:
.INCBIN "src/data/lv_ghz.tilespecials"

LVTILESPECIALS_BRI:
.INCBIN "src/data/lv_bri.tilespecials"

LVTILESPECIALS_JUN:
.INCBIN "src/data/lv_jun.tilespecials"

LVTILESPECIALS_LAB:
.INCBIN "src/data/lv_lab.tilespecials"

LVTILESPECIALS_SCR:
.INCBIN "src/data/lv_scr.tilespecials"

LVTILESPECIALS_SKY:
.INCBIN "src/data/lv_sky.tilespecials"

LVTILESPECIALS_special:
.INCBIN "src/data/lv_special.tilespecials"

LVTILESPECIALS_SKY_3:
.INCBIN "src/data/lv_sky_3.tilespecials"

BANK0F_JUNK_END_FF21:
.IF 0
.db $6D, $65, $20, $47, $65, $61, $72, $20, $56, $65, $72, $73, $69, $6F, $6E, $2E  ; 0F:BF21
.db $20, $20, $27, $31, $39, $39, $31, $20, $28, $43, $29, $41, $6E, $63, $69, $65  ; 0F:BF31
.db $6E, $74, $2E, $20, $28, $42, $41, $4E, $4B, $31, $32, $2D, $31, $35, $29, $A2  ; 0F:BF41
.db $53, $4F, $4E, $49, $43, $20, $54, $48, $45, $20, $48, $45, $44, $47, $45, $48  ; 0F:BF51
.db $4F, $47, $A3, $20, $4D, $61, $73, $74, $65, $72, $20, $53, $79, $73, $74, $65  ; 0F:BF61
.db $6D, $20, $26, $20, $47, $61, $6D, $65, $20, $47, $65, $61, $72, $20, $56, $65  ; 0F:BF71
.db $72, $73, $69, $6F, $6E, $2E, $20, $20, $27, $31, $39, $39, $31, $20, $28, $43  ; 0F:BF81
.db $29, $41, $6E, $63, $69, $65, $6E, $74, $2E, $20, $28, $42, $41, $4E, $4B, $31  ; 0F:BF91
.db $32, $2D, $31, $35, $29, $A2, $53, $4F, $4E, $49, $43, $20, $54, $48, $45, $20  ; 0F:BFA1
.db $48, $45, $44, $47, $45, $48, $4F, $47, $A3, $20, $4D, $61, $73, $74, $65, $72  ; 0F:BFB1
.db $20, $53, $79, $73, $74, $65, $6D, $20, $26, $20, $47, $61, $6D, $65, $20, $47  ; 0F:BFC1
.db $65, $61, $72, $20, $56, $65, $72, $73, $69, $6F, $6E, $2E, $20, $20, $27, $31  ; 0F:BFD1
.db $39, $39, $31, $20, $28, $43, $29, $41, $6E, $63, $69, $65, $6E, $74, $2E, $20  ; 0F:BFE1
.db $28, $42, $41, $4E, $4B, $31, $32, $2D, $31, $35, $29, $A2, $53, $4F, $4E       ; 0F:BFF1
.ENDIF
.ENDS
